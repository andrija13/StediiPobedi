function quillVideoAspectRatio(){$("iframe.ql-video").each(function(){$(this).height($(this).width()/1.7778)})}function sanitizeSlug(t){return t.replace(/[ČĆ]/g,"C").replace(/[čć]/g,"c").replace(/[Đ]/g,"Dj").replace(/[đ]/g,"dj").replace(/[Š]/g,"S").replace(/[š]/g,"s").replace(/[Ž]/g,"Z").replace(/[ž]/g,"z").replace(/\W/g," ").replace(/\s+/g," ").trim().replace(/\s/g,"-").toLowerCase()}function removeInvalid(){$(".is-invalid").on("input change",function(){$this=$(this),$connectedField=$this.attr("data-connected-field"),$this.removeClass("is-invalid"),$this.hasClass("custom-control-input")&&$this.closest(".form-group").find(".is-invalid").each(function(){$this=$(this),$this.removeClass("is-invalid")}),$connectedField&&$($connectedField).hasClass("is-invalid")&&$($connectedField).removeClass("is-invalid")})}function groupAnswers(){$('[name^="answer"], [id^="corect-answer-"]').each(function(){$this=$(this),$this.on("input change",function(){$("#JSONanswers").val(function(){return $answers=[],$('input[name^="answer"]').each(function(t){$this=$(this),$trueSelector="#corect-answer-"+t,$answer={answer:$this.val(),description:$this.next().val(),correct:$($trueSelector).is(":checked")?1:0},$answers[t]=$answer}),$('textarea[name^="answer"]').each(function(t){$this=$(this),$trueSelector="#corect-answer-"+t,$answer={answer:$this.prev().val(),description:$this.val(),correct:$($trueSelector).is(":checked")?1:0},$answers[t]=$answer}),JSON.stringify($answers)})})})}!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Quill=e():t.Quill=e()}("undefined"!=typeof self?self:this,function(){return r={},i.m=n=[function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),r=n(18),o=n(19),s=n(45),a=n(46),l=n(47),u=n(48),c=n(49),h=n(12),d=n(32),f=n(33),p=n(31),n=n(1),p={Scope:n.Scope,create:n.create,find:n.find,query:n.query,register:n.register,Container:i.default,Format:r.default,Leaf:o.default,Embed:u.default,Scroll:s.default,Block:l.default,Inline:a.default,Text:c.default,Attributor:{Attribute:h.default,Class:d.default,Style:f.default,Store:p.default}};e.default=p},function(t,i,e){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(i,"__esModule",{value:!0});var o,s=(o=Error,n(a,o),a);function a(t){var e=this;return t="[Parchment] "+t,(e=o.call(this,t)||this).message=t,e.name=e.constructor.name,e}i.ParchmentError=s;var l,u={},c={},h={},d={};function f(t,e){var n;if(void 0===e&&(e=l.ANY),"string"==typeof t)n=d[t]||u[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)n=d.text;else if("number"==typeof t)t&l.LEVEL&l.BLOCK?n=d.block:t&l.LEVEL&l.INLINE&&(n=d.inline);else if(t instanceof HTMLElement){var i,r=(t.getAttribute("class")||"").split(/\s+/);for(i in r)if(n=c[r[i]])break;n=n||h[t.tagName]}return null!=n&&e&l.LEVEL&n.scope&&e&l.TYPE&n.scope?n:null}i.DATA_KEY="__blot",(n=l=i.Scope||(i.Scope={}))[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",i.create=function(t,e){var n=f(t);if(null==n)throw new s("Unable to create "+t+" blot");return t=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:n.create(e),new n(t,e)},i.find=function t(e,n){return void 0===n&&(n=!1),null==e?null:null!=e[i.DATA_KEY]?e[i.DATA_KEY].blot:n?t(e.parentNode,n):null},i.query=f,i.register=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(1<t.length)return t.map(function(t){return e(t)});var i=t[0];if("string"!=typeof i.blotName&&"string"!=typeof i.attrName)throw new s("Invalid definition");if("abstract"===i.blotName)throw new s("Cannot register abstract class");return"string"==typeof(d[i.blotName||i.attrName]=i).keyName?u[i.keyName]=i:(null!=i.className&&(c[i.className]=i),null!=i.tagName&&(Array.isArray(i.tagName)?i.tagName=i.tagName.map(function(t){return t.toUpperCase()}):i.tagName=i.tagName.toUpperCase(),(Array.isArray(i.tagName)?i.tagName:[i.tagName]).forEach(function(t){null!=h[t]&&null!=i.className||(h[t]=i)}))),i}},function(t,e,n){function l(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}var u=n(51),c=n(11),i=n(3),h=n(20),r=String.fromCharCode(0);l.prototype.insert=function(t,e){var n={};return 0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&0<Object.keys(e).length&&(n.attributes=e),this.push(n))},l.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},l.prototype.retain=function(t,e){if(t<=0)return this;t={retain:t};return null!=e&&"object"==typeof e&&0<Object.keys(e).length&&(t.attributes=e),this.push(t)},l.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=i(!0,{},t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(--e,"object"!=typeof(n=this.ops[e-1])))return this.ops.unshift(t),this;if(c(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(e){var n=[],i=[];return this.forEach(function(t){(e(t)?n:i).push(t)}),[n,i]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce(function(t,e){return e.insert?t+h.length(e):e.delete?t-e.delete:t},0)},l.prototype.length=function(){return this.reduce(function(t,e){return t+h.length(e)},0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var n,i=[],r=h.iterator(this.ops),o=0;o<e&&r.hasNext();)o<t?n=r.next(t-o):(n=r.next(e-o),i.push(n)),o+=h.length(n);return new l(i)},l.prototype.compose=function(t){for(var e,n,i,r,o=h.iterator(this.ops),s=h.iterator(t.ops),a=new l;o.hasNext()||s.hasNext();)"insert"===s.peekType()?a.push(s.next()):"delete"===o.peekType()?a.push(o.next()):(r=Math.min(o.peekLength(),s.peekLength()),e=o.next(r),"number"==typeof(n=s.next(r)).retain?(i={},"number"==typeof e.retain?i.retain=r:i.insert=e.insert,(r=h.attributes.compose(e.attributes,n.attributes,"number"==typeof e.retain))&&(i.attributes=r),a.push(i)):"number"==typeof n.delete&&"number"==typeof e.retain&&a.push(n));return a.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return 0<t.ops.length&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(n,t){if(this.ops===n.ops)return new l;var e=[this,n].map(function(e){return e.map(function(t){if(null!=t.insert)return"string"==typeof t.insert?t.insert:r;throw new Error("diff() called "+(e===n?"on":"with")+" non-document")}).join("")}),o=new l,t=u(e[0],e[1],t),s=h.iterator(this.ops),a=h.iterator(n.ops);return t.forEach(function(t){for(var e=t[1].length;0<e;){var n=0;switch(t[0]){case u.INSERT:n=Math.min(a.peekLength(),e),o.push(a.next(n));break;case u.DELETE:n=Math.min(e,s.peekLength()),s.next(n),o.delete(n);break;case u.EQUAL:n=Math.min(s.peekLength(),a.peekLength(),e);var i=s.next(n),r=a.next(n);c(i.insert,r.insert)?o.retain(n,h.attributes.diff(i.attributes,r.attributes)):o.push(r).delete(n)}e-=n}}),o.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var n=h.iterator(this.ops),i=new l,r=0;n.hasNext();){if("insert"!==n.peekType())return;var o=n.peek(),s=h.length(o)-n.peekLength(),s="string"==typeof o.insert?o.insert.indexOf(e,s)-s:-1;if(s<0)i.push(n.next());else if(0<s)i.push(n.next(s));else{if(!1===t(i,n.next(1).attributes||{},r))return;r+=1,i=new l}}0<i.length()&&t(i,{},r)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n,i,r,o=h.iterator(this.ops),s=h.iterator(t.ops),a=new l;o.hasNext()||s.hasNext();)"insert"!==o.peekType()||!e&&"insert"===s.peekType()?"insert"===s.peekType()?a.push(s.next()):(n=Math.min(o.peekLength(),s.peekLength()),i=o.next(n),r=s.next(n),i.delete||(r.delete?a.push(r):a.retain(n,h.attributes.transform(i.attributes,r.attributes,e)))):a.retain(h.length(o.next()));return a.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var n=h.iterator(this.ops),i=0;n.hasNext()&&i<=t;){var r=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(i<t||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t},t.exports=l},function(t,e){"use strict";function d(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===o.call(t)}function f(t){if(t&&"[object Object]"===o.call(t)){var e,n=r.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(!t.constructor||n||i){for(e in t);return void 0===e||r.call(t,e)}}}var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString;t.exports=function t(e,n){var i,r,o,s,a,l=e,u=1,c=arguments.length,h=!1;for("boolean"==typeof l&&(h=l,l=n||{},u=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});u<c;++u)if(null!=(i=arguments[u]))for(r in i)a=l[r],l!==(o=i[r])&&(h&&o&&(f(o)||(s=d(o)))?(a=s?(s=!1,a&&d(a)?a:[]):a&&f(a)?a:{},l[r]=t(h,a,o)):void 0!==o&&(l[r]=o));return l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BlockEmbed=e.bubbleFormats=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s=d(n(3)),a=d(n(2)),l=d(n(0)),u=d(n(16)),c=d(n(6)),h=d(n(7));function d(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}m(g,l.default.Embed),i(g,[{key:"attach",value:function(){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"attach",this).call(this),this.attributes=new l.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new a.default).insert(this.value(),(0,s.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){t=l.default.query(t,l.default.Scope.BLOCK_ATTRIBUTE);null!=t&&this.attributes.attribute(t,e)}},{key:"formatAt",value:function(t,e,n,i){this.format(n,i)}},{key:"insertAt",value:function(t,e,n){var i;"string"==typeof e&&e.endsWith("\n")?(i=l.default.create(y.blotName),this.parent.insertBefore(i,0===t?this:this.next),i.insertAt(0,e.slice(0,-1))):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertAt",this).call(this,t,e,n)}}]),n=g;function g(){return f(this,g),p(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}n.scope=l.default.Scope.BLOCK_BLOT;var y=(m(v,l.default.Block),i(v,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(l.default.Leaf).reduce(function(t,e){return 0===e.length()?t:t.insert(e.value(),b(e))},new a.default).insert("\n",b(this))),this.cache.delta}},{key:"deleteAt",value:function(t,e){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"deleteAt",this).call(this,t,e),this.cache={}}},{key:"formatAt",value:function(t,e,n,i){e<=0||(l.default.query(n,l.default.Scope.BLOCK)?t+e===this.length()&&this.format(n,i):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,t,Math.min(e,this.length()-t-1),n,i),this.cache={})}},{key:"insertAt",value:function(t,e,n){if(null!=n)return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertAt",this).call(this,t,e,n);var i;0!==e.length&&(0<(e=(n=e.split("\n")).shift()).length&&(t<this.length()-1||null==this.children.tail?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),e):this.children.tail.insertAt(this.children.tail.length(),e),this.cache={}),i=this,n.reduce(function(t,e){return(i=i.split(t,!0)).insertAt(0,e),e.length},t+e.length))}},{key:"insertBefore",value:function(t,e){var n=this.children.head;o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertBefore",this).call(this,t,e),n instanceof u.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,e){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"moveChildren",this).call(this,t,e),this.cache={}}},{key:"optimize",value:function(t){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e;if(n&&(0===t||t>=this.length()-1)){e=this.clone();return 0===t?(this.parent.insertBefore(e,this),this):(this.parent.insertBefore(e,this.next),e)}n=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"split",this).call(this,t,n);return this.cache={},n}}]),v);function v(t){f(this,v);t=p(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,t));return t.cache={},t}function b(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=(0,s.default)(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:b(t.parent,e))}y.blotName="block",y.tagName="P",y.defaultChild="break",y.allowedChildren=[c.default,l.default.Embed,h.default],e.bubbleFormats=b,e.BlockEmbed=n,e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.overload=e.expandConfig=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n(50);var l=y(n(2)),o=y(n(14)),u=y(n(8)),c=y(n(9)),h=y(n(0)),d=n(15),f=y(d),p=y(n(3)),m=y(n(10)),g=y(n(34));function y(t){return t&&t.__esModule?t:{default:t}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=(0,m.default)("quill"),_=(i(T,null,[{key:"debug",value:function(t){!0===t&&(t="log"),m.default.level(t)}},{key:"find",value:function(t){return t.__quill||h.default.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&b.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(e,n,t){var i=this,r=2<arguments.length&&void 0!==t&&t;"string"!=typeof e?"string"==typeof(t=e.attrName||e.blotName)?this.register("formats/"+t,e,n):Object.keys(e).forEach(function(t){i.register(t,e[t],n)}):(null==this.imports[e]||r||b.warn("Overwriting "+e+" with",n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==n.blotName?h.default.register(n):e.startsWith("modules")&&"function"==typeof n.register&&n.register())}}]),i(T,[{key:"addContainer",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:null;return"string"==typeof t&&(e=t,(t=document.createElement("div")).classList.add(e)),this.container.insertBefore(t,n),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,n){var i=this,r=k(t,e,n),r=a(r,4);return t=r[0],e=r[1],n=r[3],S.call(this,function(){return i.editor.deleteText(t,e)},n,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(t){t=!(0<arguments.length&&void 0!==t)||t;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(n,i,t){var r=this,t=2<arguments.length&&void 0!==t?t:u.default.sources.API;return S.call(this,function(){var t=r.getSelection(!0),e=new l.default;if(null==t)return e;if(h.default.query(n,h.default.Scope.BLOCK))e=r.editor.formatLine(t.index,t.length,v({},n,i));else{if(0===t.length)return r.selection.format(n,i),e;e=r.editor.formatText(t.index,t.length,v({},n,i))}return r.setSelection(t,u.default.sources.SILENT),e},t)}},{key:"formatLine",value:function(t,e,n,i,r){var o,s=this,i=k(t,e,n,i,r),i=a(i,4);return t=i[0],e=i[1],o=i[2],r=i[3],S.call(this,function(){return s.editor.formatLine(t,e,o)},r,t,0)}},{key:"formatText",value:function(t,e,n,i,r){var o,s=this,i=k(t,e,n,i,r),i=a(i,4);return t=i[0],e=i[1],o=i[2],r=i[3],S.call(this,function(){return s.editor.formatText(t,e,o)},r,t,0)}},{key:"getBounds",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:0,e=void 0,e="number"==typeof t?this.selection.getBounds(t,n):this.selection.getBounds(t.index,t.length),t=this.container.getBoundingClientRect();return{bottom:e.bottom-t.top,height:e.height,left:e.left-t.left,right:e.right-t.left,top:e.top-t.top,width:e.width}}},{key:"getContents",value:function(t,e){var e=k(n=0<arguments.length&&void 0!==t?t:0,t=1<arguments.length&&void 0!==e?e:this.getLength()-n),e=a(e,2),n=e[0],t=e[1];return this.editor.getContents(n,t)}},{key:"getFormat",value:function(t,e){t=0<arguments.length&&void 0!==t?t:this.getSelection(!0),e=1<arguments.length&&void 0!==e?e:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(t,e){t=0<arguments.length&&void 0!==t?t:0,e=1<arguments.length&&void 0!==e?e:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(t){return 0<arguments.length&&void 0!==t&&t&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(t,e){var e=k(n=0<arguments.length&&void 0!==t?t:0,t=1<arguments.length&&void 0!==e?e:this.getLength()-n),e=a(e,2),n=e[0],t=e[1];return this.editor.getText(n,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,e,n,i){var r=this,i=3<arguments.length&&void 0!==i?i:T.sources.API;return S.call(this,function(){return r.editor.insertEmbed(t,e,n)},i,t)}},{key:"insertText",value:function(t,e,n,i,r){var o,s=this,i=k(t,0,n,i,r),i=a(i,4);return t=i[0],o=i[2],r=i[3],S.call(this,function(){return s.editor.insertText(t,e,o)},r,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,n){this.clipboard.dangerouslyPasteHTML(t,e,n)}},{key:"removeFormat",value:function(t,e,n){var i=this,r=k(t,e,n),r=a(r,4);return t=r[0],e=r[1],n=r[3],S.call(this,function(){return i.editor.removeFormat(t,e)},n,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(i,t){var r=this,t=1<arguments.length&&void 0!==t?t:u.default.sources.API;return S.call(this,function(){i=new l.default(i);var t=r.getLength(),e=r.editor.deleteText(0,t),n=r.editor.applyDelta(i),t=n.ops[n.ops.length-1];return null!=t&&"string"==typeof t.insert&&"\n"===t.insert[t.insert.length-1]&&(r.editor.deleteText(r.getLength()-1,1),n.delete(1)),e.compose(n)},t)}},{key:"setSelection",value:function(t,e,n){var i;null==t?this.selection.setRange(null,e||T.sources.API):(i=k(t,e,n),t=(i=a(i,4))[0],e=i[1],n=i[3],this.selection.setRange(new d.Range(t,e),n),n!==u.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer))}},{key:"setText",value:function(t,e){e=1<arguments.length&&void 0!==e?e:u.default.sources.API,t=(new l.default).insert(t);return this.setContents(t,e)}},{key:"update",value:function(t){var e=0<arguments.length&&void 0!==t?t:u.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(t,e){var n=this,i=1<arguments.length&&void 0!==e?e:u.default.sources.API;return S.call(this,function(){return t=new l.default(t),n.editor.applyDelta(t,i)},i,!0)}}]),T);function T(t){var r=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!function(t){if(!(t instanceof T))throw new TypeError("Cannot call a class as a function")}(this),this.options=w(t,e),this.container=this.options.container,null==this.container)return b.error("Invalid Quill container",t);this.options.debug&&T.debug(this.options.debug);t=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",(this.container.__quill=this).root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new u.default,this.scroll=h.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new o.default(this.scroll),this.selection=new f.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(u.default.events.EDITOR_CHANGE,function(t){t===u.default.events.TEXT_CHANGE&&r.root.classList.toggle("ql-blank",r.editor.isBlank())}),this.emitter.on(u.default.events.SCROLL_UPDATE,function(t,e){var n=r.selection.lastRange,i=n&&0===n.length?n.index:void 0;S.call(r,function(){return r.editor.update(null,e,i)},t)});t=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+t+"<p><br></p></div>");this.setContents(t),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}function w(t,n){if((n=(0,p.default)(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},n)).theme&&n.theme!==_.DEFAULTS.theme){if(n.theme=_.import("themes/"+n.theme),null==n.theme)throw new Error("Invalid theme "+n.theme+". Did you register it?")}else n.theme=g.default;var e=(0,p.default)(!0,{},n.theme.DEFAULTS);[e,n].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){!0===e.modules[t]&&(e.modules[t]={})})});t=Object.keys(e.modules).concat(Object.keys(n.modules)).reduce(function(t,e){var n=_.import("modules/"+e);return null==n?b.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=n.DEFAULTS||{},t},{});return null!=n.modules&&n.modules.toolbar&&n.modules.toolbar.constructor!==Object&&(n.modules.toolbar={container:n.modules.toolbar}),n=(0,p.default)(!0,{},_.DEFAULTS,{modules:t},e,n),["bounds","container","scrollingContainer"].forEach(function(t){"string"==typeof n[t]&&(n[t]=document.querySelector(n[t]))}),n.modules=Object.keys(n.modules).reduce(function(t,e){return n.modules[e]&&(t[e]=n.modules[e]),t},{}),n}function S(t,e,n,i){if(this.options.strict&&!this.isEnabled()&&e===u.default.sources.USER)return new l.default;var r=null==n?null:this.getSelection(),o=this.editor.delta,t=t();return null!=r&&(!0===n&&(n=r.index),null==i?r=E(r,t,e):0!==i&&(r=E(r,n,i,e)),this.setSelection(r,u.default.sources.SILENT)),0<t.length()&&(r=[u.default.events.TEXT_CHANGE,t,o,e],(o=this.emitter).emit.apply(o,[u.default.events.EDITOR_CHANGE].concat(r)),e!==u.default.sources.SILENT&&(e=this.emitter).emit.apply(e,r)),t}function k(t,e,n,i,r){var o={};return"number"==typeof t.index&&"number"==typeof t.length?t=(e=("number"!=typeof e&&(r=i,i=n,n=e),t.length),t.index):"number"!=typeof e&&(r=i,i=n,n=e,e=0),"object"===(void 0===n?"undefined":s(n))?(o=n,r=i):"string"==typeof n&&(null!=i?o[n]=i:r=n),[t,e,o,r=r||u.default.sources.API]}function E(t,e,n,i){if(null==t)return null;var r,o=void 0,s=void 0;return s=e instanceof l.default?(r=[t.index,t.index+t.length].map(function(t){return e.transformPosition(t,i!==u.default.sources.USER)}),o=(r=a(r,2))[0],r[1]):(t=[t.index,t.index+t.length].map(function(t){return t<e||t===e&&i===u.default.sources.USER?t:0<=n?t+n:Math.max(e,t+n)}),o=(t=a(t,2))[0],t[1]),new d.Range(o,s-o)}_.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},_.events=u.default.events,_.sources=u.default.sources,_.version="1.3.6",_.imports={delta:l.default,parchment:h.default,"core/module":c.default,"core/theme":g.default},e.expandConfig=w,e.overload=k,e.default=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s=l(n(7)),a=l(n(0));function l(t){return t&&t.__esModule?t:{default:t}}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(u,a.default.Inline),i(u,[{key:"formatAt",value:function(t,e,n,i){var r;u.compare(this.statics.blotName,n)<0&&a.default.query(n,a.default.Scope.BLOT)?(r=this.isolate(t,e),i&&r.wrap(n,i)):o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"formatAt",this).call(this,t,e,n,i)}},{key:"optimize",value:function(t){o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"optimize",this).call(this,t),this.parent instanceof u&&0<u.compare(this.statics.blotName,this.parent.statics.blotName)&&(t=this.parent.isolate(this.offset(),this.length()),this.moveChildren(t),t.wrap(this))}}],[{key:"compare",value:function(t,e){var n=u.order.indexOf(t),i=u.order.indexOf(e);return 0<=n||0<=i?n-i:t===e?0:t<e?-1:1}}]),i=u;function u(){return function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}i.allowedChildren=[i,a.default.Embed,s.default],i.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(0);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(o,((i=r)&&i.__esModule?i:{default:i}).default.Text),n=o;function o(){return function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s=a(n(54));function a(t){return t&&t.__esModule?t:{default:t}}var l=(0,a(n(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(t){document.addEventListener(t,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(t){t.__quill&&t.__quill.emitter&&(t=t.__quill.emitter).handleDOM.apply(t,e)})})});(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(u,s.default),i(u,[{key:"emit",value:function(){l.log.apply(l,arguments),o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(n){for(var t=arguments.length,i=Array(1<t?t-1:0),e=1;e<t;e++)i[e-1]=arguments[e];(this.listeners[n.type]||[]).forEach(function(t){var e=t.node,t=t.handler;n.target!==e&&!e.contains(n.target)||t.apply(void 0,[n].concat(i))})}},{key:"listenDOM",value:function(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:n})}}]),i=u;function u(){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return t.listeners={},t.on("error",l.error),t}i.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},i.sources={API:"api",SILENT:"silent",USER:"user"},e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.quill=t,this.options=e}i.DEFAULTS={},e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function i(t){if(o.indexOf(t)<=o.indexOf(s)){for(var e,n=arguments.length,i=Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=console)[t].apply(e,i)}}function r(n){return o.reduce(function(t,e){return t[e]=i.bind(console,e,n),t},{})}i.level=r.level=function(t){s=t},e.default=r},function(t,e,n){var a=Array.prototype.slice,l=n(52),u=n(53),c=t.exports=function(t,e,n){return n=n||{},t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:function(t,e,n){var i,r;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(u(t))return!!u(e)&&(t=a.call(t),e=a.call(e),c(t,e,n));if(d(t)){if(!d(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var o=l(t),s=l(e)}catch(t){return!1}if(o.length!=s.length)return!1;for(o.sort(),s.sort(),i=o.length-1;0<=i;i--)if(o[i]!=s[i])return!1;for(i=o.length-1;0<=i;i--)if(r=o[i],!c(t[r],e[r],n))return!1;return typeof t==typeof e}(t,e,n))};function h(t){return null==t}function d(t){return t&&"object"==typeof t&&"number"==typeof t.length&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(0<t.length&&"number"!=typeof t[0]))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),n=(r.keys=function(t){return[].map.call(t.attributes,function(t){return t.name})},r.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},r.prototype.canAdd=function(t,e){return null!=i.query(t,i.Scope.BLOT&(this.scope|i.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?-1<this.whitelist.indexOf(e.replace(/["']/g,"")):-1<this.whitelist.indexOf(e)))},r.prototype.remove=function(t){t.removeAttribute(this.keyName)},r.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},r);function r(t,e,n){void 0===n&&(n={}),this.attrName=t,this.keyName=e;e=i.Scope.TYPE&i.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&i.Scope.LEVEL|e:this.scope=i.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Code=void 0;var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return s(t,e,n)}var a=d(n(2)),l=d(n(0)),u=d(n(4)),c=d(n(6)),h=d(n(7));function d(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}m(g,c.default),c=g;function g(){return f(this,g),p(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}c.blotName="code",c.tagName="CODE";m(y,u.default),r(y,[{key:"delta",value:function(){var n=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,e){return t.insert(e).insert("\n",n.formats())},new a.default)}},{key:"format",value:function(t,e){var n;t===this.statics.blotName&&e||(n=this.descendant(h.default,this.length()-1),null!=(n=i(n,1)[0])&&n.deleteAt(n.length()-1,1),s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,t,e))}},{key:"formatAt",value:function(t,e,n,i){var r,o,s,a;0!==e&&(null==l.default.query(n,l.default.Scope.BLOCK)||n===this.statics.blotName&&i===this.statics.formats(this.domNode)||((a=this.newlineIndex(t))<0||t+e<=a||(o=a-(r=this.newlineIndex(t,!0)+1)+1,a=(s=this.isolate(r,o)).next,s.format(n,i),a instanceof y&&a.formatAt(0,t-r+e-o,n,i))))}},{key:"insertAt",value:function(t,e,n){null==n&&(n=this.descendant(h.default,t),n=(t=i(n,2))[0],t=t[1],n.insertAt(t,e))}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t,e){if(1<arguments.length&&void 0!==e&&e)return this.domNode.textContent.slice(0,t).lastIndexOf("\n");e=this.domNode.textContent.slice(t).indexOf("\n");return-1<e?t+e:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(l.default.create("text","\n")),s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,t);var e=this.next;null!=e&&e.prev===this&&e.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===e.statics.formats(e.domNode)&&(e.optimize(t),e.moveChildren(this),e.remove())}},{key:"replace",value:function(t){s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(t){var e=l.default.find(t);null==e?t.parentNode.removeChild(t):e instanceof l.default.Embed?e.remove():e.unwrap()})}}],[{key:"create",value:function(t){t=s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,t);return t.setAttribute("spellcheck",!1),t}},{key:"formats",value:function(){return!0}}]),r=y;function y(){return f(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}r.blotName="code-block",r.tagName="PRE",r.TAB="  ",e.Code=c,e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=s(n(2)),f=s(n(20)),p=s(n(0)),u=s(n(13)),a=s(n(24)),m=n(4),g=s(m),o=s(n(16)),y=s(n(21)),l=s(n(11)),v=s(n(3));function s(t){return t&&t.__esModule?t:{default:t}}var b=/^[ -~]*$/,i=(i(_,[{key:"applyDelta",value:function(t){var a=this,l=!1;this.scroll.update();var u=this.scroll.length();return this.scroll.batchStart(),(t=t.reduce(function(t,e){if(1===e.insert){var n=(0,y.default)(e.attributes);return delete n.image,t.insert({image:e.attributes.image},n)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=(0,y.default)(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"!=typeof e.insert)return t.push(e);n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)},new d.default)).reduce(function(e,t){var n=t.retain||t.delete||t.insert.length||1,i=t.attributes||{};if(null!=t.insert){if("string"==typeof t.insert){var r=t.insert;r.endsWith("\n")&&l&&(l=!1,r=r.slice(0,-1)),u<=e&&!r.endsWith("\n")&&(l=!0),a.scroll.insertAt(e,r);var o=a.scroll.line(e),s=h(o,2),r=s[0],o=s[1],s=(0,v.default)({},(0,m.bubbleFormats)(r));r instanceof g.default&&(o=r.descendant(p.default.Leaf,o),o=h(o,1)[0],s=(0,v.default)(s,(0,m.bubbleFormats)(o))),i=f.default.attributes.diff(s,i)||{}}else if("object"===c(t.insert)){s=Object.keys(t.insert)[0];if(null==s)return e;a.scroll.insertAt(e,s,t.insert[s])}u+=n}return Object.keys(i).forEach(function(t){a.scroll.formatAt(e,n,t,i[t])}),e+n},0),t.reduce(function(t,e){return"number"==typeof e.delete?(a.scroll.deleteAt(t,e.delete),t):t+(e.retain||e.insert.length||1)},0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new d.default).retain(t).delete(e))}},{key:"formatLine",value:function(s,e,t){var a=this,l=2<arguments.length&&void 0!==t?t:{};return this.scroll.update(),Object.keys(l).forEach(function(r){var t,o;null!=a.scroll.whitelist&&!a.scroll.whitelist[r]||(t=a.scroll.lines(s,Math.max(e,1)),o=e,t.forEach(function(t){var e,n,i=t.length();t instanceof u.default?(e=s-t.offset(a.scroll),n=t.newlineIndex(e+o)-e+1,t.formatAt(e,n,r,l[r])):t.format(r,l[r]),o-=i}))}),this.scroll.optimize(),this.update((new d.default).retain(s).retain(e,(0,y.default)(l)))}},{key:"formatText",value:function(e,n,t){var i=this,r=2<arguments.length&&void 0!==t?t:{};return Object.keys(r).forEach(function(t){i.scroll.formatAt(e,n,t,r[t])}),this.update((new d.default).retain(e).retain(n,(0,y.default)(r)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(t,e){return t.concat(e.delta())},new d.default)}},{key:"getFormat",value:function(t,e){var e=1<arguments.length&&void 0!==e?e:0,n=[],i=[];0===e?this.scroll.path(t).forEach(function(t){t=h(t,1)[0];t instanceof g.default?n.push(t):t instanceof p.default.Leaf&&i.push(t)}):(n=this.scroll.lines(t,e),i=this.scroll.descendants(p.default.Leaf,t,e));e=[n,i].map(function(t){if(0===t.length)return{};for(var e=(0,m.bubbleFormats)(t.shift());0<Object.keys(e).length;){var n=t.shift();if(null==n)return e;e=function(n,i){return Object.keys(i).reduce(function(t,e){return null==n[e]||(i[e]===n[e]?t[e]=i[e]:Array.isArray(i[e])?i[e].indexOf(n[e])<0&&(t[e]=i[e].concat([n[e]])):t[e]=[i[e],n[e]]),t},{})}((0,m.bubbleFormats)(n),e)}return e});return v.default.apply(v.default,e)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter(function(t){return"string"==typeof t.insert}).map(function(t){return t.insert}).join("")}},{key:"insertEmbed",value:function(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new d.default).retain(t).insert((t=n,(n=e)in(e={})?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e)))}},{key:"insertText",value:function(e,n,t){var i=this,r=2<arguments.length&&void 0!==t?t:{};return n=n.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,n),Object.keys(r).forEach(function(t){i.scroll.formatAt(e,n.length,t,r[t])}),this.update((new d.default).retain(e).insert(n,(0,y.default)(r)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(1<this.scroll.children.length)return!1;var t=this.scroll.children.head;return t.statics.blotName===g.default.blotName&&(!(1<t.children.length)&&t.children.head instanceof o.default)}},{key:"removeFormat",value:function(t,e){var n=this.getText(t,e),i=this.scroll.line(t+e),r=h(i,2),o=r[0],s=r[1],i=0,r=new d.default;null!=o&&(i=o instanceof u.default?o.newlineIndex(s)-s+1:o.length()-s,r=o.delta().slice(s,s+i-1).insert("\n"));r=this.getContents(t,e+i).diff((new d.default).insert(n).concat(r)),r=(new d.default).retain(t).concat(r);return this.applyDelta(r)}},{key:"update",value:function(t,e,n){var i,r=1<arguments.length&&void 0!==e?e:[],o=2<arguments.length&&void 0!==n?n:void 0,s=this.delta;return 1===r.length&&"characterData"===r[0].type&&r[0].target.data.match(b)&&p.default.find(r[0].target)?(e=p.default.find(r[0].target),i=(0,m.bubbleFormats)(e),n=e.offset(this.scroll),r=r[0].oldValue.replace(a.default.CONTENTS,""),r=(new d.default).insert(r),e=(new d.default).insert(e.value()),t=(new d.default).retain(n).concat(r.diff(e,o)).reduce(function(t,e){return e.insert?t.insert(e.insert,i):t.push(e)},new d.default),this.delta=s.compose(t)):(this.delta=this.getDelta(),t&&(0,l.default)(s.compose(t),this.delta)||(t=s.diff(this.delta,o))),t}}]),_);function _(t){!function(t){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}(this),this.scroll=t,this.delta=this.getDelta()}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Range=void 0;var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=c(n(0)),o=c(n(21)),a=c(n(11)),u=c(n(8));function c(t){return t&&t.__esModule?t:{default:t}}function h(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=(0,c(n(10)).default)("quill:selection"),p=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;d(this,t),this.index=e,this.length=n},i=(i(m,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){var t;e.composing=!1,!e.cursor.parent||(t=e.cursor.restore())&&setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)})}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,function(){t.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){t.mouseDown=!1,t.update(u.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!s.default.query(t,s.default.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var i,r=s.default.find(n.start.node,!1);if(null==r)return;r instanceof s.default.Leaf?(i=r.split(n.start.offset),r.parent.insertBefore(this.cursor,i)):r.insertBefore(this.cursor,n.start.node),this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:0,i=this.scroll.length();t=Math.min(t,i-1),n=Math.min(t+n,i-1)-t;var r=void 0,o=this.scroll.leaf(t),e=l(o,2),i=e[0],o=e[1];if(null==i)return null;e=i.position(o,!0),e=l(e,2);r=e[0],o=e[1];e=document.createRange();if(0<n){e.setStart(r,o);var s=this.scroll.leaf(t+n),a=l(s,2),i=a[0],o=a[1];if(null==i)return null;s=i.position(o,!0),a=l(s,2),r=a[0];return o=a[1],e.setEnd(r,o),e.getBoundingClientRect()}s="left",a=void 0;return r instanceof Text?(o<r.data.length?(e.setStart(r,o),e.setEnd(r,o+1)):(e.setStart(r,o-1),e.setEnd(r,o),s="right"),a=e.getBoundingClientRect()):(a=i.domNode.getBoundingClientRect(),0<o&&(s="right")),{bottom:a.top+a.height,height:a.height,left:a[s],right:a[s],top:a.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;t=t.getRangeAt(0);if(null==t)return null;t=this.normalizeNative(t);return f.info("getNativeRange",t),t}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var r=this,e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);t=e.map(function(t){var e=l(t,2),n=e[0],i=e[1],t=s.default.find(n,!0),e=t.offset(r.scroll);return 0===i?e:t instanceof s.default.Container?e+t.length():e+t.index(n,i)}),e=Math.min(Math.max.apply(Math,h(t)),this.scroll.length()-1),t=Math.min.apply(Math,[e].concat(h(t)));return new p(t,e-t)}},{key:"normalizeNative",value:function(t){if(!g(this.root,t.startContainer)||!t.collapsed&&!g(this.root,t.endContainer))return null;t={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[t.start,t.end].forEach(function(t){for(var e=t.node,n=t.offset;!(e instanceof Text)&&0<e.childNodes.length;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;n=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=n}),t}},{key:"rangeToNative",value:function(t){var r=this,t=t.collapsed?[t.index]:[t.index,t.index+t.length],o=[],s=this.scroll.length();return t.forEach(function(t,e){t=Math.min(s-1,t);var n=r.scroll.leaf(t),t=l(n,2),n=t[0],t=t[1],e=n.position(t,0!==e),e=l(e,2),i=e[0],t=e[1];o.push(i,t)}),o.length<2&&(o=o.concat(o)),o}},{key:"scrollIntoView",value:function(t){var e,n,i,r,o=this.lastRange;null==o||null!=(e=this.getBounds(o.index,o.length))&&(i=this.scroll.length()-1,r=this.scroll.line(Math.min(o.index,i)),r=n=l(r,1)[0],0<o.length&&(i=this.scroll.line(Math.min(o.index+o.length,i)),r=l(i,1)[0]),null!=n&&null!=r&&(r=t.getBoundingClientRect(),e.top<r.top?t.scrollTop-=r.top-e.top:e.bottom>r.bottom&&(t.scrollTop+=e.bottom-r.bottom)))}},{key:"setNativeRange",value:function(t,e,n,i,r){var o=2<arguments.length&&void 0!==n?n:t,s=3<arguments.length&&void 0!==i?i:e,n=4<arguments.length&&void 0!==r&&r;f.info("setNativeRange",t,e,o,s),null!=t&&(null==this.root.parentNode||null==t.parentNode||null==o.parentNode)||null!=(i=document.getSelection())&&(null!=t?(this.hasFocus()||this.root.focus(),null!=(r=(this.getNativeRange()||{}).native)&&!n&&t===r.startContainer&&e===r.startOffset&&o===r.endContainer&&s===r.endOffset||("BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==o.tagName&&(s=[].indexOf.call(o.parentNode.childNodes,o),o=o.parentNode),(r=document.createRange()).setStart(t,e),r.setEnd(o,s),i.removeAllRanges(),i.addRange(r))):(i.removeAllRanges(),this.root.blur(),document.body.focus()))}},{key:"setRange",value:function(t,e,n){e=1<arguments.length&&void 0!==e&&e,n=2<arguments.length&&void 0!==n?n:u.default.sources.API;"string"==typeof e&&(n=e,e=!1),f.info("setRange",t),null!=t?(t=this.rangeToNative(t),this.setNativeRange.apply(this,h(t).concat([e]))):this.setNativeRange(null),this.update(n)}},{key:"update",value:function(t){var e=0<arguments.length&&void 0!==t?t:u.default.sources.USER,n=this.lastRange,i=this.getRange(),t=l(i,2),i=t[0],t=t[1];this.lastRange=i,null!=this.lastRange&&(this.savedRange=this.lastRange),(0,a.default)(n,this.lastRange)||(!this.composing&&null!=t&&t.native.collapsed&&t.start.node!==this.cursor.textNode&&this.cursor.restore(),t=[u.default.events.SELECTION_CHANGE,(0,o.default)(this.lastRange),(0,o.default)(n),e],(n=this.emitter).emit.apply(n,[u.default.events.EDITOR_CHANGE].concat(t)),e!==u.default.sources.SILENT&&(e=this.emitter).emit.apply(e,t))}}]),m);function m(t,e){var o=this;d(this,m),this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=s.default.create("cursor",this),this.lastRange=this.savedRange=new p(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){o.mouseDown||setTimeout(o.update.bind(o,u.default.sources.USER),1)}),this.emitter.on(u.default.events.EDITOR_CHANGE,function(t,e){t===u.default.events.TEXT_CHANGE&&0<e.length()&&o.update(u.default.sources.SILENT)}),this.emitter.on(u.default.events.SCROLL_BEFORE_UPDATE,function(){var t;!o.hasFocus()||null!=(t=o.getNativeRange())&&t.start.node!==o.cursor.textNode&&o.emitter.once(u.default.events.SCROLL_UPDATE,function(){try{o.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}})}),this.emitter.on(u.default.events.SCROLL_OPTIMIZE,function(t,e){var n,i,r;e.range&&(n=(r=e.range).startNode,i=r.startOffset,e=r.endNode,r=r.endOffset,o.setNativeRange(n,i,e,r))}),this.update(u.default.sources.SILENT)}function g(t,e){try{e.parentNode}catch(t){return}return e instanceof Text&&(e=e.parentNode),t.contains(e)}e.Range=p,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(0);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(l,((s=a)&&s.__esModule?s:{default:s}).default.Embed),i(l,[{key:"insertInto",value:function(t,e){0===t.children.length?o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"insertInto",this).call(this,t,e):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),i=l;function l(){return function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}i.blotName="break",i.tagName="BR",e.default=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(44),a=n(30),l=n(1),r=(o=a.default,r(u,o),u.prototype.appendChild=function(t){this.insertBefore(t)},u.prototype.attach=function(){o.prototype.attach.call(this),this.children.forEach(function(t){t.attach()})},u.prototype.build=function(){var n=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var e=c(t);n.insertBefore(e,n.children.head||void 0)}catch(t){if(t instanceof l.ParchmentError)return;throw t}})},u.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,function(t,e,n){t.deleteAt(e,n)})},u.prototype.descendant=function(t,e){var n=this.children.find(e),e=n[0],n=n[1];return null==t.blotName&&t(e)||null!=t.blotName&&e instanceof t?[e,n]:e instanceof u?e.descendant(t,n):[null,-1]},u.prototype.descendants=function(i,t,e){void 0===t&&(t=0),void 0===e&&(e=Number.MAX_VALUE);var r=[],o=e;return this.children.forEachAt(t,e,function(t,e,n){(null==i.blotName&&i(t)||null!=i.blotName&&t instanceof i)&&r.push(t),t instanceof u&&(r=r.concat(t.descendants(i,e,o))),o-=n}),r},u.prototype.detach=function(){this.children.forEach(function(t){t.detach()}),o.prototype.detach.call(this)},u.prototype.formatAt=function(t,e,i,r){this.children.forEachAt(t,e,function(t,e,n){t.formatAt(e,n,i,r)})},u.prototype.insertAt=function(t,e,n){var i=this.children.find(t),t=i[0],i=i[1];t?t.insertAt(i,e,n):(n=null==n?l.create("text",e):l.create(e,n),this.appendChild(n))},u.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new l.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},u.prototype.length=function(){return this.children.reduce(function(t,e){return t+e.length()},0)},u.prototype.moveChildren=function(e,n){this.children.forEach(function(t){e.insertBefore(t,n)})},u.prototype.optimize=function(t){var e;o.prototype.optimize.call(this,t),0===this.children.length&&(null!=this.statics.defaultChild?(e=l.create(this.statics.defaultChild),this.appendChild(e),e.optimize(t)):this.remove())},u.prototype.path=function(t,e){void 0===e&&(e=!1);var n=this.children.find(t,e),i=n[0],n=n[1],t=[[this,t]];return i instanceof u?t.concat(i.path(n,e)):(null!=i&&t.push([i,n]),t)},u.prototype.removeChild=function(t){this.children.remove(t)},u.prototype.replace=function(t){t instanceof u&&t.moveChildren(this),o.prototype.replace.call(this,t)},u.prototype.split=function(t,i){if(void 0===i&&(i=!1),!i){if(0===t)return this;if(t===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(t,this.length(),function(t,e,n){t=t.split(e,i),r.appendChild(t)}),r},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(t,e){var n=this,i=[],r=[];t.forEach(function(t){t.target===n.domNode&&"childList"===t.type&&(i.push.apply(i,t.addedNodes),r.push.apply(r,t.removedNodes))}),r.forEach(function(t){null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY||null!=(t=l.find(t))&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==n.domNode||t.detach())}),i.filter(function(t){return t.parentNode==n.domNode}).sort(function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(t){var e=null;null!=t.nextSibling&&(e=l.find(t.nextSibling));t=c(t);t.next==e&&null!=t.next||(null!=t.parent&&t.parent.removeChild(n),n.insertBefore(t,e||void 0))})},u);function u(t){t=o.call(this,t)||this;return t.build(),t}function c(e){var n=l.find(e);if(null==n)try{n=l.create(e)}catch(t){n=l.create(l.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(t){n.domNode.appendChild(t)}),e.parentNode&&e.parentNode.replaceChild(n.domNode,e),n.attach()}return n}e.default=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(12),a=n(31),l=n(17),u=n(1),r=(o=l.default,r(c,o),c.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},c.prototype.format=function(t,e){var n=u.query(t);n instanceof s.default?this.attributes.attribute(n,e):e&&(null==n||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},c.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},c.prototype.replaceWith=function(t,e){e=o.prototype.replaceWith.call(this,t,e);return this.attributes.copy(e),e},c.prototype.update=function(t,e){var n=this;o.prototype.update.call(this,t,e),t.some(function(t){return t.target===n.domNode&&"attributes"===t.type})&&this.attributes.build()},c.prototype.wrap=function(t,e){e=o.prototype.wrap.call(this,t,e);return e instanceof c&&e.statics.scope===this.statics.scope&&this.attributes.move(e),e},c);function c(t){t=o.call(this,t)||this;return t.attributes=new a.default(t.domNode),t}e.default=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(30),n=n(1),n=(o=s.default,r(a,o),a.value=function(t){return!0},a.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},a.prototype.position=function(t,e){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return 0<t&&(n+=1),[this.parent.domNode,n]},a.prototype.value=function(){return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t;var t},a.scope=n.Scope.INLINE_BLOT,a);function a(){return null!==o&&o.apply(this,arguments)||this}e.default=n},function(t,e,n){var r=n(11),o=n(3),s={attributes:{compose:function(t,e,n){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i,r=o(!0,{},e);for(i in n||(r=Object.keys(r).reduce(function(t,e){return null!=r[e]&&(t[e]=r[e]),t},{})),t)void 0!==t[i]&&void 0===e[i]&&(r[i]=t[i]);return 0<Object.keys(r).length?r:void 0},diff:function(n,i){"object"!=typeof n&&(n={}),"object"!=typeof i&&(i={});var t=Object.keys(n).concat(Object.keys(i)).reduce(function(t,e){return r(n[e],i[e])||(t[e]=void 0===i[e]?null:i[e]),t},{});return 0<Object.keys(t).length?t:void 0},transform:function(n,i,t){if("object"!=typeof n)return i;if("object"==typeof i){if(!t)return i;t=Object.keys(i).reduce(function(t,e){return void 0===n[e]&&(t[e]=i[e]),t},{});return 0<Object.keys(t).length?t:void 0}}},iterator:function(t){return new i(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};function i(t){this.ops=t,this.index=0,this.offset=0}i.prototype.hasNext=function(){return this.peekLength()<1/0},i.prototype.next=function(t){t=t||1/0;var e=this.ops[this.index];if(e){var n=this.offset,i=s.length(e);if(i-n<=t?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};i={};return e.attributes&&(i.attributes=e.attributes),"number"==typeof e.retain?i.retain=t:"string"==typeof e.insert?i.insert=e.insert.substr(n,t):i.insert=e.insert,i}return{retain:1/0}},i.prototype.peek=function(){return this.ops[this.index]},i.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},i.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},t.exports=s},function(t,e){var n=function(){"use strict";function b(t,e){return null!=e&&t instanceof e}var _,T,w;try{_=Map}catch(t){_=function(){}}try{T=Set}catch(t){T=function(){}}try{w=Promise}catch(t){w=function(){}}function S(t,f,e,p,m){"object"==typeof f&&(e=f.depth,p=f.prototype,m=f.includeNonEnumerable,f=f.circular);var g=[],y=[],v="undefined"!=typeof Buffer;return void 0===f&&(f=!0),void 0===e&&(e=1/0),function i(t,r){if(null===t)return null;if(0===r)return t;var n,e,o;if("object"!=typeof t)return t;if(b(t,_))n=new _;else if(b(t,T))n=new T;else if(b(t,w))n=new w(function(e,n){t.then(function(t){e(i(t,r-1))},function(t){n(i(t,r-1))})});else if(S.__isArray(t))n=[];else if(S.__isRegExp(t))n=new RegExp(t.source,k(t)),t.lastIndex&&(n.lastIndex=t.lastIndex);else if(S.__isDate(t))n=new Date(t.getTime());else{if(v&&Buffer.isBuffer(t))return n=new Buffer(t.length),t.copy(n),n;b(t,Error)?n=Object.create(t):void 0===p?(e=Object.getPrototypeOf(t),n=Object.create(e)):(n=Object.create(p),e=p)}if(f){var s=g.indexOf(t);if(-1!=s)return y[s];g.push(t),y.push(n)}for(l in b(t,_)&&t.forEach(function(t,e){e=i(e,r-1),t=i(t,r-1),n.set(e,t)}),b(t,T)&&t.forEach(function(t){t=i(t,r-1),n.add(t)}),t)e&&(o=Object.getOwnPropertyDescriptor(e,l)),o&&null==o.set||(n[l]=i(t[l],r-1));if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(t),l=0;l<a.length;l++){var u=a[l];(h=Object.getOwnPropertyDescriptor(t,u))&&!h.enumerable&&!m||(n[u]=i(t[u],r-1),h.enumerable||Object.defineProperty(n,u,{enumerable:!1}))}if(m)for(var c=Object.getOwnPropertyNames(t),l=0;l<c.length;l++){var h,d=c[l];(h=Object.getOwnPropertyDescriptor(t,d))&&h.enumerable||(n[d]=i(t[d],r-1),Object.defineProperty(n,d,{enumerable:!1}))}return n}(t,e)}function e(t){return Object.prototype.toString.call(t)}function k(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return S.clonePrototype=function(t){if(null===t)return null;function e(){}return e.prototype=t,new e},S.__objToStr=e,S.__isDate=function(t){return"object"==typeof t&&"[object Date]"===e(t)},S.__isArray=function(t){return"object"==typeof t&&"[object Array]"===e(t)},S.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===e(t)},S.__getRegExpFlags=k,S}();"object"==typeof t&&t.exports&&(t.exports=n)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return a(t,e,n)}var l=f(n(0)),o=f(n(8)),u=n(4),c=f(u),h=f(n(16)),d=f(n(13)),n=f(n(25));function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return t instanceof c.default||t instanceof u.BlockEmbed}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(m,l.default.Scroll),i(m,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,e){var n=this.line(t),i=s(n,2),r=i[0],n=i[1],i=this.line(t+e),i=s(i,1)[0];if(a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"deleteAt",this).call(this,t,e),null!=i&&r!==i&&0<n){if(r instanceof u.BlockEmbed||i instanceof u.BlockEmbed)return void this.optimize();if(r instanceof d.default){n=r.newlineIndex(r.length(),!0);if(-1<n&&(r=r.split(n+1))===i)return void this.optimize()}else i instanceof d.default&&(-1<(o=i.newlineIndex(0))&&i.split(o+1));var o=i.children.head instanceof h.default?null:i.children.head;r.moveChildren(i,o),r.remove()}this.optimize()}},{key:"enable",value:function(t){t=!(0<arguments.length&&void 0!==t)||t;this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,e,n,i){null!=this.whitelist&&!this.whitelist[n]||(a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,t,e,n,i),this.optimize())}},{key:"insertAt",value:function(t,e,n){var i;null!=n&&null!=this.whitelist&&!this.whitelist[e]||(t>=this.length()?null==n||null==l.default.query(e,l.default.Scope.BLOCK)?(i=l.default.create(this.statics.defaultChild),this.appendChild(i),null==n&&e.endsWith("\n")&&(e=e.slice(0,-1)),i.insertAt(0,e,n)):(i=l.default.create(e,n),this.appendChild(i)):a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertAt",this).call(this,t,e,n),this.optimize())}},{key:"insertBefore",value:function(t,e){var n;t.statics.scope===l.default.Scope.INLINE_BLOT&&((n=l.default.create(this.statics.defaultChild)).appendChild(t),t=n),a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertBefore",this).call(this,t,e)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(p,t)}},{key:"lines",value:function(t,e){return function i(t,e,n){var r=[],o=n;return t.children.forEachAt(e,n,function(t,e,n){p(t)?r.push(t):t instanceof l.default.Container&&(r=r.concat(i(t,e,o))),o-=n}),r}(this,0<arguments.length&&void 0!==t?t:0,1<arguments.length&&void 0!==e?e:Number.MAX_VALUE)}},{key:"optimize",value:function(t,e){t=0<arguments.length&&void 0!==t?t:[],e=1<arguments.length&&void 0!==e?e:{};!0!==this.batch&&(a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,t,e),0<t.length&&this.emitter.emit(o.default.events.SCROLL_OPTIMIZE,t,e))}},{key:"path",value:function(t){return a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){var e;!0!==this.batch&&(e=o.default.sources.USER,"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),0<t.length&&this.emitter.emit(o.default.events.SCROLL_BEFORE_UPDATE,e,t),a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"update",this).call(this,t.concat([])),0<t.length&&this.emitter.emit(o.default.events.SCROLL_UPDATE,e,t))}}]),i=m;function m(t,e){!function(t){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,t));return t.emitter=e.emitter,Array.isArray(e.whitelist)&&(t.whitelist=e.whitelist.reduce(function(t,e){return t[e]=!0,t},{})),t.domNode.addEventListener("DOMNodeInserted",function(){}),t.optimize(),t.enable(),t}i.blotName="scroll",i.className="ql-editor",i.tagName="DIV",i.defaultChild="block",i.allowedChildren=[c.default,u.BlockEmbed,n.default],e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e.default=void 0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=m(n(21)),f=m(n(11)),s=m(n(3)),a=m(n(2)),l=m(n(20)),p=m(n(0)),u=m(n(5)),c=m(n(10)),n=m(n(9));function m(t){return t&&t.__esModule?t:{default:t}}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=(0,c.default)("quill:keyboard"),v=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",b=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(_,n.default),i(_,null,[{key:"match",value:function(e,n){return n=A(n),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(t){return!!n[t]!==e[t]&&null!==n[t]})&&n.key===(e.which||e.keyCode)}}]),i(_,[{key:"addBinding",value:function(t,e,n){e=1<arguments.length&&void 0!==e?e:{},n=2<arguments.length&&void 0!==n?n:{},t=A(t);if(null==t||null==t.key)return y.warn("Attempted to add invalid keyboard binding",t);"function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),t=(0,s.default)(t,e,n),this.bindings[t.key]=this.bindings[t.key]||[],this.bindings[t.key].push(t)}},{key:"listen",value:function(){var c=this;this.quill.root.addEventListener("keydown",function(e){var t,n,i,r,o,s,a,l,u;e.defaultPrevented||(l=e.which||e.keyCode,0===(t=(c.bindings[l]||[]).filter(function(t){return _.match(e,t)})).length||null!=(n=c.quill.getSelection())&&c.quill.hasFocus()&&(o=c.quill.getLine(n.index),i=(a=d(o,2))[0],r=a[1],s=c.quill.getLeaf(n.index),o=(l=d(s,2))[0],a=l[1],s=0===n.length?[o,a]:c.quill.getLeaf(n.index+n.length),s=(l=d(s,2))[0],l=l[1],a=o instanceof p.default.Text?o.value().slice(0,a):"",l=s instanceof p.default.Text?s.value().slice(l):"",u={collapsed:0===n.length,empty:0===n.length&&i.length()<=1,format:c.quill.getFormat(n),offset:r,prefix:a,suffix:l},t.some(function(e){if(null!=e.collapsed&&e.collapsed!==u.collapsed)return!1;if(null!=e.empty&&e.empty!==u.empty)return!1;if(null!=e.offset&&e.offset!==u.offset)return!1;if(Array.isArray(e.format)){if(e.format.every(function(t){return null==u.format[t]}))return!1}else if("object"===h(e.format)&&!Object.keys(e.format).every(function(t){return!0===e.format[t]?null!=u.format[t]:!1===e.format[t]?null==u.format[t]:(0,f.default)(e.format[t],u.format[t])}))return!1;return!(null!=e.prefix&&!e.prefix.test(u.prefix))&&(!(null!=e.suffix&&!e.suffix.test(u.suffix))&&!0!==e.handler.call(c,n,u))})&&e.preventDefault()))})}}]),_);function _(e,t){!function(t){if(!(t instanceof _))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,e,t));return n.bindings={},Object.keys(n.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&n.options.bindings[t]&&n.addBinding(n.options.bindings[t])}),n.addBinding({key:_.keys.ENTER,shiftKey:null},E),n.addBinding({key:_.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:_.keys.BACKSPACE},{collapsed:!0},w),n.addBinding({key:_.keys.DELETE},{collapsed:!0},S)):(n.addBinding({key:_.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),n.addBinding({key:_.keys.DELETE},{collapsed:!0,suffix:/^.?$/},S)),n.addBinding({key:_.keys.BACKSPACE},{collapsed:!1},k),n.addBinding({key:_.keys.DELETE},{collapsed:!1},k),n.addBinding({key:_.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),n.listen(),n}function T(n,i){var t=n===b.keys.LEFT?"prefix":"suffix",e={key:n,shiftKey:i,altKey:null};return g(e,t,/^$/),g(e,"handler",function(t){var e=t.index;n===b.keys.RIGHT&&(e+=t.length+1);e=this.quill.getLeaf(e);return!(d(e,1)[0]instanceof p.default.Embed)||(n===b.keys.LEFT?i?this.quill.setSelection(t.index-1,t.length+1,u.default.sources.USER):this.quill.setSelection(t.index-1,u.default.sources.USER):i?this.quill.setSelection(t.index,t.length+1,u.default.sources.USER):this.quill.setSelection(t.index+t.length+1,u.default.sources.USER),!1)}),e}function w(t,e){var n,i,r;0===t.index||this.quill.getLength()<=1||(n=this.quill.getLine(t.index),i=d(n,1)[0],r={},0===e.offset&&(n=this.quill.getLine(t.index-1),null!=(n=d(n,1)[0])&&1<n.length()&&(n=i.formats(),i=this.quill.getFormat(t.index-1,1),r=l.default.attributes.diff(n,i)||{})),e=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1,this.quill.deleteText(t.index-e,e,u.default.sources.USER),0<Object.keys(r).length&&this.quill.formatLine(t.index-e,e,r,u.default.sources.USER),this.quill.focus())}function S(t,e){var n,i,r,o,s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;t.index>=this.quill.getLength()-s||(r={},o=0,n=this.quill.getLine(t.index),i=d(n,1)[0],e.offset>=i.length()-1&&(n=this.quill.getLine(t.index+1),(e=d(n,1)[0])&&(n=i.formats(),i=this.quill.getFormat(t.index,1),r=l.default.attributes.diff(n,i)||{},o=e.length())),this.quill.deleteText(t.index,s,u.default.sources.USER),0<Object.keys(r).length&&this.quill.formatLine(t.index+o-1,s,r,u.default.sources.USER))}function k(t){var e,n=this.quill.getLines(t),i={};1<n.length&&(e=n[0].formats(),n=n[n.length-1].formats(),i=l.default.attributes.diff(n,e)||{}),this.quill.deleteText(t,u.default.sources.USER),0<Object.keys(i).length&&this.quill.formatLine(t.index,1,i,u.default.sources.USER),this.quill.setSelection(t.index,u.default.sources.SILENT),this.quill.focus()}function E(t,n){var e=this;0<t.length&&this.quill.scroll.deleteAt(t.index,t.length);var i=Object.keys(n.format).reduce(function(t,e){return p.default.query(e,p.default.Scope.BLOCK)&&!Array.isArray(n.format[e])&&(t[e]=n.format[e]),t},{});this.quill.insertText(t.index,"\n",i,u.default.sources.USER),this.quill.setSelection(t.index+1,u.default.sources.SILENT),this.quill.focus(),Object.keys(n.format).forEach(function(t){null==i[t]&&(Array.isArray(n.format[t])||"link"!==t&&e.quill.format(t,n.format[t],u.default.sources.USER))})}function C(l){return{key:b.keys.TAB,shiftKey:!l,format:{"code-block":!0},handler:function(t){var n,i=p.default.query("code-block"),r=t.index,o=t.length,t=this.quill.scroll.descendant(i,r),t=d(t,2),s=t[0],a=t[1];null!=s&&(t=this.quill.getIndex(s),n=s.newlineIndex(a,!0)+1,t=s.newlineIndex(t+a+o),t=s.domNode.textContent.slice(n,t).split("\n"),a=0,t.forEach(function(t,e){l?(s.insertAt(n+a,i.TAB),a+=i.TAB.length,0===e?r+=i.TAB.length:o+=i.TAB.length):t.startsWith(i.TAB)&&(s.deleteAt(n+a,i.TAB.length),a-=i.TAB.length,0===e?r-=i.TAB.length:o-=i.TAB.length),a+=t.length+1}),this.quill.update(u.default.sources.USER),this.quill.setSelection(r,o,u.default.sources.SILENT))}}}function x(n){return{key:n[0].toUpperCase(),shortKey:!0,handler:function(t,e){this.quill.format(n,!e.format[n],u.default.sources.USER)}}}function A(t){if("string"==typeof t||"number"==typeof t)return A({key:t});if("object"===(void 0===t?"undefined":h(t))&&(t=(0,o.default)(t,!1)),"string"==typeof t.key)if(null!=b.keys[t.key.toUpperCase()])t.key=b.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[v]=t.shortKey,delete t.shortKey),t}b.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},b.DEFAULTS={bindings:{bold:x("bold"),italic:x("italic"),underline:x("underline"),indent:{key:b.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",u.default.sources.USER)}},outdent:{key:b.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",u.default.sources.USER)}},"outdent backspace":{key:b.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",u.default.sources.USER):null!=e.format.list&&this.quill.format("list",!1,u.default.sources.USER)}},"indent code-block":C(!0),"outdent code-block":C(!1),"remove tab":{key:b.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,u.default.sources.USER)}},tab:{key:b.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new a.default).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,u.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,u.default.sources.SILENT)}},"list empty enter":{key:b.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,u.default.sources.USER),e.format.indent&&this.quill.format("indent",!1,u.default.sources.USER)}},"checklist enter":{key:b.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),n=d(e,2),i=n[0],e=n[1],n=(0,s.default)({},i.formats(),{list:"checked"}),e=(new a.default).retain(t.index).insert("\n",n).retain(i.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(e,u.default.sources.USER),this.quill.setSelection(t.index+1,u.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:b.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var n=this.quill.getLine(t.index),i=d(n,2),n=i[0],i=i[1],i=(new a.default).retain(t.index).insert("\n",e.format).retain(n.length()-i-1).retain(1,{header:null});this.quill.updateContents(i,u.default.sources.USER),this.quill.setSelection(t.index+1,u.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){var n=e.prefix.length,i=this.quill.getLine(t.index),r=d(i,2),i=r[0],r=r[1];if(n<r)return!0;var o=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",u.default.sources.USER),this.quill.history.cutoff();r=(new a.default).retain(t.index-r).delete(n+1).retain(i.length()-2-r).retain(1,{list:o});this.quill.updateContents(r,u.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,u.default.sources.SILENT)}},"code exit":{key:b.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),n=d(e,2),e=n[0],n=n[1],n=(new a.default).retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(n,u.default.sources.USER)}},"embed left":T(b.keys.LEFT,!1),"embed left shift":T(b.keys.LEFT,!0),"embed right":T(b.keys.RIGHT,!1),"embed right shift":T(b.keys.RIGHT,!0)}},e.default=b,e.SHORTKEY=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return r(t,e,n)}var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=u(n(0)),l=u(n(7));function u(t){return t&&t.__esModule?t:{default:t}}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(c,a.default.Embed),i(c,null,[{key:"value",value:function(){}}]),i(c,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,e){if(0!==this._length)return r(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"format",this).call(this,t,e);for(var n=this,i=0;null!=n&&n.statics.scope!==a.default.Scope.BLOCK_BLOT;)i+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=c.CONTENTS.length,n.optimize(),n.formatAt(i,c.CONTENTS.length,t,e),this._length=0)}},{key:"index",value:function(t,e){return t===this.textNode?0:r(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"index",this).call(this,t,e)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){r(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,e=this.selection.getNativeRange(),n=void 0,i=void 0,r=void 0;for(null!=e&&e.start.node===t&&e.end.node===t&&(e=[t,e.start.offset,e.end.offset],n=e[0],i=e[1],r=e[2]);null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==c.CONTENTS&&(o=this.textNode.data.split(c.CONTENTS).join(""),this.next instanceof l.default?(n=this.next.domNode,this.next.insertAt(0,o),this.textNode.data=c.CONTENTS):(this.textNode.data=o,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(c.CONTENTS),this.domNode.appendChild(this.textNode))),this.remove(),null!=i){var o=[i,r].map(function(t){return Math.max(0,Math.min(n.data.length,t-1))}),o=s(o,2);return i=o[0],r=o[1],{startNode:n,startOffset:i,endNode:n,endOffset:r}}}}},{key:"update",value:function(t,e){var n=this;!t.some(function(t){return"characterData"===t.type&&t.target===n.textNode})||(t=this.restore())&&(e.range=t)}},{key:"value",value:function(){return""}}]),i=c;function c(t,e){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t));return t.selection=e,t.textNode=document.createTextNode(c.CONTENTS),t.domNode.appendChild(t.textNode),t._length=0,t}i.blotName="cursor",i.className="ql-cursor",i.tagName="span",i.CONTENTS="\ufeff",e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(0)),r=n(4),n=o(r);function o(t){return t&&t.__esModule?t:{default:t}}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(s,i.default.Container),i=s;function s(){return function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}i.allowedChildren=[n.default,r.BlockEmbed,i],e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(0),l=(s=a)&&s.__esModule?s:{default:s};(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(u,l.default.Attributor.Style),i(u,[{key:"value",value:function(t){var e=o(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"value",this).call(this,t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+e.split(",").map(function(t){return("00"+parseInt(t).toString(16)).slice(-2)}).join("")):e}}]),n=u;function u(){return function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}i=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),l=new n("color","color",{scope:l.default.Scope.INLINE});e.ColorAttributor=n,e.ColorClass=i,e.ColorStyle=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.default=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(6);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(l,((s=a)&&s.__esModule?s:{default:s}).default),i(l,[{key:"format",value:function(t,e){if(t!==this.statics.blotName||!e)return o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"format",this).call(this,t,e);e=this.constructor.sanitize(e),this.domNode.setAttribute("href",e)}}],[{key:"create",value:function(t){var e=o(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this,t);return t=this.sanitize(t),e.setAttribute("href",t),e.setAttribute("target","_blank"),e}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return u(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),i=l;function l(){return function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}function u(t,e){var n=document.createElement("a");n.href=t;n=n.href.slice(0,n.href.indexOf(":"));return-1<e.indexOf(n)}i.blotName="link",i.tagName="A",i.SANITIZED_URL="about:blank",i.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e.default=i,e.sanitize=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=l(n(23)),a=l(n(107));function l(t){return t&&t.__esModule?t:{default:t}}var u=0;function c(t,e){t.setAttribute(e,!("true"===t.getAttribute(e)))}r(h,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(t){var e=this,n=document.createElement("span");return n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item"),t.hasAttribute("value")&&n.setAttribute("data-value",t.getAttribute("value")),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",function(){e.selectItem(n,!0)}),n.addEventListener("keydown",function(t){switch(t.keyCode){case s.default.keys.ENTER:e.selectItem(n,!0),t.preventDefault();break;case s.default.keys.ESCAPE:e.escape(),t.preventDefault()}}),n}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=a.default,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var n=this,i=document.createElement("span");i.classList.add("ql-picker-options"),i.setAttribute("aria-hidden","true"),i.tabIndex="-1",i.id="ql-picker-options-"+u,u+=1,this.label.setAttribute("aria-controls",i.id),this.options=i,[].slice.call(this.select.options).forEach(function(t){var e=n.buildItem(t);i.appendChild(e),!0===t.selected&&n.selectItem(e)}),this.container.appendChild(i)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var t=this;this.close(),setTimeout(function(){return t.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e,e=this.container.querySelector(".ql-selected");t!==e&&(null!=e&&e.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&("function"==typeof Event?this.select.dispatchEvent(new Event("change")):"object"===("undefined"==typeof Event?"undefined":i(Event))&&((n=document.createEvent("Event")).initEvent("change",!0,!0),this.select.dispatchEvent(n)),this.close())))}},{key:"update",value:function(){var t,e=void 0;-1<this.select.selectedIndex?(t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex],e=this.select.options[this.select.selectedIndex],this.selectItem(t)):this.selectItem(null);e=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}]),r=h;function h(t){var e=this;!function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){e.togglePicker()}),this.label.addEventListener("keydown",function(t){switch(t.keyCode){case s.default.keys.ENTER:e.togglePicker();break;case s.default.keys.ESCAPE:e.escape(),t.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=g(n(0)),r=g(n(5)),o=n(4),s=g(o),a=g(n(16)),l=g(n(25)),u=g(n(24)),c=g(n(35)),h=g(n(6)),d=g(n(22)),f=g(n(7)),p=g(n(55)),m=g(n(42)),n=g(n(23));function g(t){return t&&t.__esModule?t:{default:t}}r.default.register({"blots/block":s.default,"blots/block/embed":o.BlockEmbed,"blots/break":a.default,"blots/container":l.default,"blots/cursor":u.default,"blots/embed":c.default,"blots/inline":h.default,"blots/scroll":d.default,"blots/text":f.default,"modules/clipboard":p.default,"modules/history":m.default,"modules/keyboard":n.default}),i.default.register(s.default,a.default,u.default,h.default,d.default,f.default),e.default=r.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),n=(Object.defineProperty(i.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),i.create=function(t){if(null==this.tagName)throw new r.ParchmentError("Blot definition missing tagName");t=Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),"number"==typeof t?document.createElement(this.tagName[t-1]):-1<this.tagName.indexOf(t)?document.createElement(t):document.createElement(this.tagName[0])):document.createElement(this.tagName);return this.className&&t.classList.add(this.className),t},i.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},i.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return r.create(t)},i.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[r.DATA_KEY]},i.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},i.prototype.formatAt=function(t,e,n,i){t=this.isolate(t,e);null!=r.query(n,r.Scope.BLOT)&&i?t.wrap(n,i):null!=r.query(n,r.Scope.ATTRIBUTE)&&(e=r.create(this.statics.scope),t.wrap(e),e.format(n,i))},i.prototype.insertAt=function(t,e,n){n=null==n?r.create("text",e):r.create(e,n),t=this.split(t);this.parent.insertBefore(n,t)},i.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var n=null;t.children.insertBefore(this,e),null!=e&&(n=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==n||t.domNode.insertBefore(this.domNode,n),this.parent=t,this.attach()},i.prototype.isolate=function(t,e){t=this.split(t);return t.split(e),t},i.prototype.length=function(){return 1},i.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},i.prototype.optimize=function(t){null!=this.domNode[r.DATA_KEY]&&delete this.domNode[r.DATA_KEY].mutations},i.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},i.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},i.prototype.replaceWith=function(t,e){t="string"==typeof t?r.create(t,e):t;return t.replace(this),t},i.prototype.split=function(t,e){return 0===t?this:this.next},i.prototype.update=function(t,e){},i.prototype.wrap=function(t,e){t="string"==typeof t?r.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(t,this.next),t.appendChild(this),t},i.blotName="abstract",i);function i(t){this.domNode=t,this.domNode[r.DATA_KEY]={blot:this}}e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),o=n(32),s=n(33),a=n(1),n=(i.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},i.prototype.build=function(){var e=this;this.attributes={};var t=r.default.keys(this.domNode),n=o.default.keys(this.domNode),i=s.default.keys(this.domNode);t.concat(n).concat(i).forEach(function(t){t=a.query(t,a.Scope.ATTRIBUTE);t instanceof r.default&&(e.attributes[t.attrName]=t)})},i.prototype.copy=function(n){var i=this;Object.keys(this.attributes).forEach(function(t){var e=i.attributes[t].value(i.domNode);n.format(t,e)})},i.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach(function(t){e.attributes[t].remove(e.domNode)}),this.attributes={}},i.prototype.values=function(){var n=this;return Object.keys(this.attributes).reduce(function(t,e){return t[e]=n.attributes[e].value(n.domNode),t},{})},i);function i(t){this.attributes={},this.domNode=t,this.build()}e.default=n},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});n=n(12);function o(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(function(t){return 0===t.indexOf(e+"-")})}var s,r=(s=n.default,r(a,s),a.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},a.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},a.prototype.remove=function(e){o(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},a.prototype.value=function(t){var e=(o(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},a);function a(){return null!==s&&s.apply(this,arguments)||this}e.default=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});n=n(12);function o(t){var e=t.split("-"),t=e.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return e[0]+t}var s,r=(s=n.default,r(a,s),a.keys=function(t){return(t.getAttribute("style")||"").split(";").map(function(t){return t.split(":")[0].trim()})},a.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[o(this.keyName)]=e,!0)},a.prototype.remove=function(t){t.style[o(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},a.prototype.value=function(t){var e=t.style[o(this.keyName)];return this.canAdd(t,e)?e:""},a);function a(){return null!==s&&s.apply(this,arguments)||this}e.default=r},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(o,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),o);function o(t,e){!function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.quill=t,this.options=e,this.modules={}}r.DEFAULTS={modules:{}},r.themes={default:r},e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s=l(n(0)),a=l(n(7));function l(t){return t&&t.__esModule?t:{default:t}}var u="\ufeff",i=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,s.default.Embed),i(c,[{key:"index",value:function(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:o(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"index",this).call(this,t,e)}},{key:"restore",value:function(t){var e,n=void 0,i=void 0,r=t.data.split(u).join("");return t===this.leftGuard?n=this.prev instanceof a.default?(e=this.prev.length(),this.prev.insertAt(e,r),{startNode:this.prev.domNode,startOffset:e+r.length}):(i=document.createTextNode(r),this.parent.insertBefore(s.default.create(i),this),{startNode:i,startOffset:r.length}):t===this.rightGuard&&(n=this.next instanceof a.default?(this.next.insertAt(0,r),{startNode:this.next.domNode,startOffset:r.length}):(i=document.createTextNode(r),this.parent.insertBefore(s.default.create(i),this.next),{startNode:i,startOffset:r.length})),t.data=u,n}},{key:"update",value:function(t,e){var n=this;t.forEach(function(t){"characterData"!==t.type||t.target!==n.leftGuard&&t.target!==n.rightGuard||(t=n.restore(t.target))&&(e.range=t)})}}]),c);function c(t){!function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t));return e.contentNode=document.createElement("span"),e.contentNode.setAttribute("contenteditable",!1),[].slice.call(e.domNode.childNodes).forEach(function(t){e.contentNode.appendChild(t)}),e.leftGuard=document.createTextNode(u),e.rightGuard=document.createTextNode(u),e.domNode.appendChild(e.leftGuard),e.domNode.appendChild(e.contentNode),e.domNode.appendChild(e.rightGuard),e}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var i,r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var s={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new o.default.Attributor.Attribute("align","align",s),n=new o.default.Attributor.Class("align","ql-align",s),s=new o.default.Attributor.Style("align","text-align",s);e.AlignAttribute=a,e.AlignClass=n,e.AlignStyle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var i,r=n(0),o=(i=r)&&i.__esModule?i:{default:i},s=n(26);n=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),o=new s.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});e.BackgroundClass=n,e.BackgroundStyle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var i,r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var s={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},a=new o.default.Attributor.Attribute("direction","dir",s),n=new o.default.Attributor.Class("direction","ql-direction",s),s=new o.default.Attributor.Style("direction","direction",s);e.DirectionAttribute=a,e.DirectionClass=n,e.DirectionStyle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(0),l=(s=a)&&s.__esModule?s:{default:s};var u={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},n=new l.default.Attributor.Class("font","ql-font",u);function c(){return function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}u=new(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,l.default.Attributor.Style),i(c,[{key:"value",value:function(t){return o(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),c)("font","font-family",u);e.FontStyle=u,e.FontClass=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var i,r=n(0),o=(i=r)&&i.__esModule?i:{default:i};n=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),o=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=n,e.SizeStyle=o},function(t,e,n){"use strict";t.exports={align:{"":n(76),center:n(77),right:n(78),justify:n(79)},background:n(80),blockquote:n(81),bold:n(82),clean:n(83),code:n(58),"code-block":n(58),color:n(84),direction:{"":n(85),rtl:n(86)},float:{center:n(87),full:n(88),left:n(89),right:n(90)},formula:n(91),header:{1:n(92),2:n(93)},italic:n(94),image:n(95),indent:{"+1":n(96),"-1":n(97)},link:n(98),list:{ordered:n(99),bullet:n(100),check:n(101)},script:{sub:n(102),super:n(103)},strike:n(104),underline:n(105),video:n(106)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e.default=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=a(n(0)),s=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(l,a(n(9)).default),i(l,[{key:"change",value:function(t,e){var n;0!==this.stack[t].length&&(n=this.stack[t].pop(),this.stack[e].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[t],s.default.sources.USER),this.ignoreChange=!1,t=u(n[t]),this.quill.setSelection(t))}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){var n,i;0!==t.ops.length&&(this.stack.redo=[],i=this.quill.getContents().diff(e),n=Date.now(),this.lastRecorded+this.options.delay>n&&0<this.stack.undo.length?(e=this.stack.undo.pop(),i=i.compose(e.undo),t=e.redo.compose(t)):this.lastRecorded=n,this.stack.undo.push({redo:t,undo:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),i=l;function l(t,e){!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t,e));return r.lastRecorded=0,r.ignoreChange=!1,r.clear(),r.quill.on(s.default.events.EDITOR_CHANGE,function(t,e,n,i){t!==s.default.events.TEXT_CHANGE||r.ignoreChange||(r.options.userOnly&&i!==s.default.sources.USER?r.transform(e):r.record(e,n))}),r.quill.keyboard.addBinding({key:"Z",shortKey:!0},r.undo.bind(r)),r.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},r.redo.bind(r)),/Win/i.test(navigator.platform)&&r.quill.keyboard.addBinding({key:"Y",shortKey:!0},r.redo.bind(r)),r}function u(t){var e=t.reduce(function(t,e){return t+=e.delete||0},0),e=t.length()-e;return null!=(t=(t=t).ops[t.ops.length-1])&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some(function(t){return null!=o.default.query(t,o.default.Scope.BLOCK)}))&&--e,e}i.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e.default=i,e.getLastChangeIndex=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BaseTooltip=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s=m(n(3)),a=m(n(2)),l=m(n(8)),u=m(n(23)),c=m(n(34)),h=m(n(59)),d=m(n(60)),f=m(n(28)),p=m(n(61));function m(t){return t&&t.__esModule?t:{default:t}}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var b=[!1,"center","right","justify"],_=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],T=[!1,"serif","monospace"],w=["1","2","3",!1],S=["small",!1,"large","huge"],n=(v(k,c.default),i(k,[{key:"addModule",value:function(t){var e=o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(e),e}},{key:"buildButtons",value:function(t,i){t.forEach(function(n){(n.getAttribute("class")||"").split(/\s+/).forEach(function(t){var e;t.startsWith("ql-")&&(t=t.slice("ql-".length),null!=i[t]&&("direction"===t?n.innerHTML=i[t][""]+i[t].rtl:"string"==typeof i[t]?n.innerHTML=i[t]:null!=(e=n.value||"")&&i[t][e]&&(n.innerHTML=i[t][e])))})})}},{key:"buildPickers",value:function(t,n){var e=this;this.pickers=t.map(function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&C(t,b),new d.default(t,n.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var e=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&C(t,_,"background"==e?"#ffffff":"#000000"),new h.default(t,n[e])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?C(t,T):t.classList.contains("ql-header")?C(t,w):t.classList.contains("ql-size")&&C(t,S)),new f.default(t)});this.quill.on(l.default.events.EDITOR_CHANGE,function(){e.pickers.forEach(function(t){t.update()})})}}]),k);function k(n,t){g(this,k);var i=y(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,n,t)),t=function t(e){if(!document.body.contains(n.root))return document.body.removeEventListener("click",t);null==i.tooltip||i.tooltip.root.contains(e.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),null!=i.pickers&&i.pickers.forEach(function(t){t.container.contains(e.target)||t.close()})};return n.emitter.listenDOM("click",document.body,t),i}n.DEFAULTS=(0,s.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var n=this,i=this.container.querySelector("input.ql-image[type=file]");null==i&&((i=document.createElement("input")).setAttribute("type","file"),i.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),i.classList.add("ql-image"),i.addEventListener("change",function(){var t;null!=i.files&&null!=i.files[0]&&((t=new FileReader).onload=function(t){var e=n.quill.getSelection(!0);n.quill.updateContents((new a.default).retain(e.index).delete(e.length).insert({image:t.target.result}),l.default.sources.USER),n.quill.setSelection(e.index+1,l.default.sources.SILENT),i.value=""},t.readAsDataURL(i.files[0]))}),this.container.appendChild(i)),i.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});v(E,p.default),i(E,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){u.default.match(t,"enter")?(e.save(),t.preventDefault()):u.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(t,e){t=0<arguments.length&&void 0!==t?t:"link",e=1<arguments.length&&void 0!==e?e:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,l.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,l.default.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=function(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);if(e)return(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0";if(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))return(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/";return t}(t);case"formula":if(!t)break;e=this.quill.getSelection(!0);null!=e&&(e=e.index+e.length,this.quill.insertEmbed(e,this.root.getAttribute("data-mode"),t,l.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(e+1," ",l.default.sources.USER),this.quill.setSelection(e+2,l.default.sources.USER))}this.textbox.value="",this.hide()}}]),i=E;function E(t,e){g(this,E);e=y(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,t,e));return e.textbox=e.root.querySelector('input[type="text"]'),e.listen(),e}function C(n,t,e){var i=2<arguments.length&&void 0!==e&&e;t.forEach(function(t){var e=document.createElement("option");t===i?e.setAttribute("selected","selected"):e.setAttribute("value",t),n.appendChild(e)})}e.BaseTooltip=i,e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),1<t.length&&this.append.apply(this,t.slice(1))},r.prototype.contains=function(t){for(var e,n=this.iterator();e=n();)if(e===t)return!0;return!1},r.prototype.insertBefore=function(t,e){t&&(null!=(t.next=e)?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?((this.tail.next=t).prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},r.prototype.offset=function(t){for(var e=0,n=this.head;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1},r.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),--this.length)},r.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},r.prototype.find=function(t,e){void 0===e&&(e=!1);for(var n,i=this.iterator();n=i();){var r=n.length();if(t<r||e&&t===r&&(null==n.next||0!==n.next.length()))return[n,t];t-=r}return[null,0]},r.prototype.forEach=function(t){for(var e,n=this.iterator();e=n();)t(e)},r.prototype.forEachAt=function(t,e,n){if(!(e<=0))for(var i,r=this.find(t),o=r[0],s=t-r[1],a=this.iterator(o);(i=a())&&s<t+e;){var l=i.length();s<t?n(i,t-s,Math.min(e,s+l-t)):n(i,0,Math.min(l,t+e-s)),s+=l}},r.prototype.map=function(n){return this.reduce(function(t,e){return t.push(n(e)),t},[])},r.prototype.reduce=function(t,e){for(var n,i=this.iterator();n=i();)e=t(e,n);return e},r);function r(){this.head=this.tail=null,this.length=0}e.default=i},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var l,u=n(17),c=n(1),o={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},r=(l=u.default,r(s,l),s.prototype.detach=function(){l.prototype.detach.call(this),this.observer.disconnect()},s.prototype.deleteAt=function(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(function(t){t.remove()}):l.prototype.deleteAt.call(this,t,e)},s.prototype.formatAt=function(t,e,n,i){this.update(),l.prototype.formatAt.call(this,t,e,n,i)},s.prototype.insertAt=function(t,e,n){this.update(),l.prototype.insertAt.call(this,t,e,n)},s.prototype.optimize=function(t,e){var n=this;void 0===t&&(t=[]),void 0===e&&(e={}),l.prototype.optimize.call(this,e);for(var i=[].slice.call(this.observer.takeRecords());0<i.length;)t.push(i.pop());for(var r=function(t,e){void 0===e&&(e=!0),null!=t&&t!==n&&null!=t.domNode.parentNode&&(null==t.domNode[c.DATA_KEY].mutations&&(t.domNode[c.DATA_KEY].mutations=[]),e&&r(t.parent))},o=function(t){null!=t.domNode[c.DATA_KEY]&&null!=t.domNode[c.DATA_KEY].mutations&&(t instanceof u.default&&t.children.forEach(o),t.optimize(e))},s=t,a=0;0<s.length;a+=1){if(100<=a)throw new Error("[Parchment] Maximum optimize iterations reached");for(s.forEach(function(t){var e=c.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(r(c.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,function(t){t=c.find(t,!1);r(t,!1),t instanceof u.default&&t.children.forEach(function(t){r(t,!1)})})):"attributes"===t.type&&r(e.prev)),r(e))}),this.children.forEach(o),i=(s=[].slice.call(this.observer.takeRecords())).slice();0<i.length;)t.push(i.pop())}},s.prototype.update=function(t,e){var n=this;void 0===e&&(e={}),(t=t||this.observer.takeRecords()).map(function(t){var e=c.find(t.target,!0);return null==e?null:null==e.domNode[c.DATA_KEY].mutations?(e.domNode[c.DATA_KEY].mutations=[t],e):(e.domNode[c.DATA_KEY].mutations.push(t),null)}).forEach(function(t){null!=t&&t!==n&&null!=t.domNode[c.DATA_KEY]&&t.update(t.domNode[c.DATA_KEY].mutations||[],e)}),null!=this.domNode[c.DATA_KEY].mutations&&l.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,e),this.optimize(t,e)},s.blotName="scroll",s.defaultChild="block",s.scope=c.Scope.BLOCK_BLOT,s.tagName="DIV",s);function s(t){var e=l.call(this,t)||this;return(e.scroll=e).observer=new MutationObserver(function(t){e.update(t)}),e.observer.observe(e.domNode,o),e.attach(),e}e.default=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),s=n(1);var a,r=(a=o.default,r(l,a),l.formats=function(t){if(t.tagName!==l.tagName)return a.formats.call(this,t)},l.prototype.format=function(t,e){var n=this;t!==this.statics.blotName||e?a.prototype.format.call(this,t,e):(this.children.forEach(function(t){t instanceof o.default||(t=t.wrap(l.blotName,!0)),n.attributes.copy(t)}),this.unwrap())},l.prototype.formatAt=function(t,e,n,i){null!=this.formats()[n]||s.query(n,s.Scope.ATTRIBUTE)?this.isolate(t,e).format(n,i):a.prototype.formatAt.call(this,t,e,n,i)},l.prototype.optimize=function(t){a.prototype.optimize.call(this,t);var e=this.formats();if(0===Object.keys(e).length)return this.unwrap();t=this.next;t instanceof l&&t.prev===this&&function(t,e){if(Object.keys(t).length===Object.keys(e).length){for(var n in t)if(t[n]!==e[n])return;return 1}}(e,t.formats())&&(t.moveChildren(this),t.remove())},l.blotName="inline",l.scope=s.Scope.INLINE_BLOT,l.tagName="SPAN",l);function l(){return null!==a&&a.apply(this,arguments)||this}e.default=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(18),a=n(1),r=(o=s.default,r(l,o),l.formats=function(t){var e=a.query(l.blotName).tagName;if(t.tagName!==e)return o.formats.call(this,t)},l.prototype.format=function(t,e){null==a.query(t,a.Scope.BLOCK)||(t!==this.statics.blotName||e?o.prototype.format.call(this,t,e):this.replaceWith(l.blotName))},l.prototype.formatAt=function(t,e,n,i){null!=a.query(n,a.Scope.BLOCK)?this.format(n,i):o.prototype.formatAt.call(this,t,e,n,i)},l.prototype.insertAt=function(t,e,n){null==n||null!=a.query(e,a.Scope.INLINE)?o.prototype.insertAt.call(this,t,e,n):(t=this.split(t),n=a.create(e,n),t.parent.insertBefore(n,t))},l.prototype.update=function(t,e){navigator.userAgent.match(/Trident/)?this.build():o.prototype.update.call(this,t,e)},l.blotName="block",l.scope=a.Scope.BLOCK_BLOT,l.tagName="P",l);function l(){return null!==o&&o.apply(this,arguments)||this}e.default=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,n=n(19),r=(o=n.default,r(s,o),s.formats=function(t){},s.prototype.format=function(t,e){o.prototype.formatAt.call(this,0,this.length(),t,e)},s.prototype.formatAt=function(t,e,n,i){0===t&&e===this.length()?this.format(n,i):o.prototype.formatAt.call(this,t,e,n,i)},s.prototype.formats=function(){return this.statics.formats(this.domNode)},s);function s(){return null!==o&&o.apply(this,arguments)||this}e.default=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(19),a=n(1),r=(o=s.default,r(l,o),l.create=function(t){return document.createTextNode(t)},l.value=function(t){t=t.data;return t.normalize&&(t=t.normalize()),t},l.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},l.prototype.index=function(t,e){return this.domNode===t?e:-1},l.prototype.insertAt=function(t,e,n){null==n?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):o.prototype.insertAt.call(this,t,e,n)},l.prototype.length=function(){return this.text.length},l.prototype.optimize=function(t){o.prototype.optimize.call(this,t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof l&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},l.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},l.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}t=a.create(this.domNode.splitText(t));return this.parent.insertBefore(t,this.next),this.text=this.statics.value(this.domNode),t},l.prototype.update=function(t,e){var n=this;t.some(function(t){return"characterData"===t.type&&t.target===n.domNode})&&(this.text=this.statics.value(this.domNode))},l.prototype.value=function(){return this.text},l.blotName="text",l.scope=a.Scope.INLINE_BLOT,l);function l(t){t=o.call(this,t)||this;return t.text=t.statics.value(t.domNode),t}e.default=r},function(t,e,n){"use strict";var i,r=document.createElement("div");r.classList.toggle("test-class",!1),r.classList.contains("test-class")&&(i=DOMTokenList.prototype.toggle,DOMTokenList.prototype.toggle=function(t,e){return 1<arguments.length&&!this.contains(t)==!e?e:i.call(this,t)}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;t=n.indexOf(t,e);return-1!==t&&t===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;o<i;o++)if(e=n[o],t.call(r,e,o,n))return e}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,e){var E=-1,C=1,u=0;function a(t,e,n){if(t==e)return t?[[u,t]]:[];(n<0||t.length<n)&&(n=null);var i=d(t,e),r=t.substring(0,i),i=f(t=t.substring(i),e=e.substring(i)),o=t.substring(t.length-i),e=function(t,e){if(!t)return[[C,e]];if(!e)return[[E,t]];var n=t.length>e.length?t:e,i=t.length>e.length?e:t,r=n.indexOf(i);if(-1!=r)return s=[[C,n.substring(0,r)],[u,i],[C,n.substring(r+i.length)]],t.length>e.length&&(s[0][0]=s[2][0]=E),s;if(1==i.length)return[[E,t],[C,e]];var o=function(t,e){var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;function r(t,e,n){for(var i,r,o,s,a=t.substring(n,n+Math.floor(t.length/4)),l=-1,u="";-1!=(l=e.indexOf(a,l+1));){var c=d(t.substring(n),e.substring(l)),h=f(t.substring(0,n),e.substring(0,l));u.length<h+c&&(u=e.substring(l-h,l)+e.substring(l,l+c),i=t.substring(0,n-h),r=t.substring(n+c),o=e.substring(0,l-h),s=e.substring(l+c))}return 2*u.length>=t.length?[i,r,o,s,u]:null}var o,s,a,l,u=r(n,i,Math.ceil(n.length/4)),n=r(n,i,Math.ceil(n.length/2));{if(!u&&!n)return null;n=!n||u&&u[4].length>n[4].length?u:n}t.length>e.length?(o=n[0],s=n[1],a=n[2],l=n[3]):(a=n[0],l=n[1],o=n[2],s=n[3]);n=n[4];return[o,s,a,l,n]}(t,e);if(o){var n=o[0],r=o[1],s=o[2],i=o[3],o=o[4],s=a(n,s),i=a(r,i);return s.concat([[u,o]],i)}return function(t,e){for(var n=t.length,i=e.length,r=Math.ceil((n+i)/2),o=r,s=2*r,a=new Array(s),l=new Array(s),u=0;u<s;u++)a[u]=-1,l[u]=-1;a[o+1]=0,l[o+1]=0;for(var c=n-i,h=c%2!=0,d=0,f=0,p=0,m=0,g=0;g<r;g++){for(var y=-g+d;y<=g-f;y+=2){for(var v=o+y,b=(k=y==-g||y!=g&&a[v-1]<a[v+1]?a[v+1]:a[v-1]+1)-y;k<n&&b<i&&t.charAt(k)==e.charAt(b);)k++,b++;if(a[v]=k,n<k)f+=2;else if(i<b)d+=2;else if(h){var _,T=o+c-y;if(0<=T&&T<s&&-1!=l[T])if((_=n-l[T])<=k)return x(t,e,k,b)}}for(var w=-g+p;w<=g-m;w+=2){for(var T=o+w,S=(_=w==-g||w!=g&&l[T-1]<l[T+1]?l[T+1]:l[T-1]+1)-w;_<n&&S<i&&t.charAt(n-_-1)==e.charAt(i-S-1);)_++,S++;if(l[T]=_,n<_)m+=2;else if(i<S)p+=2;else if(!h)if(0<=(v=o+c-w)&&v<s&&-1!=a[v]){var k=a[v],b=o+k-v;if((_=n-_)<=k)return x(t,e,k,b)}}}return[[E,t],[C,e]]}(t,e)}(t=t.substring(0,t.length-i),e=e.substring(0,e.length-i));return r&&e.unshift([u,r]),o&&e.push([u,o]),function t(e){e.push([u,""]);var n=0;var i=0;var r=0;var o="";var s="";var a;for(;n<e.length;)switch(e[n][0]){case C:r++,s+=e[n][1],n++;break;case E:i++,o+=e[n][1],n++;break;case u:1<i+r?(0!==i&&0!==r&&(0!==(a=d(s,o))&&(0<n-i-r&&e[n-i-r-1][0]==u?e[n-i-r-1][1]+=s.substring(0,a):(e.splice(0,0,[u,s.substring(0,a)]),n++),s=s.substring(a),o=o.substring(a)),0!==(a=f(s,o))&&(e[n][1]=s.substring(s.length-a)+e[n][1],s=s.substring(0,s.length-a),o=o.substring(0,o.length-a))),0===i?e.splice(n-r,i+r,[C,s]):0===r?e.splice(n-i,i+r,[E,o]):e.splice(n-i-r,i+r,[E,o],[C,s]),n=n-i-r+(i?1:0)+(r?1:0)+1):0!==n&&e[n-1][0]==u?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=r=0,s=o=""}""===e[e.length-1][1]&&e.pop();var l=!1;n=1;for(;n<e.length-1;)e[n-1][0]==u&&e[n+1][0]==u&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&t(e)}(e),null!=n&&(e=function(t,e){var n=function(t,e){if(0===e)return[u,t];for(var n=0,i=0;i<t.length;i++){var r=t[i];if(r[0]===E||r[0]===u){var o=n+r[1].length;if(e===o)return[i+1,t];if(e<o){t=t.slice();var s=e-n,a=[r[0],r[1].slice(0,s)],s=[r[0],r[1].slice(s)];return t.splice(i,1,a,s),[i+1,t]}n=o}}throw new Error("cursor_pos is out of bounds!")}(t,e),i=n[1],r=n[0],e=i[r],n=i[r+1];{if(null==e)return t;if(e[0]!==u)return t;if(null!=n&&e[1]+n[1]===n[1]+e[1])return i.splice(r,2,n,e),s(i,r,2);if(null==n||0!==n[1].indexOf(e[1]))return t;i.splice(r,2,[n[0],e[1]],[0,e[1]]);e=n[1].slice(e[1].length);return 0<e.length&&i.splice(r+2,0,[n[0],e]),s(i,r,3)}}(e,n)),e=function(t){function e(t){return 56320<=t.charCodeAt(0)&&t.charCodeAt(0)<=57343}for(var n=!1,i=2;i<t.length;i+=1)t[i-2][0]===u&&function(t){return 55296<=t.charCodeAt(t.length-1)&&t.charCodeAt(t.length-1)<=56319}(t[i-2][1])&&t[i-1][0]===E&&e(t[i-1][1])&&t[i][0]===C&&e(t[i][1])&&(n=!0,t[i-1][1]=t[i-2][1].slice(-1)+t[i-1][1],t[i][1]=t[i-2][1].slice(-1)+t[i][1],t[i-2][1]=t[i-2][1].slice(0,-1));if(!n)return t;for(var r=[],i=0;i<t.length;i+=1)0<t[i][1].length&&r.push(t[i]);return r}(e)}function x(t,e,n,i){var r=t.substring(0,n),o=e.substring(0,i),n=t.substring(n),i=e.substring(i),o=a(r,o),i=a(n,i);return o.concat(i)}function d(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function f(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}var n=a;function s(t,e,n){for(var i,r,o=e+n-1;0<=o&&e-1<=o;o--)o+1<t.length&&(i=t[o],r=t[o+1],i[0]===r[1]&&t.splice(o,2,[i[0],i[1]+r[1]]));return t}n.INSERT=C,n.DELETE=E,n.EQUAL=u,t.exports=n},function(t,e){function n(t){var e,n=[];for(e in t)n.push(e);return n}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?i:r).supported=i,e.unsupported=r},function(t,e){"use strict";var i=Object.prototype.hasOwnProperty,f="~";function l(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function n(){this._events=new l,this._eventsCount=0}Object.create&&(l.prototype=Object.create(null),(new l).__proto__||(f=!1)),n.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)i.call(t,e)&&n.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},n.prototype.listeners=function(t,e){var t=f?f+t:t,n=this._events[t];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,o=new Array(r);i<r;i++)o[i]=n[i].fn;return o},n.prototype.emit=function(t,e,n,i,r,o){var s=f?f+t:t;if(!this._events[s])return!1;var a,l=this._events[s],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,i),!0;case 5:return l.fn.call(l.context,e,n,i,r),!0;case 6:return l.fn.call(l.context,e,n,i,r,o),!0}for(d=1,a=new Array(u-1);d<u;d++)a[d-1]=arguments[d];l.fn.apply(l.context,a)}else for(var c,h=l.length,d=0;d<h;d++)switch(l[d].once&&this.removeListener(t,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,e);break;case 3:l[d].fn.call(l[d].context,e,n);break;case 4:l[d].fn.call(l[d].context,e,n,i);break;default:if(!a)for(c=1,a=new Array(u-1);c<u;c++)a[c-1]=arguments[c];l[d].fn.apply(l[d].context,a)}return!0},n.prototype.on=function(t,e,n){n=new r(e,n||this),t=f?f+t:t;return this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],n]:this._events[t].push(n):(this._events[t]=n,this._eventsCount++),this},n.prototype.once=function(t,e,n){n=new r(e,n||this,!0),t=f?f+t:t;return this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],n]:this._events[t].push(n):(this._events[t]=n,this._eventsCount++),this},n.prototype.removeListener=function(t,e,n,i){t=f?f+t:t;if(!this._events[t])return this;if(!e)return 0==--this._eventsCount?this._events=new l:delete this._events[t],this;var r=this._events[t];if(r.fn)r.fn!==e||i&&!r.once||n&&r.context!==n||(0==--this._eventsCount?this._events=new l:delete this._events[t]);else{for(var o=0,s=[],a=r.length;o<a;o++)(r[o].fn!==e||i&&!r[o].once||n&&r[o].context!==n)&&s.push(r[o]);s.length?this._events[t]=1===s.length?s[0]:s:0==--this._eventsCount?this._events=new l:delete this._events[t]}return this},n.prototype.removeAllListeners=function(t){return t?(t=f?f+t:t,this._events[t]&&(0==--this._eventsCount?this._events=new l:delete this._events[t])):(this._events=new l,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=f,n.EventEmitter=n,void 0!==t&&(t.exports=n)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=b(n(3)),l=b(n(2)),u=b(n(0)),c=b(n(5)),h=b(n(10)),d=b(n(9)),f=n(36),p=n(37),m=b(n(13)),g=n(26),y=n(38),v=n(39),n=n(40);function b(t){return t&&t.__esModule?t:{default:t}}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=(0,h.default)("quill:clipboard"),w="__ql-matcher",S=[[Node.TEXT_NODE,M],[Node.TEXT_NODE,I],["br",function(t,e){O(e,"\n")||e.insert("\n");return e}],[Node.ELEMENT_NODE,I],[Node.ELEMENT_NODE,N],[Node.ELEMENT_NODE,j],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,function(t,e){var n={},i=t.style||{};i.fontStyle&&"italic"===A(t).fontStyle&&(n.italic=!0);i.fontWeight&&(A(t).fontWeight.startsWith("bold")||700<=parseInt(A(t).fontWeight))&&(n.bold=!0);0<Object.keys(n).length&&(e=x(e,n));0<parseFloat(i.textIndent||0)&&(e=(new l.default).insert("\t").concat(e));return e}],["li",function(t,e){var n=u.default.query(t);if(null==n||"list-item"!==n.blotName||!O(e,"\n"))return e;var i=-1,r=t.parentNode;for(;!r.classList.contains("ql-clipboard");)"list"===(u.default.query(r)||{}).blotName&&(i+=1),r=r.parentNode;return i<=0?e:e.compose((new l.default).retain(e.length()-1).retain(1,{indent:i}))}],["b",P.bind(P,"bold")],["i",P.bind(P,"italic")],["style",function(){return new l.default}]],k=[f.AlignAttribute,y.DirectionAttribute].reduce(function(t,e){return t[e.keyName]=e,t},{}),E=[f.AlignStyle,p.BackgroundStyle,g.ColorStyle,y.DirectionStyle,v.FontStyle,n.SizeStyle].reduce(function(t,e){return t[e.keyName]=e,t},{}),i=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(C,d.default),i(C,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[m.default.blotName]){var e=this.container.innerText;return this.container.innerHTML="",(new l.default).insert(e,_({},m.default.blotName,t[m.default.blotName]))}e=this.prepareMatching(),t=s(e,2),e=t[0],t=t[1],t=function i(r,o,s){return r.nodeType===r.TEXT_NODE?s.reduce(function(t,e){return e(r,t)},new l.default):r.nodeType===r.ELEMENT_NODE?[].reduce.call(r.childNodes||[],function(t,n){var e=i(n,o,s);return n.nodeType===r.ELEMENT_NODE&&(e=o.reduce(function(t,e){return e(n,t)},e),e=(n[w]||[]).reduce(function(t,e){return e(n,t)},e)),t.concat(e)},new l.default):new l.default}(this.container,e,t);return O(t,"\n")&&null==t.ops[t.ops.length-1].attributes&&(t=t.compose((new l.default).retain(t.length()-1).delete(1))),T.log("convert",this.container.innerHTML,t),this.container.innerHTML="",t}},{key:"dangerouslyPasteHTML",value:function(t,e,n){n=2<arguments.length&&void 0!==n?n:c.default.sources.API;"string"==typeof t?(this.quill.setContents(this.convert(t),e),this.quill.setSelection(0,c.default.sources.SILENT)):(e=this.convert(e),this.quill.updateContents((new l.default).retain(t).concat(e),n),this.quill.setSelection(t+e.length(),c.default.sources.SILENT))}},{key:"onPaste",value:function(t){var e,n,i,r=this;!t.defaultPrevented&&this.quill.isEnabled()&&(e=this.quill.getSelection(),n=(new l.default).retain(e.index),i=this.quill.scrollingContainer.scrollTop,this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){n=n.concat(r.convert()).delete(e.length),r.quill.updateContents(n,c.default.sources.USER),r.quill.setSelection(n.length()-e.length,c.default.sources.SILENT),r.quill.scrollingContainer.scrollTop=i,r.quill.focus()},1))}},{key:"prepareMatching",value:function(){var i=this,r=[],o=[];return this.matchers.forEach(function(t){var t=s(t,2),e=t[0],n=t[1];switch(e){case Node.TEXT_NODE:o.push(n);break;case Node.ELEMENT_NODE:r.push(n);break;default:[].forEach.call(i.container.querySelectorAll(e),function(t){t[w]=t[w]||[],t[w].push(n)})}}),[r,o]}}]),C);function C(t,n){!function(t){if(!(t instanceof C))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,t,n));return i.quill.root.addEventListener("paste",i.onPaste.bind(i)),i.container=i.quill.addContainer("ql-clipboard"),i.container.setAttribute("contenteditable",!0),i.container.setAttribute("tabindex",-1),i.matchers=[],S.concat(i.options.matchers).forEach(function(t){var e=s(t,2),t=e[0],e=e[1];!n.matchVisual&&e===j||i.addMatcher(t,e)}),i}function x(t,n,i){return"object"===(void 0===n?"undefined":r(n))?Object.keys(n).reduce(function(t,e){return x(t,e,n[e])},t):t.reduce(function(t,e){return e.attributes&&e.attributes[n]?t.push(e):t.insert(e.insert,(0,a.default)({},_({},n,i),e.attributes))},new l.default)}function A(t){if(t.nodeType!==Node.ELEMENT_NODE)return{};var e="__ql-computed-style";return t[e]||(t[e]=window.getComputedStyle(t))}function O(t,e){for(var n="",i=t.ops.length-1;0<=i&&n.length<e.length;--i){var r=t.ops[i];if("string"!=typeof r.insert)break;n=r.insert+n}return n.slice(-1*e.length)===e}function L(t){if(0!==t.childNodes.length){t=A(t);return-1<["block","list-item"].indexOf(t.display)}}function P(t,e,n){return x(n,t,!0)}function D(n,t){var e=u.default.Attributor.Attribute.keys(n),i=u.default.Attributor.Class.keys(n),r=u.default.Attributor.Style.keys(n),o={};return e.concat(i).concat(r).forEach(function(t){var e=u.default.query(t,u.default.Scope.ATTRIBUTE);null!=e&&(o[e.attrName]=e.value(n),o[e.attrName])||(null==(e=k[t])||e.attrName!==t&&e.keyName!==t||(o[e.attrName]=e.value(n)||void 0),null==(e=E[t])||e.attrName!==t&&e.keyName!==t||(e=E[t],o[e.attrName]=e.value(n)||void 0))}),0<Object.keys(o).length&&(t=x(t,o)),t}function N(t,e){var n,i,r=u.default.query(t);return null==r||(r.prototype instanceof u.default.Embed?(n={},null!=(i=r.value(t))&&(n[r.blotName]=i,e=(new l.default).insert(n,r.formats(t)))):"function"==typeof r.formats&&(e=x(e,r.blotName,r.formats(t)))),e}function I(t,e){return O(e,"\n")||(L(t)||0<e.length()&&t.nextSibling&&L(t.nextSibling))&&e.insert("\n"),e}function j(t,e){var n;return L(t)&&null!=t.nextElementSibling&&!O(e,"\n\n")&&(n=t.offsetHeight+parseFloat(A(t).marginTop)+parseFloat(A(t).marginBottom),t.nextElementSibling.offsetTop>t.offsetTop+1.5*n&&e.insert("\n")),e}function M(t,e){var n,i=t.data;return"O:P"===t.parentNode.tagName?e.insert(i.trim()):0===i.trim().length&&t.parentNode.classList.contains("ql-clipboard")?e:(A(t.parentNode).whiteSpace.startsWith("pre")||(n=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e},i=(i=i.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==t.previousSibling&&L(t.parentNode)||null!=t.previousSibling&&L(t.previousSibling))&&(i=i.replace(/^\s+/,n.bind(n,!1))),(null==t.nextSibling&&L(t.parentNode)||null!=t.nextSibling&&L(t.nextSibling))&&(i=i.replace(/\s+$/,n.bind(n,!1)))),e.insert(i))}i.DEFAULTS={matchers:[],matchVisual:!0},e.default=i,e.matchAttributor=D,e.matchBlot=N,e.matchNewline=I,e.matchSpacing=j,e.matchText=M},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(6);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(l,((s=a)&&s.__esModule?s:{default:s}).default),i(l,[{key:"optimize",value:function(t){o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),i=l;function l(){return function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}i.blotName="bold",i.tagName=["STRONG","B"],e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e.default=void 0;var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=s(n(2)),c=s(n(0)),h=s(n(5)),o=s(n(10)),n=s(n(9));function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var d=(0,o.default)("quill:toolbar"),i=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,n.default),i(f,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(o){var s=this,a=[].find.call(o.classList,function(t){return 0===t.indexOf("ql-")});if(a){if(a=a.slice("ql-".length),"BUTTON"===o.tagName&&o.setAttribute("type","button"),null==this.handlers[a]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[a])return void d.warn("ignoring attaching to disabled format",a,o);if(null==c.default.query(a))return void d.warn("ignoring attaching to nonexistent format",a,o)}var t="SELECT"===o.tagName?"change":"click";o.addEventListener(t,function(t){var e=void 0;if("SELECT"===o.tagName){if(o.selectedIndex<0)return;var n=o.options[o.selectedIndex],e=!n.hasAttribute("selected")&&n.value||!1}else e=!o.classList.contains("ql-active")&&(o.value||!o.hasAttribute("value")),t.preventDefault();s.quill.focus();var i=s.quill.selection.getRange(),r=l(i,1)[0];if(null!=s.handlers[a])s.handlers[a].call(s,e);else if(c.default.query(a).prototype instanceof c.default.Embed){if(!(e=prompt("Enter "+a)))return;s.quill.updateContents((new u.default).retain(r.index).delete(r.length).insert((n=e,(t=a)in(i={})?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i)),h.default.sources.USER)}else s.quill.format(a,e,h.default.sources.USER);s.update(r)}),this.controls.push([a,o])}}},{key:"update",value:function(r){var o=null==r?{}:this.quill.getFormat(r);this.controls.forEach(function(t){var e,n=l(t,2),i=n[0],t=n[1];"SELECT"===t.tagName?(e=void 0,null==r?e=null:null==o[i]?e=t.querySelector("option[selected]"):Array.isArray(o[i])||("string"==typeof(n=o[i])&&(n=n.replace(/\"/g,'\\"')),e=t.querySelector('option[value="'+n+'"]')),null==e?(t.value="",t.selectedIndex=-1):e.selected=!0):null==r?t.classList.remove("ql-active"):t.hasAttribute("value")?(e=o[i]===t.getAttribute("value")||null!=o[i]&&o[i].toString()===t.getAttribute("value")||null==o[i]&&!t.getAttribute("value"),t.classList.toggle("ql-active",e)):t.classList.toggle("ql-active",null!=o[i])})}}]),f);function f(t,e){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this);var n=a(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,t,e));if(Array.isArray(n.options.container)?(m(i=document.createElement("div"),n.options.container),t.container.parentNode.insertBefore(i,t.container),n.container=i):"string"==typeof n.options.container?n.container=document.querySelector(n.options.container):n.container=n.options.container,n.container instanceof HTMLElement)return n.container.classList.add("ql-toolbar"),n.controls=[],n.handlers={},Object.keys(n.options.handlers).forEach(function(t){n.addHandler(t,n.options.handlers[t])}),[].forEach.call(n.container.querySelectorAll("button, select"),function(t){n.attach(t)}),n.quill.on(h.default.events.EDITOR_CHANGE,function(t,e){t===h.default.events.SELECTION_CHANGE&&n.update(e)}),n.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){var t=n.quill.selection.getRange(),t=l(t,1)[0];n.update(t)}),n;var i=d.error("Container required for toolbar",n.options);return a(n,i)}function p(t,e,n){var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("ql-"+e),null!=n&&(i.value=n),t.appendChild(i)}function m(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var s=document.createElement("span");s.classList.add("ql-formats"),t.forEach(function(t){var e,n,i,r,o;"string"==typeof t?p(s,t):(n=t[e=Object.keys(t)[0]],Array.isArray(n)?(i=s,r=e,t=n,(o=document.createElement("select")).classList.add("ql-"+r),t.forEach(function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),o.appendChild(e)}),i.appendChild(o)):p(s,e,n))}),e.appendChild(s)})}i.DEFAULTS={},i.DEFAULTS={container:null,handlers:{clean:function(){var t,e=this,n=this.quill.getSelection();null!=n&&(0==n.length?(t=this.quill.getFormat(),Object.keys(t).forEach(function(t){null!=c.default.query(t,c.default.Scope.INLINE)&&e.quill.format(t,!1)})):this.quill.removeFormat(n,h.default.sources.USER))},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",h.default.sources.USER):t||"right"!==e||this.quill.format("align",!1,h.default.sources.USER),this.quill.format("direction",t,h.default.sources.USER)},indent:function(t){var e=this.quill.getSelection(),e=this.quill.getFormat(e),n=parseInt(e.indent||0);"+1"!==t&&"-1"!==t||(t="+1"===t?1:-1,"rtl"===e.direction&&(t*=-1),this.quill.format("indent",n+t,h.default.sources.USER))},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,h.default.sources.USER)},list:function(t){var e=this.quill.getSelection(),e=this.quill.getFormat(e);"check"===t?"checked"===e.list||"unchecked"===e.list?this.quill.format("list",!1,h.default.sources.USER):this.quill.format("list","unchecked",h.default.sources.USER):this.quill.format("list",t,h.default.sources.USER)}}},e.default=i,e.addControls=m},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(28);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(l,((s=a)&&s.__esModule?s:{default:s}).default),i(l,[{key:"buildItem",value:function(t){var e=o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"buildItem",this).call(this,t);return e.style.backgroundColor=t.getAttribute("value")||"",e}},{key:"selectItem",value:function(t,e){o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"selectItem",this).call(this,t,e);e=this.label.querySelector(".ql-color-label"),t=t&&t.getAttribute("data-value")||"";e&&("line"===e.tagName?e.style.stroke=t:e.style.fill=t)}}]),i=l;function l(t,e){!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t));return t.label.innerHTML=e,t.container.classList.add("ql-color-picker"),[].slice.call(t.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(t){t.classList.add("ql-primary")}),t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(28);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(l,((s=a)&&s.__esModule?s:{default:s}).default),i(l,[{key:"selectItem",value:function(t,e){o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"selectItem",this).call(this,t,e),t=t||this.defaultItem,this.label.innerHTML=t.innerHTML}}]),i=l;function l(t,e){!function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t));return t.container.classList.add("ql-icon-picker"),[].forEach.call(t.container.querySelectorAll(".ql-picker-item"),function(t){t.innerHTML=e[t.getAttribute("data-value")||""]}),t.defaultItem=t.container.querySelector(".ql-selected"),t.selectItem(t.defaultItem),t}e.default=i},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0});var r=(function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(o,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect(),o=0;return r.right>i.right&&(o=i.right-r.right,this.root.style.left=e+o+"px"),r.left<i.left&&(o=i.left-r.left,this.root.style.left=e+o+"px"),r.bottom>i.bottom&&(r=r.bottom-r.top,r=t.bottom-t.top+r,this.root.style.top=n-r+"px",this.root.classList.add("ql-flip")),o}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),o);function o(t,e){var n=this;!function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"}),this.hide()}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=p(n(3)),l=p(n(8)),u=n(43),c=p(u),h=p(n(27)),d=n(15),f=p(n(41));function p(t){return t&&t.__esModule?t:{default:t}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var v=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],n=(y(b,c.default),i(b,[{key:"extendToolbar",value:function(n){n.container.classList.add("ql-snow"),this.buildButtons([].slice.call(n.container.querySelectorAll("button")),f.default),this.buildPickers([].slice.call(n.container.querySelectorAll("select")),f.default),this.tooltip=new _(this.quill,this.options.bounds),n.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,e){n.handlers.link.call(n,!e.format.link)})}}]),b);function b(t,e){m(this,b),null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=v);e=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,t,e));return e.quill.container.classList.add("ql-snow"),e}n.DEFAULTS=(0,a.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?null!=(t=this.quill.getSelection())&&0!=t.length&&(t=this.quill.getText(t),/^\S+@\S+\.\S+$/.test(t)&&0!==t.indexOf("mailto:")&&(t="mailto:"+t),this.quill.theme.tooltip.edit("link",t)):this.quill.format("link",!1)}}}}});var _=(y(T,u.BaseTooltip),i(T,[{key:"listen",value:function(){var r=this;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){r.root.classList.contains("ql-editing")?r.save():r.edit("link",r.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){var e;null!=r.linkRange&&(e=r.linkRange,r.restoreFocus(),r.quill.formatText(e,"link",!1,l.default.sources.USER),delete r.linkRange),t.preventDefault(),r.hide()}),this.quill.on(l.default.events.SELECTION_CHANGE,function(t,e,n){if(null!=t){if(0===t.length&&n===l.default.sources.USER){var i=r.quill.scroll.descendant(h.default,t.index),n=s(i,2),i=n[0],n=n[1];if(null!=i){r.linkRange=new d.Range(t.index-n,i.length());i=h.default.formats(i.domNode);return r.preview.textContent=i,r.preview.setAttribute("href",i),r.show(),void r.position(r.quill.getBounds(r.linkRange))}}else delete r.linkRange;r.hide()}})}},{key:"show",value:function(){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),T);function T(t,e){m(this,T);e=g(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,t,e));return e.preview=e.root.querySelector("a.ql-preview"),e}_.TEMPLATE=['<a class="ql-preview" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=I(n(29)),r=n(36),o=n(38),s=n(64),a=I(n(65)),l=I(n(66)),u=n(67),c=I(u),h=n(37),d=n(26),f=n(39),p=n(40),m=I(n(56)),g=I(n(68)),y=I(n(27)),v=I(n(69)),b=I(n(70)),_=I(n(71)),T=I(n(72)),w=I(n(73)),S=n(13),k=I(S),E=I(n(74)),C=I(n(75)),x=I(n(57)),A=I(n(41)),O=I(n(28)),L=I(n(59)),P=I(n(60)),D=I(n(61)),N=I(n(108)),n=I(n(62));function I(t){return t&&t.__esModule?t:{default:t}}i.default.register({"attributors/attribute/direction":o.DirectionAttribute,"attributors/class/align":r.AlignClass,"attributors/class/background":h.BackgroundClass,"attributors/class/color":d.ColorClass,"attributors/class/direction":o.DirectionClass,"attributors/class/font":f.FontClass,"attributors/class/size":p.SizeClass,"attributors/style/align":r.AlignStyle,"attributors/style/background":h.BackgroundStyle,"attributors/style/color":d.ColorStyle,"attributors/style/direction":o.DirectionStyle,"attributors/style/font":f.FontStyle,"attributors/style/size":p.SizeStyle},!0),i.default.register({"formats/align":r.AlignClass,"formats/direction":o.DirectionClass,"formats/indent":s.IndentClass,"formats/background":h.BackgroundStyle,"formats/color":d.ColorStyle,"formats/font":f.FontClass,"formats/size":p.SizeClass,"formats/blockquote":a.default,"formats/code-block":k.default,"formats/header":l.default,"formats/list":c.default,"formats/bold":m.default,"formats/code":S.Code,"formats/italic":g.default,"formats/link":y.default,"formats/script":v.default,"formats/strike":b.default,"formats/underline":_.default,"formats/image":T.default,"formats/video":w.default,"formats/list/item":u.ListItem,"modules/formula":E.default,"modules/syntax":C.default,"modules/toolbar":x.default,"themes/bubble":N.default,"themes/snow":n.default,"ui/icons":A.default,"ui/picker":O.default,"ui/icon-picker":P.default,"ui/color-picker":L.default,"ui/tooltip":D.default},!0),e.default=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(0),n=(s=a)&&s.__esModule?s:{default:s};function l(){return function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}n=new(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n.default.Attributor.Class),i(l,[{key:"add",value:function(t,e){var n;return"+1"!==e&&"-1"!==e||(n=this.value(t)||0,e="+1"===e?n+1:n-1),0===e?(this.remove(t),!0):o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"add",this).call(this,t,e)}},{key:"canAdd",value:function(t,e){return o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"canAdd",this).call(this,t,e)||o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"canAdd",this).call(this,t,parseInt(e))}},{key:"value",value:function(t){return parseInt(o(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"value",this).call(this,t))||void 0}}]),l)("indent","ql-indent",{scope:n.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(4);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(o,((i=r)&&i.__esModule?i:{default:i}).default),n=o;function o(){return function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}n.blotName="blockquote",n.tagName="blockquote",e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o,s=n(4);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(a,((o=s)&&o.__esModule?o:{default:o}).default),i(a,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),i=a;function a(){return function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}i.blotName="header",i.tagName=["H1","H2","H3","H4","H5","H6"],e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ListItem=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s=l(n(0)),a=l(n(4)),n=l(n(25));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=(h(f,a.default),i(f,[{key:"format",value:function(t,e){t!==p.blotName||e?o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"format",this).call(this,t,e):this.replaceWith(s.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,e){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,e),this):(this.parent.unwrap(),o(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"replaceWith",this).call(this,t,e))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:o(f.__proto__||Object.getPrototypeOf(f),"formats",this).call(this,t)}}]),f);function f(){return u(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}d.blotName="list-item",d.tagName="LI";var p=(h(m,n.default),i(m,null,[{key:"create",value:function(t){var e="ordered"===t?"OL":"UL",e=o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,e);return"checked"!==t&&"unchecked"!==t||e.setAttribute("data-checked","checked"===t),e}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),i(m,[{key:"format",value:function(t,e){0<this.children.length&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return t={},e=this.statics.blotName,n=this.statics.formats(this.domNode),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t;var t,e,n}},{key:"insertBefore",value:function(t,e){t instanceof d?o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"insertBefore",this).call(this,t,e):(e=null==e?this.length():e.offset(this),(e=this.split(e)).parent.insertBefore(t,e))}},{key:"optimize",value:function(t){o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,t);t=this.next;null!=t&&t.prev===this&&t.statics.blotName===this.statics.blotName&&t.domNode.tagName===this.domNode.tagName&&t.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(t.moveChildren(this),t.remove())}},{key:"replace",value:function(t){var e;t.statics.blotName!==this.statics.blotName&&(e=s.default.create(this.statics.defaultChild),t.moveChildren(e),this.appendChild(e)),o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"replace",this).call(this,t)}}]),m);function m(n){u(this,m);function t(t){var e;t.target.parentNode===n&&(e=i.statics.formats(n),t=s.default.find(t.target),"checked"===e?t.format("list","unchecked"):"unchecked"===e&&t.format("list","checked"))}var i=c(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,n));return n.addEventListener("touchstart",t),n.addEventListener("mousedown",t),i}p.blotName="list",p.scope=s.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[d],e.ListItem=d,e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(56);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(o,((i=r)&&i.__esModule?i:{default:i}).default),n=o;function o(){return function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}n.blotName="italic",n.tagName=["EM","I"],e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(6);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(l,((s=a)&&s.__esModule?s:{default:s}).default),i(l,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):o(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),i=l;function l(){return function(t){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}i.blotName="script",i.tagName=["SUB","SUP"],e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(6);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(o,((i=r)&&i.__esModule?i:{default:i}).default),n=o;function o(){return function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}n.blotName="strike",n.tagName="S",e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(6);(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(o,((i=r)&&i.__esModule?i:{default:i}).default),n=o;function o(){return function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}n.blotName="underline",n.tagName="U",e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(0),l=(s=a)&&s.__esModule?s:{default:s},u=n(27);var c=["alt","height","width"],i=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,l.default.Embed),i(h,[{key:"format",value:function(t,e){-1<c.indexOf(t)?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):o(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=o(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,t);return"string"==typeof t&&e.setAttribute("src",this.sanitize(t)),e}},{key:"formats",value:function(n){return c.reduce(function(t,e){return n.hasAttribute(e)&&(t[e]=n.getAttribute(e)),t},{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return(0,u.sanitize)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),h);function h(){return function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}i.blotName="image",i.tagName="IMG",e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s,a=n(4),l=n(27),u=(s=l)&&s.__esModule?s:{default:s};var c=["height","width"],i=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,a.BlockEmbed),i(h,[{key:"format",value:function(t,e){-1<c.indexOf(t)?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):o(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=o(h.__proto__||Object.getPrototypeOf(h),"create",this).call(this,t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen",!0),e.setAttribute("src",this.sanitize(t)),e}},{key:"formats",value:function(n){return c.reduce(function(t,e){return n.hasAttribute(e)&&(t[e]=n.getAttribute(e)),t},{})}},{key:"sanitize",value:function(t){return u.default.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),h);function h(){return function(t){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}i.blotName="video",i.className="ql-video",i.tagName="IFRAME",e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormulaBlot=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s=l(n(35)),a=l(n(5)),n=l(n(9));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d=(h(f,s.default),i(f,null,[{key:"create",value:function(t){var e=o(f.__proto__||Object.getPrototypeOf(f),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),f);function f(){return u(this,f),c(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}d.blotName="formula",d.className="ql-formula",d.tagName="SPAN";h(p,n.default),i(p,null,[{key:"register",value:function(){a.default.register(d,!0)}}]),i=p;function p(){u(this,p);var t=c(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}e.FormulaBlot=d,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CodeToken=e.CodeBlock=void 0;var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return o(t,e,n)}var s=u(n(0)),a=u(n(5)),l=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var f=(d(p,u(n(13)).default),i(p,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),o(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((0<e.trim().length||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),p);function p(){return c(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}f.className="ql-syntax";var m=new s.default.Attributor.Class("token","hljs",{scope:s.default.Scope.INLINE}),i=(d(g,l.default),i(g,null,[{key:"register",value:function(){a.default.register(m,!0),a.default.register(f,!0)}}]),i(g,[{key:"highlight",value:function(){var t,e=this;this.quill.selection.composing||(this.quill.update(a.default.sources.USER),t=this.quill.getSelection(),this.quill.scroll.descendants(f).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(a.default.sources.SILENT),null!=t&&this.quill.setSelection(t,a.default.sources.SILENT))}}]),g);function g(t,e){c(this,g);var n=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,t,e));if("function"!=typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var i=null;return n.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(i),i=setTimeout(function(){n.highlight(),i=null},n.options.interval)}),n.highlight(),n}i.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3},e.CodeBlock=f,e.CodeToken=m,e.default=i},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BubbleTooltip=void 0;function r(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return r(t,e,n)}var i=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=d(n(3)),a=d(n(8)),l=n(43),u=d(l),c=n(15),h=d(n(41));function d(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var g=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],n=(m(y,u.default),i(y,[{key:"extendToolbar",value:function(t){this.tooltip=new v(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),h.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),h.default)}}]),y);function y(t,e){f(this,y),null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=g);e=p(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,t,e));return e.quill.container.classList.add("ql-bubble"),e}n.DEFAULTS=(0,s.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var v=(m(b,l.BaseTooltip),i(b,[{key:"listen",value:function(){var e=this;r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){var t;e.root.classList.contains("ql-hidden")||null!=(t=e.quill.getSelection())&&e.position(e.quill.getBounds(t))},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var e=r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"position",this).call(this,t),t=this.root.querySelector(".ql-tooltip-arrow");if(t.style.marginLeft="",0===e)return e;t.style.marginLeft=-1*e-t.offsetWidth/2+"px"}}]),b);function b(t,e){f(this,b);var r=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,t,e));return r.quill.on(a.default.events.EDITOR_CHANGE,function(t,e,n,i){t===a.default.events.SELECTION_CHANGE&&(null!=e&&0<e.length&&i===a.default.sources.USER?(r.show(),r.root.style.left="0px",r.root.style.width="",r.root.style.width=r.root.offsetWidth+"px",1===(t=r.quill.getLines(e.index,e.length)).length?r.position(r.quill.getBounds(e)):(i=t[t.length-1],t=r.quill.getIndex(i),e=Math.min(i.length()-1,e.index+e.length-t),e=r.quill.getBounds(new c.Range(t,e)),r.position(e))):document.activeElement!==r.textbox&&r.quill.hasFocus()&&r.hide())}),r}v.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=v,e.default=n},function(t,e,n){t.exports=n(63)}],i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=109).default;function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,r}),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(w,t){"use strict";function m(t){return null!=t&&t===t.window}var e=[],S=w.document,n=Object.getPrototypeOf,a=e.slice,g=e.concat,l=e.push,r=e.indexOf,i={},o=i.toString,y=i.hasOwnProperty,s=y.toString,u=s.call(Object),v={},b=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},c={type:!0,src:!0,noModule:!0};function _(t,e,n){var i,r=(e=e||S).createElement("script");if(r.text=t,n)for(i in c)n[i]&&(r[i]=n[i]);e.head.appendChild(r).parentNode.removeChild(r)}function p(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[o.call(t)]||"object":typeof t}var k=function(t,e){return new k.fn.init(t,e)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(t){var e=!!t&&"length"in t&&t.length,n=p(t);return!b(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}k.fn=k.prototype={jquery:"3.3.1",constructor:k,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){t=k.merge(this.constructor(),t);return t.prevObject=this,t},each:function(t){return k.each(this,t)},map:function(n){return this.pushStack(k.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},k.extend=k.fn.extend=function(){var t,e,n,i,r,o=arguments[0]||{},s=1,a=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==typeof o||b(o)||(o={}),s===a&&(o=this,s--);s<a;s++)if(null!=(t=arguments[s]))for(e in t)r=o[e],o!==(n=t[e])&&(l&&n&&(k.isPlainObject(n)||(i=Array.isArray(n)))?(r=i?(i=!1,r&&Array.isArray(r)?r:[]):r&&k.isPlainObject(r)?r:{},o[e]=k.extend(l,r,n)):void 0!==n&&(o[e]=n));return o},k.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){return!(!t||"[object Object]"!==o.call(t))&&(!(t=n(t))||"function"==typeof(t=y.call(t,"constructor")&&t.constructor)&&s.call(t)===u)},isEmptyObject:function(t){for(var e in t)return!1;return!0},globalEval:function(t){_(t)},each:function(t,e){var n,i=0;if(d(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(h,"")},makeArray:function(t,e){e=e||[];return null!=t&&(d(Object(t))?k.merge(e,"string"==typeof t?[t]:t):l.call(e,t)),e},inArray:function(t,e,n){return null==e?-1:r.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,s=!n;r<o;r++)!e(t[r],r)!=s&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,s=[];if(d(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&s.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&s.push(r);return g.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=e[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){i["[object "+e+"]"]=e.toLowerCase()});var f=function(n){function h(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}function i(){w()}var t,f,_,o,r,p,d,m,T,l,u,w,S,s,k,g,a,c,y,E="sizzle"+ +new Date,v=n.document,C=0,b=0,x=st(),A=st(),O=st(),L=function(t,e){return t===e&&(u=!0),0},P={}.hasOwnProperty,e=[],D=e.pop,N=e.push,I=e.push,j=e.slice,M=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",U="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+U+"*("+q+")(?:"+U+"*([*^$|!~]?=)"+U+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+U+"*\\]",F=":("+q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",$=new RegExp(U+"+","g"),z=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),H=new RegExp("^"+U+"*,"+U+"*"),V=new RegExp("^"+U+"*([>+~]|"+U+")"+U+"*"),W=new RegExp("="+U+"*([^\\]'\"]*?)"+U+"*\\]","g"),G=new RegExp(F),Y=new RegExp("^"+q+"$"),K={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+U+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+U+"?|("+U+")|.)","ig"),nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=gt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{I.apply(e=j.call(v.childNodes),v.childNodes),e[v.childNodes.length].nodeType}catch(t){I={apply:e.length?function(t,e){N.apply(t,j.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function ot(t,e,n,i){var r,o,s,a,l,u,c,h=e&&e.ownerDocument,d=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return n;if(!i&&((e?e.ownerDocument||e:v)!==S&&w(e),e=e||S,k)){if(11!==d&&(l=J.exec(t)))if(r=l[1]){if(9===d){if(!(s=e.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(h&&(s=h.getElementById(r))&&y(e,s)&&s.id===r)return n.push(s),n}else{if(l[2])return I.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&f.getElementsByClassName&&e.getElementsByClassName)return I.apply(n,e.getElementsByClassName(r)),n}if(f.qsa&&!O[t+" "]&&(!g||!g.test(t))){if(1!==d)h=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(nt,it):e.setAttribute("id",a=E),o=(u=p(t)).length;o--;)u[o]="#"+a+" "+mt(u[o]);c=u.join(","),h=tt.test(t)&&ft(e.parentNode)||e}if(c)try{return I.apply(n,h.querySelectorAll(c)),n}catch(t){}finally{a===E&&e.removeAttribute("id")}}}return m(t.replace(z,"$1"),e,n,i)}function st(){var n=[];function i(t,e){return n.push(t+" ")>_.cacheLength&&delete i[n.shift()],i[t+" "]=e}return i}function at(t){return t[E]=!0,t}function lt(t){var e=S.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var n=t.split("|"),i=n.length;i--;)_.attrHandle[n[i]]=e}function ct(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&rt(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function dt(s){return at(function(o){return o=+o,at(function(t,e){for(var n,i=s([],t.length,o),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function ft(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in f=ot.support={},r=ot.isXML=function(t){t=t&&(t.ownerDocument||t).documentElement;return!!t&&"HTML"!==t.nodeName},w=ot.setDocument=function(t){var e,t=t?t.ownerDocument||t:v;return t!==S&&9===t.nodeType&&t.documentElement&&(s=(S=t).documentElement,k=!r(S),v!==S&&(e=S.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",i,!1):e.attachEvent&&e.attachEvent("onunload",i)),f.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=lt(function(t){return t.appendChild(S.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=Q.test(S.getElementsByClassName),f.getById=lt(function(t){return s.appendChild(t).id=E,!S.getElementsByName||!S.getElementsByName(E).length}),f.getById?(_.filter.ID=function(t){var e=t.replace(et,h);return function(t){return t.getAttribute("id")===e}},_.find.ID=function(t,e){if(void 0!==e.getElementById&&k){t=e.getElementById(t);return t?[t]:[]}}):(_.filter.ID=function(t){var e=t.replace(et,h);return function(t){t=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return t&&t.value===e}},_.find.ID=function(t,e){if(void 0!==e.getElementById&&k){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),_.find.TAG=f.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):f.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},_.find.CLASS=f.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&k)return e.getElementsByClassName(t)},a=[],g=[],(f.qsa=Q.test(S.querySelectorAll))&&(lt(function(t){s.appendChild(t).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+U+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+U+"*(?:value|"+R+")"),t.querySelectorAll("[id~="+E+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+E+"+*").length||g.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=S.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+U+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),s.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(f.matchesSelector=Q.test(c=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&lt(function(t){f.disconnectedMatch=c.call(t,"*"),c.call(t,"[s!='']:x"),a.push("!=",F)}),g=g.length&&new RegExp(g.join("|")),a=a.length&&new RegExp(a.join("|")),e=Q.test(s.compareDocumentPosition),y=e||Q.test(s.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(n.contains?n.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},L=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!f.sortDetached&&e.compareDocumentPosition(t)===n?t===S||t.ownerDocument===v&&y(v,t)?-1:e===S||e.ownerDocument===v&&y(v,e)?1:l?M(l,t)-M(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!r||!o)return t===S?-1:e===S?1:r?-1:o?1:l?M(l,t)-M(l,e):0;if(r===o)return ct(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?ct(s[i],a[i]):s[i]===v?-1:a[i]===v?1:0}),S},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==S&&w(t),e=e.replace(W,"='$1']"),f.matchesSelector&&k&&!O[e+" "]&&(!a||!a.test(e))&&(!g||!g.test(e)))try{var n=c.call(t,e);if(n||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return 0<ot(e,S,null,[t]).length},ot.contains=function(t,e){return(t.ownerDocument||t)!==S&&w(t),y(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==S&&w(t);var n=_.attrHandle[e.toLowerCase()],n=n&&P.call(_.attrHandle,e.toLowerCase())?n(t,e,!k):void 0;return void 0!==n?n:f.attributes||!k?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},ot.escape=function(t){return(t+"").replace(nt,it)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,n=[],i=0,r=0;if(u=!f.detectDuplicates,l=!f.sortStable&&t.slice(0),t.sort(L),u){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return l=null,t},o=ot.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=o(e);return n},(_=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,h),t[3]=(t[3]||t[4]||t[5]||"").replace(et,h),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=p(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,h).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+U+")"+t+"("+U+"|$)"))&&x(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(t){t=ot.attr(t,e);return null==t?"!="===n:!n||(t+="","="===n?t===i:"!="===n?t!==i:"^="===n?i&&0===t.indexOf(i):"*="===n?i&&-1<t.indexOf(i):"$="===n?i&&t.slice(-i.length)===i:"~="===n?-1<(" "+t.replace($," ")+" ").indexOf(i):"|="===n&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(p,t,e,m,g){var y="nth"!==p.slice(0,3),v="last"!==p.slice(-4),b="of-type"===t;return 1===m&&0===g?function(t){return!!t.parentNode}:function(t,e,n){var i,r,o,s,a,l,u=y!=v?"nextSibling":"previousSibling",c=t.parentNode,h=b&&t.nodeName.toLowerCase(),d=!n&&!b,f=!1;if(c){if(y){for(;u;){for(s=t;s=s[u];)if(b?s.nodeName.toLowerCase()===h:1===s.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&d){for(f=(a=(i=(r=(o=(s=c)[E]||(s[E]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===C&&i[1])&&i[2],s=a&&c.childNodes[a];s=++a&&s&&s[u]||(f=a=0)||l.pop();)if(1===s.nodeType&&++f&&s===t){r[p]=[C,a,f];break}}else if(d&&(f=a=(i=(r=(o=(s=t)[E]||(s[E]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===C&&i[1]),!1===f)for(;(s=++a&&s&&s[u]||(f=a=0)||l.pop())&&((b?s.nodeName.toLowerCase()!==h:1!==s.nodeType)||!++f||(d&&((r=(o=s[E]||(s[E]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]=[C,f]),s!==t)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(t,o){var e,s=_.pseudos[t]||_.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return s[E]?s(o):1<s.length?(e=[t,t,"",o],_.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,e){for(var n,i=s(t,o),r=i.length;r--;)t[n=M(t,i[r])]=!(e[n]=i[r])}):function(t){return s(t,0,e)}):s}},pseudos:{not:at(function(t){var i=[],r=[],a=d(t.replace(z,"$1"));return a[E]?at(function(t,e,n,i){for(var r,o=a(t,null,i,[]),s=t.length;s--;)(r=o[s])&&(t[s]=!(e[s]=r))}):function(t,e,n){return i[0]=t,a(i,null,n,r),i[0]=null,!r.pop()}}),has:at(function(e){return function(t){return 0<ot(e,t).length}}),contains:at(function(e){return e=e.replace(et,h),function(t){return-1<(t.textContent||t.innerText||o(t)).indexOf(e)}}),lang:at(function(n){return Y.test(n||"")||ot.error("unsupported lang: "+n),n=n.replace(et,h).toLowerCase(),function(t){var e;do{if(e=k?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===s},focus:function(t){return t===S.activeElement&&(!S.hasFocus||S.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ht(!1),disabled:ht(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(t,e){return[e-1]}),eq:dt(function(t,e,n){return[n<0?n+e:n]}),even:dt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:dt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:dt(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:dt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})_.pseudos[t]=function(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}(t);function pt(){}function mt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function gt(s,t,e){var a=t.dir,l=t.next,u=l||a,c=e&&"parentNode"===u,h=b++;return t.first?function(t,e,n){for(;t=t[a];)if(1===t.nodeType||c)return s(t,e,n);return!1}:function(t,e,n){var i,r,o=[C,h];if(n){for(;t=t[a];)if((1===t.nodeType||c)&&s(t,e,n))return!0}else for(;t=t[a];)if(1===t.nodeType||c)if(i=(r=t[E]||(t[E]={}))[t.uniqueID]||(r[t.uniqueID]={}),l&&l===t.nodeName.toLowerCase())t=t[a]||t;else{if((r=i[u])&&r[0]===C&&r[1]===h)return o[2]=r[2];if((i[u]=o)[2]=s(t,e,n))return!0}return!1}}function yt(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function vt(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),u&&e.push(a)));return s}function bt(f,p,m,g,y,t){return g&&!g[E]&&(g=bt(g)),y&&!y[E]&&(y=bt(y,t)),at(function(t,e,n,i){var r,o,s,a=[],l=[],u=e.length,c=t||function(t,e,n){for(var i=0,r=e.length;i<r;i++)ot(t,e[i],n);return n}(p||"*",n.nodeType?[n]:n,[]),h=!f||!t&&p?c:vt(c,a,f,n,i),d=m?y||(t?f:u||g)?[]:e:h;if(m&&m(h,d,n,i),g)for(r=vt(d,l),g(r,[],n,i),o=r.length;o--;)(s=r[o])&&(d[l[o]]=!(h[l[o]]=s));if(t){if(y||f){if(y){for(r=[],o=d.length;o--;)(s=d[o])&&r.push(h[o]=s);y(null,d=[],r,i)}for(o=d.length;o--;)(s=d[o])&&-1<(r=y?M(t,s):a[o])&&(t[r]=!(e[r]=s))}}else d=vt(d===e?d.splice(u,d.length):d),y?y(null,e,d,i):I.apply(e,d)})}function _t(g,y){function t(t,e,n,i,r){var o,s,a,l=0,u="0",c=t&&[],h=[],d=T,f=t||b&&_.find.TAG("*",r),p=C+=null==d?1:Math.random()||.1,m=f.length;for(r&&(T=e===S||e||r);u!==m&&null!=(o=f[u]);u++){if(b&&o){for(s=0,e||o.ownerDocument===S||(w(o),n=!k);a=g[s++];)if(a(o,e||S,n)){i.push(o);break}r&&(C=p)}v&&((o=!a&&o)&&l--,t&&c.push(o))}if(l+=u,v&&u!==l){for(s=0;a=y[s++];)a(c,h,e,n);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=D.call(i));h=vt(h)}I.apply(i,h),r&&!t&&0<h.length&&1<l+y.length&&ot.uniqueSort(i)}return r&&(C=p,T=d),c}var v=0<y.length,b=0<g.length;return v?at(t):t}return pt.prototype=_.filters=_.pseudos,_.setFilters=new pt,p=ot.tokenize=function(t,e){var n,i,r,o,s,a,l,u=A[t+" "];if(u)return e?0:u.slice(0);for(s=t,a=[],l=_.preFilter;s;){for(o in n&&!(i=H.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(r=[])),n=!1,(i=V.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(z," ")}),s=s.slice(n.length)),_.filter)!(i=K[o].exec(s))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):A(t,a).slice(0)},d=ot.compile=function(t,e){var n,i=[],r=[],o=O[t+" "];if(!o){for(n=(e=e||p(t)).length;n--;)((o=function t(e){for(var i,n,r,o=e.length,s=_.relative[e[0].type],a=s||_.relative[" "],l=s?1:0,u=gt(function(t){return t===i},a,!0),c=gt(function(t){return-1<M(i,t)},a,!0),h=[function(t,e,n){return n=!s&&(n||e!==T)||((i=e).nodeType?u:c)(t,e,n),i=null,n}];l<o;l++)if(n=_.relative[e[l].type])h=[gt(yt(h),n)];else{if((n=_.filter[e[l].type].apply(null,e[l].matches))[E]){for(r=++l;r<o&&!_.relative[e[r].type];r++);return bt(1<l&&yt(h),1<l&&mt(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,l<r&&t(e.slice(l,r)),r<o&&t(e=e.slice(r)),r<o&&mt(e))}h.push(n)}return yt(h)}(e[n]))[E]?i:r).push(o);(o=O(t,_t(r,i))).selector=t}return o},m=ot.select=function(t,e,n,i){var r,o,s,a,l,u="function"==typeof t&&t,c=!i&&p(t=u.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===e.nodeType&&k&&_.relative[o[1].type]){if(!(e=(_.find.ID(s.matches[0].replace(et,h),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=K.needsContext.test(t)?0:o.length;r--&&(s=o[r],!_.relative[a=s.type]);)if((l=_.find[a])&&(i=l(s.matches[0].replace(et,h),tt.test(o[0].type)&&ft(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&mt(o)))return I.apply(n,i),n;break}}return(u||d(t,c))(i,e,!k,n,!e||tt.test(t)&&ft(e.parentNode)||e),n},f.sortStable=E.split("").sort(L).join("")===E,f.detectDuplicates=!!u,w(),f.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(S.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ut(R,function(t,e,n){if(!n)return!0===t[e]?e.toLowerCase():(e=t.getAttributeNode(e))&&e.specified?e.value:null}),ot}(w);k.find=f,k.expr=f.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=f.uniqueSort,k.text=f.getText,k.isXMLDoc=f.isXML,k.contains=f.contains,k.escapeSelector=f.escape;function T(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&k(t).is(n))break;i.push(t)}return i}function E(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var C=k.expr.match.needsContext;function x(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,n,i){return b(n)?k.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?k.grep(t,function(t){return t===n!==i}):"string"!=typeof n?k.grep(t,function(t){return-1<r.call(n,t)!==i}):k.filter(n,t,i)}k.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?k.find.matchesSelector(i,t)?[i]:[]:k.find.matches(t,k.grep(e,function(t){return 1===t.nodeType}))},k.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(k(t).filter(function(){for(e=0;e<i;e++)if(k.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)k.find(t,r[e],n);return 1<i?k.uniqueSort(n):n},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&C.test(t)?k(t):t||[],!1).length}});var L,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(t,e,n){if(!t)return this;if(n=n||L,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):b(t)?void 0!==n.ready?n.ready(t):t(k):k.makeArray(t,this);if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:P.exec(t))||!i[1]&&e)return(!e||e.jquery?e||n:this.constructor(e)).find(t);if(i[1]){if(e=e instanceof k?e[0]:e,k.merge(this,k.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:S,!0)),A.test(i[1])&&k.isPlainObject(e))for(var i in e)b(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(t=S.getElementById(i[2]))&&(this[0]=t,this.length=1),this}).prototype=k.fn,L=k(S);var D=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}k.fn.extend({has:function(t){var e=k(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(k.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],s="string"!=typeof t&&k(t);if(!C.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&k.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?r.call(k(t),this[0]):r.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),k.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return T(t,"parentNode")},parentsUntil:function(t,e,n){return T(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return T(t,"nextSibling")},prevAll:function(t){return T(t,"previousSibling")},nextUntil:function(t,e,n){return T(t,"nextSibling",n)},prevUntil:function(t,e,n){return T(t,"previousSibling",n)},siblings:function(t){return E((t.parentNode||{}).firstChild,t)},children:function(t){return E(t.firstChild)},contents:function(t){return x(t,"iframe")?t.contentDocument:(x(t,"template")&&(t=t.content||t),k.merge([],t.childNodes))}},function(i,r){k.fn[i]=function(t,e){var n=k.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=k.filter(e,n)),1<this.length&&(N[i]||k.uniqueSort(n),D.test(i)&&n.reverse()),this.pushStack(n)}});var j=/[^\x20\t\r\n\f]+/g;function M(t){return t}function R(t){throw t}function U(t,e,n,i){var r;try{t&&b(r=t.promise)?r.call(t).done(e).fail(n):t&&b(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}k.Callbacks=function(i){var t,n;i="string"==typeof i?(t=i,n={},k.each(t.match(j)||[],function(t,e){n[e]=!0}),n):k.extend({},i);function r(){for(a=a||i.once,s=o=!0;u.length;c=-1)for(e=u.shift();++c<l.length;)!1===l[c].apply(e[0],e[1])&&i.stopOnFalse&&(c=l.length,e=!1);i.memory||(e=!1),o=!1,a&&(l=e?[]:"")}var o,e,s,a,l=[],u=[],c=-1,h={add:function(){return l&&(e&&!o&&(c=l.length-1,u.push(e)),function n(t){k.each(t,function(t,e){b(e)?i.unique&&h.has(e)||l.push(e):e&&e.length&&"string"!==p(e)&&n(e)})}(arguments),e&&!o&&r()),this},remove:function(){return k.each(arguments,function(t,e){for(var n;-1<(n=k.inArray(e,l,n));)l.splice(n,1),n<=c&&c--}),this},has:function(t){return t?-1<k.inArray(t,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return a=u=[],l=e="",this},disabled:function(){return!l},lock:function(){return a=u=[],e||o||(l=e=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],u.push(e),o||r()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!s}};return h},k.extend({Deferred:function(t){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],r="pending",s={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var r=arguments;return k.Deferred(function(i){k.each(o,function(t,e){var n=b(r[e[4]])&&r[e[4]];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&b(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),r=null}).promise()},then:function(e,n,i){var l=0;function u(r,o,s,a){return function(){function t(){var t,e;if(!(r<l)){if((t=s.apply(n,i))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,b(e)?a?e.call(t,u(l,o,M,a),u(l,o,R,a)):(l++,e.call(t,u(l,o,M,a),u(l,o,R,a),u(l,o,M,o.notifyWith))):(s!==M&&(n=void 0,i=[t]),(a||o.resolveWith)(n,i))}}var n=this,i=arguments,e=a?t:function(){try{t()}catch(t){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(t,e.stackTrace),l<=r+1&&(s!==R&&(n=void 0,i=[t]),o.rejectWith(n,i))}};r?e():(k.Deferred.getStackHook&&(e.stackTrace=k.Deferred.getStackHook()),w.setTimeout(e))}}return k.Deferred(function(t){o[0][3].add(u(0,t,b(i)?i:M,t.notifyWith)),o[1][3].add(u(0,t,b(e)?e:M)),o[2][3].add(u(0,t,b(n)?n:R))}).promise()},promise:function(t){return null!=t?k.extend(t,s):s}},a={};return k.each(o,function(t,e){var n=e[2],i=e[5];s[e[1]]=n.add,i&&n.add(function(){r=i},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=n.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){function e(e){return function(t){r[e]=this,o[e]=1<arguments.length?a.call(arguments):t,--n||s.resolveWith(r,o)}}var n=arguments.length,i=n,r=Array(i),o=a.call(arguments),s=k.Deferred();if(n<=1&&(U(t,s.done(e(i)).resolve,s.reject,!n),"pending"===s.state()||b(o[i]&&o[i].then)))return s.then();for(;i--;)U(o[i],e(i),s.reject);return s.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(t,e){w.console&&w.console.warn&&t&&q.test(t.name)&&w.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},k.readyException=function(t){w.setTimeout(function(){throw t})};var B=k.Deferred();function F(){S.removeEventListener("DOMContentLoaded",F),w.removeEventListener("load",F),k.ready()}k.fn.ready=function(t){return B.then(t).catch(function(t){k.readyException(t)}),this},k.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--k.readyWait:k.isReady)||(k.isReady=!0)!==t&&0<--k.readyWait||B.resolveWith(S,[k])}}),k.ready.then=B.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?w.setTimeout(k.ready):(S.addEventListener("DOMContentLoaded",F),w.addEventListener("load",F));var $=function(t,e,n,i,r,o,s){var a=0,l=t.length,u=null==n;if("object"===p(n))for(a in r=!0,n)$(t,e,a,n[a],!0,o,s);else if(void 0!==i&&(r=!0,b(i)||(s=!0),u&&(e=s?(e.call(t,i),null):(u=e,function(t,e,n){return u.call(k(t),n)})),e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:u?e.call(t):l?e(t[0],n):o},z=/^-ms-/,H=/-([a-z])/g;function V(t,e){return e.toUpperCase()}function W(t){return t.replace(z,"ms-").replace(H,V)}function G(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[W(e)]=n;else for(i in e)r[W(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][W(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(W):(e=W(e))in i?[e]:e.match(j)||[]).length;for(;n--;)delete i[e[n]]}void 0!==e&&!k.isEmptyObject(i)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){t=t[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var K=new Y,X=new Y,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function J(t,e,n){var i,r;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Q,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:Z.test(r)?JSON.parse(r):r)}catch(t){}X.set(t,e,n)}else n=void 0;return n}k.extend({hasData:function(t){return X.hasData(t)||K.hasData(t)},data:function(t,e,n){return X.access(t,e,n)},removeData:function(t,e){X.remove(t,e)},_data:function(t,e,n){return K.access(t,e,n)},_removeData:function(t,e){K.remove(t,e)}}),k.fn.extend({data:function(n,t){var e,i,r,o=this[0],s=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){X.set(this,n)}):$(this,function(t){var e;return o&&void 0===t?void 0!==(e=X.get(o,n))||void 0!==(e=J(o,n))?e:void 0:void this.each(function(){X.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(r=X.get(o),1===o.nodeType&&!K.get(o,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&0===(i=s[e].name).indexOf("data-")&&(i=W(i.slice(5)),J(o,i,r[i]));K.set(o,"hasDataAttrs",!0)}return r},removeData:function(t){return this.each(function(){X.remove(this,t)})}}),k.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=K.get(t,e),n&&(!i||Array.isArray(n)?i=K.access(t,e,k.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=k.queue(t,e),i=n.length,r=n.shift(),o=k._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,function(){k.dequeue(t,e)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return K.get(t,n)||K.access(t,n,{empty:k.Callbacks("once memory").add(function(){K.remove(t,[e+"queue",n])})})}}),k.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?k.queue(this[0],e):void 0===n?this:this.each(function(){var t=k.queue(this,e,n);k._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&k.dequeue(this,e)})},dequeue:function(t){return this.each(function(){k.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--r||o.resolveWith(s,[s])}var i,r=1,o=k.Deferred(),s=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=K.get(s[a],t+"queueHooks"))&&i.empty&&(r++,i.empty.add(n));return n(),o.promise(e)}});function tt(t,e,n,i){var r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in i=n.apply(t,i||[]),e)t.style[r]=o[r];return i}var et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,nt=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],rt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&k.contains(t.ownerDocument,t)&&"none"===k.css(t,"display")};function ot(t,e,n,i){var r,o,s=20,a=i?function(){return i.cur()}:function(){return k.css(t,e,"")},l=a(),u=n&&n[3]||(k.cssNumber[e]?"":"px"),c=(k.cssNumber[e]||"px"!==u&&+l)&&nt.exec(k.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;s--;)k.style(t,e,c+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),c/=o;c*=2,k.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var st={};function at(t,e){for(var n,i,r,o,s,a=[],l=0,u=t.length;l<u;l++)(i=t[l]).style&&(n=i.style.display,e?("none"===n&&(a[l]=K.get(i,"display")||null,a[l]||(i.style.display="")),""===i.style.display&&rt(i)&&(a[l]=(s=o=void 0,o=(r=i).ownerDocument,s=r.nodeName,(r=st[s])||(o=o.body.appendChild(o.createElement(s)),r=k.css(o,"display"),o.parentNode.removeChild(o),"none"===r&&(r="block"),st[s]=r)))):"none"!==n&&(a[l]="none",K.set(i,"display",n)));for(l=0;l<u;l++)null!=a[l]&&(t[l].style.display=a[l]);return t}k.fn.extend({show:function(){return at(this,!0)},hide:function(){return at(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){rt(this)?k(this).show():k(this).hide()})}});var lt=/^(?:checkbox|radio)$/i,ut=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ct=/^$|^module$|\/(?:java|ecma)script/i,ht={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function dt(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&x(t,e)?k.merge([t],n):n}function ft(t,e){for(var n=0,i=t.length;n<i;n++)K.set(t[n],"globalEval",!e||K.get(e[n],"globalEval"))}ht.optgroup=ht.option,ht.tbody=ht.tfoot=ht.colgroup=ht.caption=ht.thead,ht.th=ht.td;var pt=/<|&#?\w+;/;function mt(t,e,n,i,r){for(var o,s,a,l,u,c=e.createDocumentFragment(),h=[],d=0,f=t.length;d<f;d++)if((o=t[d])||0===o)if("object"===p(o))k.merge(h,o.nodeType?[o]:o);else if(pt.test(o)){for(s=s||c.appendChild(e.createElement("div")),a=(ut.exec(o)||["",""])[1].toLowerCase(),a=ht[a]||ht._default,s.innerHTML=a[1]+k.htmlPrefilter(o)+a[2],u=a[0];u--;)s=s.lastChild;k.merge(h,s.childNodes),(s=c.firstChild).textContent=""}else h.push(e.createTextNode(o));for(c.textContent="",d=0;o=h[d++];)if(i&&-1<k.inArray(o,i))r&&r.push(o);else if(l=k.contains(o.ownerDocument,o),s=dt(c.appendChild(o),"script"),l&&ft(s),n)for(u=0;o=s[u++];)ct.test(o.type||"")&&n.push(o);return c}e=S.createDocumentFragment().appendChild(S.createElement("div")),(f=S.createElement("input")).setAttribute("type","radio"),f.setAttribute("checked","checked"),f.setAttribute("name","t"),e.appendChild(f),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue;var gt=S.documentElement,yt=/^key/,vt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function _t(){return!0}function Tt(){return!1}function wt(){try{return S.activeElement}catch(t){}}function St(t,e,n,i,r,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)St(t,a,n,i,e[a],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Tt;else if(!r)return t;return 1===o&&(s=r,(r=function(t){return k().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=k.guid++)),t.each(function(){k.event.add(this,e,r,i,n)})}k.event={global:{},add:function(e,t,n,i,r){var o,s,a,l,u,c,h,d,f,p=K.get(e);if(p)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&k.find.matchesSelector(gt,r),n.guid||(n.guid=k.guid++),(a=p.events)||(a=p.events={}),(s=p.handle)||(s=p.handle=function(t){return void 0!==k&&k.event.triggered!==t.type?k.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(j)||[""]).length;l--;)h=f=(u=bt.exec(t[l])||[])[1],d=(u[2]||"").split(".").sort(),h&&(c=k.event.special[h]||{},h=(r?c.delegateType:c.bindType)||h,c=k.event.special[h]||{},u=k.extend({type:h,origType:f,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&k.expr.match.needsContext.test(r),namespace:d.join(".")},o),(f=a[h])||((f=a[h]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,i,d,s)||e.addEventListener&&e.addEventListener(h,s)),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,u):f.push(u),k.event.global[h]=!0)},remove:function(t,e,n,i,r){var o,s,a,l,u,c,h,d,f,p,m,g=K.hasData(t)&&K.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(j)||[""]).length;u--;)if(f=m=(a=bt.exec(e[u])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=k.event.special[f]||{},d=l[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)c=d[o],!r&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||k.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)k.event.remove(t,f+e[u],n,i,!0);k.isEmptyObject(l)&&K.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,s=k.event.fix(t),a=new Array(arguments.length),l=(K.get(this,"events")||{})[s.type]||[],t=k.event.special[s.type]||{};for(a[0]=s,e=1;e<arguments.length;e++)a[e]=arguments[e];if(s.delegateTarget=this,!t.preDispatch||!1!==t.preDispatch.call(this,s)){for(o=k.event.handlers.call(this,s,l),e=0;(i=o[e++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(r=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(r=((k.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,a))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return t.postDispatch&&t.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,s,a=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[r=(i=e[n]).selector+" "]&&(s[r]=i.needsContext?-1<k(r,this).index(u):k.find(r,this,null,[u]).length),s[r]&&o.push(i);o.length&&a.push({elem:u,handlers:o})}return u=this,l<e.length&&a.push({elem:u,handlers:e.slice(l)}),a},addProp:function(e,t){Object.defineProperty(k.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[k.expando]?t:new k.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==wt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===wt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&x(this,"input"))return this.click(),!1},_default:function(t){return x(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},k.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},k.Event=function(t,e){if(!(this instanceof k.Event))return new k.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?_t:Tt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&k.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Tt,isPropagationStopped:Tt,isImmediatePropagationStopped:Tt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=_t,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=_t,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=_t,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&yt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&vt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},k.event.addProp),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){k.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||k.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=r),e}}}),k.fn.extend({on:function(t,e,n,i){return St(this,t,e,n,i)},one:function(t,e,n,i){return St(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,k(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Tt),this.each(function(){k.event.remove(this,t,n,e)});for(r in t)this.off(r,e,t[r]);return this}});var kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Et=/<script|<style|<link/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function At(t,e){return x(t,"table")&&x(11!==e.nodeType?e:e.firstChild,"tr")&&k(t).children("tbody")[0]||t}function Ot(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Pt(t,e){var n,i,r,o,s,a;if(1===e.nodeType){if(K.hasData(t)&&(o=K.access(t),s=K.set(e,o),a=o.events))for(r in delete s.handle,s.events={},a)for(n=0,i=a[r].length;n<i;n++)k.event.add(e,r,a[r][n]);X.hasData(t)&&(t=X.access(t),t=k.extend({},t),X.set(e,t))}}function Dt(n,i,r,o){i=g.apply([],i);var t,e,s,a,l,u,c=0,h=n.length,d=h-1,f=i[0],p=b(f);if(p||1<h&&"string"==typeof f&&!v.checkClone&&Ct.test(f))return n.each(function(t){var e=n.eq(t);p&&(i[0]=f.call(this,t,e.html())),Dt(e,i,r,o)});if(h&&(e=(t=mt(i,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(a=(s=k.map(dt(t,"script"),Ot)).length;c<h;c++)l=t,c!==d&&(l=k.clone(l,!0,!0),a&&k.merge(s,dt(l,"script"))),r.call(n[c],l,c);if(a)for(u=s[s.length-1].ownerDocument,k.map(s,Lt),c=0;c<a;c++)l=s[c],ct.test(l.type||"")&&!K.access(l,"globalEval")&&k.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?k._evalUrl&&k._evalUrl(l.src):_(l.textContent.replace(xt,""),u,l))}return n}function Nt(t,e,n){for(var i,r=e?k.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||k.cleanData(dt(i)),i.parentNode&&(n&&k.contains(i.ownerDocument,i)&&ft(dt(i,"script")),i.parentNode.removeChild(i));return t}k.extend({htmlPrefilter:function(t){return t.replace(kt,"<$1></$2>")},clone:function(t,e,n){var i,r,o,s,a,l,u,c=t.cloneNode(!0),h=k.contains(t.ownerDocument,t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||k.isXMLDoc(t)))for(s=dt(c),i=0,r=(o=dt(t)).length;i<r;i++)a=o[i],l=s[i],u=void 0,"input"===(u=l.nodeName.toLowerCase())&&lt.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(e)if(n)for(o=o||dt(t),s=s||dt(c),i=0,r=o.length;i<r;i++)Pt(o[i],s[i]);else Pt(t,c);return 0<(s=dt(c,"script")).length&&ft(s,!h&&dt(t,"script")),c},cleanData:function(t){for(var e,n,i,r=k.event.special,o=0;void 0!==(n=t[o]);o++)if(G(n)){if(e=n[K.expando]){if(e.events)for(i in e.events)r[i]?k.event.remove(n,i):k.removeEvent(n,i,e.handle);n[K.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),k.fn.extend({detach:function(t){return Nt(this,t,!0)},remove:function(t){return Nt(this,t)},text:function(t){return $(this,function(t){return void 0===t?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Dt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||At(this,t).appendChild(t)})},prepend:function(){return Dt(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=At(this,t)).insertBefore(t,e.firstChild)})},before:function(){return Dt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Dt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(k.cleanData(dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return k.clone(this,t,e)})},html:function(t){return $(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Et.test(t)&&!ht[(ut.exec(t)||["",""])[1].toLowerCase()]){t=k.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(k.cleanData(dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return Dt(this,arguments,function(t){var e=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(dt(this)),e&&e.replaceChild(t,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){k.fn[t]=function(t){for(var e,n=[],i=k(t),r=i.length-1,o=0;o<=r;o++)e=o===r?this:this.clone(!0),k(i[o])[s](e),l.apply(n,e.get());return this.pushStack(n)}});var It,jt,Mt,Rt,Ut,qt,Bt,Ft=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),$t=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=w),e.getComputedStyle(t)},zt=new RegExp(it.join("|"),"i");function Ht(){var t;Bt&&(qt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Bt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gt.appendChild(qt).appendChild(Bt),t=w.getComputedStyle(Bt),It="1%"!==t.top,Ut=12===Vt(t.marginLeft),Bt.style.right="60%",Rt=36===Vt(t.right),jt=36===Vt(t.width),Bt.style.position="absolute",Mt=36===Bt.offsetWidth||"absolute",gt.removeChild(qt),Bt=null)}function Vt(t){return Math.round(parseFloat(t))}function Wt(t,e,n){var i,r,o=t.style;return(n=n||$t(t))&&(""!==(r=n.getPropertyValue(e)||n[e])||k.contains(t.ownerDocument,t)||(r=k.style(t,e)),!v.pixelBoxStyles()&&Ft.test(r)&&zt.test(e)&&(i=o.width,t=o.minWidth,e=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=n.width,o.width=i,o.minWidth=t,o.maxWidth=e)),void 0!==r?r+"":r}function Gt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}qt=S.createElement("div"),(Bt=S.createElement("div")).style&&(Bt.style.backgroundClip="content-box",Bt.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===Bt.style.backgroundClip,k.extend(v,{boxSizingReliable:function(){return Ht(),jt},pixelBoxStyles:function(){return Ht(),Rt},pixelPosition:function(){return Ht(),It},reliableMarginLeft:function(){return Ht(),Ut},scrollboxSize:function(){return Ht(),Mt}}));var Yt=/^(none|table(?!-c[ea]).+)/,Kt=/^--/,Xt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"},Qt=["Webkit","Moz","ms"],Jt=S.createElement("div").style;function te(t){return k.cssProps[t]||(k.cssProps[t]=function(t){if(t in Jt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Qt.length;n--;)if((t=Qt[n]+e)in Jt)return t}(t)||t)}function ee(t,e,n){var i=nt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ne(t,e,n,i,r,o){var s="width"===e?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=k.css(t,n+it[s],!0,r)),i?("content"===n&&(l-=k.css(t,"padding"+it[s],!0,r)),"margin"!==n&&(l-=k.css(t,"border"+it[s]+"Width",!0,r))):(l+=k.css(t,"padding"+it[s],!0,r),"padding"!==n?l+=k.css(t,"border"+it[s]+"Width",!0,r):a+=k.css(t,"border"+it[s]+"Width",!0,r));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))),l}function ie(t,e,n){var i=$t(t),r=Wt(t,e,i),o="border-box"===k.css(t,"boxSizing",!1,i),s=o;if(Ft.test(r)){if(!n)return r;r="auto"}return s=s&&(v.boxSizingReliable()||r===t.style[e]),"auto"!==r&&(parseFloat(r)||"inline"!==k.css(t,"display",!1,i))||(r=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(r=parseFloat(r)||0)+ne(t,e,n||(o?"border":"content"),s,i,r)+"px"}function re(t,e,n,i,r){return new re.prototype.init(t,e,n,i,r)}k.extend({cssHooks:{opacity:{get:function(t,e){if(e){t=Wt(t,"opacity");return""===t?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=W(e),l=Kt.test(e),u=t.style;if(l||(e=te(a)),s=k.cssHooks[e]||k.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:u[e];"string"===(o=typeof n)&&(r=nt.exec(n))&&r[1]&&(n=ot(t,e,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(k.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,i){var r,o=W(e);return Kt.test(e)||(e=te(o)),(o=k.cssHooks[e]||k.cssHooks[o])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=Wt(t,e,i)),"normal"===r&&e in Zt&&(r=Zt[e]),""===n||n?(e=parseFloat(r),!0===n||isFinite(e)?e||0:r):r}}),k.each(["height","width"],function(t,s){k.cssHooks[s]={get:function(t,e,n){if(e)return!Yt.test(k.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ie(t,s,n):tt(t,Xt,function(){return ie(t,s,n)})},set:function(t,e,n){var i,r=$t(t),o="border-box"===k.css(t,"boxSizing",!1,r),n=n&&ne(t,s,n,o,r);return o&&v.scrollboxSize()===r.position&&(n-=Math.ceil(t["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(r[s])-ne(t,s,"border",!1,r)-.5)),n&&(i=nt.exec(e))&&"px"!==(i[3]||"px")&&(t.style[s]=e,e=k.css(t,s)),ee(0,e,n)}}}),k.cssHooks.marginLeft=Gt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-tt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(r,o){k.cssHooks[r+o]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+it[e]+o]=i[e]||i[e-2]||i[0];return n}},"margin"!==r&&(k.cssHooks[r+o].set=ee)}),k.fn.extend({css:function(t,e){return $(this,function(t,e,n){var i,r,o={},s=0;if(Array.isArray(e)){for(i=$t(t),r=e.length;s<r;s++)o[e[s]]=k.css(t,e[s],!1,i);return o}return void 0!==n?k.style(t,e,n):k.css(t,e)},t,e,1<arguments.length)}}),(k.Tween=re).prototype={constructor:re,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||k.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var t=re.propHooks[this.prop];return(t&&t.get?t:re.propHooks._default).get(this)},run:function(t){var e,n=re.propHooks[this.prop];return this.options.duration?this.pos=e=k.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:re.propHooks._default).set(this),this}},re.prototype.init.prototype=re.prototype,re.propHooks={_default:{get:function(t){return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(t=k.css(t.elem,t.prop,""))&&"auto"!==t?t:0},set:function(t){k.fx.step[t.prop]?k.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[k.cssProps[t.prop]]&&!k.cssHooks[t.prop]?t.elem[t.prop]=t.now:k.style(t.elem,t.prop,t.now+t.unit)}}},re.propHooks.scrollTop=re.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},k.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},k.fx=re.prototype.init,k.fx.step={};var oe,se,ae=/^(?:toggle|show|hide)$/,le=/queueHooks$/;function ue(){se&&(!1===S.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(ue):w.setTimeout(ue,k.fx.interval),k.fx.tick())}function ce(){return w.setTimeout(function(){oe=void 0}),oe=Date.now()}function he(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=it[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function de(t,e,n){for(var i,r=(fe.tweeners[e]||[]).concat(fe.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,e,t))return i}function fe(r,t,e){var n,o,i=0,s=fe.prefilters.length,a=k.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=oe||ce(),t=Math.max(0,u.startTime+u.duration-t),e=1-(t/u.duration||0),n=0,i=u.tweens.length;n<i;n++)u.tweens[n].run(e);return a.notifyWith(r,[u,e,t]),e<1&&i?t:(i||a.notifyWith(r,[u,1,0]),a.resolveWith(r,[u]),!1)},u=a.promise({elem:r,props:k.extend({},t),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},e),originalProperties:t,originalOptions:e,startTime:oe||ce(),duration:e.duration,tweens:[],createTween:function(t,e){t=k.Tween(r,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(t),t},stop:function(t){var e=0,n=t?u.tweens.length:0;if(o)return this;for(o=!0;e<n;e++)u.tweens[e].run(1);return t?(a.notifyWith(r,[u,1,0]),a.resolveWith(r,[u,t])):a.rejectWith(r,[u,t]),this}}),c=u.props;for(!function(t,e){var n,i,r,o,s;for(n in t)if(r=e[i=W(n)],o=t[n],Array.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(s=k.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(c,u.opts.specialEasing);i<s;i++)if(n=fe.prefilters[i].call(u,r,c,u.opts))return b(n.stop)&&(k._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,de,u),b(u.opts.start)&&u.opts.start.call(r,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),k.fx.timer(k.extend(l,{elem:r,anim:u,queue:u.opts.queue})),u}k.Animation=k.extend(fe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ot(n.elem,t,nt.exec(e),n),n}]},tweener:function(t,e){for(var n,i=0,r=(t=b(t)?(e=t,["*"]):t.match(j)).length;i<r;i++)n=t[i],fe.tweeners[n]=fe.tweeners[n]||[],fe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,s,a,l,u,c="width"in e||"height"in e,h=this,d={},f=t.style,p=t.nodeType&&rt(t),m=K.get(t,"fxshow");for(i in n.queue||(null==(s=k._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,k.queue(t,"fx").length||s.empty.fire()})})),e)if(r=e[i],ae.test(r)){if(delete e[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;p=!0}d[i]=m&&m[i]||k.style(t,i)}if((l=!k.isEmptyObject(e))||!k.isEmptyObject(d))for(i in c&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=m&&m.display)&&(u=K.get(t,"display")),"none"===(c=k.css(t,"display"))&&(u?c=u:(at([t],!0),u=t.style.display||u,c=k.css(t,"display"),at([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===k.css(t,"float")&&(l||(h.done(function(){f.display=u}),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,d)l||(m?"hidden"in m&&(p=m.hidden):m=K.access(t,"fxshow",{display:u}),o&&(m.hidden=!p),p&&at([t],!0),h.done(function(){for(i in p||at([t]),K.remove(t,"fxshow"),d)k.style(t,i,d[i])})),l=de(p?m[i]:0,i,h),i in m||(m[i]=l.start,p&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?fe.prefilters.unshift(t):fe.prefilters.push(t)}}),k.speed=function(t,e,n){var i=t&&"object"==typeof t?k.extend({},t):{complete:n||!n&&e||b(t)&&t,duration:t,easing:n&&e||e&&!b(e)&&e};return k.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in k.fx.speeds?i.duration=k.fx.speeds[i.duration]:i.duration=k.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){b(i.old)&&i.old.call(this),i.queue&&k.dequeue(this,i.queue)},i},k.fn.extend({fadeTo:function(t,e,n,i){return this.filter(rt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var r=k.isEmptyObject(e),o=k.speed(t,n,i),i=function(){var t=fe(this,k.extend({},e),o);(r||K.get(this,"finish"))&&t.stop(!0)};return i.finish=i,r||!1===o.queue?this.each(i):this.queue(o.queue,i)},stop:function(r,t,o){function s(t){var e=t.stop;delete t.stop,e(o)}return"string"!=typeof r&&(o=t,t=r,r=void 0),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=k.timers,i=K.get(this);if(e)i[e]&&i[e].stop&&s(i[e]);else for(e in i)i[e]&&i[e].stop&&le.test(e)&&s(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||k.dequeue(this,r)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=K.get(this),n=e[s+"queue"],i=e[s+"queueHooks"],r=k.timers,o=n?n.length:0;for(e.finish=!0,k.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===s&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),k.each(["toggle","show","hide"],function(t,i){var r=k.fn[i];k.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(he(i,!0),t,e,n)}}),k.each({slideDown:he("show"),slideUp:he("hide"),slideToggle:he("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){k.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),k.timers=[],k.fx.tick=function(){var t,e=0,n=k.timers;for(oe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||k.fx.stop(),oe=void 0},k.fx.timer=function(t){k.timers.push(t),k.fx.start()},k.fx.interval=13,k.fx.start=function(){se||(se=!0,ue())},k.fx.stop=function(){se=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(i,t){return i=k.fx&&k.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=w.setTimeout(t,i);e.stop=function(){w.clearTimeout(n)}})},e=S.createElement("input"),et=S.createElement("select").appendChild(S.createElement("option")),e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=et.selected,(e=S.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value;var pe,me=k.expr.attrHandle;k.fn.extend({attr:function(t,e){return $(this,k.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){k.removeAttr(this,t)})}}),k.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?k.prop(t,e,n):(1===o&&k.isXMLDoc(t)||(r=k.attrHooks[e.toLowerCase()]||(k.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void k.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):!(r&&"get"in r&&null!==(i=r.get(t,e)))&&null==(i=k.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&x(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(j);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?k.removeAttr(t,n):t.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(t,e){var s=me[e]||k.find.attr;me[e]=function(t,e,n){var i,r,o=e.toLowerCase();return n||(r=me[o],me[o]=i,i=null!=s(t,e,n)?o:null,me[o]=r),i}});var ge=/^(?:input|select|textarea|button)$/i,ye=/^(?:a|area)$/i;function ve(t){return(t.match(j)||[]).join(" ")}function be(t){return t.getAttribute&&t.getAttribute("class")||""}function _e(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(j)||[]}k.fn.extend({prop:function(t,e){return $(this,k.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[k.propFix[t]||t]})}}),k.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(t)||(e=k.propFix[e]||e,r=k.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=k.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||ye.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(k.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(t){t=t.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(e){var t,n,i,r,o,s,a=0;if(b(e))return this.each(function(t){k(this).addClass(e.call(this,t,be(this)))});if((t=_e(e)).length)for(;n=this[a++];)if(s=be(n),i=1===n.nodeType&&" "+ve(s)+" "){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s!==(s=ve(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,s,a=0;if(b(e))return this.each(function(t){k(this).removeClass(e.call(this,t,be(this)))});if(!arguments.length)return this.attr("class","");if((t=_e(e)).length)for(;n=this[a++];)if(s=be(n),i=1===n.nodeType&&" "+ve(s)+" "){for(o=0;r=t[o++];)for(;-1<i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," ");s!==(s=ve(i))&&n.setAttribute("class",s)}return this},toggleClass:function(r,e){var o=typeof r,s="string"==o||Array.isArray(r);return"boolean"==typeof e&&s?e?this.addClass(r):this.removeClass(r):b(r)?this.each(function(t){k(this).toggleClass(r.call(this,t,be(this),e),e)}):this.each(function(){var t,e,n,i;if(s)for(e=0,n=k(this),i=_e(r);t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==r&&"boolean"!=o||((t=be(this))&&K.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==r&&K.get(this,"__className__")||""))})},hasClass:function(t){for(var e,n=0,i=" "+t+" ";e=this[n++];)if(1===e.nodeType&&-1<(" "+ve(be(e))+" ").indexOf(i))return!0;return!1}});var Te=/\r/g;k.fn.extend({val:function(e){var n,t,i,r=this[0];return arguments.length?(i=b(e),this.each(function(t){1===this.nodeType&&(null==(t=i?e.call(this,t,k(this).val()):e)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(t){return null==t?"":t+""})),(n=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):r?(n=k.valHooks[r.type]||k.valHooks[r.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(r,"value"))?t:"string"==typeof(t=r.value)?t.replace(Te,""):null==t?"":t:void 0}}),k.extend({valHooks:{option:{get:function(t){var e=k.find.attr(t,"value");return null!=e?e:ve(k.text(t))}},select:{get:function(t){for(var e,n=t.options,i=t.selectedIndex,r="select-one"===t.type,o=r?null:[],s=r?i+1:n.length,a=i<0?s:r?i:0;a<s;a++)if(((e=n[a]).selected||a===i)&&!e.disabled&&(!e.parentNode.disabled||!x(e.parentNode,"optgroup"))){if(e=k(e).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,o=k.makeArray(e),s=r.length;s--;)((i=r[s]).selected=-1<k.inArray(k.valHooks.option.get(i),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<k.inArray(k(t).val(),e)}},v.checkOn||(k.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in w;function we(t){t.stopPropagation()}var Se=/^(?:focusinfocus|focusoutblur)$/;k.extend(k.event,{trigger:function(t,e,n,i){var r,o,s,a,l,u,c,h=[n||S],d=y.call(t,"type")?t.type:t,f=y.call(t,"namespace")?t.namespace.split("."):[],p=c=o=n=n||S;if(3!==n.nodeType&&8!==n.nodeType&&!Se.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(f=d.split(".")).shift(),f.sort()),a=d.indexOf(":")<0&&"on"+d,(t=t[k.expando]?t:new k.Event(d,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:k.makeArray(e,[t]),u=k.event.special[d]||{},i||!u.trigger||!1!==u.trigger.apply(n,e))){if(!i&&!u.noBubble&&!m(n)){for(s=u.delegateType||d,Se.test(s+d)||(p=p.parentNode);p;p=p.parentNode)h.push(p),o=p;o===(n.ownerDocument||S)&&h.push(o.defaultView||o.parentWindow||w)}for(r=0;(p=h[r++])&&!t.isPropagationStopped();)c=p,t.type=1<r?s:u.bindType||d,(l=(K.get(p,"events")||{})[t.type]&&K.get(p,"handle"))&&l.apply(p,e),(l=a&&p[a])&&l.apply&&G(p)&&(t.result=l.apply(p,e),!1===t.result&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),e)||!G(n)||a&&b(n[d])&&!m(n)&&((o=n[a])&&(n[a]=null),k.event.triggered=d,t.isPropagationStopped()&&c.addEventListener(d,we),n[d](),t.isPropagationStopped()&&c.removeEventListener(d,we),k.event.triggered=void 0,o&&(n[a]=o)),t.result}},simulate:function(t,e,n){t=k.extend(new k.Event,n,{type:t,isSimulated:!0});k.event.trigger(t,null,e)}}),k.fn.extend({trigger:function(t,e){return this.each(function(){k.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return k.event.trigger(t,e,n,!0)}}),v.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,i){function r(t){k.event.simulate(i,t.target,k.event.fix(t))}k.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=K.access(t,i);e||t.addEventListener(n,r,!0),K.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=K.access(t,i)-1;e?K.access(t,i,e):(t.removeEventListener(n,r,!0),K.remove(t,i))}}});var ke=w.location,Ee=Date.now(),Ce=/\?/;k.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new w.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+t),e};var xe=/\[\]$/,Ae=/\r?\n/g,Oe=/^(?:submit|button|image|reset|file)$/i,Le=/^(?:input|select|textarea|keygen)/i;k.param=function(t,e){function n(t,e){e=b(e)?e():e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==e?"":e)}var i,r=[];if(Array.isArray(t)||t.jquery&&!k.isPlainObject(t))k.each(t,function(){n(this.name,this.value)});else for(i in t)!function n(i,t,r,o){if(Array.isArray(t))k.each(t,function(t,e){r||xe.test(i)?o(i,e):n(i+"["+("object"==typeof e&&null!=e?t:"")+"]",e,r,o)});else if(r||"object"!==p(t))o(i,t);else for(var e in t)n(i+"["+e+"]",t[e],r,o)}(i,t[i],e,n);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=k.prop(this,"elements");return t?k.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!k(this).is(":disabled")&&Le.test(this.nodeName)&&!Oe.test(t)&&(this.checked||!lt.test(t))}).map(function(t,e){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(t){return{name:e.name,value:t.replace(Ae,"\r\n")}}):{name:e.name,value:n.replace(Ae,"\r\n")}}).get()}});var Pe=/%20/g,De=/#.*$/,Ne=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:GET|HEAD)$/,Me=/^\/\//,Re={},Ue={},qe="*/".concat("*"),Be=S.createElement("a");function Fe(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(j)||[];if(b(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function $e(e,i,r,o){var s={},a=e===Ue;function l(t){var n;return s[t]=!0,k.each(e[t]||[],function(t,e){e=e(i,r,o);return"string"!=typeof e||a||s[e]?a?!(n=e):void 0:(i.dataTypes.unshift(e),l(e),!1)}),n}return l(i.dataTypes[0])||!s["*"]&&l("*")}function ze(t,e){var n,i,r=k.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i=i||{})[n]=e[n]);return i&&k.extend(!0,t,i),t}Be.href=ke.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ke.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ke.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ze(ze(t,k.ajaxSettings),e):ze(k.ajaxSettings,t)},ajaxPrefilter:Fe(Re),ajaxTransport:Fe(Ue),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var l,u,c,n,h,i,d,f,r,p=k.ajaxSetup({},e),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?k(m):k.event,y=k.Deferred(),v=k.Callbacks("once memory"),b=p.statusCode||{},o={},s={},a="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(d){if(!n)for(n={};e=Ie.exec(c);)n[e[1].toLowerCase()]=e[2];e=n[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return d?c:null},setRequestHeader:function(t,e){return null==d&&(t=s[t.toLowerCase()]=s[t.toLowerCase()]||t,o[t]=e),this},overrideMimeType:function(t){return null==d&&(p.mimeType=t),this},statusCode:function(t){if(t)if(d)_.always(t[_.status]);else for(var e in t)b[e]=[b[e],t[e]];return this},abort:function(t){t=t||a;return l&&l.abort(t),T(0,t),this}};if(y.promise(_),p.url=((t||p.url||ke.href)+"").replace(Me,ke.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(j)||[""],null==p.crossDomain){i=S.createElement("a");try{i.href=p.url,i.href=i.href,p.crossDomain=Be.protocol+"//"+Be.host!=i.protocol+"//"+i.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=k.param(p.data,p.traditional)),$e(Re,p,e,_),d)return _;for(r in(f=k.event&&p.global)&&0==k.active++&&k.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!je.test(p.type),u=p.url.replace(De,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Pe,"+")):(t=p.url.slice(u.length),p.data&&(p.processData||"string"==typeof p.data)&&(u+=(Ce.test(u)?"&":"?")+p.data,delete p.data),!1===p.cache&&(u=u.replace(Ne,"$1"),t=(Ce.test(u)?"&":"?")+"_="+Ee+++t),p.url=u+t),p.ifModified&&(k.lastModified[u]&&_.setRequestHeader("If-Modified-Since",k.lastModified[u]),k.etag[u]&&_.setRequestHeader("If-None-Match",k.etag[u])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&_.setRequestHeader("Content-Type",p.contentType),_.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+qe+"; q=0.01":""):p.accepts["*"]),p.headers)_.setRequestHeader(r,p.headers[r]);if(p.beforeSend&&(!1===p.beforeSend.call(m,_,p)||d))return _.abort();if(a="abort",v.add(p.complete),_.done(p.success),_.fail(p.error),l=$e(Ue,p,e,_)){if(_.readyState=1,f&&g.trigger("ajaxSend",[_,p]),d)return _;p.async&&0<p.timeout&&(h=w.setTimeout(function(){_.abort("timeout")},p.timeout));try{d=!1,l.send(o,T)}catch(t){if(d)throw t;T(-1,t)}}else T(-1,"No Transport");function T(t,e,n,i){var r,o,s,a=e;d||(d=!0,h&&w.clearTimeout(h),l=void 0,c=i||"",_.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(s=function(t,e,n){for(var i,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}s=s||r}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,_,n)),s=function(t,e,n,i){var r,o,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(r in u)if(a=r.split(" "),a[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[r]:!0!==u[r]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(p,s,_,i),i?(p.ifModified&&((n=_.getResponseHeader("Last-Modified"))&&(k.lastModified[u]=n),(n=_.getResponseHeader("etag"))&&(k.etag[u]=n)),204===t||"HEAD"===p.type?a="nocontent":304===t?a="notmodified":(a=s.state,r=s.data,i=!(o=s.error))):(o=a,!t&&a||(a="error",t<0&&(t=0))),_.status=t,_.statusText=(e||a)+"",i?y.resolveWith(m,[r,a,_]):y.rejectWith(m,[_,a,o]),_.statusCode(b),b=void 0,f&&g.trigger(i?"ajaxSuccess":"ajaxError",[_,p,i?r:o]),v.fireWith(m,[_,a]),f&&(g.trigger("ajaxComplete",[_,p]),--k.active||k.event.trigger("ajaxStop")))}return _},getJSON:function(t,e,n){return k.get(t,e,n,"json")},getScript:function(t,e){return k.get(t,void 0,e,"script")}}),k.each(["get","post"],function(t,r){k[r]=function(t,e,n,i){return b(e)&&(i=i||n,n=e,e=void 0),k.ajax(k.extend({url:t,type:r,dataType:i,data:e,success:n},k.isPlainObject(t)&&t))}}),k._evalUrl=function(t){return k.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},k.fn.extend({wrapAll:function(t){return this[0]&&(b(t)&&(t=t.call(this[0])),t=k(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return b(n)?this.each(function(t){k(this).wrapInner(n.call(this,t))}):this.each(function(){var t=k(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=b(e);return this.each(function(t){k(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(t){return!k.expr.pseudos.visible(t)},k.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},Ve=k.ajaxSettings.xhr();v.cors=!!Ve&&"withCredentials"in Ve,v.ajax=Ve=!!Ve,k.ajaxTransport(function(r){var o,s;if(v.cors||Ve&&!r.crossDomain)return{send:function(t,e){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(o=s=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(He[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),s=i.onerror=i.ontimeout=o("error"),void 0!==i.onabort?i.onabort=s:i.onreadystatechange=function(){4===i.readyState&&w.setTimeout(function(){o&&s()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return k.globalEval(t),t}}}),k.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),k.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(t,e){i=k("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(t){i.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),S.head.appendChild(i[0])},abort:function(){r&&r()}}});var We=[],Ge=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=We.pop()||k.expando+"_"+Ee++;return this[t]=!0,t}}),k.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,o,s=!1!==t.jsonp&&(Ge.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ge.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=b(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ge,"$1"+i):!1!==t.jsonp&&(t.url+=(Ce.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||k.error(i+" was not called"),o[0]},t.dataTypes[0]="json",r=w[i],w[i]=function(){o=arguments},n.always(function(){void 0===r?k(w).removeProp(i):w[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,We.push(i)),o&&b(r)&&r(o[0]),o=r=void 0}),"script"}),v.createHTMLDocument=((e=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),k.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((i=(e=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,e.head.appendChild(i)):e=S),i=!n&&[],(n=A.exec(t))?[e.createElement(n[1])]:(n=mt([t],e,i),i&&i.length&&k(i).remove(),k.merge([],n.childNodes)));var i},k.fn.load=function(t,e,n){var i,r,o,s=this,a=t.indexOf(" ");return-1<a&&(i=ve(t.slice(a)),t=t.slice(0,a)),b(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<s.length&&k.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?k("<div>").append(k.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){k.fn[e]=function(t){return this.on(e,t)}}),k.expr.pseudos.animated=function(e){return k.grep(k.timers,function(t){return e===t.elem}).length},k.offset={setOffset:function(t,e,n){var i,r,o,s,a=k.css(t,"position"),l=k(t),u={};"static"===a&&(t.style.position="relative"),o=l.offset(),i=k.css(t,"top"),s=k.css(t,"left"),s=("absolute"===a||"fixed"===a)&&-1<(i+s).indexOf("auto")?(r=(a=l.position()).top,a.left):(r=parseFloat(i)||0,parseFloat(s)||0),b(e)&&(e=e.call(t,n,k.extend({},o))),null!=e.top&&(u.top=e.top-o.top+r),null!=e.left&&(u.left=e.left-o.left+s),"using"in e?e.using.call(t,u):l.css(u)}},k.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){k.offset.setOffset(this,e,t)});var t,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===k.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===k.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=k(t).offset()).top+=k.css(t,"borderTopWidth",!0),r.left+=k.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-k.css(i,"marginTop",!0),left:e.left-r.left-k.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===k.css(t,"position");)t=t.offsetParent;return t||gt})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o="pageYOffset"===r;k.fn[e]=function(t){return $(this,function(t,e,n){var i;return m(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===n?i?i[r]:t[e]:void(i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):t[e]=n)},e,t,arguments.length)}}),k.each(["top","left"],function(t,n){k.cssHooks[n]=Gt(v.pixelPosition,function(t,e){if(e)return e=Wt(t,n),Ft.test(e)?k(t).position()[n]+"px":e})}),k.each({Height:"height",Width:"width"},function(s,a){k.each({padding:"inner"+s,content:a,"":"outer"+s},function(i,o){k.fn[o]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return $(this,function(t,e,n){var i;return m(t)?0===o.indexOf("outer")?t["inner"+s]:t.document.documentElement["client"+s]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+s],i["scroll"+s],t.body["offset"+s],i["offset"+s],i["client"+s])):void 0===n?k.css(t,e,r):k.style(t,e,n,r)},a,n?t:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){k.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),k.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),k.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),k.proxy=function(t,e){var n,i;if("string"==typeof e&&(i=t[e],e=t,t=i),b(t))return n=a.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||k.guid++,i},k.holdReady=function(t){t?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=x,k.isFunction=b,k.isWindow=m,k.camelCase=W,k.type=p,k.now=Date.now,k.isNumeric=function(t){var e=k.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Ye=w.jQuery,Ke=w.$;return k.noConflict=function(t){return w.$===k&&(w.$=Ke),t&&w.jQuery===k&&(w.jQuery=Ye),k},t||(w.jQuery=w.$=k),k}),function(l,n,i,a){function u(t,e){this.settings=null,this.options=l.extend({},u.Defaults,e),this.$element=l(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},l.each(["onResize","onThrottledResize"],l.proxy(function(t,e){this._handlers[e]=l.proxy(this[e],this)},this)),l.each(u.Plugins,l.proxy(function(t,e){this._plugins[t.charAt(0).toLowerCase()+t.slice(1)]=new e(this)},this)),l.each(u.Workers,l.proxy(function(t,e){this._pipe.push({filter:e.filter,run:l.proxy(e.run,this)})},this)),this.setup(),this.initialize()}u.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:n,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},u.Width={Default:"default",Inner:"inner",Outer:"outer"},u.Type={Event:"event",State:"state"},u.Plugins={},u.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(t){t.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(t){var e=this.settings.margin||"",n=!this.settings.autoWidth,i=this.settings.rtl,e={width:"auto","margin-left":i?e:"","margin-right":i?"":e};n||this.$stage.children().css(e),t.css=e}},{filter:["width","items","settings"],run:function(t){var e=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,n=null,i=this._items.length,r=!this.settings.autoWidth,o=[];for(t.items={merge:!1,width:e};i--;)n=this._mergers[i],n=this.settings.mergeFit&&Math.min(n,this.settings.items)||n,t.items.merge=1<n||t.items.merge,o[i]=r?e*n:this._items[i].width();this._widths=o}},{filter:["items","settings"],run:function(){var t=[],e=this._items,n=this.settings,i=Math.max(2*n.items,4),r=2*Math.ceil(e.length/2),o=n.loop&&e.length?n.rewind?i:Math.max(i,r):0,s="",a="";for(o/=2;0<o;)t.push(this.normalize(t.length/2,!0)),s+=e[t[t.length-1]][0].outerHTML,t.push(this.normalize(e.length-1-(t.length-1)/2,!0)),a=e[t[t.length-1]][0].outerHTML+a,--o;this._clones=t,l(s).addClass("cloned").appendTo(this.$stage),l(a).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var t,e,n=this.settings.rtl?1:-1,i=this._clones.length+this._items.length,r=-1,o=[];++r<i;)t=o[r-1]||0,e=this._widths[this.relative(r)]+this.settings.margin,o.push(t+e*n);this._coordinates=o}},{filter:["width","items","settings"],run:function(){var t=this.settings.stagePadding,e=this._coordinates,t={width:Math.ceil(Math.abs(e[e.length-1]))+2*t,"padding-left":t||"","padding-right":t||""};this.$stage.css(t)}},{filter:["width","items","settings"],run:function(t){var e=this._coordinates.length,n=!this.settings.autoWidth,i=this.$stage.children();if(n&&t.items.merge)for(;e--;)t.css.width=this._widths[this.relative(e)],i.eq(e).css(t.css);else n&&(t.css.width=t.items.width,i.css(t.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(t){t.current=t.current?this.$stage.children().index(t.current):0,t.current=Math.max(this.minimum(),Math.min(this.maximum(),t.current)),this.reset(t.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){for(var t,e,n=this.settings.rtl?1:-1,i=2*this.settings.stagePadding,r=this.coordinates(this.current())+i,o=r+this.width()*n,s=[],a=0,l=this._coordinates.length;a<l;a++)t=this._coordinates[a-1]||0,e=Math.abs(this._coordinates[a])+i*n,(this.op(t,"<=",r)&&this.op(t,">",o)||this.op(e,"<",r)&&this.op(e,">",o))&&s.push(a);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+s.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],u.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=l("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(l("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},u.prototype.initializeItems=function(){var t=this.$element.find(".owl-item");if(t.length)return this._items=t.get().map(function(t){return l(t)}),this._mergers=this._items.map(function(){return 1}),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},u.prototype.initialize=function(){var t,e;this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")&&(t=this.$element.find("img"),e=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:a,e=this.$element.children(e).width(),t.length&&e<=0&&this.preloadAutoWidthImages(t)),this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},u.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},u.prototype.setup=function(){var e=this.viewport(),t=this.options.responsive,n=-1,i=null;t?(l.each(t,function(t){t<=e&&n<t&&(n=Number(t))}),"function"==typeof(i=l.extend({},this.options,t[n])).stagePadding&&(i.stagePadding=i.stagePadding()),delete i.responsive,i.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):i=l.extend({},this.options),this.trigger("change",{property:{name:"settings",value:i}}),this._breakpoint=n,this.settings=i,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},u.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},u.prototype.prepare=function(t){var e=this.trigger("prepare",{content:t});return e.data||(e.data=l("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:e.data}),e.data},u.prototype.update=function(){for(var t=0,e=this._pipe.length,n=l.proxy(function(t){return this[t]},this._invalidated),i={};t<e;)(this._invalidated.all||0<l.grep(this._pipe[t].filter,n).length)&&this._pipe[t].run(i),t++;this._invalidated={},this.is("valid")||this.enter("valid")},u.prototype.width=function(t){switch(t=t||u.Width.Default){case u.Width.Inner:case u.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},u.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},u.prototype.onThrottledResize=function(){n.clearTimeout(this.resizeTimer),this.resizeTimer=n.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},u.prototype.onResize=function(){return!!this._items.length&&(this._width!==this.$element.width()&&(!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))))},u.prototype.registerEventHandlers=function(){l.support.transition&&this.$stage.on(l.support.transition.end+".owl.core",l.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(n,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",l.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",l.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",l.proxy(this.onDragEnd,this)))},u.prototype.onDragStart=function(t){var e=null;3!==t.which&&(e=l.support.transform?{x:(e=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===e.length?12:4],y:e[16===e.length?13:5]}:(e=this.$stage.position(),{x:this.settings.rtl?e.left+this.$stage.width()-this.width()+this.settings.margin:e.left,y:e.top}),this.is("animating")&&(l.support.transform?this.animate(e.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=l(t.target),this._drag.stage.start=e,this._drag.stage.current=e,this._drag.pointer=this.pointer(t),l(i).on("mouseup.owl.core touchend.owl.core",l.proxy(this.onDragEnd,this)),l(i).one("mousemove.owl.core touchmove.owl.core",l.proxy(function(t){var e=this.difference(this._drag.pointer,this.pointer(t));l(i).on("mousemove.owl.core touchmove.owl.core",l.proxy(this.onDragMove,this)),Math.abs(e.x)<Math.abs(e.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},u.prototype.onDragMove=function(t){var e,n=null,i=null,r=this.difference(this._drag.pointer,this.pointer(t)),o=this.difference(this._drag.stage.start,r);this.is("dragging")&&(t.preventDefault(),this.settings.loop?(n=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-n,o.x=((o.x-n)%i+i)%i+n):(n=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),e=this.settings.pullDrag?-1*r.x/5:0,o.x=Math.max(Math.min(o.x,n+e),i+e)),this._drag.stage.current=o,this.animate(o.x))},u.prototype.onDragEnd=function(t){var e=this.difference(this._drag.pointer,this.pointer(t)),n=this._drag.stage.current,t=0<e.x^this.settings.rtl?"left":"right";l(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==e.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(n.x,0!==e.x?t:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=t,(3<Math.abs(e.x)||300<(new Date).getTime()-this._drag.time)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},u.prototype.closest=function(n,i){var r=-1,o=this.width(),s=this.coordinates();return this.settings.freeDrag||l.each(s,l.proxy(function(t,e){return"left"===i&&e-30<n&&n<e+30?r=t:"right"===i&&e-o-30<n&&n<e-o+30?r=t+1:this.op(n,"<",e)&&this.op(n,">",s[t+1]!==a?s[t+1]:e-o)&&(r="left"===i?t+1:t),-1===r},this)),this.settings.loop||(this.op(n,">",s[this.minimum()])?r=n=this.minimum():this.op(n,"<",s[this.maximum()])&&(r=n=this.maximum())),r},u.prototype.animate=function(t){var e=0<this.speed();this.is("animating")&&this.onTransitionEnd(),e&&(this.enter("animating"),this.trigger("translate")),l.support.transform3d&&l.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):e?this.$stage.animate({left:t+"px"},this.speed(),this.settings.fallbackEasing,l.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},u.prototype.is=function(t){return this._states.current[t]&&0<this._states.current[t]},u.prototype.current=function(t){return t===a?this._current:0===this._items.length?a:(t=this.normalize(t),this._current!==t&&((e=this.trigger("change",{property:{name:"position",value:t}})).data!==a&&(t=this.normalize(e.data)),this._current=t,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})),this._current);var e},u.prototype.invalidate=function(t){return"string"===l.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),l.map(this._invalidated,function(t,e){return e})},u.prototype.reset=function(t){(t=this.normalize(t))!==a&&(this._speed=0,this._current=t,this.suppress(["translate","translated"]),this.animate(this.coordinates(t)),this.release(["translate","translated"]))},u.prototype.normalize=function(t,e){var n=this._items.length,e=e?0:this._clones.length;return!this.isNumeric(t)||n<1?t=a:(t<0||n+e<=t)&&(t=((t-e/2)%n+n)%n+e/2),t},u.prototype.relative=function(t){return t-=this._clones.length/2,this.normalize(t,!0)},u.prototype.maximum=function(t){var e,n,i,r=this.settings,o=this._coordinates.length;if(r.loop)o=this._clones.length/2+this._items.length-1;else if(r.autoWidth||r.merge){if(e=this._items.length)for(n=this._items[--e].width(),i=this.$element.width();e--&&!(i<(n+=this._items[e].width()+this.settings.margin)););o=e+1}else o=r.center?this._items.length-1:this._items.length-r.items;return t&&(o-=this._clones.length/2),Math.max(o,0)},u.prototype.minimum=function(t){return t?0:this._clones.length/2},u.prototype.items=function(t){return t===a?this._items.slice():(t=this.normalize(t,!0),this._items[t])},u.prototype.mergers=function(t){return t===a?this._mergers.slice():(t=this.normalize(t,!0),this._mergers[t])},u.prototype.clones=function(n){function i(t){return t%2==0?r+t/2:e-(t+1)/2}var e=this._clones.length/2,r=e+this._items.length;return n===a?l.map(this._clones,function(t,e){return i(e)}):l.map(this._clones,function(t,e){return t===n?i(e):null})},u.prototype.speed=function(t){return t!==a&&(this._speed=t),this._speed},u.prototype.coordinates=function(t){var e,n=1,i=t-1;return t===a?l.map(this._coordinates,l.proxy(function(t,e){return this.coordinates(e)},this)):(this.settings.center?(this.settings.rtl&&(n=-1,i=t+1),e=this._coordinates[t],e+=(this.width()-e+(this._coordinates[i]||0))/2*n):e=this._coordinates[i]||0,e=Math.ceil(e))},u.prototype.duration=function(t,e,n){return 0===n?0:Math.min(Math.max(Math.abs(e-t),1),6)*Math.abs(n||this.settings.smartSpeed)},u.prototype.to=function(t,e){var n,i=this.current(),r=t-this.relative(i),o=(0<r)-(r<0),s=this._items.length,a=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(r)>s/2&&(r+=-1*o*s),(n=(((t=i+r)-a)%s+s)%s+a)!==t&&n-r<=l&&0<n-r&&(i=n-r,t=n,this.reset(i))):t=this.settings.rewind?(t%(l+=1)+l)%l:Math.max(a,Math.min(l,t)),this.speed(this.duration(i,t,e)),this.current(t),this.isVisible()&&this.update()},u.prototype.next=function(t){t=t||!1,this.to(this.relative(this.current())+1,t)},u.prototype.prev=function(t){t=t||!1,this.to(this.relative(this.current())-1,t)},u.prototype.onTransitionEnd=function(t){if(t!==a&&(t.stopPropagation(),(t.target||t.srcElement||t.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},u.prototype.viewport=function(){var t;return this.options.responsiveBaseElement!==n?t=l(this.options.responsiveBaseElement).width():n.innerWidth?t=n.innerWidth:i.documentElement&&i.documentElement.clientWidth?t=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),t},u.prototype.replace=function(t){this.$stage.empty(),this._items=[],t=t&&(t instanceof jQuery?t:l(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter(function(){return 1===this.nodeType}).each(l.proxy(function(t,e){e=this.prepare(e),this.$stage.append(e),this._items.push(e),this._mergers.push(+e.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},u.prototype.add=function(t,e){var n=this.relative(this._current);e=e===a?this._items.length:this.normalize(e,!0),t=t instanceof jQuery?t:l(t),this.trigger("add",{content:t,position:e}),t=this.prepare(t),0===this._items.length||e===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[e-1].after(t),this._items.push(t),this._mergers.push(+t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[e].before(t),this._items.splice(e,0,t),this._mergers.splice(e,0,+t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[n]&&this.reset(this._items[n].index()),this.invalidate("items"),this.trigger("added",{content:t,position:e})},u.prototype.remove=function(t){(t=this.normalize(t,!0))!==a&&(this.trigger("remove",{content:this._items[t],position:t}),this._items[t].remove(),this._items.splice(t,1),this._mergers.splice(t,1),this.invalidate("items"),this.trigger("removed",{content:null,position:t}))},u.prototype.preloadAutoWidthImages=function(t){t.each(l.proxy(function(t,e){this.enter("pre-loading"),e=l(e),l(new Image).one("load",l.proxy(function(t){e.attr("src",t.target.src),e.css("opacity",1),this.leave("pre-loading"),this.is("pre-loading")||this.is("initializing")||this.refresh()},this)).attr("src",e.attr("src")||e.attr("data-src")||e.attr("data-src-retina"))},this))},u.prototype.destroy=function(){for(var t in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),l(i).off(".owl.core"),!1!==this.settings.responsive&&(n.clearTimeout(this.resizeTimer),this.off(n,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[t].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},u.prototype.op=function(t,e,n){var i=this.settings.rtl;switch(e){case"<":return i?n<t:t<n;case">":return i?t<n:n<t;case">=":return i?t<=n:n<=t;case"<=":return i?n<=t:t<=n}},u.prototype.on=function(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n)},u.prototype.off=function(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n)},u.prototype.trigger=function(t,e,n,i,r){var o={item:{count:this._items.length,index:this.current()}},s=l.camelCase(l.grep(["on",t,n],function(t){return t}).join("-").toLowerCase()),a=l.Event([t,"owl",n||"carousel"].join(".").toLowerCase(),l.extend({relatedTarget:this},o,e));return this._supress[t]||(l.each(this._plugins,function(t,e){e.onTrigger&&e.onTrigger(a)}),this.register({type:u.Type.Event,name:t}),this.$element.trigger(a),this.settings&&"function"==typeof this.settings[s]&&this.settings[s].call(this,a)),a},u.prototype.enter=function(t){l.each([t].concat(this._states.tags[t]||[]),l.proxy(function(t,e){this._states.current[e]===a&&(this._states.current[e]=0),this._states.current[e]++},this))},u.prototype.leave=function(t){l.each([t].concat(this._states.tags[t]||[]),l.proxy(function(t,e){this._states.current[e]--},this))},u.prototype.register=function(n){var e;n.type===u.Type.Event?(l.event.special[n.name]||(l.event.special[n.name]={}),l.event.special[n.name].owl||(e=l.event.special[n.name]._default,l.event.special[n.name]._default=function(t){return!e||!e.apply||t.namespace&&-1!==t.namespace.indexOf("owl")?t.namespace&&-1<t.namespace.indexOf("owl"):e.apply(this,arguments)},l.event.special[n.name].owl=!0)):n.type===u.Type.State&&(this._states.tags[n.name]?this._states.tags[n.name]=this._states.tags[n.name].concat(n.tags):this._states.tags[n.name]=n.tags,this._states.tags[n.name]=l.grep(this._states.tags[n.name],l.proxy(function(t,e){return l.inArray(t,this._states.tags[n.name])===e},this)))},u.prototype.suppress=function(t){l.each(t,l.proxy(function(t,e){this._supress[e]=!0},this))},u.prototype.release=function(t){l.each(t,l.proxy(function(t,e){delete this._supress[e]},this))},u.prototype.pointer=function(t){var e={x:null,y:null};return(t=(t=t.originalEvent||t||n.event).touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t).pageX?(e.x=t.pageX,e.y=t.pageY):(e.x=t.clientX,e.y=t.clientY),e},u.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))},u.prototype.difference=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},l.fn.owlCarousel=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=l(this),n=t.data("owl.carousel");n||(n=new u(this,"object"==typeof e&&e),t.data("owl.carousel",n),l.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(t,e){n.register({type:u.Type.Event,name:e}),n.$element.on(e+".owl.carousel.core",l.proxy(function(t){t.namespace&&t.relatedTarget!==this&&(this.suppress([e]),n[e].apply(this,[].slice.call(arguments,1)),this.release([e]))},n))})),"string"==typeof e&&"_"!==e.charAt(0)&&n[e].apply(n,i)})},l.fn.owlCarousel.Constructor=u}(window.Zepto||window.jQuery,window,document),function(e,n){var i=function(t){this._core=t,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":e.proxy(function(t){t.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=e.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers)};i.Defaults={autoRefresh:!0,autoRefreshInterval:500},i.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=n.setInterval(e.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},i.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},i.prototype.destroy=function(){var t,e;for(t in n.clearInterval(this._interval),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoRefresh=i}(window.Zepto||window.jQuery,window,document),function(a,r){var e=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type)){var e=this._core.settings,n=e.center&&Math.ceil(e.items/2)||e.items,i=e.center&&-1*n||0,r=(t.property&&void 0!==t.property.value?t.property.value:this._core.current())+i,o=this._core.clones().length,s=a.proxy(function(t,e){this.load(e)},this);for(0<e.lazyLoadEager&&(n+=e.lazyLoadEager,e.loop&&(r-=e.lazyLoadEager,n++));i++<n;)this.load(o/2+this._core.relative(r)),o&&a.each(this._core.clones(this._core.relative(r)),s),r++}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1,lazyLoadEager:0},e.prototype.load=function(t){var e=this._core.$stage.children().eq(t),t=e&&e.find(".owl-lazy");!t||-1<a.inArray(e.get(0),this._loaded)||(t.each(a.proxy(function(t,e){var n=a(e),i=1<r.devicePixelRatio&&n.attr("data-src-retina")||n.attr("data-src")||n.attr("data-srcset");this._core.trigger("load",{element:n,url:i},"lazy"),n.is("img")?n.one("load.owl.lazy",a.proxy(function(){n.css("opacity",1),this._core.trigger("loaded",{element:n,url:i},"lazy")},this)).attr("src",i):n.is("source")?n.one("load.owl.lazy",a.proxy(function(){this._core.trigger("loaded",{element:n,url:i},"lazy")},this)).attr("srcset",i):((e=new Image).onload=a.proxy(function(){n.css({"background-image":'url("'+i+'")',opacity:"1"}),this._core.trigger("loaded",{element:n,url:i},"lazy")},this),e.src=i)},this)),this._loaded.push(e.get(0)))},e.prototype.destroy=function(){var t,e;for(t in this.handlers)this._core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(r,n){var i=function(t){this._core=t,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":r.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":r.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&"position"===t.property.name&&this.update()},this),"loaded.owl.lazy":r.proxy(function(t){t.namespace&&this._core.settings.autoHeight&&t.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=r.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var e=this;r(n).on("load",function(){e._core.settings.autoHeight&&e.update()}),r(n).resize(function(){e._core.settings.autoHeight&&(null!=e._intervalId&&clearTimeout(e._intervalId),e._intervalId=setTimeout(function(){e.update()},250))})};i.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},i.prototype.update=function(){var t=this._core._current,e=t+this._core.settings.items,n=this._core.settings.lazyLoad,t=this._core.$stage.children().toArray().slice(t,e),i=[],e=0;r.each(t,function(t,e){i.push(r(e).height())}),(e=Math.max.apply(null,i))<=1&&n&&this._previousHeight&&(e=this._previousHeight),this._previousHeight=e,this._core.$stage.parent().height(e).addClass(this._core.settings.autoHeightClass)},i.prototype.destroy=function(){var t,e;for(t in this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},r.fn.owlCarousel.Constructor.Plugins.AutoHeight=i}(window.Zepto||window.jQuery,window,document),function(c,e){var n=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":c.proxy(function(t){t.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":c.proxy(function(t){t.namespace&&this._core.settings.video&&this.isInFullScreen()&&t.preventDefault()},this),"refreshed.owl.carousel":c.proxy(function(t){t.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":c.proxy(function(t){t.namespace&&"position"===t.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":c.proxy(function(t){var e;!t.namespace||(e=c(t.content).find(".owl-video")).length&&(e.css("display","none"),this.fetch(e,c(t.content)))},this)},this._core.options=c.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",c.proxy(function(t){this.play(t)},this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(t,e){var n=t.attr("data-vimeo-id")?"vimeo":t.attr("data-vzaar-id")?"vzaar":"youtube",i=t.attr("data-vimeo-id")||t.attr("data-youtube-id")||t.attr("data-vzaar-id"),r=t.attr("data-width")||this._core.settings.videoWidth,o=t.attr("data-height")||this._core.settings.videoHeight,s=t.attr("href");if(!s)throw new Error("Missing video URL.");if(-1<(i=s.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu"))n="youtube";else if(-1<i[3].indexOf("vimeo"))n="vimeo";else{if(!(-1<i[3].indexOf("vzaar")))throw new Error("Video URL not supported.");n="vzaar"}i=i[6],this._videos[s]={type:n,id:i,width:r,height:o},e.attr("data-video",s),this.thumbnail(t,this._videos[s])},n.prototype.thumbnail=function(e,t){function n(t){i=u.lazyLoad?c("<div/>",{class:"owl-video-tn "+l,srcType:t}):c("<div/>",{class:"owl-video-tn",style:"opacity:1;background-image:url("+t+")"}),e.after(i),e.after('<div class="owl-video-play-icon"></div>')}var i,r,o=t.width&&t.height?"width:"+t.width+"px;height:"+t.height+"px;":"",s=e.find("img"),a="src",l="",u=this._core.settings;if(e.wrap(c("<div/>",{class:"owl-video-wrapper",style:o})),this._core.settings.lazyLoad&&(a="data-src",l="owl-lazy"),s.length)return n(s.attr(a)),s.remove(),!1;"youtube"===t.type?(r="//img.youtube.com/vi/"+t.id+"/hqdefault.jpg",n(r)):"vimeo"===t.type?c.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+t.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){r=t[0].thumbnail_large,n(r)}}):"vzaar"===t.type&&c.ajax({type:"GET",url:"//vzaar.com/api/videos/"+t.id+".json",jsonp:"callback",dataType:"jsonp",success:function(t){r=t.framegrab_url,n(r)}})},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},n.prototype.play=function(t){var e=c(t.target).closest("."+this._core.settings.itemClass),n=this._videos[e.attr("data-video")],i=n.width||"100%",r=n.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),e=this._core.items(this._core.relative(e.index())),this._core.reset(e.index()),(t=c('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",r),t.attr("width",i),"youtube"===n.type?t.attr("src","//www.youtube.com/embed/"+n.id+"?autoplay=1&rel=0&v="+n.id):"vimeo"===n.type?t.attr("src","//player.vimeo.com/video/"+n.id+"?autoplay=1"):"vzaar"===n.type&&t.attr("src","//view.vzaar.com/"+n.id+"/player?autoplay=true"),c(t).wrap('<div class="owl-video-frame" />').insertAfter(e.find(".owl-video")),this._playing=e.addClass("owl-video-playing"))},n.prototype.isInFullScreen=function(){var t=e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement;return t&&c(t).parent().hasClass("owl-video-frame")},n.prototype.destroy=function(){var t,e;for(t in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},c.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,(window,document)),function(s){var e=function(t){this.core=t,this.core.options=s.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=void 0,this.next=void 0,this.handlers={"change.owl.carousel":s.proxy(function(t){t.namespace&&"position"==t.property.name&&(this.previous=this.core.current(),this.next=t.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":s.proxy(function(t){t.namespace&&(this.swapping="translated"==t.type)},this),"translate.owl.carousel":s.proxy(function(t){t.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){var t,e,n,i,r,o;1===this.core.settings.items&&s.support.animation&&s.support.transition&&(this.core.speed(0),e=s.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),i=this.core.$stage.children().eq(this.next),r=this.core.settings.animateIn,o=this.core.settings.animateOut,this.core.current()!==this.previous&&(o&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(s.support.animation.end,e).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(o)),r&&i.one(s.support.animation.end,e).addClass("animated owl-animated-in").addClass(r)))},e.prototype.clear=function(t){s(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var t,e;for(t in this.handlers)this.core.$element.off(t,this.handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},s.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,(window,document)),function(i,r,e){var n=function(t){this._core=t,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":i.proxy(function(t){t.namespace&&"settings"===t.property.name?this._core.settings.autoplay?this.play():this.stop():t.namespace&&"position"===t.property.name&&this._paused&&(this._time=0)},this),"initialized.owl.carousel":i.proxy(function(t){t.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":i.proxy(function(t,e,n){t.namespace&&this.play(e,n)},this),"stop.owl.autoplay":i.proxy(function(t){t.namespace&&this.stop()},this),"mouseover.owl.autoplay":i.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":i.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":i.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":i.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=i.extend({},n.Defaults,this._core.options)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype._next=function(t){this._call=r.setTimeout(i.proxy(this._next,this,t),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||e.hidden||this._core.next(t||this._core.settings.autoplaySpeed)},n.prototype.read=function(){return(new Date).getTime()-this._time},n.prototype.play=function(t,e){var n;this._core.is("rotating")||this._core.enter("rotating"),t=t||this._core.settings.autoplayTimeout,n=Math.min(this._time%(this._timeout||t),t),this._paused?(this._time=this.read(),this._paused=!1):r.clearTimeout(this._call),this._time+=this.read()%t-n,this._timeout=t,this._call=r.setTimeout(i.proxy(this._next,this,e),t-n)},n.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,r.clearTimeout(this._call),this._core.leave("rotating"))},n.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,r.clearTimeout(this._call))},n.prototype.destroy=function(){var t,e;for(t in this.stop(),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},i.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),function(r){"use strict";var e=function(t){this._core=t,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":r.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+r(t.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":r.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,0,this._templates.pop())},this),"remove.owl.carousel":r.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.splice(t.position,1)},this),"changed.owl.carousel":r.proxy(function(t){t.namespace&&"position"==t.property.name&&this.draw()},this),"initialized.owl.carousel":r.proxy(function(t){t.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":r.proxy(function(t){t.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=r.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var t,n=this._core.settings;for(t in this._controls.$relative=(n.navContainer?r(n.navContainer):r("<div>").addClass(n.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=r("<"+n.navElement+">").addClass(n.navClass[0]).html(n.navText[0]).prependTo(this._controls.$relative).on("click",r.proxy(function(t){this.prev(n.navSpeed)},this)),this._controls.$next=r("<"+n.navElement+">").addClass(n.navClass[1]).html(n.navText[1]).appendTo(this._controls.$relative).on("click",r.proxy(function(t){this.next(n.navSpeed)},this)),n.dotsData||(this._templates=[r('<button role="button">').addClass(n.dotClass).append(r("<span>")).prop("outerHTML")]),this._controls.$absolute=(n.dotsContainer?r(n.dotsContainer):r("<div>").addClass(n.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",r.proxy(function(t){var e=(r(t.target).parent().is(this._controls.$absolute)?r(t.target):r(t.target).parent()).index();t.preventDefault(),this.to(e,n.dotsSpeed)},this)),this._overrides)this._core[t]=r.proxy(this[t],this)},e.prototype.destroy=function(){var t,e,n,i,r=this._core.settings;for(t in this._handlers)this.$element.off(t,this._handlers[t]);for(e in this._controls)"$relative"===e&&r.navContainer?this._controls[e].html(""):this._controls[e].remove();for(i in this.overides)this._core[i]=this._overrides[i];for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},e.prototype.update=function(){var t,e,n=this._core.clones().length/2,i=n+this._core.items().length,r=this._core.maximum(!0),o=this._core.settings,s=o.center||o.autoWidth||o.dotsData?1:o.dotsEach||o.items;if("page"!==o.slideBy&&(o.slideBy=Math.min(o.slideBy,o.items)),o.dots||"page"==o.slideBy)for(this._pages=[],t=n,e=0;t<i;t++){if(s<=e||0===e){if(this._pages.push({start:Math.min(r,t-n),end:t-n+s-1}),Math.min(r,t-n)===r)break;e=0,0}e+=this._core.mergers(this._core.relative(t))}},e.prototype.draw=function(){var t=this._core.settings,e=this._core.items().length<=t.items,n=this._core.relative(this._core.current()),i=t.loop||t.rewind;this._controls.$relative.toggleClass("disabled",!t.nav||e),t.nav&&(this._controls.$previous.toggleClass("disabled",!i&&n<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!i&&n>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!t.dots||e),t.dots&&(e=this._pages.length-this._controls.$absolute.children().length,t.dotsData&&0!=e?this._controls.$absolute.html(this._templates.join("")):0<e?this._controls.$absolute.append(new Array(1+e).join(this._templates[0])):e<0&&this._controls.$absolute.children().slice(e).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(r.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(t){var e=this._core.settings;t.page={index:r.inArray(this.current(),this._pages),count:this._pages.length,size:e&&(e.center||e.autoWidth||e.dotsData?1:e.dotsEach||e.items)}},e.prototype.current=function(){var n=this._core.relative(this._core.current());return r.grep(this._pages,r.proxy(function(t,e){return t.start<=n&&t.end>=n},this)).pop()},e.prototype.getPosition=function(t){var e,n,i=this._core.settings;return"page"==i.slideBy?(e=r.inArray(this.current(),this._pages),n=this._pages.length,t?++e:--e,e=this._pages[(e%n+n)%n].start):(e=this._core.relative(this._core.current()),n=this._core.items().length,t?e+=i.slideBy:e-=i.slideBy),e},e.prototype.next=function(t){r.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},e.prototype.prev=function(t){r.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},e.prototype.to=function(t,e,n){!n&&this._pages.length?(n=this._pages.length,r.proxy(this._overrides.to,this._core)(this._pages[(t%n+n)%n].start,e)):r.proxy(this._overrides.to,this._core)(t,e)},r.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,(window,document)),function(i,r){"use strict";var e=function(t){this._core=t,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":i.proxy(function(t){t.namespace&&"URLHash"===this._core.settings.startPosition&&i(r).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":i.proxy(function(t){var e;!t.namespace||(e=i(t.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash"))&&(this._hashes[e]=t.content)},this),"changed.owl.carousel":i.proxy(function(t){var n;t.namespace&&"position"===t.property.name&&(n=this._core.items(this._core.relative(this._core.current())),(t=i.map(this._hashes,function(t,e){return t===n?e:null}).join())&&r.location.hash.slice(1)!==t&&(r.location.hash=t))},this)},this._core.options=i.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),i(r).on("hashchange.owl.navigation",i.proxy(function(t){var e=r.location.hash.substring(1),n=this._core.$stage.children(),e=this._hashes[e]&&n.index(this._hashes[e]);void 0!==e&&e!==this._core.current()&&this._core.to(this._core.relative(e),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var t,e;for(t in i(r).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(t,this._handlers[t]);for(e in Object.getOwnPropertyNames(this))"function"!=typeof this[e]&&(this[e]=null)},i.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(r,o){var s=r("<support>").get(0).style,a="Webkit Moz O ms".split(" "),t={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},e=function(){return!!l("transform")},n=function(){return!!l("perspective")},i=function(){return!!l("animation")};function l(t,n){var i=!1,e=t.charAt(0).toUpperCase()+t.slice(1);return r.each((t+" "+a.join(e+" ")+e).split(" "),function(t,e){if(s[e]!==o)return i=!n||e,!1}),i}function u(t){return l(t,!0)}!function(){return!!l("transition")}()||(r.support.transition=new String(u("transition")),r.support.transition.end=t.transition.end[r.support.transition]),i()&&(r.support.animation=new String(u("animation")),r.support.animation.end=t.animation.end[r.support.animation]),e()&&(r.support.transform=new String(u("transform")),r.support.transform3d=n())}(window.Zepto||window.jQuery,(window,void document)),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(s){function a(t){return parseFloat(t)||0}function l(t){var t=s(t),i=null,r=[];return t.each(function(){var t=s(this),e=t.offset().top-a(t.css("margin-top")),n=0<r.length?r[r.length-1]:null;null!==n&&Math.floor(Math.abs(i-e))<=1?r[r.length-1]=n.add(t):r.push(t),i=e}),r}function u(t){var e={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof t?s.extend(e,t):("boolean"==typeof t?e.byRow=t:"remove"===t&&(e.remove=!0),e)}var i=-1,r=-1,c=s.fn.matchHeight=function(t){t=u(t);if(t.remove){var n=this;return this.css(t.property,""),s.each(c._groups,function(t,e){e.elements=e.elements.not(n)}),this}return this.length<=1&&!t.target||(c._groups.push({elements:this,options:t}),c._apply(this,t)),this};c.version="0.7.2",c._groups=[],c._throttle=80,c._maintainScroll=!1,c._beforeUpdate=null,c._afterUpdate=null,c._rows=l,c._parse=a,c._parseOptions=u,c._apply=function(t,e){var r=u(e),n=s(t),i=[n],o=s(window).scrollTop(),e=s("html").outerHeight(!0),t=n.parents().filter(":hidden");return t.each(function(){var t=s(this);t.data("style-cache",t.attr("style"))}),t.css("display","block"),r.byRow&&!r.target&&(n.each(function(){var t=s(this),e=t.css("display");"inline-block"!==e&&"flex"!==e&&"inline-flex"!==e&&(e="block"),t.data("style-cache",t.attr("style")),t.css({display:e,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),i=l(n),n.each(function(){var t=s(this);t.attr("style",t.data("style-cache")||"")})),s.each(i,function(t,e){var e=s(e),i=0;if(r.target)i=r.target.outerHeight(!1);else{if(r.byRow&&e.length<=1)return void e.css(r.property,"");e.each(function(){var t=s(this),e=t.attr("style"),n=t.css("display");"inline-block"!==n&&"flex"!==n&&"inline-flex"!==n&&(n="block");n={display:n};n[r.property]="",t.css(n),t.outerHeight(!1)>i&&(i=t.outerHeight(!1)),e?t.attr("style",e):t.css("display","")})}e.each(function(){var t=s(this),e=0;r.target&&t.is(r.target)||("border-box"!==t.css("box-sizing")&&(e+=a(t.css("border-top-width"))+a(t.css("border-bottom-width")),e+=a(t.css("padding-top"))+a(t.css("padding-bottom"))),t.css(r.property,i-e+"px"))})}),t.each(function(){var t=s(this);t.attr("style",t.data("style-cache")||null)}),c._maintainScroll&&s(window).scrollTop(o/e*s("html").outerHeight(!0)),this},c._applyDataApi=function(){var n={};s("[data-match-height], [data-mh]").each(function(){var t=s(this),e=t.attr("data-mh")||t.attr("data-match-height");e in n?n[e]=n[e].add(t):n[e]=t}),s.each(n,function(){this.matchHeight(!0)})};function o(t){c._beforeUpdate&&c._beforeUpdate(t,c._groups),s.each(c._groups,function(){c._apply(this.elements,this.options)}),c._afterUpdate&&c._afterUpdate(t,c._groups)}c._update=function(t,e){if(e&&"resize"===e.type){var n=s(window).width();if(n===i)return;i=n}t?-1===r&&(r=setTimeout(function(){o(e),r=-1},c._throttle)):o(e)},s(c._applyDataApi);var t=s.fn.on?"on":"bind";s(window)[t]("load",function(t){c._update(!1,t)}),s(window)[t]("resize orientationchange",function(t){c._update(!0,t)})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(c){var n;c.extend(c.fn,{validate:function(t){if(this.length){var i=c.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new c.validator(t,this[0]),c.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.submitButton=t.currentTarget,c(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==c(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(n){function t(){var t,e;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(t=c("<input type='hidden'/>").attr("name",i.submitButton.name).val(c(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(e=i.settings.submitHandler.call(i,i.currentForm,n),t&&t.remove(),void 0!==e&&e)}return i.settings.debug&&n.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,t()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):t():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,e,n;return c(this[0]).is("form")?t=this.validate().form():(n=[],t=!0,e=c(this[0].form).validate(),this.each(function(){(t=e.element(this)&&t)||(n=n.concat(e.errorList))}),e.errorList=n),t},rules:function(t,e){var n,i,r,o,s,a=this[0];if(null!=a&&(!a.form&&a.isContentEditable&&(a.form=this.closest("form")[0],a.name=this.attr("name")),null!=a.form)){if(t)switch(i=(n=c.data(a.form,"validator").settings).rules,r=c.validator.staticRules(a),t){case"add":c.extend(r,c.validator.normalizeRule(e)),delete r.messages,i[a.name]=r,e.messages&&(n.messages[a.name]=c.extend(n.messages[a.name],e.messages));break;case"remove":return e?(s={},c.each(e.split(/\s/),function(t,e){s[e]=r[e],delete r[e]}),s):(delete i[a.name],r)}return(t=c.validator.normalizeRules(c.extend({},c.validator.classRules(a),c.validator.attributeRules(a),c.validator.dataRules(a),c.validator.staticRules(a)),a)).required&&(o=t.required,delete t.required,t=c.extend({required:o},t)),t.remote&&(o=t.remote,delete t.remote,t=c.extend(t,{remote:o})),t}}}),c.extend(c.expr.pseudos||c.expr[":"],{blank:function(t){return!c.trim(""+c(t).val())},filled:function(t){t=c(t).val();return null!==t&&!!c.trim(""+t)},unchecked:function(t){return!c(t).prop("checked")}}),c.validator=function(t,e){this.settings=c.extend(!0,{},c.validator.defaults,t),this.currentForm=e,this.init()},c.validator.format=function(n,t){return 1===arguments.length?function(){var t=c.makeArray(arguments);return t.unshift(n),c.validator.format.apply(this,t)}:(void 0===t||(2<arguments.length&&t.constructor!==Array&&(t=c.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),c.each(t,function(t,e){n=n.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})})),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||-1!==c.inArray(e.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,n){("radio"===t.type?this.findByName(t.name):c(t)).addClass(e).removeClass(n)},unhighlight:function(t,e,n){("radio"===t.type?this.findByName(t.name):c(t)).removeClass(e).addClass(n)}},setDefaults:function(t){c.extend(c.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}."),step:c.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,r=this.currentForm,i=this.groups={};function t(t){var e,n,i;!this.form&&this.isContentEditable&&(this.form=c(this).closest("form")[0],this.name=c(this).attr("name")),r===this.form&&(e=c.data(this.form,"validator"),n="on"+t.type.replace(/^validate/,""),(i=e.settings)[n]&&!c(this).is(i.ignore)&&i[n].call(e,this,t))}c.each(this.settings.groups,function(n,t){"string"==typeof t&&(t=t.split(/\s/)),c.each(t,function(t,e){i[e]=n})}),n=this.settings.rules,c.each(n,function(t,e){n[t]=c.validator.normalizeRule(e)}),c(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&c(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var e,n,i=this.clean(t),r=this.validationTargetFor(i),o=this,s=!0;return void 0===r?delete this.invalid[i.name]:(this.prepareElement(r),this.currentElements=c(r),(n=this.groups[r.name])&&c.each(this.groups,function(t,e){e===n&&t!==r.name&&(i=o.validationTargetFor(o.clean(o.findByName(t))))&&i.name in o.invalid&&(o.currentElements.push(i),s=o.check(i)&&s)}),e=!1!==this.check(r),s=s&&e,this.invalid[r.name]=!e,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c(t).attr("aria-invalid",!e)),s},showErrors:function(e){var n;e&&(n=this,c.extend(this.errorMap,e),this.errorList=c.map(this.errorMap,function(t,e){return{message:t,element:n.findByName(e)[0]}}),this.successList=c.grep(this.successList,function(t){return!(t.name in e)})),this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)void 0!==t[e]&&null!==t[e]&&!1!==t[e]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===c.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return c(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var t=this.name||c(this).attr("name");return!t&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.isContentEditable&&(this.form=c(this).closest("form")[0],this.name=t),this.form===e.currentForm&&(!(t in n||!e.objectLength(c(this).rules()))&&(n[t]=!0))})},clean:function(t){return c(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return c(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),this.toHide=c([])},reset:function(){this.resetInternals(),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e=c(t),n=t.type;return"radio"===n||"checkbox"===n?this.findByName(t.name).filter(":checked").val():"number"===n&&void 0!==t.validity?t.validity.badInput?"NaN":e.val():(e=t.isContentEditable?e.text():e.val(),"file"===n?"C:\\fakepath\\"===e.substr(0,12)?e.substr(12):0<=(n=e.lastIndexOf("/"))||0<=(n=e.lastIndexOf("\\"))?e.substr(n+1):e:"string"==typeof e?e.replace(/\r/g,""):e)},check:function(e){e=this.validationTargetFor(this.clean(e));var t,n,i,r,o=c(e).rules(),s=c.map(o,function(t,e){return e}).length,a=!1,l=this.elementValue(e);for(n in"function"==typeof o.normalizer?r=o.normalizer:"function"==typeof this.settings.normalizer&&(r=this.settings.normalizer),r&&(l=r.call(e,l),delete o.normalizer),o){i={method:n,parameters:o[n]};try{if("dependency-mismatch"===(t=c.validator.methods[n].call(this,l,e,i.parameters))&&1===s){a=!0;continue}if(a=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,i),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+i.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+i.method+"' method."),t}}if(!a)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(t,e){return c(t).data("msg"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())||c(t).data("msg")},customMessage:function(t,e){t=this.settings.messages[t];return t&&(t.constructor===String?t:t[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(t,e){"string"==typeof e&&(e={method:e});var n=this.findDefined(this.customMessage(t.name,e.method),this.customDataMessage(t,e.method),!this.settings.ignoreTitle&&t.title||void 0,c.validator.messages[e.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),i=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,e.parameters,t):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),e.parameters)),n},formatAndAdd:function(t,e){var n=this.defaultMessage(t,e);this.errorList.push({message:n,element:t,method:e.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){for(var t,e,n=0;this.errorList[n];n++)e=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,e.element,this.settings.errorClass,this.settings.validClass),this.showLabel(e.element,e.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,t=this.validElements();t[n];n++)this.settings.unhighlight.call(this,t[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var n,i,r,o=this.errorsFor(t),s=this.idOrName(t),a=c(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(e)):(n=o=c("<"+this.settings.errorElement+">").attr("id",s+"-error").addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(n=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,c(t)):n.insertAfter(t),o.is("label")?o.attr("for",s):0===o.parents("label[for='"+this.escapeCssMeta(s)+"']").length&&(s=o.attr("id"),a?a.match(new RegExp("\\b"+this.escapeCssMeta(s)+"\\b"))||(a+=" "+s):a=s,c(t).attr("aria-describedby",a),(i=this.groups[t.name])&&(r=this,c.each(r.groups,function(t,e){e===i&&c("[name='"+r.escapeCssMeta(t)+"']",r.currentForm).attr("aria-describedby",o.attr("id"))})))),!e&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var e=this.escapeCssMeta(this.idOrName(t)),t=c(t).attr("aria-describedby"),e="label[for='"+e+"'], label[for='"+e+"'] *";return t&&(e=e+", #"+this.escapeCssMeta(t).replace(/\s+/g,", #")),this.errors().filter(e)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||!this.checkable(t)&&t.id||t.name},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),c(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return c(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return c("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(t,e){return!!c(t,e.form).length},function:function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!c.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,c(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],c(t).removeClass(this.settings.pendingClass),e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.submitButton&&c("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,e){return e="string"==typeof e&&e||"remote",c.data(t,"previousValue")||c.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:e})})},destroy:function(){this.resetForm(),c(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:c.extend(this.classRuleSettings,t)},classRules:function(t){var e={},t=c(t).attr("class");return t&&c.each(t.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(e,c.validator.classRuleSettings[this])}),e},normalizeAttributeRule:function(t,e,n,i){/min|max|step/.test(n)&&(null===e||/number|range|text/.test(e))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?t[n]=i:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(t){var e,n,i={},r=c(t),o=t.getAttribute("type");for(e in c.validator.methods)n="required"===e?(""===(n=t.getAttribute(e))&&(n=!0),!!n):r.attr(e),this.normalizeAttributeRule(i,o,e,n);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var e,n,i={},r=c(t),o=t.getAttribute("type");for(e in c.validator.methods)""===(n=r.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()))&&(n=!0),this.normalizeAttributeRule(i,o,e,n);return i},staticRules:function(t){var e={},n=c.data(t.form,"validator");return n.settings.rules&&(e=c.validator.normalizeRule(n.settings.rules[t.name])||{}),e},normalizeRules:function(i,r){return c.each(i,function(t,e){if(!1!==e){if(e.param||e.depends){var n=!0;switch(typeof e.depends){case"string":n=!!c(e.depends,r.form).length;break;case"function":n=e.depends.call(r,r)}n?i[t]=void 0===e.param||e.param:(c.data(r.form,"validator").resetElements(c(r)),delete i[t])}}else delete i[t]}),c.each(i,function(t,e){i[t]=c.isFunction(e)&&"normalizer"!==t?e(r):e}),c.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){var t;i[this]&&(c.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(t=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(t[0]),Number(t[1])]))}),c.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength)),i},normalizeRule:function(t){var e;return"string"==typeof t&&(e={},c.each(t.split(/\s/),function(){e[this]=!0}),t=e),t},addMethod:function(t,e,n){c.validator.methods[t]=e,c.validator.messages[t]=void 0!==n?n:c.validator.messages[t],e.length<3&&c.validator.addClassRules(t,c.validator.normalizeRule(t))},methods:{required:function(t,e,n){if(!this.depend(n,e))return"dependency-mismatch";if("select"!==e.nodeName.toLowerCase())return this.checkable(e)?0<this.getLength(t,e):null!=t&&0<t.length;e=c(e).val();return e&&0<e.length},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},date:(n=!1,function(t,e){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())}),dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(t,e,n){t=c.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n<=t},maxlength:function(t,e,n){t=c.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||t<=n},rangelength:function(t,e,n){t=c.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||t>=n[0]&&t<=n[1]},min:function(t,e,n){return this.optional(e)||n<=t},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},step:function(t,e,n){function i(t){return(t=(""+t).match(/(?:\.(\d+))?$/))&&t[1]?t[1].length:0}function r(t){return Math.round(t*Math.pow(10,o))}var o,s=c(e).attr("type"),a="Step attribute on input type "+s+" is not supported.",l=new RegExp("\\b"+s+"\\b"),u=!0;if(s&&!l.test(["text","number","range"].join()))throw new Error(a);return o=i(n),(i(t)>o||r(t)%r(n)!=0)&&(u=!1),this.optional(e)||u},equalTo:function(t,e,n){n=c(n);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){c(e).valid()}),t===n.val()},remote:function(i,r,t,o){if(this.optional(r))return"dependency-mismatch";o="string"==typeof o&&o||"remote";var s,e,a=this.previousValue(r,o);return this.settings.messages[r.name]||(this.settings.messages[r.name]={}),a.originalMessage=a.originalMessage||this.settings.messages[r.name][o],this.settings.messages[r.name][o]=a.message,t="string"==typeof t?{url:t}:t,e=c.param(c.extend({data:i},t.data)),a.old===e?a.valid:(a.old=e,(s=this).startRequest(r),(e={})[r.name]=i,c.ajax(c.extend(!0,{mode:"abort",port:"validate"+r.name,dataType:"json",data:e,context:s.currentForm,success:function(t){var e,n=!0===t||"true"===t;s.settings.messages[r.name][o]=a.originalMessage,n?(e=s.formSubmitted,s.resetInternals(),s.toHide=s.errorsFor(r),s.formSubmitted=e,s.successList.push(r),s.invalid[r.name]=!1,s.showErrors()):(e={},t=t||s.defaultMessage(r,{method:o,parameters:i}),e[r.name]=a.message=t,s.invalid[r.name]=!0,s.showErrors(e)),a.valid=n,s.stopRequest(r,n)}},t)),"pending")}}});var i,r={};return c.ajaxPrefilter?c.ajaxPrefilter(function(t,e,n){var i=t.port;"abort"===t.mode&&(r[i]&&r[i].abort(),r[i]=n)}):(i=c.ajax,c.ajax=function(t){var e=("mode"in t?t:c.ajaxSettings).mode,n=("port"in t?t:c.ajaxSettings).port;return"abort"===e?(r[n]&&r[n].abort(),r[n]=i.apply(this,arguments),r[n]):i.apply(this,arguments)}),c}),function(t){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(a){function r(t){return t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-“”’]*/g,"")}return a.validator.addMethod("maxWords",function(t,e,n){return this.optional(e)||r(t).match(/\b\w+\b/g).length<=n},a.validator.format("Please enter {0} words or less.")),a.validator.addMethod("minWords",function(t,e,n){return this.optional(e)||r(t).match(/\b\w+\b/g).length>=n},a.validator.format("Please enter at least {0} words.")),a.validator.addMethod("rangeWords",function(t,e,n){var i=r(t),t=/\b\w+\b/g;return this.optional(e)||i.match(t).length>=n[0]&&i.match(t).length<=n[1]},a.validator.format("Please enter between {0} and {1} words.")),a.validator.addMethod("accept",function(t,e,n){var i,r,o="string"==typeof n?n.replace(/\s/g,""):"image/*",n=this.optional(e);if(n)return n;if("file"===a(e).attr("type")&&(o=o.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace(/\/\*/g,"/.*"),e.files&&e.files.length))for(r=new RegExp(".?("+o+")$","i"),i=0;i<e.files.length;i++)if(!e.files[i].type.match(r))return!1;return!0},a.validator.format("Please enter a value with a valid mimetype.")),a.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"Letters, numbers, and underscores only please"),a.validator.addMethod("bankaccountNL",function(t,e){if(this.optional(e))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(t))return!1;for(var n=t.replace(/ /g,""),i=0,r=n.length,o=0;o<r;o++)i+=(r-o)*n.substring(o,o+1);return i%11==0},"Please specify a valid bank account number"),a.validator.addMethod("bankorgiroaccountNL",function(t,e){return this.optional(e)||a.validator.methods.bankaccountNL.call(this,t,e)||a.validator.methods.giroaccountNL.call(this,t,e)},"Please specify a valid bank or giro account number"),a.validator.addMethod("bic",function(t,e){return this.optional(e)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-9])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(t.toUpperCase())},"Please specify a valid BIC code"),a.validator.addMethod("cifES",function(t,e){"use strict";if(this.optional(e))return!0;var n,i,r=new RegExp(/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/gi),o=t.substring(0,1),s=t.substring(1,8),e=t.substring(8,9),a=0,l=0;if(9!==t.length||!r.test(t))return!1;for(n=0;n<s.length;n++)i=parseInt(s[n],10),n%2==0?l+=(i*=2)<10?i:i-9:a+=i;return r=(10-(a+l).toString().substr(-1)).toString(),r=9<parseInt(r,10)?"0":r,t="JABCDEFGHI".substr(r,1).toString(),o.match(/[ABEH]/)?e===r:!o.match(/[KPQS]/)&&e===r||e===t},"Please specify a valid CIF number."),a.validator.addMethod("cpfBR",function(t){if(11!==(t=t.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,"")).length)return!1;var e,n=0,i=parseInt(t.substring(9,10),10),r=parseInt(t.substring(10,11),10),o=function(t,e){t=10*t%11;return 10!==t&&11!==t||(t=0),t===e};if(""===t||"00000000000"===t||"11111111111"===t||"22222222222"===t||"33333333333"===t||"44444444444"===t||"55555555555"===t||"66666666666"===t||"77777777777"===t||"88888888888"===t||"99999999999"===t)return!1;for(e=1;e<=9;e++)n+=parseInt(t.substring(e-1,e),10)*(11-e);if(o(n,i)){for(n=0,e=1;e<=10;e++)n+=parseInt(t.substring(e-1,e),10)*(12-e);return o(n,r)}return!1},"Please specify a valid CPF number"),a.validator.addMethod("creditcard",function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n,i,r=0,o=0,s=!1;if((t=t.replace(/\D/g,"")).length<13||19<t.length)return!1;for(n=t.length-1;0<=n;n--)i=t.charAt(n),o=parseInt(i,10),s&&9<(o*=2)&&(o-=9),r+=o,s=!s;return r%10==0},"Please enter a valid credit card number."),a.validator.addMethod("creditcardtypes",function(t,e,n){if(/[^0-9\-]+/.test(t))return!1;t=t.replace(/\D/g,"");var i=0;return n.mastercard&&(i|=1),n.visa&&(i|=2),n.amex&&(i|=4),n.dinersclub&&(i|=8),n.enroute&&(i|=16),n.discover&&(i|=32),n.jcb&&(i|=64),n.unknown&&(i|=128),n.all&&(i=255),1&i&&(/^(5[12345])/.test(t)||/^(2[234567])/.test(t))||2&i&&/^(4)/.test(t)?16===t.length:4&i&&/^(3[47])/.test(t)?15===t.length:8&i&&/^(3(0[012345]|[68]))/.test(t)?14===t.length:16&i&&/^(2(014|149))/.test(t)?15===t.length:32&i&&/^(6011)/.test(t)||64&i&&/^(3)/.test(t)?16===t.length:64&i&&/^(2131|1800)/.test(t)?15===t.length:!!(128&i)},"Please enter a valid credit card number."),a.validator.addMethod("currency",function(t,e,n){var i="string"==typeof n,r=i?n:n[0],n=i||n[1],r=r.replace(/,/g,""),r="^["+(r=n?r+"]":r+"]?")+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$";return r=new RegExp(r),this.optional(e)||r.test(t)},"Please specify a valid currency"),a.validator.addMethod("dateFA",function(t,e){return this.optional(e)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(t)},a.validator.messages.date),a.validator.addMethod("dateITA",function(t,e){var n,i,r,o=!1,o=!!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)&&(r=t.split("/"),n=parseInt(r[0],10),i=parseInt(r[1],10),t=parseInt(r[2],10),(r=new Date(Date.UTC(t,i-1,n,12,0,0,0))).getUTCFullYear()===t&&r.getUTCMonth()===i-1&&r.getUTCDate()===n);return this.optional(e)||o},a.validator.messages.date),a.validator.addMethod("dateNL",function(t,e){return this.optional(e)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(t)},a.validator.messages.date),a.validator.addMethod("extension",function(t,e,n){return n="string"==typeof n?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp("\\.("+n+")$","i"))},a.validator.format("Please enter a value with a valid extension.")),a.validator.addMethod("giroaccountNL",function(t,e){return this.optional(e)||/^[0-9]{1,7}$/.test(t)},"Please specify a valid giro account number"),a.validator.addMethod("greaterThan",function(t,e,n){n=a(n);return this.settings.onfocusout&&n.not(".validate-greaterThan-blur").length&&n.addClass("validate-greaterThan-blur").on("blur.validate-greaterThan",function(){a(e).valid()}),t>n.val()},"Please enter a greater value."),a.validator.addMethod("greaterThanEqual",function(t,e,n){n=a(n);return this.settings.onfocusout&&n.not(".validate-greaterThanEqual-blur").length&&n.addClass("validate-greaterThanEqual-blur").on("blur.validate-greaterThanEqual",function(){a(e).valid()}),t>=n.val()},"Please enter a greater value."),a.validator.addMethod("iban",function(t,e){if(this.optional(e))return!0;var n,i,r,o,s=t.replace(/ /g,"").toUpperCase(),a="",l=!0,u="";if(s.length<5)return!1;if(e=s.substring(0,2),t={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"},e=t[e],void 0!==e&&!new RegExp("^[A-Z]{2}\\d{2}"+e+"$","").test(s))return!1;for(n=s.substring(4,s.length)+s.substring(0,4),r=0;r<n.length;r++)"0"!==(i=n.charAt(r))&&(l=!1),l||(a+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(i));for(o=0;o<a.length;o++)u=(""+u+a.charAt(o))%97;return 1===u},"Please specify a valid IBAN"),a.validator.addMethod("integer",function(t,e){return this.optional(e)||/^-?\d+$/.test(t)},"A positive or negative non-decimal number please"),a.validator.addMethod("ipv4",function(t,e){return this.optional(e)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(t)},"Please enter a valid IP v4 address."),a.validator.addMethod("ipv6",function(t,e){return this.optional(e)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(t)},"Please enter a valid IP v6 address."),a.validator.addMethod("lessThan",function(t,e,n){n=a(n);return this.settings.onfocusout&&n.not(".validate-lessThan-blur").length&&n.addClass("validate-lessThan-blur").on("blur.validate-lessThan",function(){a(e).valid()}),t<n.val()},"Please enter a lesser value."),a.validator.addMethod("lessThanEqual",function(t,e,n){n=a(n);return this.settings.onfocusout&&n.not(".validate-lessThanEqual-blur").length&&n.addClass("validate-lessThanEqual-blur").on("blur.validate-lessThanEqual",function(){a(e).valid()}),t<=n.val()},"Please enter a lesser value."),a.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},"Letters only please"),a.validator.addMethod("letterswithbasicpunc",function(t,e){return this.optional(e)||/^[a-z\-.,()'"\s]+$/i.test(t)},"Letters or punctuation only please"),a.validator.addMethod("maxfiles",function(t,e,n){return!!this.optional(e)||!("file"===a(e).attr("type")&&e.files&&e.files.length>n)},a.validator.format("Please select no more than {0} files.")),a.validator.addMethod("maxsize",function(t,e,n){if(this.optional(e))return!0;if("file"===a(e).attr("type")&&e.files&&e.files.length)for(var i=0;i<e.files.length;i++)if(e.files[i].size>n)return!1;return!0},a.validator.format("File size must not exceed {0} bytes each.")),a.validator.addMethod("maxsizetotal",function(t,e,n){if(this.optional(e))return!0;if("file"===a(e).attr("type")&&e.files&&e.files.length)for(var i=0,r=0;r<e.files.length;r++)if(n<(i+=e.files[r].size))return!1;return!0},a.validator.format("Total size of all files must not exceed {0} bytes.")),a.validator.addMethod("mobileNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid mobile number"),a.validator.addMethod("mobileUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||9<t.length&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),a.validator.addMethod("netmask",function(t,e){return this.optional(e)||/^(254|252|248|240|224|192|128)\.0\.0\.0|255\.(254|252|248|240|224|192|128|0)\.0\.0|255\.255\.(254|252|248|240|224|192|128|0)\.0|255\.255\.255\.(254|252|248|240|224|192|128|0)/i.test(t)},"Please enter a valid netmask."),a.validator.addMethod("nieES",function(t,e){"use strict";if(this.optional(e))return!0;var n=new RegExp(/^[MXYZ]{1}[0-9]{7,8}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/gi),e=t.substr(t.length-1).toUpperCase();return!(10<(t=t.toString().toUpperCase()).length||t.length<9||!n.test(t))&&(t=9===(t=t.replace(/^[X]/,"0").replace(/^[Y]/,"1").replace(/^[Z]/,"2")).length?t.substr(0,8):t.substr(0,9),"TRWAGMYFPDXBNJZSQVHLCKET".charAt(parseInt(t,10)%23)===e)},"Please specify a valid NIE number."),a.validator.addMethod("nifES",function(t,e){"use strict";return!!this.optional(e)||!!(t=t.toUpperCase()).match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")&&(/^[0-9]{8}[A-Z]{1}$/.test(t)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.substring(8,0)%23)===t.charAt(8):!!/^[KLM]{1}/.test(t)&&t[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.substring(8,1)%23))},"Please specify a valid NIF number."),a.validator.addMethod("nipPL",function(t){"use strict";if(10!==(t=t.replace(/[^0-9]/g,"")).length)return!1;for(var e=[6,5,7,2,3,4,5,6,7],n=0,i=0;i<9;i++)n+=e[i]*t[i];var r=n%11;return(10==r?0:r)===parseInt(t[9],10)},"Please specify a valid NIP number."),a.validator.addMethod("nisBR",function(t){var e,n,i,r,o=0;if(11!==(t=t.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,"")).length)return!1;for(n=parseInt(t.substring(10,11),10),e=parseInt(t.substring(0,10),10),i=2;i<12;i++)10===(r=i)&&(r=2),11===i&&(r=3),o+=e%10*r,e=parseInt(e/10,10);return n===(n=1<(n=o%11)?11-n:0)},"Please specify a valid NIS/PIS number"),a.validator.addMethod("notEqualTo",function(t,e,n){return this.optional(e)||!a.validator.methods.equalTo.call(this,t,e,n)},"Please enter a different value, values must not be the same."),a.validator.addMethod("nowhitespace",function(t,e){return this.optional(e)||/^\S+$/i.test(t)},"No white space please"),a.validator.addMethod("pattern",function(t,e,n){return!!this.optional(e)||("string"==typeof n&&(n=new RegExp("^(?:"+n+")$")),n.test(t))},"Invalid format."),a.validator.addMethod("phoneNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid phone number."),a.validator.addMethod("phonePL",function(t,e){t=t.replace(/\s+/g,"");return this.optional(e)||/^(?:(?:(?:\+|00)?48)|(?:\(\+?48\)))?(?:1[2-8]|2[2-69]|3[2-49]|4[1-68]|5[0-9]|6[0-35-9]|[7-8][1-9]|9[145])\d{7}$/.test(t)},"Please specify a valid phone number"),a.validator.addMethod("phonesUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||9<t.length&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),a.validator.addMethod("phoneUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||9<t.length&&t.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),a.validator.addMethod("phoneUS",function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||9<t.length&&t.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number"),a.validator.addMethod("postalcodeBR",function(t,e){return this.optional(e)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(t)},"Informe um CEP válido."),a.validator.addMethod("postalCodeCA",function(t,e){return this.optional(e)||/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ] *\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i.test(t)},"Please specify a valid postal code"),a.validator.addMethod("postalcodeIT",function(t,e){return this.optional(e)||/^\d{5}$/.test(t)},"Please specify a valid postal code"),a.validator.addMethod("postalcodeNL",function(t,e){return this.optional(e)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(t)},"Please specify a valid postal code"),a.validator.addMethod("postcodeUK",function(t,e){return this.optional(e)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(t)},"Please specify a valid UK postcode"),a.validator.addMethod("require_from_group",function(t,e,n){var i=a(n[1],e.form),r=i.eq(0),o=r.data("valid_req_grp")?r.data("valid_req_grp"):a.extend({},this),n=i.filter(function(){return o.elementValue(this)}).length>=n[0];return r.data("valid_req_grp",o),a(e).data("being_validated")||(i.data("being_validated",!0),i.each(function(){o.element(this)}),i.data("being_validated",!1)),n},a.validator.format("Please fill at least {0} of these fields.")),a.validator.addMethod("skip_or_fill_minimum",function(t,e,n){var i=a(n[1],e.form),r=i.eq(0),o=r.data("valid_skip")?r.data("valid_skip"):a.extend({},this),s=i.filter(function(){return o.elementValue(this)}).length,n=0===s||s>=n[0];return r.data("valid_skip",o),a(e).data("being_validated")||(i.data("being_validated",!0),i.each(function(){o.element(this)}),i.data("being_validated",!1)),n},a.validator.format("Please either skip these fields or fill at least {0} of them.")),a.validator.addMethod("stateUS",function(t,e,n){var i=void 0===n,r=!i&&void 0!==n.caseSensitive&&n.caseSensitive,o=!i&&void 0!==n.includeTerritories&&n.includeTerritories,n=!i&&void 0!==n.includeMilitary&&n.includeMilitary,o=o||n?o&&n?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":o?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$";return o=r?new RegExp(o):new RegExp(o,"i"),this.optional(e)||o.test(t)},"Please specify a valid state"),a.validator.addMethod("strippedminlength",function(t,e,n){return a(t).text().length>=n},a.validator.format("Please enter at least {0} characters")),a.validator.addMethod("time",function(t,e){return this.optional(e)||/^([01]\d|2[0-3]|[0-9])(:[0-5]\d){1,2}$/.test(t)},"Please enter a valid time, between 00:00 and 23:59"),a.validator.addMethod("time12h",function(t,e){return this.optional(e)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(t)},"Please enter a valid time in 12-hour am/pm format"),a.validator.addMethod("url2",function(t,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},a.validator.messages.url),a.validator.addMethod("vinUS",function(t){if(17!==t.length)return!1;for(var e,n,i,r,o,s=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],a=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],l=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],u=0,c=0;c<17;c++){if(i=l[c],n=t.slice(c,c+1),8===c&&(o=n),isNaN(n)){for(e=0;e<s.length;e++)if(n.toUpperCase()===s[e]){n=a[e],n*=i,isNaN(o)&&8===e&&(o=s[e]);break}}else n*=i;u+=n}return 10===(r=u%11)&&(r="X"),r===o},"The specified vehicle identification number (VIN) is invalid."),a.validator.addMethod("zipcodeUS",function(t,e){return this.optional(e)||/^\d{5}(-\d{4})?$/.test(t)},"The specified US ZIP Code is invalid"),a.validator.addMethod("ziprange",function(t,e){return this.optional(e)||/^90[2-5]\d\{2\}-\d{4}$/.test(t)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx"),a}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SimpleBar=e()}(this,function(){"use strict";function r(t){return"object"==typeof t?null!==t:"function"==typeof t}function d(t){if(!r(t))throw TypeError(t+" is not an object!");return t}function s(t){try{return!!t()}catch(t){return 1}}var t=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}function i(t){return c?o.createElement(t):{}}function v(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function a(t,e){return g.call(t,e)}function l(t){return"Symbol(".concat(void 0===t?"":t,")_",(++y+_).toString(36))}function u(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}var p=n(function(t){t=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),o=p.document,c=r(o)&&r(o.createElement),h=!t&&!s(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}),f=Object.defineProperty,m={f:t?Object.defineProperty:function(t,e,n){if(d(t),e=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e,!0),d(n),h)try{return f(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},b=t?function(t,e,n){return m.f(t,e,v(1,n))}:function(t,e,n){return t[e]=n,t},g={}.hasOwnProperty,y=0,_=Math.random(),T=n(function(t){t=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),w=(T.version,n(function(t){var o=l("src"),e="toString",n=Function[e],s=(""+n).split(e);T.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,i){var r="function"==typeof n;r&&(a(n,"name")||b(n,"name",e)),t[e]!==n&&(r&&(a(n,o)||b(n,o,t[e]?""+t[e]:s.join(String(e)))),t===p?t[e]=n:i?t[e]?t[e]=n:b(t,e,n):(delete t[e],b(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||n.call(this)})})),S=n(function(t){var e="__core-js_shared__",n=p[e]||(p[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:T.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),k=n(function(t){var e=S("wks"),n=p.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:l)("Symbol."+t))}).store=e}),E=function(e,t,n){var i=k(e),r=n(u,i,""[e]),n=r[0],o=r[1];s(function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})&&(w(String.prototype,e,n),b(RegExp.prototype,i,2==t?function(t,e){return o.call(t,this,e)}:function(t){return o.call(t,this)}))};E("replace",2,function(r,o,s){return[function(t,e){var n=r(this),i=null==t?void 0:t[o];return void 0!==i?i.call(t,n,e):s.call(String(n),t,e)},s]});var C=m.f,x=Function.prototype,A=/^\s*function ([^ (]*)/;"name"in x||t&&C(x,"name",{configurable:!0,get:function(){try{return(""+this).match(A)[1]}catch(t){return""}}}),E("match",1,function(i,r,t){return[function(t){var e=i(this),n=null==t?void 0:t[r];return void 0!==n?n.call(t,e):new RegExp(t)[r](String(e))},t]});var O=k("unscopables"),L=Array.prototype;null==L[O]&&b(L,O,{});function P(t,e){return{value:e,done:!!t}}function D(t){return M.call(t).slice(8,-1)}function N(t){return R(u(t))}function I(i,r,t){if(!function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(i),void 0===r)return i;switch(t){case 1:return function(t){return i.call(r,t)};case 2:return function(t,e){return i.call(r,t,e)};case 3:return function(t,e,n){return i.call(r,t,e,n)}}return function(){return i.apply(r,arguments)}}var x=function(t){L[O][t]=!0},j={},M={}.toString,R=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==D(t)?t.split(""):Object(t)},U="prototype",q=function(t,e,n){var i,r,o,s=t&q.F,a=t&q.G,l=t&q.S,u=t&q.P,c=t&q.B,h=a?p:l?p[e]||(p[e]={}):(p[e]||{})[U],d=a?T:T[e]||(T[e]={}),f=d[U]||(d[U]={});for(i in a&&(n=e),n)r=((o=!s&&h&&void 0!==h[i])?h:n)[i],o=c&&o?I(r,p):u&&"function"==typeof r?I(Function.call,r):r,h&&w(h,i,r,t&q.U),d[i]!=r&&b(d,i,o),u&&f[i]!=r&&(f[i]=r)};p.core=T,q.F=1,q.G=2,q.S=4,q.P=8,q.B=16,q.W=32,q.U=64,q.R=128;function B(t){return isNaN(t=+t)?0:(0<t?G:W)(t)}function F(t){return 0<t?Y(B(t),9007199254740991):0}function $(){}function z(t,e,n){t&&!a(t=n?t:t.prototype,ut)&&lt(t,ut,{configurable:!0,value:e})}var H,V=q,W=Math.ceil,G=Math.floor,Y=Math.min,K=Math.max,X=Math.min,Z=S("keys"),E=function(t){return Z[t]||(Z[t]=l(t))},Q=(H=!1,function(t,e,n){var i,r=N(t),o=F(r.length),s=(t=o,(n=B(n=n))<0?K(n+t,0):X(n,t));if(H&&e!=e){for(;s<o;)if((i=r[s++])!=i)return!0}else for(;s<o;s++)if((H||s in r)&&r[s]===e)return H||s||0;return!H&&-1}),J=E("IE_PROTO"),tt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),et=Object.keys||function(t){return function(t,e){var n,i=N(t),r=0,o=[];for(n in i)n!=J&&a(i,n)&&o.push(n);for(;e.length>r;)a(i,n=e[r++])&&(~Q(o,n)||o.push(n));return o}(t,tt)},nt=t?Object.defineProperties:function(t,e){d(t);for(var n,i=et(e),r=i.length,o=0;o<r;)m.f(t,n=i[o++],e[n]);return t},t=p.document,it=t&&t.documentElement,rt=E("IE_PROTO"),ot="prototype",st=function(){var t=i("iframe"),e=tt.length;for(t.style.display="none",it.appendChild(t),t.src="javascript:",(t=t.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),st=t.F;e--;)delete st[ot][tt[e]];return st()},at=Object.create||function(t,e){var n;return null!==t?($[ot]=d(t),n=new $,$[ot]=null,n[rt]=t):n=st(),void 0===e?n:nt(n,e)},lt=m.f,ut=k("toStringTag"),ct={};b(ct,k("iterator"),function(){return this});function ht(t){return Object(u(t))}function dt(){return this}var ft=E("IE_PROTO"),pt=Object.prototype,mt=Object.getPrototypeOf||function(t){return t=ht(t),a(t,ft)?t[ft]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?pt:null},gt=k("iterator"),yt=!([].keys&&"next"in[].keys()),vt="values",E=function(t,e,n,i,r,o,s){y=e,m=i,(g=n).prototype=at(ct,{next:v(1,m)}),z(g,y+" Iterator");function a(t){if(!yt&&t in f)return f[t];switch(t){case"keys":case vt:return function(){return new n(this,t)}}return function(){return new n(this,t)}}var l,u,c,h=e+" Iterator",d=r==vt,i=!1,f=t.prototype,p=f[gt]||f["@@iterator"]||r&&f[r],m=p||a(r),g=r?d?a("entries"):m:void 0,y="Array"==e&&f.entries||p;if(y&&(c=mt(y.call(new t)))!==Object.prototype&&c.next&&(z(c,h,!0),"function"!=typeof c[gt]&&b(c,gt,dt)),d&&p&&p.name!==vt&&(i=!0,m=function(){return p.call(this)}),!yt&&!i&&f[gt]||b(f,gt,m),j[e]=m,j[h]=dt,r)if(l={values:d?m:a(vt),keys:o?m:a("keys"),entries:g},s)for(u in l)u in f||w(f,u,l[u]);else V(V.P+V.F*(yt||i),e,l);return l},bt=E(Array,"Array",function(t,e){this._t=N(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,P(1)):P(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");j.Arguments=j.Array,x("keys"),x("values"),x("entries");for(var _t=k("iterator"),Tt=k("toStringTag"),wt=j.Array,St={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},kt=et(St),Et=0;Et<kt.length;Et++){var Ct,xt=kt[Et],At=St[xt],Ot=p[xt],Lt=Ot&&Ot.prototype;if(Lt&&(Lt[_t]||b(Lt,_t,wt),Lt[Tt]||b(Lt,Tt,xt),j[xt]=wt,At))for(Ct in bt)Lt[Ct]||w(Lt,Ct,bt[Ct],!0)}var Pt,Dt=(Pt=!0,function(t,e){var n,i=String(u(t)),r=B(e),t=i.length;return r<0||t<=r?Pt?"":void 0:(e=i.charCodeAt(r))<55296||56319<e||r+1===t||(n=i.charCodeAt(r+1))<56320||57343<n?Pt?i.charAt(r):e:Pt?i.slice(r,r+2):n-56320+(e-55296<<10)+65536});E(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,e=this._i;return e>=t.length?{value:void 0,done:!0}:(e=Dt(t,e),this._i+=e.length,{value:e,done:!1})});function Nt(t,e,n){e in t?m.f(t,e,v(0,n)):t[e]=n}var It=k("iterator"),jt=Array.prototype,Mt=k("toStringTag"),Rt="Arguments"==D(function(){return arguments}()),Ut=k("iterator"),qt=T.getIteratorMethod=function(t){if(null!=t)return t[Ut]||t["@@iterator"]||j[void 0===(e=t)?"Undefined":null===e?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Object(e),Mt))?e:Rt?D(t):"Object"==(e=D(t))&&"function"==typeof t.callee?"Arguments":e];var e},Bt=k("iterator"),Ft=!1;try{[7][Bt]().return=function(){Ft=!0}}catch(t){}V(V.S+V.F*!function(t,e){if(!e&&!Ft)return!1;var n=!1;try{var i=[7],r=i[Bt]();r.next=function(){return{done:n=!0}},i[Bt]=function(){return r},t(i)}catch(t){}return n}(function(t){}),"Array",{from:function(t,e,n){var i,r,o,s,a=ht(t),l="function"==typeof this?this:Array,t=arguments.length,u=1<t?e:void 0,c=void 0!==u,h=0,e=qt(a);if(c&&(u=I(u,2<t?n:void 0,2)),null!=e&&(l!=Array||(void 0===(n=e)||j.Array!==n&&jt[It]!==n)))for(s=e.call(a),r=new l;!(o=s.next()).done;h++)Nt(r,h,c?function(e,t,n,i){try{return i?t(d(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&d(r.call(e)),t}}(s,u,[o.value,h],!0):o.value);else for(r=new l(i=F(a.length));h<i;h++)Nt(r,h,c?u(a[h],h):a[h]);return r.length=h,r}});var $t={f:Object.getOwnPropertySymbols},zt={f:{}.propertyIsEnumerable},Ht=Object.assign,E=!Ht||s(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=Ht({},t)[n]||Object.keys(Ht({},e)).join("")!=i})?function(t){for(var e=ht(t),n=arguments.length,i=1,r=$t.f,o=zt.f;i<n;)for(var s,a=R(arguments[i++]),l=r?et(a).concat(r(a)):et(a),u=l.length,c=0;c<u;)o.call(a,s=l[c++])&&(e[s]=a[s]);return e}:Ht;function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}V(V.S+V.F,"Object",{assign:E});var Wt=n(function(t,e){t.exports=function(){if("undefined"==typeof document)return 0;var t=document.body,e=document.createElement("div"),n=e.style;return n.position="absolute",n.top=n.left="-9999px",n.width=n.height="100px",n.overflow="scroll",t.appendChild(e),n=e.offsetWidth-e.clientWidth,t.removeChild(e),n}}),Gt="Expected a function",Yt=NaN,Kt="[object Symbol]",Xt=/^\s+|\s+$/g,Zt=/^[-+]0x[0-9a-f]+$/i,Qt=/^0b[01]+$/i,Jt=/^0o[0-7]+$/i,te=parseInt,E="object"==typeof e&&e&&e.Object===Object&&e,e="object"==typeof self&&self&&self.Object===Object&&self,ee=E||e||Function("return this")(),ne=Object.prototype.toString,ie=Math.max,re=Math.min,oe=function(){return ee.Date.now()};function se(i,n,t){var r,o,s,a,l,u,c=0,h=!1,d=!1,e=!0;if("function"!=typeof i)throw new TypeError(Gt);function f(t){var e=r,n=o;return r=o=void 0,c=t,a=i.apply(n,e)}function p(t){var e=t-u;return void 0===u||n<=e||e<0||d&&s<=t-c}function m(){var t,e=oe();if(p(e))return g(e);l=setTimeout(m,(e=n-((t=e)-u),d?re(e,s-(t-c)):e))}function g(t){return l=void 0,e&&r?f(t):(r=o=void 0,a)}function y(){var t=oe(),e=p(t);if(r=arguments,o=this,u=t,e){if(void 0===l)return c=e=u,l=setTimeout(m,n),h?f(e):a;if(d)return l=setTimeout(m,n),f(u)}return void 0===l&&(l=setTimeout(m,n)),a}return n=le(n)||0,ae(t)&&(h=!!t.leading,d="maxWait"in t,s=d?ie(le(t.maxWait)||0,n):s,e="trailing"in t?!!t.trailing:e),y.cancel=function(){void 0!==l&&clearTimeout(l),r=u=o=l=void(c=0)},y.flush=function(){return void 0===l?a:g(oe())},y}function ae(t){var e=typeof t;return t&&("object"==e||"function"==e)}function le(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||!!(n=e)&&"object"==typeof n&&ne.call(e)==Kt)return Yt;var e,n;if(ae(t)&&(t=ae(i="function"==typeof t.valueOf?t.valueOf():t)?i+"":i),"string"!=typeof t)return 0===t?t:+t;t=t.replace(Xt,"");var i=Qt.test(t);return i||Jt.test(t)?te(t.slice(2),i?2:8):Zt.test(t)?Yt:+t}var ue=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new TypeError(Gt);return ae(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),se(t,e,{leading:i,maxWait:e,trailing:r})},ce="undefined"!=typeof Map?Map:((je={size:{configurable:!0}}).size.get=function(){return this.__entries__.length},de.prototype.get=function(t){t=he(this.__entries__,t),t=this.__entries__[t];return t&&t[1]},de.prototype.set=function(t,e){var n=he(this.__entries__,t);~n?this.__entries__[n][1]=e:this.__entries__.push([t,e])},de.prototype.delete=function(t){var e=this.__entries__,t=he(e,t);~t&&e.splice(t,1)},de.prototype.has=function(t){return!!~he(this.__entries__,t)},de.prototype.clear=function(){this.__entries__.splice(0)},de.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n+=1){var r=i[n];t.call(e,r[1],r[0])}},Object.defineProperties(de.prototype,je),de);function he(t,n){var i=-1;return t.some(function(t,e){return t[0]===n&&(i=e,!0)}),i}function de(){this.__entries__=[]}function fe(){function t(){o&&(o=!1,i()),s&&n()}function e(){ge(t)}function n(){var t=Date.now();if(o){if(t-a<2)return;s=!0}else s=!(o=!0),setTimeout(e,r);a=t}var i,r,o,s,a;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(i=this.refresh.bind(this),s=o=!(r=20),a=0,n)}var pe="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,me="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),ge="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(me):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},ye=["top","right","bottom","left","width","height","size","weight"],ve="undefined"!=typeof MutationObserver;fe.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},fe.prototype.removeObserver=function(t){var e=this.observers_,t=e.indexOf(t);~t&&e.splice(t,1),!e.length&&this.connected_&&this.disconnect_()},fe.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},fe.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),0<t.length},fe.prototype.connect_=function(){pe&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ve?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},fe.prototype.disconnect_=function(){pe&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},fe.prototype.onTransitionEnd_=function(t){var e=t.propertyName;void 0===e&&(e=""),ye.some(function(t){return!!~e.indexOf(t)})&&this.refresh()},fe.getInstance=function(){return this.instance_||(this.instance_=new fe),this.instance_},fe.instance_=null;function be(t,e){for(var n=0,i=Object.keys(e);n<i.length;n+=1){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t}var _e=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||me},Te=xe(0,0,0,0);function we(t){return parseFloat(t)||0}function Se(n){for(var t=[],e=arguments.length-1;0<e--;)t[e]=arguments[e+1];return t.reduce(function(t,e){return t+we(n["border-"+e+"-width"])},0)}function ke(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Te;var i=_e(t).getComputedStyle(t),r=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n+=1){var r=i[n],o=t["padding-"+r];e[r]=we(o)}return e}(i),o=r.left+r.right,s=r.top+r.bottom,a=we(i.width),l=we(i.height);return"border-box"===i.boxSizing&&(Math.round(a+o)!==e&&(a-=Se(i,"left","right")+o),Math.round(l+s)!==n&&(l-=Se(i,"top","bottom")+s)),(t=t)!==_e(t).document.documentElement&&(e=Math.round(a+o)-e,n=Math.round(l+s)-n,1!==Math.abs(e)&&(a-=e),1!==Math.abs(n)&&(l-=n)),xe(r.left,r.top,a,l)}var Ee="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof _e(t).SVGGraphicsElement}:function(t){return t instanceof _e(t).SVGElement&&"function"==typeof t.getBBox};function Ce(t){return pe?Ee(t)?xe(0,0,(e=(e=t).getBBox()).width,e.height):ke(t):Te;var e}function xe(t,e,n,i){return{x:t,y:e,width:n,height:i}}function Ae(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=xe(0,0,0,0),this.target=t}Ae.prototype.isActive=function(){var t=Ce(this.target);return(this.contentRect_=t).width!==this.broadcastWidth||t.height!==this.broadcastHeight},Ae.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};function Oe(t,e){var n,i,r,o=(n=(o=e).x,i=o.y,r=o.width,e=o.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(o.prototype),be(o,{x:n,y:i,width:r,height:e,top:i,right:n+r,bottom:e+i,left:n}),o);be(this,{target:t,contentRect:o})}function Le(t,e,n){if(this.activeObservations_=[],this.observations_=new ce,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}Le.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof _e(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Ae(t)),this.controller_.addObserver(this),this.controller_.refresh())}},Le.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof _e(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},Le.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Le.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},Le.prototype.broadcastActive=function(){var t,e;this.hasActive()&&(t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new Oe(t.target,t.broadcastRect())}),this.callback_.call(t,e,t),this.clearActive())},Le.prototype.clearActive=function(){this.activeObservations_.splice(0)},Le.prototype.hasActive=function(){return 0<this.activeObservations_.length};var Pe=new("undefined"!=typeof WeakMap?WeakMap:ce),De=function(t){if(!(this instanceof De))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=fe.getInstance(),e=new Le(t,e,this);Pe.set(this,e)};["observe","unobserve","disconnect"].forEach(function(e){De.prototype[e]=function(){return(t=Pe.get(this))[e].apply(t,arguments);var t}});var Ne=void 0!==me.ResizeObserver?me.ResizeObserver:De,Ie=!("undefined"==typeof window||!window.document||!window.document.createElement),je=function(){function n(t,e){var i=this;!function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.onScrollX=function(){i.scrollXTicking||(window.requestAnimationFrame(i.scrollX),i.scrollXTicking=!0)},this.onScrollY=function(){i.scrollYTicking||(window.requestAnimationFrame(i.scrollY),i.scrollYTicking=!0)},this.scrollX=function(){i.showScrollbar("x"),i.positionScrollbar("x"),i.scrollXTicking=!1},this.scrollY=function(){i.showScrollbar("y"),i.positionScrollbar("y"),i.scrollYTicking=!1},this.onMouseEnter=function(){i.showScrollbar("x"),i.showScrollbar("y")},this.onMouseMove=function(t){var e=i.trackY.getBoundingClientRect(),n=i.trackX.getBoundingClientRect();i.mouseX=t.clientX,i.mouseY=t.clientY,i.isWithinBounds(e)&&i.showScrollbar("y"),i.isWithinBounds(n)&&i.showScrollbar("x")},this.onWindowResize=function(){i.hideNativeScrollbar()},this.hideScrollbars=function(){var t=i.trackY.getBoundingClientRect(),e=i.trackX.getBoundingClientRect();i.isWithinBounds(t)||(i.scrollbarY.classList.remove("visible"),i.isVisible.y=!1),i.isWithinBounds(e)||(i.scrollbarX.classList.remove("visible"),i.isVisible.x=!1)},this.onMouseDown=function(t){var e=i.scrollbarY.getBoundingClientRect(),n=i.scrollbarX.getBoundingClientRect();i.isWithinBounds(e)&&(t.preventDefault(),i.onDrag(t,"y")),i.isWithinBounds(n)&&(t.preventDefault(),i.onDrag(t,"x"))},this.drag=function(t){var e;t.preventDefault(),t="y"===i.currentAxis?(e=t.pageY,n=i.trackY,i.scrollContentEl):(e=t.pageX,n=i.trackX,i.contentEl);var n=(e-n.getBoundingClientRect()[i.offsetAttr[i.currentAxis]]-i.dragOffset[i.currentAxis])/n[i.sizeAttr[i.currentAxis]]*i.contentEl[i.scrollSizeAttr[i.currentAxis]];t[i.scrollOffsetAttr[i.currentAxis]]=n},this.onEndDrag=function(){document.removeEventListener("mousemove",i.drag),document.removeEventListener("mouseup",i.onEndDrag)},this.el=t,this.flashTimeout,this.contentEl,this.scrollContentEl,this.dragOffset={x:0,y:0},this.isEnabled={x:!0,y:!0},this.isVisible={x:!1,y:!1},this.scrollOffsetAttr={x:"scrollLeft",y:"scrollTop"},this.sizeAttr={x:"offsetWidth",y:"offsetHeight"},this.scrollSizeAttr={x:"scrollWidth",y:"scrollHeight"},this.offsetAttr={x:"left",y:"top"},this.handleSize={x:0,y:0},this.globalObserver,this.mutationObserver,this.resizeObserver,this.currentAxis,this.scrollbarWidth,this.options=Object.assign({},n.defaultOptions,e),this.isRtl="rtl"===this.options.direction,this.classNames=this.options.classNames,this.offsetSize=20,this.recalculate=ue(this.recalculate.bind(this),1e3),this.onMouseMove=ue(this.onMouseMove.bind(this),100),this.init()}var t,e,i;return t=n,i=[{key:"initHtmlApi",value:function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(function(t){t.forEach(function(t){Array.from(t.addedNodes).forEach(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?t.SimpleBar||new n(t,n.getElOptions(t)):Array.from(t.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar||new n(t,n.getElOptions(t))}))}),Array.from(t.removedNodes).forEach(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?t.SimpleBar&&t.SimpleBar.unMount():Array.from(t.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar&&t.SimpleBar.unMount()}))})})}),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))}},{key:"getElOptions",value:function(t){return Array.from(t.attributes).reduce(function(t,e){var n=e.name.match(/data-simplebar-(.+)/);if(n){var i=n[1].replace(/\W+(.)/g,function(t,e){return e.toUpperCase()});switch(e.value){case"true":t[i]=!0;break;case"false":t[i]=!1;break;case void 0:t[i]=!0;break;default:t[i]=e.value}}return t},{})}},{key:"removeObserver",value:function(){this.globalObserver.disconnect()}},{key:"initDOMLoadedElements",value:function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.from(document.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar||new n(t,n.getElOptions(t))})}},{key:"defaultOptions",get:function(){return{autoHide:!0,forceVisible:!1,classNames:{content:"simplebar-content",scrollContent:"simplebar-scroll-content",scrollbar:"simplebar-scrollbar",track:"simplebar-track"},scrollbarMinSize:25,scrollbarMaxSize:0,direction:"ltr",timeout:1e3}}}],(e=[{key:"init",value:function(){(this.el.SimpleBar=this).initDOM(),Ie&&(this.hideNativeScrollbar(),this.render(),this.initListeners())}},{key:"initDOM",value:function(){var t,e,n=this;if(Array.from(this.el.children).filter(function(t){return t.classList.contains(n.classNames.scrollContent)}).length)this.trackX=this.el.querySelector(".".concat(this.classNames.track,".horizontal")),this.trackY=this.el.querySelector(".".concat(this.classNames.track,".vertical")),this.scrollContentEl=this.el.querySelector(".".concat(this.classNames.scrollContent)),this.contentEl=this.el.querySelector(".".concat(this.classNames.content));else{for(this.scrollContentEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.scrollContentEl.classList.add(this.classNames.scrollContent),this.contentEl.classList.add(this.classNames.content);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.scrollContentEl.appendChild(this.contentEl),this.el.appendChild(this.scrollContentEl)}this.trackX&&this.trackY||(t=document.createElement("div"),e=document.createElement("div"),t.classList.add(this.classNames.track),e.classList.add(this.classNames.scrollbar),this.options.autoHide||e.classList.add("visible"),t.appendChild(e),this.trackX=t.cloneNode(!0),this.trackX.classList.add("horizontal"),this.trackY=t.cloneNode(!0),this.trackY.classList.add("vertical"),this.el.insertBefore(this.trackX,this.el.firstChild),this.el.insertBefore(this.trackY,this.el.firstChild)),this.scrollbarX=this.trackX.querySelector(".".concat(this.classNames.scrollbar)),this.scrollbarY=this.trackY.querySelector(".".concat(this.classNames.scrollbar)),this.el.setAttribute("data-simplebar","init")}},{key:"initListeners",value:function(){var e=this;this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("mousemove",this.onMouseMove),this.contentEl.addEventListener("scroll",this.onScrollX),this.scrollContentEl.addEventListener("scroll",this.onScrollY),window.addEventListener("resize",this.onWindowResize),"undefined"!=typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(t){t.forEach(function(t){(e.isChildNode(t.target)||t.addedNodes.length)&&e.recalculate()})}),this.mutationObserver.observe(this.el,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.resizeObserver=new Ne(this.recalculate),this.resizeObserver.observe(this.el)}},{key:"recalculate",value:function(){this.render()}},{key:"render",value:function(){this.contentSizeX=this.contentEl[this.scrollSizeAttr.x],this.contentSizeY=this.contentEl[this.scrollSizeAttr.y]-(this.scrollbarWidth||this.offsetSize),this.trackXSize=this.trackX[this.sizeAttr.x],this.trackYSize=this.trackY[this.sizeAttr.y],this.isEnabled.x=this.trackXSize<this.contentSizeX,this.isEnabled.y=this.trackYSize<this.contentSizeY,this.resizeScrollbar("x"),this.resizeScrollbar("y"),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},{key:"resizeScrollbar",value:function(t){var e,n,i=0<arguments.length&&void 0!==t?t:"y";(this.isEnabled[i]||this.options.forceVisible)&&(n=(t="x"===i?(e=this.scrollbarX,n=this.contentSizeX,this.trackXSize):(e=this.scrollbarY,n=this.contentSizeY,this.trackYSize))/n,this.handleSize[i]=Math.max(~~(n*t),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(this.handleSize[i]=Math.min(this.handleSize[i],this.options.scrollbarMaxSize)),"x"===i?e.style.width="".concat(this.handleSize[i],"px"):e.style.height="".concat(this.handleSize[i],"px"))}},{key:"positionScrollbar",value:function(t){var e,n,i=0<arguments.length&&void 0!==t?t:"y",t="x"===i?(e=this.scrollbarX,n=this.contentEl[this.scrollOffsetAttr[i]],r=this.contentSizeX,this.trackXSize):(e=this.scrollbarY,n=this.scrollContentEl[this.scrollOffsetAttr[i]],r=this.contentSizeY,this.trackYSize),r=n/(r-t),r=~~((t-this.handleSize[i])*r);(this.isEnabled[i]||this.options.forceVisible)&&(e.style.transform="x"===i?"translate3d(".concat(r,"px, 0, 0)"):"translate3d(0, ".concat(r,"px, 0)"))}},{key:"toggleTrackVisibility",value:function(t){var e=0<arguments.length&&void 0!==t?t:"y",n="y"===e?this.trackY:this.trackX,t="y"===e?this.scrollbarY:this.scrollbarX;this.isEnabled[e]||this.options.forceVisible?n.style.visibility="visible":n.style.visibility="hidden",this.options.forceVisible&&(this.isEnabled[e]?t.style.visibility="visible":t.style.visibility="hidden")}},{key:"hideNativeScrollbar",value:function(){this.scrollbarWidth=Wt(),this.scrollContentEl.style[this.isRtl?"paddingLeft":"paddingRight"]="".concat(this.scrollbarWidth||this.offsetSize,"px"),this.scrollContentEl.style.marginBottom="-".concat(2*this.scrollbarWidth||this.offsetSize,"px"),this.contentEl.style.paddingBottom="".concat(this.scrollbarWidth||this.offsetSize,"px"),0!==this.scrollbarWidth&&(this.contentEl.style[this.isRtl?"marginLeft":"marginRight"]="-".concat(this.scrollbarWidth,"px"))}},{key:"showScrollbar",value:function(t){var e=0<arguments.length&&void 0!==t?t:"y";this.isVisible[e]||(t="x"===e?this.scrollbarX:this.scrollbarY,this.isEnabled[e]&&(t.classList.add("visible"),this.isVisible[e]=!0),this.options.autoHide&&(window.clearInterval(this.flashTimeout),this.flashTimeout=window.setInterval(this.hideScrollbars,this.options.timeout)))}},{key:"onDrag",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:"y";t.preventDefault();e="y"===n?this.scrollbarY:this.scrollbarX,t="y"===n?t.pageY:t.pageX;this.dragOffset[n]=t-e.getBoundingClientRect()[this.offsetAttr[n]],this.currentAxis=n,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.onEndDrag)}},{key:"getScrollElement",value:function(t){return"y"===(0<arguments.length&&void 0!==t?t:"y")?this.scrollContentEl:this.contentEl}},{key:"getContentElement",value:function(){return this.contentEl}},{key:"removeListeners",value:function(){this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),this.scrollContentEl.removeEventListener("scroll",this.onScrollY),this.contentEl.removeEventListener("scroll",this.onScrollX),this.mutationObserver.disconnect(),this.resizeObserver.disconnect()}},{key:"unMount",value:function(){this.removeListeners(),this.el.SimpleBar=null}},{key:"isChildNode",value:function(t){return null!==t&&(t===this.el||this.isChildNode(t.parentNode))}},{key:"isWithinBounds",value:function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height}}])&&Vt(t.prototype,e),i&&Vt(t,i),n}();return Ie&&je.initHtmlApi(),je}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Popper=e()}(this,function(){"use strict";for(var t="undefined"!=typeof window&&"undefined"!=typeof document,e=["Edge","Trident","Firefox"],n=0,i=0;i<e.length;i+=1)if(t&&0<=navigator.userAgent.indexOf(e[i])){n=1;break}var r=t&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},n))}};function o(t){return t&&"[object Function]"==={}.toString.call(t)}function h(t,e){if(1!==t.nodeType)return[];t=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?t[e]:t}function u(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function c(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=h(t),n=e.overflow,i=e.overflowX,e=e.overflowY;return/(auto|scroll|overlay)/.test(n+e+i)?t:c(u(t))}var s=t&&!(!window.MSInputMethodContext||!document.documentMode),a=t&&/MSIE 10/.test(navigator.userAgent);function d(t){return 11===t?s:10!==t&&s||a}function f(t){if(!t)return document.documentElement;for(var e=d(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===h(n,"position")?f(n):n:(t?t.ownerDocument:document).documentElement}function l(t){return null!==t.parentNode?l(t.parentNode):t}function p(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?t:e,r=n?e:t,n=document.createRange();n.setStart(i,0),n.setEnd(r,0);n=n.commonAncestorContainer;if(t!==n&&e!==n||i.contains(r))return"BODY"===(r=(i=n).nodeName)||"HTML"!==r&&f(i.firstElementChild)!==i?f(n):n;n=l(t);return n.host?p(n.host,e):p(t,l(e).host)}function m(t,e){var n="top"===(1<arguments.length&&void 0!==e?e:"top")?"scrollTop":"scrollLeft",e=t.nodeName;if("BODY"!==e&&"HTML"!==e)return t[n];e=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||e)[n]}function g(t,e){var n="x"===e?"Left":"Top",e="Left"==n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+e+"Width"],10)}function y(t,e,n,i){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],d(10)?parseInt(n["offset"+t])+parseInt(i["margin"+("Height"===t?"Top":"Left")])+parseInt(i["margin"+("Height"===t?"Bottom":"Right")]):0)}function v(t){var e=t.body,n=t.documentElement,t=d(10)&&getComputedStyle(n);return{height:y("Height",e,n,t),width:y("Width",e,n,t)}}var b=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_=function(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),t};function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};function k(t){return S({},t,{right:t.left+t.width,bottom:t.top+t.height})}function E(t){var e,n,i={};try{d(10)?(i=t.getBoundingClientRect(),e=m(t,"top"),n=m(t,"left"),i.top+=e,i.left+=n,i.bottom+=e,i.right+=n):i=t.getBoundingClientRect()}catch(t){}var r={left:i.left,top:i.top,width:i.right-i.left,height:i.bottom-i.top},o="HTML"===t.nodeName?v(t.ownerDocument):{},s=o.width||t.clientWidth||r.right-r.left,a=o.height||t.clientHeight||r.bottom-r.top,o=t.offsetWidth-s,s=t.offsetHeight-a;return(o||s)&&(o-=g(a=h(t),"x"),s-=g(a,"y"),r.width-=o,r.height-=s),k(r)}function C(t,e,n){var i=2<arguments.length&&void 0!==n&&n,r=d(10),o="HTML"===e.nodeName,s=E(t),a=E(e),l=c(t),u=h(e),n=parseFloat(u.borderTopWidth,10),t=parseFloat(u.borderLeftWidth,10);i&&o&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));s=k({top:s.top-a.top-n,left:s.left-a.left-t,width:s.width,height:s.height});return s.marginTop=0,s.marginLeft=0,!r&&o&&(o=parseFloat(u.marginTop,10),u=parseFloat(u.marginLeft,10),s.top-=n-o,s.bottom-=n-o,s.left-=t-u,s.right-=t-u,s.marginTop=o,s.marginLeft=u),(r&&!i?e.contains(l):e===l&&"BODY"!==l.nodeName)&&(s=function(t,e,n){var i=2<arguments.length&&void 0!==n&&n,n=m(e,"top"),e=m(e,"left"),i=i?-1:1;return t.top+=n*i,t.bottom+=n*i,t.left+=e*i,t.right+=e*i,t}(s,e)),s}function x(t){if(!t||!t.parentElement||d())return document.documentElement;for(var e=t.parentElement;e&&"none"===h(e,"transform");)e=e.parentElement;return e||document.documentElement}function A(t,e,n,i,r){var o=4<arguments.length&&void 0!==r&&r,s={top:0,left:0},a=o?x(t):p(t,e);"viewport"===i?s=function(t,e){var n=1<arguments.length&&void 0!==e&&e,i=t.ownerDocument.documentElement,r=C(t,i),o=Math.max(i.clientWidth,window.innerWidth||0),e=Math.max(i.clientHeight,window.innerHeight||0),t=n?0:m(i),i=n?0:m(i,"left");return k({top:t-r.top+r.marginTop,left:i-r.left+r.marginLeft,width:o,height:e})}(a,o):(r=void 0,"scrollParent"===i?"BODY"===(r=c(u(e))).nodeName&&(r=t.ownerDocument.documentElement):r="window"===i?t.ownerDocument.documentElement:i,l=C(r,a,o),"HTML"!==r.nodeName||function t(e){var n=e.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===h(e,"position")||t(u(e)))}(a)?s=l:(t=(a=v(t.ownerDocument)).height,a=a.width,s.top+=l.top-l.marginTop,s.bottom=t+l.top,s.left+=l.left-l.marginLeft,s.right=a+l.left));var l="number"==typeof(n=n||0);return s.left+=l?n:n.left||0,s.top+=l?n:n.top||0,s.right-=l?n:n.right||0,s.bottom-=l?n:n.bottom||0,s}function O(t,e,n,i,r,o){o=5<arguments.length&&void 0!==o?o:0;if(-1===t.indexOf("auto"))return t;var r=A(n,i,o,r),s={top:{width:r.width,height:e.top-r.top},right:{width:r.right-e.right,height:r.height},bottom:{width:r.width,height:r.bottom-e.bottom},left:{width:e.left-r.left,height:r.height}},e=Object.keys(s).map(function(t){return S({key:t},s[t],{area:(t=s[t]).width*t.height})}).sort(function(t,e){return e.area-t.area}),r=e.filter(function(t){var e=t.width,t=t.height;return e>=n.clientWidth&&t>=n.clientHeight}),e=(0<r.length?r:e)[0].key,t=t.split("-")[1];return e+(t?"-"+t:"")}function L(t,e,n,i){i=3<arguments.length&&void 0!==i?i:null;return C(n,i?x(e):p(e,n),i)}function P(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop)+parseFloat(e.marginBottom),e=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return{width:t.offsetWidth+e,height:t.offsetHeight+n}}function D(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function N(t,e,n){n=n.split("-")[0];var i=P(t),r={width:i.width,height:i.height},o=-1!==["right","left"].indexOf(n),s=o?"top":"left",a=o?"left":"top",t=o?"height":"width",o=o?"width":"height";return r[s]=e[s]+e[t]/2-i[t]/2,r[a]=n===a?e[a]-i[o]:e[D(a)],r}function I(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function j(t,n,e){return(void 0===e?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var i=I(t,function(t){return t[e]===n});return t.indexOf(i)}(t,"name",e))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&o(e)&&(n.offsets.popper=k(n.offsets.popper),n.offsets.reference=k(n.offsets.reference),n=e(n,t))}),n}function M(t,n){return t.some(function(t){var e=t.name;return t.enabled&&e===n})}function R(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length;i++){var r=e[i],r=r?""+r+n:t;if(void 0!==document.body.style[r])return r}return null}function U(t){t=t.ownerDocument;return t?t.defaultView:window}function q(t,e,n,i){n.updateBound=i,U(t).addEventListener("resize",n.updateBound,{passive:!0});t=c(t);return function t(e,n,i,r){var o="BODY"===e.nodeName,e=o?e.ownerDocument.defaultView:e;e.addEventListener(n,i,{passive:!0}),o||t(c(e.parentNode),n,i,r),r.push(e)}(t,"scroll",n.updateBound,n.scrollParents),n.scrollElement=t,n.eventsEnabled=!0,n}function B(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,U(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function F(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function $(n,i){Object.keys(i).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&F(i[t])&&(e="px"),n.style[t]=i[t]+e})}function z(t,e,n){var i,r=I(t,function(t){return t.name===e}),o=!!r&&t.some(function(t){return t.name===n&&t.enabled&&t.order<r.order});return o||(i="`"+e+"`",t="`"+n+"`",console.warn(t+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")),o}var H=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],V=H.slice(3);function W(t,e){e=1<arguments.length&&void 0!==e&&e,t=V.indexOf(t),t=V.slice(t+1).concat(V.slice(0,t));return e?t.reverse():t}var G="flip",Y="clockwise",K="counterclockwise";function X(t,r,o,e){var s=[0,0],a=-1!==["right","left"].indexOf(e),n=t.split(/(\+|\-)/).map(function(t){return t.trim()}),e=n.indexOf(I(n,function(t){return-1!==t.search(/,|\s/)}));n[e]&&-1===n[e].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");t=/\s*,\s*|\s+/;return(-1!==e?[n.slice(0,e).concat([n[e].split(t)[0]]),[n[e].split(t)[1]].concat(n.slice(e+1))]:[n]).map(function(t,e){var n=(1===e?!a:a)?"height":"width",i=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,i=!0,t):i?(t[t.length-1]+=e,i=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,i){var r=+(o=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/))[1],o=o[2];if(!r)return t;if(0!==o.indexOf("%"))return"vh"!==o&&"vw"!==o?r:("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r;var s=void 0;switch(o){case"%p":s=n;break;case"%":case"%r":default:s=i}return k(s)[e]/100*r}(t,n,r,o)})}).forEach(function(n,i){n.forEach(function(t,e){F(t)&&(s[i]+=t*("-"===n[e-1]?-1:1))})}),s}var Z={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e,n,i=t.placement,r=i.split("-")[0],o=i.split("-")[1];return o&&(e=(n=t.offsets).reference,i=n.popper,r=(n=-1!==["bottom","top"].indexOf(r))?"width":"height",r={start:w({},n=n?"left":"top",e[n]),end:w({},n,e[n]+e[r]-i[r])},t.offsets.popper=S({},i,r[o])),t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,i=t.placement,r=(o=t.offsets).popper,e=o.reference,o=i.split("-")[0],i=void 0,i=F(+n)?[+n,0]:X(n,r,e,o);return"left"===o?(r.top+=i[0],r.left-=i[1]):"right"===o?(r.top+=i[0],r.left+=i[1]):"top"===o?(r.left+=i[0],r.top-=i[1]):"bottom"===o&&(r.left+=i[0],r.top+=i[1]),t.popper=r,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,i){var e=i.boundariesElement||f(t.instance.popper);t.instance.reference===e&&(e=f(e));var n=R("transform"),r=t.instance.popper.style,o=r.top,s=r.left,a=r[n];r.top="",r.left="",r[n]="";var l=A(t.instance.popper,t.instance.reference,i.padding,e,t.positionFixed);r.top=o,r.left=s,r[n]=a,i.boundaries=l;var a=i.priority,u=t.offsets.popper,c={primary:function(t){var e=u[t];return u[t]<l[t]&&!i.escapeWithReference&&(e=Math.max(u[t],l[t])),w({},t,e)},secondary:function(t){var e="right"===t?"left":"top",n=u[e];return u[t]>l[t]&&!i.escapeWithReference&&(n=Math.min(u[e],l[t]-("right"===t?u.width:u.height))),w({},e,n)}};return a.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";u=S({},u,c[e](t))}),t.offsets.popper=u,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=(o=t.offsets).popper,n=o.reference,i=t.placement.split("-")[0],r=Math.floor,o=(s=-1!==["top","bottom"].indexOf(i))?"right":"bottom",i=s?"left":"top",s=s?"width":"height";return e[o]<r(n[i])&&(t.offsets.popper[i]=r(n[i])-e[s]),e[i]>r(n[o])&&(t.offsets.popper[i]=r(n[o])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){if(!z(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if("string"==typeof n){if(!(n=t.instance.popper.querySelector(n)))return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],r=(c=t.offsets).popper,o=c.reference,s=-1!==["left","right"].indexOf(i),a=s?"height":"width",l=s?"Top":"Left",u=l.toLowerCase(),e=s?"left":"top",c=s?"bottom":"right",i=P(n)[a];return o[c]-i<r[u]&&(t.offsets.popper[u]-=r[u]-(o[c]-i)),o[u]+i>r[c]&&(t.offsets.popper[u]+=o[u]+i-r[c]),t.offsets.popper=k(t.offsets.popper),s=o[u]+o[a]/2-i/2,c=h(t.instance.popper),o=parseFloat(c["margin"+l],10),l=parseFloat(c["border"+l+"Width"],10),l=s-t.offsets.popper[u]-o-l,l=Math.max(Math.min(r[a]-i,l),0),t.arrowElement=n,t.offsets.arrow=(w(n={},u,Math.round(l)),w(n,e,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(l,u){if(M(l.instance.modifiers,"inner"))return l;if(l.flipped&&l.placement===l.originalPlacement)return l;var c=A(l.instance.popper,l.instance.reference,u.padding,u.boundariesElement,l.positionFixed),h=l.placement.split("-")[0],d=D(h),f=l.placement.split("-")[1]||"",p=[];switch(u.behavior){case G:p=[h,d];break;case Y:p=W(h);break;case K:p=W(h,!0);break;default:p=u.behavior}return p.forEach(function(t,e){if(h!==t||p.length===e+1)return l;h=l.placement.split("-")[0],d=D(h);var n=l.offsets.popper,i=l.offsets.reference,r=Math.floor,o="left"===h&&r(n.right)>r(i.left)||"right"===h&&r(n.left)<r(i.right)||"top"===h&&r(n.bottom)>r(i.top)||"bottom"===h&&r(n.top)<r(i.bottom),s=r(n.left)<r(c.left),a=r(n.right)>r(c.right),t=r(n.top)<r(c.top),i=r(n.bottom)>r(c.bottom),n="left"===h&&s||"right"===h&&a||"top"===h&&t||"bottom"===h&&i,r=-1!==["top","bottom"].indexOf(h),i=!!u.flipVariations&&(r&&"start"===f&&s||r&&"end"===f&&a||!r&&"start"===f&&t||!r&&"end"===f&&i);(o||n||i)&&(l.flipped=!0,(o||n)&&(h=p[e+1]),i&&(f="end"===(i=f)?"start":"start"===i?"end":i),l.placement=h+(f?"-"+f:""),l.offsets.popper=S({},l.offsets.popper,N(l.instance.popper,l.offsets.reference,l.placement)),l=j(l.instance.modifiers,l,"flip"))}),l},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],i=(s=t.offsets).popper,r=s.reference,o=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[o?"left":"top"]=r[n]-(s?i[o?"width":"height"]:0),t.placement=D(e),t.offsets.popper=k(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!z(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=I(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,i=e.y,r=t.offsets.popper;void 0!==(c=I(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration)&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==c?c:e.gpuAcceleration,s=f(t.instance.popper),a=E(s),l={position:r.position},u={left:Math.floor(r.left),top:Math.round(r.top),bottom:Math.round(r.bottom),right:Math.floor(r.right)},c="bottom"===n?"top":"bottom",e="right"===i?"left":"right",r=R("transform"),n=void 0,i=void 0,i="bottom"==c?"HTML"===s.nodeName?-s.clientHeight+u.bottom:-a.height+u.bottom:u.top,n="right"==e?"HTML"===s.nodeName?-s.clientWidth+u.right:-a.width+u.right:u.left;return o&&r?(l[r]="translate3d("+n+"px, "+i+"px, 0)",l[c]=0,l[e]=0,l.willChange="transform"):(o="bottom"==c?-1:1,r="right"==e?-1:1,l[c]=i*o,l[e]=n*r,l.willChange=c+", "+e),e={"x-placement":t.placement},t.attributes=S({},e,t.attributes),t.styles=S({},l,t.styles),t.arrowStyles=S({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return $(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach(function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)}),t.arrowElement&&Object.keys(t.arrowStyles).length&&$(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,i,r){return r=L(r,e,t,n.positionFixed),t=O(n.placement,r,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding),e.setAttribute("x-placement",t),$(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},_=(_(Q,[{key:"update",value:function(){return function(){var t;this.state.isDestroyed||((t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}}).offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=O(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=N(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=j(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t)))}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,M(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[R("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=q(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return B.call(this)}}]),Q);function Q(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};b(this,Q),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=r(this.update.bind(this)),this.options=S({},Q.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(S({},Q.Defaults.modifiers,i.modifiers)).forEach(function(t){n.options.modifiers[t]=S({},Q.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return S({name:t},n.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&o(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();e=this.options.eventsEnabled;e&&this.enableEventListeners(),this.state.eventsEnabled=e}return _.Utils=("undefined"!=typeof window?window:global).PopperUtils,_.placements=H,_.Defaults=Z,_}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e(t.bootstrap={},t.jQuery,t.Popper)}(this,function(t,e,A){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function O(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function L(i){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.forEach(function(t){var e,n;e=i,t=r[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t})}return i}e=e&&e.hasOwnProperty("default")?e.default:e,A=A&&A.hasOwnProperty("default")?A.default:A;var r,n,a,P=(n="transitionend",a={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");e&&"#"!==e||(e=t.getAttribute("href")||"");try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;t=r(t).css("transition-duration");return parseFloat(t)?(t=t.split(",")[0],1e3*parseFloat(t)):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){r(t).trigger(n)},supportsTransitionEnd:function(){return Boolean(n)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i],o=e[i],s=o&&a.isElement(o)?"element":(s=o,{}.toString.call(s).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(r).test(s))throw new Error(t.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+r+'".')}var s}},(r=e).fn.emulateTransitionEnd=o,r.event.special[a.TRANSITION_END]={bindType:n,delegateType:n,handle:function(t){if(r(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}},a);function o(t){var e=this,n=!1;return r(this).one(a.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||a.triggerTransitionEnd(e)},t),this}var s=function(r){var t="alert",o="bs.alert",e="."+o,n=r.fn[t],s={CLOSE:"close"+e,CLOSED:"closed"+e,CLICK_DATA_API:"click"+e+".data-api"},a="alert",l="fade",u="show",i=function(){function i(t){this._element=t}var t=i.prototype;return t.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){r.removeData(this._element,o),this._element=null},t._getRootElement=function(t){var e=P.getSelectorFromElement(t),n=!1;return e&&(n=document.querySelector(e)),n=n||r(t).closest("."+a)[0]},t._triggerCloseEvent=function(t){var e=r.Event(s.CLOSE);return r(t).trigger(e),e},t._removeElement=function(e){var t,n=this;r(e).removeClass(u),r(e).hasClass(l)?(t=P.getTransitionDurationFromElement(e),r(e).one(P.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(t)):this._destroyElement(e)},t._destroyElement=function(t){r(t).detach().trigger(s.CLOSED).remove()},i._jQueryInterface=function(n){return this.each(function(){var t=r(this),e=t.data(o);e||(e=new i(this),t.data(o,e)),"close"===n&&e[n](this)})},i._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},O(i,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),i}();return r(document).on(s.CLICK_DATA_API,'[data-dismiss="alert"]',i._handleDismiss(new i)),r.fn[t]=i._jQueryInterface,r.fn[t].Constructor=i,r.fn[t].noConflict=function(){return r.fn[t]=n,i._jQueryInterface},i}(e),l=function(o){var t="button",i="bs.button",e="."+i,n=".data-api",r=o.fn[t],s="active",a="btn",l="focus",u='[data-toggle^="button"]',c='[data-toggle="buttons"]',h="input",d=".active",f=".btn",n={CLICK_DATA_API:"click"+e+n,FOCUS_BLUR_DATA_API:"focus"+e+n+" blur"+e+n},p=function(){function n(t){this._element=t}var t=n.prototype;return t.toggle=function(){var t=!0,e=!0,n=o(this._element).closest(c)[0];if(n){var i,r=this._element.querySelector(h);if(r){if("radio"===r.type&&(r.checked&&this._element.classList.contains(s)?t=!1:(i=n.querySelector(d))&&o(i).removeClass(s)),t){if(r.hasAttribute("disabled")||n.hasAttribute("disabled")||r.classList.contains("disabled")||n.classList.contains("disabled"))return;r.checked=!this._element.classList.contains(s),o(r).trigger("change")}r.focus(),e=!1}}e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(s)),t&&o(this._element).toggleClass(s)},t.dispose=function(){o.removeData(this._element,i),this._element=null},n._jQueryInterface=function(e){return this.each(function(){var t=o(this).data(i);t||(t=new n(this),o(this).data(i,t)),"toggle"===e&&t[e]()})},O(n,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),n}();return o(document).on(n.CLICK_DATA_API,u,function(t){t.preventDefault();t=t.target;o(t).hasClass(a)||(t=o(t).closest(f)),p._jQueryInterface.call(o(t),"toggle")}).on(n.FOCUS_BLUR_DATA_API,u,function(t){var e=o(t.target).closest(f)[0];o(e).toggleClass(l,/^focus(in)?$/.test(t.type))}),o.fn[t]=p._jQueryInterface,o.fn[t].Constructor=p,o.fn[t].noConflict=function(){return o.fn[t]=r,p._jQueryInterface},p}(e),u=function(c){var e="carousel",o="bs.carousel",n="."+o,t=c.fn[e],s={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},i={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},h="next",a="prev",d="left",f="right",p={SLIDE:"slide"+n,SLID:"slid"+n,KEYDOWN:"keydown"+n,MOUSEENTER:"mouseenter"+n,MOUSELEAVE:"mouseleave"+n,TOUCHEND:"touchend"+n,LOAD_DATA_API:"load"+n+".data-api",CLICK_DATA_API:"click"+n+".data-api"},l="carousel",m="active",g="slide",y="carousel-item-right",v="carousel-item-left",b="carousel-item-next",_="carousel-item-prev",u=".active",T=".active.carousel-item",w=".carousel-item",S=".carousel-item-next, .carousel-item-prev",k=".carousel-indicators",r="[data-slide], [data-slide-to]",E='[data-ride="carousel"]',C=function(){function r(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(e),this._element=c(t)[0],this._indicatorsElement=this._element.querySelector(k),this._addEventListeners()}var t=r.prototype;return t.next=function(){this._isSliding||this._slide(h)},t.nextWhenVisible=function(){!document.hidden&&c(this._element).is(":visible")&&"hidden"!==c(this._element).css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(a)},t.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(S)&&(P.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=this._element.querySelector(T);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)c(this._element).one(p.SLID,function(){return e.to(t)});else{if(n===t)return this.pause(),void this.cycle();n=n<t?h:a;this._slide(n,this._items[t])}},t.dispose=function(){c(this._element).off(n),c.removeData(this._element,o),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=L({},s,t),P.typeCheckConfig(e,t,i),t},t._addEventListeners=function(){var e=this;this._config.keyboard&&c(this._element).on(p.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&(c(this._element).on(p.MOUSEENTER,function(t){return e.pause(t)}).on(p.MOUSELEAVE,function(t){return e.cycle(t)}),"ontouchstart"in document.documentElement&&c(this._element).on(p.TOUCHEND,function(){e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},500+e._config.interval)}))},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},t._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(w)):[],this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===h,i=t===a,r=this._getItemIndex(e),o=this._items.length-1;if((i&&0===r||n&&r===o)&&!this._config.wrap)return e;t=(r+(t===a?-1:1))%this._items.length;return-1==t?this._items[this._items.length-1]:this._items[t]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),i=this._getItemIndex(this._element.querySelector(T)),n=c.Event(p.SLIDE,{relatedTarget:t,direction:e,from:i,to:n});return c(this._element).trigger(n),n},t._setActiveIndicatorElement=function(t){var e;this._indicatorsElement&&(e=[].slice.call(this._indicatorsElement.querySelectorAll(u)),c(e).removeClass(m),(t=this._indicatorsElement.children[this._getItemIndex(t)])&&c(t).addClass(m))},t._slide=function(t,e){var n,i,r,o=this,s=this._element.querySelector(T),a=this._getItemIndex(s),l=e||s&&this._getItemByDirection(t,s),u=this._getItemIndex(l),e=Boolean(this._interval),t=t===h?(n=v,i=b,d):(n=y,i=_,f);l&&c(l).hasClass(m)?this._isSliding=!1:this._triggerSlideEvent(l,t).isDefaultPrevented()||s&&l&&(this._isSliding=!0,e&&this.pause(),this._setActiveIndicatorElement(l),r=c.Event(p.SLID,{relatedTarget:l,direction:t,from:a,to:u}),c(this._element).hasClass(g)?(c(l).addClass(i),P.reflow(l),c(s).addClass(n),c(l).addClass(n),u=P.getTransitionDurationFromElement(s),c(s).one(P.TRANSITION_END,function(){c(l).removeClass(n+" "+i).addClass(m),c(s).removeClass(m+" "+i+" "+n),o._isSliding=!1,setTimeout(function(){return c(o._element).trigger(r)},0)}).emulateTransitionEnd(u)):(c(s).removeClass(m),c(l).addClass(m),this._isSliding=!1,c(this._element).trigger(r)),e&&this.cycle())},r._jQueryInterface=function(i){return this.each(function(){var t=c(this).data(o),e=L({},s,c(this).data());"object"==typeof i&&(e=L({},e,i));var n="string"==typeof i?i:e.slide;if(t||(t=new r(this,e),c(this).data(o,t)),"number"==typeof i)t.to(i);else if("string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}else e.interval&&(t.pause(),t.cycle())})},r._dataApiClickHandler=function(t){var e,n,i=P.getSelectorFromElement(this);!i||(e=c(i)[0])&&c(e).hasClass(l)&&(n=L({},c(e).data(),c(this).data()),(i=this.getAttribute("data-slide-to"))&&(n.interval=!1),r._jQueryInterface.call(c(e),n),i&&c(e).data(o).to(i),t.preventDefault())},O(r,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return s}}]),r}();return c(document).on(p.CLICK_DATA_API,r,C._dataApiClickHandler),c(window).on(p.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(E)),e=0,n=t.length;e<n;e++){var i=c(t[e]);C._jQueryInterface.call(i,i.data())}}),c.fn[e]=C._jQueryInterface,c.fn[e].Constructor=C,c.fn[e].noConflict=function(){return c.fn[e]=t,C._jQueryInterface},C}(e),c=function(l){var e="collapse",s="bs.collapse",t="."+s,n=l.fn[e],r={toggle:!0,parent:""},i={toggle:"boolean",parent:"(string|element)"},a={SHOW:"show"+t,SHOWN:"shown"+t,HIDE:"hide"+t,HIDDEN:"hidden"+t,CLICK_DATA_API:"click"+t+".data-api"},u="show",c="collapse",h="collapsing",d="collapsed",f="width",p="height",m=".show, .collapsing",g='[data-toggle="collapse"]',o=function(){function o(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=l.makeArray(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(g)),i=0,r=n.length;i<r;i++){var o=n[i],s=P.getSelectorFromElement(o),a=[].slice.call(document.querySelectorAll(s)).filter(function(t){return t===e});null!==s&&0<a.length&&(this._selector=s,this._triggerArray.push(o))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=o.prototype;return t.toggle=function(){l(this._element).hasClass(u)?this.hide():this.show()},t.show=function(){var t,e,n,i,r=this;this._isTransitioning||l(this._element).hasClass(u)||(this._parent&&0===(i=[].slice.call(this._parent.querySelectorAll(m)).filter(function(t){return t.getAttribute("data-parent")===r._config.parent})).length&&(i=null),i&&(n=l(i).not(this._selector).data(s))&&n._isTransitioning||(t=l.Event(a.SHOW),l(this._element).trigger(t),t.isDefaultPrevented()||(i&&(o._jQueryInterface.call(l(i).not(this._selector),"hide"),n||l(i).data(s,null)),e=this._getDimension(),l(this._element).removeClass(c).addClass(h),this._element.style[e]=0,this._triggerArray.length&&l(this._triggerArray).removeClass(d).attr("aria-expanded",!0),this.setTransitioning(!0),n="scroll"+(e[0].toUpperCase()+e.slice(1)),i=P.getTransitionDurationFromElement(this._element),l(this._element).one(P.TRANSITION_END,function(){l(r._element).removeClass(h).addClass(c).addClass(u),r._element.style[e]="",r.setTransitioning(!1),l(r._element).trigger(a.SHOWN)}).emulateTransitionEnd(i),this._element.style[e]=this._element[n]+"px")))},t.hide=function(){var t=this;if(!this._isTransitioning&&l(this._element).hasClass(u)){var e=l.Event(a.HIDE);if(l(this._element).trigger(e),!e.isDefaultPrevented()){e=this._getDimension();this._element.style[e]=this._element.getBoundingClientRect()[e]+"px",P.reflow(this._element),l(this._element).addClass(h).removeClass(c).removeClass(u);var n=this._triggerArray.length;if(0<n)for(var i=0;i<n;i++){var r=this._triggerArray[i],o=P.getSelectorFromElement(r);null!==o&&(l([].slice.call(document.querySelectorAll(o))).hasClass(u)||l(r).addClass(d).attr("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[e]="";e=P.getTransitionDurationFromElement(this._element);l(this._element).one(P.TRANSITION_END,function(){t.setTransitioning(!1),l(t._element).removeClass(h).addClass(c).trigger(a.HIDDEN)}).emulateTransitionEnd(e)}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){l.removeData(this._element,s),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=L({},r,t)).toggle=Boolean(t.toggle),P.typeCheckConfig(e,t,i),t},t._getDimension=function(){return l(this._element).hasClass(f)?f:p},t._getParent=function(){var n=this,t=null;P.isElement(this._config.parent)?(t=this._config.parent,void 0!==this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',e=[].slice.call(t.querySelectorAll(e));return l(e).each(function(t,e){n._addAriaAndCollapsedClass(o._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){t&&(t=l(t).hasClass(u),e.length&&l(e).toggleClass(d,!t).attr("aria-expanded",t))},o._getTargetFromElement=function(t){t=P.getSelectorFromElement(t);return t?document.querySelector(t):null},o._jQueryInterface=function(i){return this.each(function(){var t=l(this),e=t.data(s),n=L({},r,t.data(),"object"==typeof i&&i?i:{});if(!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||(e=new o(this,n),t.data(s,e)),"string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},O(o,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return r}}]),o}();return l(document).on(a.CLICK_DATA_API,g,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=l(this),t=P.getSelectorFromElement(this),t=[].slice.call(document.querySelectorAll(t));l(t).each(function(){var t=l(this),e=t.data(s)?"toggle":n.data();o._jQueryInterface.call(t,e)})}),l.fn[e]=o._jQueryInterface,l.fn[e].Constructor=o,l.fn[e].noConflict=function(){return l.fn[e]=n,o._jQueryInterface},o}(e),h=function(u){var e="dropdown",c="bs.dropdown",n="."+c,t=".data-api",i=u.fn[e],r=new RegExp("38|40|27"),h={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,CLICK:"click"+n,CLICK_DATA_API:"click"+n+t,KEYDOWN_DATA_API:"keydown"+n+t,KEYUP_DATA_API:"keyup"+n+t},o="disabled",d="show",s="dropup",a="dropright",f="dropleft",p="dropdown-menu-right",m="position-static",g='[data-toggle="dropdown"]',t=".dropdown form",y=".dropdown-menu",v=".navbar-nav",b=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",_="top-start",T="top-end",w="bottom-start",S="bottom-end",k="right-start",E="left-start",C={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},x={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},l=function(){function l(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=l.prototype;return t.toggle=function(){if(!this._element.disabled&&!u(this._element).hasClass(o)){var t=l._getParentFromElement(this._element),e=u(this._menu).hasClass(d);if(l._clearMenus(),!e){var n={relatedTarget:this._element},e=u.Event(h.SHOW,n);if(u(t).trigger(e),!e.isDefaultPrevented()){if(!this._inNavbar){if(void 0===A)throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)");e=this._element;"parent"===this._config.reference?e=t:P.isElement(this._config.reference)&&(e=this._config.reference,void 0!==this._config.reference.jquery&&(e=this._config.reference[0])),"scrollParent"!==this._config.boundary&&u(t).addClass(m),this._popper=new A(e,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===u(t).closest(v).length&&u(document.body).children().on("mouseover",null,u.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),u(this._menu).toggleClass(d),u(t).toggleClass(d).trigger(u.Event(h.SHOWN,n))}}}},t.dispose=function(){u.removeData(this._element,c),u(this._element).off(n),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;u(this._element).on(h.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){return t=L({},this.constructor.Default,u(this._element).data(),t),P.typeCheckConfig(e,t,this.constructor.DefaultType),t},t._getMenuElement=function(){var t;return this._menu||(t=l._getParentFromElement(this._element))&&(this._menu=t.querySelector(y)),this._menu},t._getPlacement=function(){var t=u(this._element.parentNode),e=w;return t.hasClass(s)?(e=_,u(this._menu).hasClass(p)&&(e=T)):t.hasClass(a)?e=k:t.hasClass(f)?e=E:u(this._menu).hasClass(p)&&(e=S),e},t._detectNavbar=function(){return 0<u(this._element).closest(".navbar").length},t._getPopperConfig=function(){var e=this,t={};"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=L({},t.offsets,e._config.offset(t.offsets)||{}),t}:t.offset=this._config.offset;t={placement:this._getPlacement(),modifiers:{offset:t,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),t},l._jQueryInterface=function(e){return this.each(function(){var t=u(this).data(c);if(t||(t=new l(this,"object"==typeof e?e:null),u(this).data(c,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},l._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var e=[].slice.call(document.querySelectorAll(g)),n=0,i=e.length;n<i;n++){var r,o=l._getParentFromElement(e[n]),s=u(e[n]).data(c),a={relatedTarget:e[n]};t&&"click"===t.type&&(a.clickEvent=t),s&&(r=s._menu,u(o).hasClass(d)&&(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&u.contains(o,t.target)||(s=u.Event(h.HIDE,a),u(o).trigger(s),s.isDefaultPrevented()||("ontouchstart"in document.documentElement&&u(document.body).children().off("mouseover",null,u.noop),e[n].setAttribute("aria-expanded","false"),u(r).removeClass(d),u(o).removeClass(d).trigger(u.Event(h.HIDDEN,a))))))}},l._getParentFromElement=function(t){var e,n=P.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},l._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||u(t.target).closest(y).length)):r.test(t.which))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!u(this).hasClass(o))){var e=l._getParentFromElement(this),n=u(e).hasClass(d);if(!n&&(27!==t.which||32!==t.which)||n&&(27===t.which||32===t.which))return 27===t.which&&(i=e.querySelector(g),u(i).trigger("focus")),void u(this).trigger("click");var i=[].slice.call(e.querySelectorAll(b));0!==i.length&&(e=i.indexOf(t.target),38===t.which&&0<e&&e--,40===t.which&&e<i.length-1&&e++,e<0&&(e=0),i[e].focus())}},O(l,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return C}},{key:"DefaultType",get:function(){return x}}]),l}();return u(document).on(h.KEYDOWN_DATA_API,g,l._dataApiKeydownHandler).on(h.KEYDOWN_DATA_API,y,l._dataApiKeydownHandler).on(h.CLICK_DATA_API+" "+h.KEYUP_DATA_API,l._clearMenus).on(h.CLICK_DATA_API,g,function(t){t.preventDefault(),t.stopPropagation(),l._jQueryInterface.call(u(this),"toggle")}).on(h.CLICK_DATA_API,t,function(t){t.stopPropagation()}),u.fn[e]=l._jQueryInterface,u.fn[e].Constructor=l,u.fn[e].noConflict=function(){return u.fn[e]=i,l._jQueryInterface},l}(e),d=function(o){var e="modal",s="bs.modal",n="."+s,t=o.fn[e],a={backdrop:!0,keyboard:!0,focus:!0,show:!0},i={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},l={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,FOCUSIN:"focusin"+n,RESIZE:"resize"+n,CLICK_DISMISS:"click.dismiss"+n,KEYDOWN_DISMISS:"keydown.dismiss"+n,MOUSEUP_DISMISS:"mouseup.dismiss"+n,MOUSEDOWN_DISMISS:"mousedown.dismiss"+n,CLICK_DATA_API:"click"+n+".data-api"},u="modal-scrollbar-measure",c="modal-backdrop",h="modal-open",d="fade",f="show",p=".modal-dialog",r='[data-toggle="modal"]',m='[data-dismiss="modal"]',g=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",y=".sticky-top",v=function(){function r(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(p),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._scrollbarWidth=0}var t=r.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e,n=this;this._isTransitioning||this._isShown||(o(this._element).hasClass(d)&&(this._isTransitioning=!0),e=o.Event(l.SHOW,{relatedTarget:t}),o(this._element).trigger(e),this._isShown||e.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),o(document.body).addClass(h),this._setEscapeEvent(),this._setResizeEvent(),o(this._element).on(l.CLICK_DISMISS,m,function(t){return n.hide(t)}),o(this._dialog).on(l.MOUSEDOWN_DISMISS,function(){o(n._element).one(l.MOUSEUP_DISMISS,function(t){o(t.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(t)})))},t.hide=function(t){var e=this;t&&t.preventDefault(),!this._isTransitioning&&this._isShown&&(t=o.Event(l.HIDE),o(this._element).trigger(t),this._isShown&&!t.isDefaultPrevented()&&(this._isShown=!1,(t=o(this._element).hasClass(d))&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),o(document).off(l.FOCUSIN),o(this._element).removeClass(f),o(this._element).off(l.CLICK_DISMISS),o(this._dialog).off(l.MOUSEDOWN_DISMISS),t?(t=P.getTransitionDurationFromElement(this._element),o(this._element).one(P.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(t)):this._hideModal()))},t.dispose=function(){o.removeData(this._element,s),o(window,document,this._element,this._backdrop).off(n),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=L({},a,t),P.typeCheckConfig(e,t,i),t},t._showElement=function(t){var e=this,n=o(this._element).hasClass(d);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,n&&P.reflow(this._element),o(this._element).addClass(f),this._config.focus&&this._enforceFocus();var i=o.Event(l.SHOWN,{relatedTarget:t}),t=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,o(e._element).trigger(i)};n?(n=P.getTransitionDurationFromElement(this._element),o(this._dialog).one(P.TRANSITION_END,t).emulateTransitionEnd(n)):t()},t._enforceFocus=function(){var e=this;o(document).off(l.FOCUSIN).on(l.FOCUSIN,function(t){document!==t.target&&e._element!==t.target&&0===o(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?o(this._element).on(l.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):this._isShown||o(this._element).off(l.KEYDOWN_DISMISS)},t._setResizeEvent=function(){var e=this;this._isShown?o(window).on(l.RESIZE,function(t){return e.handleUpdate(t)}):o(window).off(l.RESIZE)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){o(document.body).removeClass(h),t._resetAdjustments(),t._resetScrollbar(),o(t._element).trigger(l.HIDDEN)})},t._removeBackdrop=function(){this._backdrop&&(o(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e,n=this,i=o(this._element).hasClass(d)?d:"";this._isShown&&this._config.backdrop?(this._backdrop=document.createElement("div"),this._backdrop.className=c,i&&this._backdrop.classList.add(i),o(this._backdrop).appendTo(document.body),o(this._element).on(l.CLICK_DISMISS,function(t){n._ignoreBackdropClick?n._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide())}),i&&P.reflow(this._backdrop),o(this._backdrop).addClass(f),t&&(i?(e=P.getTransitionDurationFromElement(this._backdrop),o(this._backdrop).one(P.TRANSITION_END,t).emulateTransitionEnd(e)):t())):!this._isShown&&this._backdrop?(o(this._backdrop).removeClass(f),i=function(){n._removeBackdrop(),t&&t()},o(this._element).hasClass(d)?(e=P.getTransitionDurationFromElement(this._backdrop),o(this._backdrop).one(P.TRANSITION_END,i).emulateTransitionEnd(e)):i()):t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var t,e,r=this;this._isBodyOverflowing&&(t=[].slice.call(document.querySelectorAll(g)),e=[].slice.call(document.querySelectorAll(y)),o(t).each(function(t,e){var n=e.style.paddingRight,i=o(e).css("padding-right");o(e).data("padding-right",n).css("padding-right",parseFloat(i)+r._scrollbarWidth+"px")}),o(e).each(function(t,e){var n=e.style.marginRight,i=o(e).css("margin-right");o(e).data("margin-right",n).css("margin-right",parseFloat(i)-r._scrollbarWidth+"px")}),t=document.body.style.paddingRight,e=o(document.body).css("padding-right"),o(document.body).data("padding-right",t).css("padding-right",parseFloat(e)+this._scrollbarWidth+"px"))},t._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(g));o(t).each(function(t,e){var n=o(e).data("padding-right");o(e).removeData("padding-right"),e.style.paddingRight=n||""});t=[].slice.call(document.querySelectorAll(""+y));o(t).each(function(t,e){var n=o(e).data("margin-right");void 0!==n&&o(e).css("margin-right",n).removeData("margin-right")});t=o(document.body).data("padding-right");o(document.body).removeData("padding-right"),document.body.style.paddingRight=t||""},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className=u,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},r._jQueryInterface=function(n,i){return this.each(function(){var t=o(this).data(s),e=L({},a,o(this).data(),"object"==typeof n&&n?n:{});if(t||(t=new r(this,e),o(this).data(s,t)),"string"==typeof n){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n](i)}else e.show&&t.show(i)})},O(r,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return a}}]),r}();return o(document).on(l.CLICK_DATA_API,r,function(t){var e,n=this,i=P.getSelectorFromElement(this);i&&(e=document.querySelector(i));i=o(e).data(s)?"toggle":L({},o(e).data(),o(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var r=o(e).one(l.SHOW,function(t){t.isDefaultPrevented()||r.one(l.HIDDEN,function(){o(n).is(":visible")&&n.focus()})});v._jQueryInterface.call(o(e),i,this)}),o.fn[e]=v._jQueryInterface,o.fn[e].Constructor=v,o.fn[e].noConflict=function(){return o.fn[e]=t,v._jQueryInterface},v}(e),y=function(o){var e="tooltip",r="bs.tooltip",n="."+r,t=o.fn[e],s="bs-tooltip",a=new RegExp("(^|\\s)"+s+"\\S+","g"),l={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"},u={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},c={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},h="show",d="out",f={HIDE:"hide"+n,HIDDEN:"hidden"+n,SHOW:"show"+n,SHOWN:"shown"+n,INSERTED:"inserted"+n,CLICK:"click"+n,FOCUSIN:"focusin"+n,FOCUSOUT:"focusout"+n,MOUSEENTER:"mouseenter"+n,MOUSELEAVE:"mouseleave"+n},p="fade",m="show",g=".tooltip-inner",y=".arrow",v="hover",b="focus",_="click",T="manual",i=function(){function i(t,e){if(void 0===A)throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=i.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){var e,n;this._isEnabled&&(t?(e=this.constructor.DATA_KEY,(n=o(t.currentTarget).data(e))||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),o(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)):o(this.getTipElement()).hasClass(m)?this._leave(null,this):this._enter(null,this))},t.dispose=function(){clearTimeout(this._timeout),o.removeData(this.element,this.constructor.DATA_KEY),o(this.element).off(this.constructor.EVENT_KEY),o(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&o(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,(this._activeTrigger=null)!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===o(this.element).css("display"))throw new Error("Please use show on visible elements");var t,n,i=o.Event(this.constructor.Event.SHOW);this.isWithContent()&&this._isEnabled&&(o(this.element).trigger(i),t=o.contains(this.element.ownerDocument.documentElement,this.element),!i.isDefaultPrevented()&&t&&(n=this.getTipElement(),i=P.getUID(this.constructor.NAME),n.setAttribute("id",i),this.element.setAttribute("aria-describedby",i),this.setContent(),this.config.animation&&o(n).addClass(p),t="function"==typeof this.config.placement?this.config.placement.call(this,n,this.element):this.config.placement,i=this._getAttachment(t),this.addAttachmentClass(i),t=!1===this.config.container?document.body:o(document).find(this.config.container),o(n).data(this.constructor.DATA_KEY,this),o.contains(this.element.ownerDocument.documentElement,this.tip)||o(n).appendTo(t),o(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new A(this.element,n,{placement:i,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:y},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){e._handlePopperPlacementChange(t)}}),o(n).addClass(m),"ontouchstart"in document.documentElement&&o(document.body).children().on("mouseover",null,o.noop),i=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,o(e.element).trigger(e.constructor.Event.SHOWN),t===d&&e._leave(null,e)},o(this.tip).hasClass(p)?(n=P.getTransitionDurationFromElement(this.tip),o(this.tip).one(P.TRANSITION_END,i).emulateTransitionEnd(n)):i()))},t.hide=function(t){function e(){n._hoverState!==h&&i.parentNode&&i.parentNode.removeChild(i),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),o(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()}var n=this,i=this.getTipElement(),r=o.Event(this.constructor.Event.HIDE);o(this.element).trigger(r),r.isDefaultPrevented()||(o(i).removeClass(m),"ontouchstart"in document.documentElement&&o(document.body).children().off("mouseover",null,o.noop),this._activeTrigger[_]=!1,this._activeTrigger[b]=!1,this._activeTrigger[v]=!1,o(this.tip).hasClass(p)?(r=P.getTransitionDurationFromElement(i),o(i).one(P.TRANSITION_END,e).emulateTransitionEnd(r)):e(),this._hoverState="")},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){o(this.getTipElement()).addClass(s+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||o(this.config.template)[0],this.tip},t.setContent=function(){var t=this.getTipElement();this.setElementContent(o(t.querySelectorAll(g)),this.getTitle()),o(t).removeClass(p+" "+m)},t.setElementContent=function(t,e){var n=this.config.html;"object"==typeof e&&(e.nodeType||e.jquery)?n?o(e).parent().is(t)||t.empty().append(e):t.text(o(e).text()):t[n?"html":"text"](e)},t.getTitle=function(){return this.element.getAttribute("data-original-title")||("function"==typeof this.config.title?this.config.title.call(this.element):this.config.title)},t._getAttachment=function(t){return u[t.toUpperCase()]},t._setListeners=function(){var n=this;this.config.trigger.split(" ").forEach(function(t){var e;"click"===t?o(n.element).on(n.constructor.Event.CLICK,n.config.selector,function(t){return n.toggle(t)}):t!==T&&(e=t===v?n.constructor.Event.MOUSEENTER:n.constructor.Event.FOCUSIN,t=t===v?n.constructor.Event.MOUSELEAVE:n.constructor.Event.FOCUSOUT,o(n.element).on(e,n.config.selector,function(t){return n._enter(t)}).on(t,n.config.selector,function(t){return n._leave(t)})),o(n.element).closest(".modal").on("hide.bs.modal",function(){return n.hide()})}),this.config.selector?this.config=L({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");!this.element.getAttribute("title")&&"string"==t||(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||o(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),o(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?b:v]=!0),o(e.getTipElement()).hasClass(m)||e._hoverState===h?e._hoverState=h:(clearTimeout(e._timeout),e._hoverState=h,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===h&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||o(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),o(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?b:v]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=d,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===d&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){return"number"==typeof(t=L({},this.constructor.Default,o(this.element).data(),"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),P.typeCheckConfig(e,t,this.constructor.DefaultType),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=o(this.getTipElement()),e=t.attr("class").match(a);null!==e&&e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){var e=t.instance;this.tip=e.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(o(t).removeClass(p),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},i._jQueryInterface=function(n){return this.each(function(){var t=o(this).data(r),e="object"==typeof n&&n;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),o(this).data(r,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},O(i,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return c}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return r}},{key:"Event",get:function(){return f}},{key:"EVENT_KEY",get:function(){return n}},{key:"DefaultType",get:function(){return l}}]),i}();return o.fn[e]=i._jQueryInterface,o.fn[e].Constructor=i,o.fn[e].noConflict=function(){return o.fn[e]=t,i._jQueryInterface},i}(e),f=function(r){var o="popover",s="bs.popover",a="."+s,t=r.fn[o],l="bs-popover",u=new RegExp("(^|\\s)"+l+"\\S+","g"),c=L({},y.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),h=L({},y.DefaultType,{content:"(string|element|function)"}),d="fade",f="show",p=".popover-header",m=".popover-body",g={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,INSERTED:"inserted"+a,CLICK:"click"+a,FOCUSIN:"focusin"+a,FOCUSOUT:"focusout"+a,MOUSEENTER:"mouseenter"+a,MOUSELEAVE:"mouseleave"+a},e=function(t){var e;function i(){return t.apply(this,arguments)||this}n=t,(e=i).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var n=i.prototype;return n.isWithContent=function(){return this.getTitle()||this._getContent()},n.addAttachmentClass=function(t){r(this.getTipElement()).addClass(l+"-"+t)},n.getTipElement=function(){return this.tip=this.tip||r(this.config.template)[0],this.tip},n.setContent=function(){var t=r(this.getTipElement());this.setElementContent(t.find(p),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(m),e),t.removeClass(d+" "+f)},n._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},n._cleanTipClass=function(){var t=r(this.getTipElement()),e=t.attr("class").match(u);null!==e&&0<e.length&&t.removeClass(e.join(""))},i._jQueryInterface=function(n){return this.each(function(){var t=r(this).data(s),e="object"==typeof n?n:null;if((t||!/destroy|hide/.test(n))&&(t||(t=new i(this,e),r(this).data(s,t)),"string"==typeof n)){if(void 0===t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},O(i,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return c}},{key:"NAME",get:function(){return o}},{key:"DATA_KEY",get:function(){return s}},{key:"Event",get:function(){return g}},{key:"EVENT_KEY",get:function(){return a}},{key:"DefaultType",get:function(){return h}}]),i}(y);return r.fn[o]=e._jQueryInterface,r.fn[o].Constructor=e,r.fn[o].noConflict=function(){return r.fn[o]=t,e._jQueryInterface},e}(e),p=function(o){var i="scrollspy",r="bs.scrollspy",e="."+r,t=o.fn[i],s={offset:10,method:"auto",target:""},a={offset:"number",method:"string",target:"(string|element)"},l={ACTIVATE:"activate"+e,SCROLL:"scroll"+e,LOAD_DATA_API:"load"+e+".data-api"},u="dropdown-item",c="active",h='[data-spy="scroll"]',d=".active",f=".nav, .list-group",p=".nav-link",m=".nav-item",g=".list-group-item",y=".dropdown",v=".dropdown-item",b=".dropdown-toggle",_="offset",T="position",w=function(){function n(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+p+","+this._config.target+" "+g+","+this._config.target+" "+v,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,o(this._scrollElement).on(l.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}var t=n.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?_:T,i="auto"===this._config.method?t:this._config.method,r=i===T?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var e,n=P.getSelectorFromElement(t);if(n&&(e=document.querySelector(n)),e){t=e.getBoundingClientRect();if(t.width||t.height)return[o(e)[i]().top+r,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){o.removeData(this._element,r),o(this._scrollElement).off(e),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){var e;return"string"!=typeof(t=L({},s,"object"==typeof t&&t?t:{})).target&&((e=o(t.target).attr("id"))||(e=P.getUID(i),o(t.target).attr("id",e)),t.target="#"+e),P.typeCheckConfig(i,t,a),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;)this._activeTarget!==this._targets[i]&&t>=this._offsets[i]&&(void 0===this._offsets[i+1]||t<this._offsets[i+1])&&this._activate(this._targets[i])}},t._activate=function(e){this._activeTarget=e,this._clear();var t=(t=this._selector.split(",")).map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),t=o([].slice.call(document.querySelectorAll(t.join(","))));t.hasClass(u)?(t.closest(y).find(b).addClass(c),t.addClass(c)):(t.addClass(c),t.parents(f).prev(p+", "+g).addClass(c),t.parents(f).prev(m).children(p).addClass(c)),o(this._scrollElement).trigger(l.ACTIVATE,{relatedTarget:e})},t._clear=function(){var t=[].slice.call(document.querySelectorAll(this._selector));o(t).filter(d).removeClass(c)},n._jQueryInterface=function(e){return this.each(function(){var t=o(this).data(r);if(t||(t=new n(this,"object"==typeof e&&e),o(this).data(r,t)),"string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},O(n,null,[{key:"VERSION",get:function(){return"4.1.3"}},{key:"Default",get:function(){return s}}]),n}();return o(window).on(l.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(h)),e=t.length;e--;){var n=o(t[e]);w._jQueryInterface.call(n,n.data())}}),o.fn[i]=w._jQueryInterface,o.fn[i].Constructor=w,o.fn[i].noConflict=function(){return o.fn[i]=t,w._jQueryInterface},w}(e),m=function(a){var r="bs.tab",t="."+r,e=a.fn.tab,l={HIDE:"hide"+t,HIDDEN:"hidden"+t,SHOW:"show"+t,SHOWN:"shown"+t,CLICK_DATA_API:"click.bs.tab.data-api"},o="dropdown-menu",u="active",c="disabled",s="fade",h="show",d=".dropdown",f=".nav, .list-group",p=".active",m="> li > .active",t='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',g=".dropdown-toggle",y="> .dropdown-menu .active",n=function(){function i(t){this._element=t}var t=i.prototype;return t.show=function(){var t,e,n,i,r,o,s=this;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&a(this._element).hasClass(u)||a(this._element).hasClass(c)||(o=a(this._element).closest(f)[0],e=P.getSelectorFromElement(this._element),o&&(r="UL"===o.nodeName?m:p,n=(n=a.makeArray(a(o).find(r)))[n.length-1]),i=a.Event(l.HIDE,{relatedTarget:this._element}),r=a.Event(l.SHOW,{relatedTarget:n}),n&&a(n).trigger(i),a(this._element).trigger(r),r.isDefaultPrevented()||i.isDefaultPrevented()||(e&&(t=document.querySelector(e)),this._activate(this._element,o),o=function(){var t=a.Event(l.HIDDEN,{relatedTarget:s._element}),e=a.Event(l.SHOWN,{relatedTarget:n});a(n).trigger(t),a(s._element).trigger(e)},t?this._activate(t,t.parentNode,o):o()))},t.dispose=function(){a.removeData(this._element,r),this._element=null},t._activate=function(t,e,n){var i=this,r="UL"===e.nodeName?a(e).find(m):a(e).children(p),o=r[0],e=n&&o&&a(o).hasClass(s),r=function(){return i._transitionComplete(t,o,n)};o&&e?(e=P.getTransitionDurationFromElement(o),a(o).one(P.TRANSITION_END,r).emulateTransitionEnd(e)):r()},t._transitionComplete=function(t,e,n){var i;e&&(a(e).removeClass(h+" "+u),(i=a(e.parentNode).find(y)[0])&&a(i).removeClass(u),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)),a(t).addClass(u),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),P.reflow(t),a(t).addClass(h),t.parentNode&&a(t.parentNode).hasClass(o)&&((e=a(t).closest(d)[0])&&(e=[].slice.call(e.querySelectorAll(g)),a(e).addClass(u)),t.setAttribute("aria-expanded",!0)),n&&n()},i._jQueryInterface=function(n){return this.each(function(){var t=a(this),e=t.data(r);if(e||(e=new i(this),t.data(r,e)),"string"==typeof n){if(void 0===e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},O(i,null,[{key:"VERSION",get:function(){return"4.1.3"}}]),i}();return a(document).on(l.CLICK_DATA_API,t,function(t){t.preventDefault(),n._jQueryInterface.call(a(this),"show")}),a.fn.tab=n._jQueryInterface,a.fn.tab.Constructor=n,a.fn.tab.noConflict=function(){return a.fn.tab=e,n._jQueryInterface},n}(e);!function(t){if(void 0===t)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");if((t=t.fn.jquery.split(" ")[0].split("."))[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(e),t.Util=P,t.Alert=s,t.Button=l,t.Carousel=u,t.Collapse=c,t.Dropdown=h,t.Modal=d,t.Popover=f,t.Scrollspy=p,t.Tab=m,t.Tooltip=y,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],e):t.videojs=e(t.window,t.document)}(this,function(d,h){d=d&&d.hasOwnProperty("default")?d.default:d,h=h&&h.hasOwnProperty("default")?h.default:h;var l="7.3.0";function f(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);i=new(Function.bind.apply(t,i));return n&&r(i,n.prototype),i}).apply(null,arguments)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(t,e){return e=e||t.slice(0),t.raw=e,t}var a=[],t=function(o,s){return function(t,e,n){var i=s.levels[e],r=new RegExp("^("+i+")$");"log"!==t&&n.unshift(t.toUpperCase()+":"),n.unshift(o+":"),a&&a.push([].concat(n)),d.console&&((e=d.console[t])||"debug"!==t||(e=d.console.info||d.console.log),e&&i&&r.test(t)&&e[Array.isArray(n)?"apply":"call"](d.console,n))}};var p=function e(n){function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o("log",r,e)}var r="info",o=t(n,i);return i.createLogger=function(t){return e(n+": "+t)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},i.level=function(t){if("string"==typeof t){if(!i.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');r=t}return r},(i.history=function(){return a?[].concat(a):[]}).filter=function(e){return(a||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},i.history.clear=function(){a&&(a.length=0)},i.history.disable=function(){null!==a&&(a.length=0,a=null)},i.history.enable=function(){null===a&&(a=[])},i.error=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o("error",r,e)},i.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o("warn",r,e)},i.debug=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o("debug",r,e)},i}("VIDEOJS"),m=p.createLogger;var g=function(t){for(var e="",n=0;n<arguments.length;n++)e+=t[n].replace(/\n\r?\s*/g,"")+(arguments[n+1]||"");return e},n=Object.prototype.toString,o=function(t){return v(t)?Object.keys(t):[]};function c(e,n){o(e).forEach(function(t){return n(e[t],t)})}function y(n){for(var t=arguments.length,e=new Array(1<t?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[n].concat(e)):(e.forEach(function(t){t&&c(t,function(t,e){n[e]=t})}),n)}function v(t){return!!t&&"object"==typeof t}function b(t){return v(t)&&"[object Object]"===n.call(t)&&t.constructor===Object}function i(t,e){if(!t||!e)return"";if("function"!=typeof d.getComputedStyle)return"";t=d.getComputedStyle(t);return t?t[e]:""}function _(){var t=e(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);return _=function(){return t},t}function T(t){return"string"==typeof t&&/\S/.test(t)}function w(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function S(){return h===d.document}function k(t){return v(t)&&1===t.nodeType}function E(){try{return d.parent!==d.self}catch(t){return!0}}function C(n){return function(t,e){if(!T(t))return h[n](null);T(e)&&(e=h.querySelector(e));e=k(e)?e:h;return e[n]&&e[n](t)}}function x(t,n,e,i){void 0===t&&(t="div"),void 0===n&&(n={}),void 0===e&&(e={});var r=h.createElement(t);return Object.getOwnPropertyNames(n).forEach(function(t){var e=n[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(p.warn(g(_(),t,e)),r.setAttribute(t,e)):"textContent"===t?A(r,e):r[t]=e}),Object.getOwnPropertyNames(e).forEach(function(t){r.setAttribute(t,e[t])}),i&&G(r,i),r}function A(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function O(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function L(t,e){return w(e),t.classList?t.classList.contains(e):new RegExp("(^|\\s)"+e+"($|\\s)").test(t.className)}function P(t,e){return t.classList?t.classList.add(e):L(t,e)||(t.className=(t.className+" "+e).trim()),t}function D(t,e){return t.classList?t.classList.remove(e):(w(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function N(t,e,n){var i=L(t,e);if("function"==typeof n&&(n=n(t,e)),"boolean"!=typeof n&&(n=!i),n!==i)return(n?P:D)(t,e),t}function I(n,i){Object.getOwnPropertyNames(i).forEach(function(t){var e=i[t];null==e||!1===e?n.removeAttribute(t):n.setAttribute(t,!0===e?"":e)})}function j(t){var e={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&0<t.attributes.length)for(var i=t.attributes,r=i.length-1;0<=r;r--){var o=i[r].name,s=i[r].value;"boolean"!=typeof t[o]&&-1===n.indexOf(","+o+",")||(s=null!==s),e[o]=s}return e}function M(t,e){return t.getAttribute(e)}function R(t,e,n){t.setAttribute(e,n)}function U(t,e){t.removeAttribute(e)}function q(){h.body.focus(),h.onselectstart=function(){return!1}}function B(){h.onselectstart=function(){return!0}}function F(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),n.height||(n.height=parseFloat(i(t,"height"))),n.width||(n.width=parseFloat(i(t,"width"))),n}}function $(t){var e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var n=h.documentElement,i=h.body,r=n.clientLeft||i.clientLeft||0,t=d.pageXOffset||i.scrollLeft,r=e.left+t-r,n=n.clientTop||i.clientTop||0,i=d.pageYOffset||i.scrollTop,n=e.top+i-n;return{left:Math.round(r),top:Math.round(n)}}function z(t,e){var n={},i=$(t),r=t.offsetWidth,o=t.offsetHeight,s=i.top,a=i.left,t=e.pageY,i=e.pageX;return e.changedTouches&&(i=e.changedTouches[0].pageX,t=e.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(s-t+o)/o)),n.x=Math.max(0,Math.min(1,(i-a)/r)),n}function H(t){return v(t)&&3===t.nodeType}function V(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function W(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),k(t)||H(t)?t:"string"==typeof t&&/\S/.test(t)?h.createTextNode(t):void 0}).filter(function(t){return t})}function G(e,t){return W(t).forEach(function(t){return e.appendChild(t)}),e}function Y(t,e){return G(V(t),e)}function K(t){return void 0===t.button&&void 0===t.buttons||(0===t.button&&void 0===t.buttons||0===t.button&&1===t.buttons)}var X=C("querySelector"),Z=C("querySelectorAll"),Q=Object.freeze({isReal:S,isEl:k,isInFrame:E,createEl:x,textContent:A,prependTo:O,hasClass:L,addClass:P,removeClass:D,toggleClass:N,setAttributes:I,getAttributes:j,getAttribute:M,setAttribute:R,removeAttribute:U,blockTextSelection:q,unblockTextSelection:B,getBoundingClientRect:F,findPosition:$,getPointerPosition:z,isTextNode:H,emptyEl:V,normalizeContent:W,appendContent:G,insertContent:Y,isSingleLeftClick:K,$:X,$$:Z}),J=1;var tt={},et="vdata"+(new Date).getTime();function nt(t){var e=(e=t[et])||(t[et]=J++);return tt[e]||(tt[e]={}),tt[e]}function it(t){t=t[et];return t&&Object.getOwnPropertyNames(tt[t]).length}function rt(e){var t=e[et];if(t){delete tt[t];try{delete e[et]}catch(t){e.removeAttribute?e.removeAttribute(et):e[et]=null}}}function ot(t,e){var n=nt(t);0===n.handlers[e].length&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&rt(t)}function st(e,n,t,i){t.forEach(function(t){e(n,t,i)})}function at(t){function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped){var i,r,o,s=t||d.event;for(i in t={},s)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&s.preventDefault||(t[i]=s[i]));t.target||(t.target=t.srcElement||h),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){s.preventDefault&&s.preventDefault(),t.returnValue=!1,s.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),t.cancelBubble=!0,s.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,null!==t.clientX&&void 0!==t.clientX&&(r=h.documentElement,o=h.body,t.pageX=t.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),t.pageY=t.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t}var lt=!1;!function(){try{var t=Object.defineProperty({},"passive",{get:function(){lt=!0}});d.addEventListener("test",null,t),d.removeEventListener("test",null,t)}catch(t){}}();var ut=["touchstart","touchmove"];function ct(s,t,e){if(Array.isArray(t))return st(ct,s,t,e);var a=nt(s);a.handlers||(a.handlers={}),a.handlers[t]||(a.handlers[t]=[]),e.guid||(e.guid=J++),a.handlers[t].push(e),a.dispatcher||(a.disabled=!1,a.dispatcher=function(t,e){if(!a.disabled){t=at(t);var n=a.handlers[t.type];if(n)for(var i=n.slice(0),r=0,o=i.length;r<o&&!t.isImmediatePropagationStopped();r++)try{i[r].call(s,t,e)}catch(t){p.error(t)}}}),1===a.handlers[t].length&&(s.addEventListener?(e=!1,lt&&-1<ut.indexOf(t)&&(e={passive:!0}),s.addEventListener(t,a.dispatcher,e)):s.attachEvent&&s.attachEvent("on"+t,a.dispatcher))}function ht(t,e,n){if(it(t)){var i=nt(t);if(i.handlers){if(Array.isArray(e))return st(ht,t,e,n);function r(t,e){i.handlers[e]=[],ot(t,e)}if(void 0!==e){var o=i.handlers[e];if(o)if(n){if(n.guid)for(var s=0;s<o.length;s++)o[s].guid===n.guid&&o.splice(s--,1);ot(t,e)}else r(t,e)}else for(var a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&r(t,a)}}}function dt(t,e,n){var i=it(t)?nt(t):{},r=t.parentNode||t.ownerDocument;return"string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=at(e),i.dispatcher&&i.dispatcher.call(t,e,n),r&&!e.isPropagationStopped()&&!0===e.bubbles?dt.call(null,r,e,n):r||e.defaultPrevented||(r=nt(e.target),e.target[e.type]&&(r.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),r.disabled=!1)),!e.defaultPrevented}function ft(t,e,n){if(Array.isArray(e))return st(ft,t,e,n);function i(){ht(t,e,i),n.apply(this,arguments)}i.guid=n.guid=n.guid||J++,ct(t,e,i)}var pt,mt=Object.freeze({fixEvent:at,on:ct,off:ht,trigger:dt,one:ft}),gt=!1,yt=function(){if(S()&&!1!==pt.options.autoSetup){var t=Array.prototype.slice.call(h.getElementsByTagName("video")),e=Array.prototype.slice.call(h.getElementsByTagName("audio")),n=Array.prototype.slice.call(h.getElementsByTagName("video-js")),i=t.concat(e,n);if(i&&0<i.length)for(var r=0,o=i.length;r<o;r++){var s=i[r];if(!s||!s.getAttribute){vt(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&pt(s)}else gt||vt(1)}};function vt(t,e){e&&(pt=e),d.setTimeout(yt,t)}S()&&"complete"===h.readyState?gt=!0:ft(d,"load",function(){gt=!0});function bt(t){var e=h.createElement("style");return e.className=t,e}function _t(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e}function Tt(e,n){var i=Date.now();return function(){var t=Date.now();n<=t-i&&(e.apply(void 0,arguments),i=t)}}function wt(i,r,o,s){var a;function t(){var t=this,e=arguments,n=function(){n=a=null,o||i.apply(t,e)};!a&&o&&i.apply(t,e),s.clearTimeout(a),a=s.setTimeout(n,r)}return void 0===s&&(s=d),t.cancel=function(){s.clearTimeout(a),a=null},t}function St(){}var kt,Et=function(t,e,n){e.guid||(e.guid=J++);function i(){return e.apply(t,arguments)}return i.guid=n?n+"_"+e.guid:e.guid,i};St.prototype.allowedEvents_={},St.prototype.addEventListener=St.prototype.on=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},ct(this,t,e),this.addEventListener=n},St.prototype.removeEventListener=St.prototype.off=function(t,e){ht(this,t,e)},St.prototype.one=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},ft(this,t,e),this.addEventListener=n},St.prototype.dispatchEvent=St.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=at(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),dt(this,t)},St.prototype.queueTrigger=function(t){var e=this;kt=kt||new Map;var n=t.type||t,i=kt.get(this);i||(i=new Map,kt.set(this,i));var r=i.get(n);i.delete(n),d.clearTimeout(r);r=d.setTimeout(function(){0===i.size&&(i=null,kt.delete(e)),e.trigger(t)},0);i.set(n,r)};function Ct(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length}function xt(t){if(!t.nodeName&&!Dt(t))throw new Error("Invalid target; must be a DOM node or evented object.")}function At(t){if(!Ct(t))throw new Error("Invalid event type; must be a non-empty string or array.")}function Ot(t){if("function"!=typeof t)throw new Error("Invalid listener; must be a function.")}function Lt(t,e){var n,i,r=e.length<3||e[0]===t||e[0]===t.eventBusEl_,e=r?(n=t.eventBusEl_,3<=e.length&&e.shift(),i=e[0],e[1]):(n=e[0],i=e[1],e[2]);return xt(n),At(i),Ot(e),{isTargetingSelf:r,target:n,type:i,listener:e=Et(t,e)}}function Pt(t,e,n,i){xt(t),t.nodeName?mt[e](t,n,i):t[e](n,i)}var Dt=function(e){return e instanceof St||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},Nt={on:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r,o=Lt(this,n),s=o.isTargetingSelf,a=o.target,l=o.type,u=o.listener;Pt(a,"on",l,u),s||((r=function(){return t.off(a,l,u)}).guid=u.guid,(s=function(){return t.off("dispose",r)}).guid=u.guid,Pt(this,"on","dispose",r),Pt(a,"on","dispose",s))},one:function(){for(var r=this,t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=Lt(this,e),o=i.isTargetingSelf,s=i.target,a=i.type,l=i.listener;o?Pt(s,"one",a,l):((o=function t(){r.off(s,a,t);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];l.apply(null,n)}).guid=l.guid,Pt(s,"one",a,o))},off:function(t,e,n){!t||Ct(t)?ht(this.eventBusEl_,t,e):(e=e,xt(t=t),At(e),Ot(n),n=Et(this,n),this.off("dispose",n),t.nodeName?(ht(t,e,n),ht(t,"dispose",n)):Dt(t)&&(t.off(e,n),t.off("dispose",n)))},trigger:function(t,e){return dt(this.eventBusEl_,t,e)}};function It(t,e){void 0===e&&(e={});e=e.eventBusKey;if(e){if(!t[e].nodeName)throw new Error('The eventBusKey "'+e+'" does not refer to an element.');t.eventBusEl_=t[e]}else t.eventBusEl_=x("span",{className:"vjs-event-bus"});return y(t,Nt),t.on("dispose",function(){t.off(),d.setTimeout(function(){t.eventBusEl_=null},0)}),t}var jt={state:{},setState:function(t){var n,i=this;return"function"==typeof t&&(t=t()),c(t,function(t,e){i.state[e]!==t&&((n=n||{})[e]={from:i.state[e],to:t}),i.state[e]=t}),n&&Dt(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function Mt(t,e){return y(t,jt),t.state=y({},t.state,e),"function"==typeof t.handleStateChanged&&Dt(t)&&t.on("statechanged",t.handleStateChanged),t}function Rt(t){return"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}function Ut(){for(var n={},t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.forEach(function(t){t&&c(t,function(t,e){b(t)?(b(n[e])||(n[e]={}),n[e]=Ut(n[e],t)):n[e]=t})}),n}var qt=function(){function s(t,e,n){!t&&this.play?this.player_=t=this:this.player_=t,this.options_=Ut({},this.options_),e=this.options_=Ut(this.options_,e),this.id_=e.id||e.el&&e.el.id,this.id_||(t=t&&t.id&&t.id()||"no_player",this.id_=t+"_component_"+J++),this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),!1!==e.evented&&It(this,{eventBusKey:this.el_?"el_":null}),Mt(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==e.initChildren&&this.initChildren(),this.ready(n),!1!==e.reportTouchActivity&&this.enableTouchActivity()}var t=s.prototype;return t.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),rt(this.el_),this.el_=null),this.player_=null},t.player=function(){return this.player_},t.options=function(t){return p.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t&&(this.options_=Ut(this.options_,t)),this.options_},t.el=function(){return this.el_},t.createEl=function(t,e,n){return x(t,e,n)},t.localize=function(t,n,e){void 0===e&&(e=t);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),o=r&&r[i],i=i&&i.split("-")[0],i=r&&r[i],e=e;return o&&o[t]?e=o[t]:i&&i[t]&&(e=i[t]),n&&(e=e.replace(/\{(\d+)\}/g,function(t,e){e=n[e-1];return void 0===e?t:e})),e},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(t){return this.childIndex_[t]},t.getChild=function(t){if(t)return t=Rt(t),this.childNameIndex_[t]},t.addChild=function(t,e,n){var i;if(void 0===e&&(e={}),void 0===n&&(n=this.children_.length),"string"==typeof t){i=Rt(t);var r=e.componentClass||i;e.name=i;var o=s.getComponent(r);if(!o)throw new Error("Component "+r+" does not exist");if("function"!=typeof o)return null;o=new o(this.player_||this,e)}else o=t;return this.children_.splice(n,0,o),"function"==typeof o.id&&(this.childIndex_[o.id()]=o),(i=i||o.name&&Rt(o.name()))&&(this.childNameIndex_[i]=o),"function"==typeof o.el&&o.el()&&(n=this.contentEl().children[n]||null,this.contentEl().insertBefore(o.el(),n)),o},t.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e,n=!1,i=this.children_.length-1;0<=i;i--)if(this.children_[i]===t){n=!0,this.children_.splice(i,1);break}n&&(this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null,(e=t.el())&&e.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el()))}},t.initChildren=function(){var n,e,t,i=this,r=this.options_.children;r&&(n=this.options_,e=s.getComponent("Tech"),(t=Array.isArray(r)?r:Object.keys(r)).concat(Object.keys(this.options_).filter(function(e){return!t.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(t){var e,t="string"==typeof t?r[e=t]||i.options_[e]||{}:(e=t.name,t);return{name:e,opts:t}}).filter(function(t){t=s.getComponent(t.opts.componentClass||Rt(t.name));return t&&!e.isTech(t)}).forEach(function(t){var e=t.name,t=t.opts;void 0!==n[e]&&(t=n[e]),!1!==t&&(!0===t&&(t={}),t.playerOptions=i.options_.playerOptions,(t=i.addChild(e,t))&&(i[e]=t))}))},t.buildCSSClass=function(){return""},t.ready=function(t,e){if(void 0===e&&(e=!1),t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&0<t.length&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},t.$=function(t,e){return X(t,e||this.contentEl())},t.$$=function(t,e){return Z(t,e||this.contentEl())},t.hasClass=function(t){return L(this.el_,t)},t.addClass=function(t){P(this.el_,t)},t.removeClass=function(t){D(this.el_,t)},t.toggleClass=function(t,e){N(this.el_,t,e)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(t){return M(this.el_,t)},t.setAttribute=function(t,e){R(this.el_,t,e)},t.removeAttribute=function(t){U(this.el_,t)},t.width=function(t,e){return this.dimension("width",t,e)},t.height=function(t,e){return this.dimension("height",t,e)},t.dimensions=function(t,e){this.width(t,!0),this.height(e)},t.dimension=function(t,e,n){if(void 0!==e)return null!==e&&e==e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;e=this.el_.style[t],n=e.indexOf("px");return-1!==n?parseInt(e.slice(0,n),10):parseInt(this.el_["offset"+Rt(t)],10)},t.currentDimension=function(t){var e,n=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");return"function"==typeof d.getComputedStyle&&(n=(e=d.getComputedStyle(this.el_)).getPropertyValue(t)||e[t]),0===(n=parseFloat(n))&&(t="offset"+Rt(t),n=this.el_[t]),n},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.emitTapEvents=function(){var n,e=0,i=null;this.on("touchstart",function(t){1===t.touches.length&&(i={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},e=(new Date).getTime(),n=!0)}),this.on("touchmove",function(t){var e;1<t.touches.length?n=!1:i&&(e=t.touches[0].pageX-i.pageX,t=t.touches[0].pageY-i.pageY,10<Math.sqrt(e*e+t*t)&&(n=!1))});function t(){n=!1}this.on("touchleave",t),this.on("touchcancel",t),this.on("touchend",function(t){!(i=null)===n&&(new Date).getTime()-e<200&&(t.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){var t,e,n;this.player()&&this.player().reportUserActivity&&(t=Et(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}),n=function(){t(),this.clearInterval(e)},this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n))},t.setTimeout=function(t,e){var n,i,r=this;return t=Et(this,t),n=d.setTimeout(function(){r.off("dispose",i),t()},e),(i=function(){return r.clearTimeout(n)}).guid="vjs-timeout-"+n,this.on("dispose",i),n},t.clearTimeout=function(t){d.clearTimeout(t);function e(){}return e.guid="vjs-timeout-"+t,this.off("dispose",e),t},t.setInterval=function(t,e){var n=this;t=Et(this,t);var i=d.setInterval(t,e),e=function(){return n.clearInterval(i)};return e.guid="vjs-interval-"+i,this.on("dispose",e),i},t.clearInterval=function(t){d.clearInterval(t);function e(){}return e.guid="vjs-interval-"+t,this.off("dispose",e),t},t.requestAnimationFrame=function(t){var e,n,i=this;return this.supportsRaf_?(t=Et(this,t),e=d.requestAnimationFrame(function(){i.off("dispose",n),t()}),(n=function(){return i.cancelAnimationFrame(e)}).guid="vjs-raf-"+e,this.on("dispose",n),e):this.setTimeout(t,1e3/60)},t.cancelAnimationFrame=function(t){if(this.supportsRaf_){d.cancelAnimationFrame(t);function e(){}return e.guid="vjs-raf-"+t,this.off("dispose",e),t}return this.clearTimeout(t)},s.registerComponent=function(t,e){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var n=s.getComponent("Tech"),i=n&&n.isTech(e),n=s===e||s.prototype.isPrototypeOf(e.prototype);if(i||!n){var r=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass";throw new Error('Illegal component, "'+t+'"; '+r+".")}t=Rt(t),s.components_||(s.components_={});r=s.getComponent("Player");if("Player"===t&&r&&r.players){var o=r.players,r=Object.keys(o);if(o&&0<r.length&&r.map(function(t){return o[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return s.components_[t]=e},s.getComponent=function(t){if(t)return t=Rt(t),s.components_&&s.components_[t]?s.components_[t]:void 0},s}();qt.prototype.supportsRaf_="function"==typeof d.requestAnimationFrame&&"function"==typeof d.cancelAnimationFrame,qt.registerComponent("Component",qt);var Bt=d.navigator&&d.navigator.userAgent||"",Ft=/AppleWebKit\/([\d.]+)/i.exec(Bt),$t=Ft?parseFloat(Ft.pop()):null,zt=/iPad/i.test(Bt),Ht=/iPhone/i.test(Bt)&&!zt,Vt=/iPod/i.test(Bt),Wt=Ht||zt||Vt,Gt=(ze=Bt.match(/OS (\d+)_/i))&&ze[1]?ze[1]:null,Yt=/Android/i.test(Bt),Kt=function(){var t=Bt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return e&&n?parseFloat(t[1]+"."+t[2]):e||null}(),Xt=Yt&&Kt<5&&$t<537,Zt=/Firefox/i.test(Bt),Qt=/Edge/i.test(Bt),Jt=!Qt&&(/Chrome/i.test(Bt)||/CriOS/i.test(Bt)),te=(fn=Bt.match(/(Chrome|CriOS)\/(\d+)/))&&fn[2]?parseFloat(fn[2]):null,ee=(!(pn=(pn=/MSIE\s(\d+)\.\d/.exec(Bt))&&parseFloat(pn[1]))&&/Trident\/7.0/i.test(Bt)&&/rv:11.0/.test(Bt)&&(pn=11),pn),ne=/Safari/i.test(Bt)&&!Jt&&!Yt&&!Qt,ie=(ne||Wt)&&!Jt,re=S()&&("ontouchstart"in d||d.navigator.maxTouchPoints||d.DocumentTouch&&d.document instanceof d.DocumentTouch),oe=Object.freeze({IS_IPAD:zt,IS_IPHONE:Ht,IS_IPOD:Vt,IS_IOS:Wt,IOS_VERSION:Gt,IS_ANDROID:Yt,ANDROID_VERSION:Kt,IS_NATIVE_ANDROID:Xt,IS_FIREFOX:Zt,IS_EDGE:Qt,IS_CHROME:Jt,CHROME_VERSION:te,IE_VERSION:ee,IS_SAFARI:ne,IS_ANY_SAFARI:ie,TOUCH_ENABLED:re});function se(t,e,n,i){return function(t,e,n){if("number"!=typeof e||e<0||n<e)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+n+").")}(t,i,n.length-1),n[i][e]}function ae(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:se.bind(null,"start",0,t),end:se.bind(null,"end",1,t)}}function le(t,e){return Array.isArray(t)?ae(t):void 0===t||void 0===e?ae():ae([[t,e]])}function ue(t,e){var n,i,r=0;if(!e)return 0;t&&t.length||(t=le(0,0));for(var o=0;o<t.length;o++)n=t.start(o),e<(i=t.end(o))&&(i=e),r+=i-n;return r/e}for(var ce,he={},de=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],fe=de[0],pe=0;pe<de.length;pe++)if(de[pe][1]in h){ce=de[pe];break}if(ce)for(var me=0;me<ce.length;me++)he[fe[me]]=ce[me];function ge(t){if(t instanceof ge)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:v(t)&&("number"==typeof t.code&&(this.code=t.code),y(this,t)),this.message||(this.message=ge.defaultMessages[this.code]||"")}ge.prototype.code=0,ge.prototype.message="",ge.prototype.status=null,ge.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ge.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ye=0;ye<ge.errorTypes.length;ye++)ge[ge.errorTypes[ye]]=ye,ge.prototype[ge.errorTypes[ye]]=ye;var ve=function(t,e){var n,i=null;try{n=JSON.parse(t,e)}catch(t){i=t}return[i,n]};function be(t){return null!=t&&"function"==typeof t.then}function _e(t){be(t)&&t.then(null,function(t){})}function Te(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,e,n){return i[e]&&(t[e]=i[e]),t},{cues:i.cues&&Array.prototype.map.call(i.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})}var we=function(t){var e=t.$$("track"),n=Array.prototype.map.call(e,function(t){return t.track});return Array.prototype.map.call(e,function(t){var e=Te(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===n.indexOf(t)}).map(Te))},Se=function(t,n){return t.forEach(function(t){var e=n.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return e.addCue(t)})}),n.textTracks()},ke="vjs-modal-dialog",Ee=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.opened_=e.hasBeenOpened_=e.hasBeenFilled_=!1,e.closeable(!e.options_.uncloseable),e.content(e.options_.content),e.contentEl_=x("div",{className:ke+"-content"},{role:"document"}),e.descEl_=x("p",{className:ke+"-description vjs-control-text",id:e.el().getAttribute("aria-describedby")}),A(e.descEl_,e.description()),e.el_.appendChild(e.descEl_),e.el_.appendChild(e.contentEl_),e}f(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},e.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},e.buildCSSClass=function(){return ke+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},e.handleKeyPress=function(t){27===t.which&&this.closeable()&&this.close()},e.label=function(){return this.localize(this.options_.label||"Modal Window")},e.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},e.open=function(){var t;this.opened_||(t=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Et(this,this.handleKeyPress)),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},e.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},e.close=function(){var t;this.opened_&&(t=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Et(this,this.handleKeyPress)),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())},e.closeable=function(t){var e,n;return"boolean"==typeof t&&(e=this.closeable_=!!t,n=this.getChild("closeButton"),e&&!n&&(t=this.contentEl_,this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=t,this.on(n,"close",this.close)),!e&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())),this.closeable_},e.fill=function(){this.fillWith(this.content())},e.fillWith=function(t){var e=this.contentEl(),n=e.parentNode,i=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(e),this.empty(),Y(e,t),this.trigger("modalfill"),i?n.insertBefore(e,i):n.appendChild(e);e=this.getChild("closeButton");e&&n.appendChild(e.el_)},e.empty=function(){this.trigger("beforemodalempty"),V(this.contentEl()),this.trigger("modalempty")},e.content=function(t){return void 0!==t&&(this.content_=t),this.content_},e.conditionalFocus_=function(){var t=h.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,!e.contains(t)&&e!==t||(this.previouslyActiveEl_=t,this.focus(),this.on(h,"keydown",this.handleKeyDown))},e.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(h,"keydown",this.handleKeyDown)},e.handleKeyDown=function(t){if(9===t.which){for(var e,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){e=r;break}h.activeElement===this.el_&&(e=0),t.shiftKey&&0===e?(n[n.length-1].focus(),t.preventDefault()):t.shiftKey||e!==n.length-1||(n[0].focus(),t.preventDefault())}},e.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof d.HTMLAnchorElement||t instanceof d.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof d.HTMLInputElement||t instanceof d.HTMLSelectElement||t instanceof d.HTMLTextAreaElement||t instanceof d.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof d.HTMLIFrameElement||t instanceof d.HTMLObjectElement||t instanceof d.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},t}(qt);Ee.prototype.options_={pauseOnOpen:!0,temporary:!0},qt.registerComponent("ModalDialog",Ee);var Ce,xe=function(i){function t(t){var e;void 0===t&&(t=[]),(e=i.call(this)||this).tracks_=[],Object.defineProperty(u(u(e)),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<t.length;n++)e.addTrack(t[n]);return e}f(t,i);var e=t.prototype;return e.addTrack=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack"}))},e.removeTrack=function(t){for(var e,n=0,i=this.length;n<i;n++)if(this[n]===t){(e=this[n]).off&&e.off(),this.tracks_.splice(n,1);break}e&&this.trigger({track:e,type:"removetrack"})},e.getTrackById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===t){e=r;break}}return e},t}(St);for(Ce in xe.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},xe.prototype.allowedEvents_)xe.prototype["on"+Ce]=null;function Ae(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].enabled=!1)}function Oe(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].selected=!1)}function Le(t){var e=["protocol","hostname","port","pathname","search","hash","host"],n=h.createElement("a");n.href=t;var i,r=""===n.host&&"file:"!==n.protocol;r&&((i=h.createElement("div")).innerHTML='<a href="'+t+'"></a>',n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),h.body.appendChild(i));for(var o={},s=0;s<e.length;s++)o[e[s]]=n[e[s]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),o.protocol||(o.protocol=d.location.protocol),r&&h.body.removeChild(i),o}function Pe(t){var e;return t.match(/^https?:\/\//)||((e=h.createElement("div")).innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href),t}function De(t){if("string"==typeof t){t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(t);if(t)return t.pop().toLowerCase()}return""}function Ne(t){var e=d.location;return(":"===(t=Le(t)).protocol?e:t).protocol+t.host!==e.protocol+e.host}var Ie=function(i){function t(t){var e;void 0===t&&(t=[]);for(var n=t.length-1;0<=n;n--)if(t[n].enabled){Ae(t,t[n]);break}return(e=i.call(this,t)||this).changing_=!1,e}return f(t,i),t.prototype.addTrack=function(t){var e=this;t.enabled&&Ae(this,t),i.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){e.changing_||(e.changing_=!0,Ae(e,t),e.changing_=!1,e.trigger("change"))})},t}(xe),je=function(i){function t(t){var e;void 0===t&&(t=[]);for(var n=t.length-1;0<=n;n--)if(t[n].selected){Oe(t,t[n]);break}return(e=i.call(this,t)||this).changing_=!1,Object.defineProperty(u(u(e)),"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),e}return f(t,i),t.prototype.addTrack=function(t){var e=this;t.selected&&Oe(this,t),i.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){e.changing_||(e.changing_=!0,Oe(e,t),e.changing_=!1,e.trigger("change"))})},t}(xe),Me=function(e){function t(){return e.apply(this,arguments)||this}return f(t,e),t.prototype.addTrack=function(t){e.prototype.addTrack.call(this,t),t.addEventListener("modechange",Et(this,function(){this.queueTrigger("change")}));-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",Et(this,function(){this.trigger("selectedlanguagechange")}))},t}(xe),Re=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var e=0,n=t.length;e<n;e++)this.addTrackElement_(t[e])}var e=t.prototype;return e.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},e.getTrackElementByTrack_=function(t){for(var e,n=0,i=this.trackElements_.length;n<i;n++)if(t===this.trackElements_[n].track){e=this.trackElements_[n];break}return e},e.removeTrackElement_=function(t){for(var e=0,n=this.trackElements_.length;e<n;e++)if(t===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},t}(),Ue=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(t){var e=this.length||0,n=0,i=t.length;this.cues_=t,this.length_=t.length;function r(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})}if(e<i)for(n=e;n<i;n++)r.call(this,n)},t.getCueById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===t){e=r;break}}return e},e}(),qe={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Be={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Fe={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},$e={disabled:"disabled",hidden:"hidden",showing:"showing"},Ft=function(r){function t(t){var e;void 0===t&&(t={}),e=r.call(this)||this;var n,i={id:t.id||"vjs_track_"+J++,kind:t.kind||"",label:t.label||"",language:t.language||""};for(n in i)!function(t){Object.defineProperty(u(u(e)),t,{get:function(){return i[t]},set:function(){}})}(n);return e}return f(t,r),t}(St),ze=Object.freeze({parseUrl:Le,getAbsoluteURL:Pe,getFileExtension:De,isCrossOrigin:Ne}),He=function(t){var e=Ve.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)},Ve=Object.prototype.toString;function We(t,e){return t(e={exports:{}},e.exports),e.exports}function Ge(t){try{var e=Xe.call(t);return Ze.test(e)}catch(t){return}}function Ye(t){return t&&(("function"==typeof t||"object"==typeof t)&&("function"==typeof t&&!t.prototype||(Je?function(t){try{return Ge(t)?!1:(Xe.call(t),!0)}catch(t){return!1}}(t):!Ge(t)&&("[object Function]"===(t=Qe.call(t))||"[object GeneratorFunction]"===t))))}var Ke=We(function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}}),Xe=(Ke.left,Ke.right,Function.prototype.toString),Ze=/^\s*class\b/,Qe=Object.prototype.toString,Je="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,tn=Object.prototype.toString,en=Object.prototype.hasOwnProperty,nn=function(t,e,n){if(!Ye(e))throw new TypeError("iterator must be a function");var i;3<=arguments.length&&(i=n),("[object Array]"===tn.call(t)?function(t,e,n){for(var i=0,r=t.length;i<r;i++)en.call(t,i)&&(null==n?e(t[i],i,t):e.call(n,t[i],i,t))}:"string"==typeof t?function(t,e,n){for(var i=0,r=t.length;i<r;i++)null==n?e(t.charAt(i),i,t):e.call(n,t.charAt(i),i,t)}:function(t,e,n){for(var i in t)en.call(t,i)&&(null==n?e(t[i],i,t):e.call(n,t[i],i,t))})(t,e,i)},rn=function(t){if(!t)return{};var i={};return nn(Ke(t).split("\n"),function(t){var e=t.indexOf(":"),n=Ke(t.slice(0,e)).toLowerCase(),t=Ke(t.slice(e+1));void 0===i[n]?i[n]=t:(e=i[n],"[object Array]"===Object.prototype.toString.call(e)?i[n].push(t):i[n]=[i[n],t])}),i},on=function(){for(var t={},e=0;e<arguments.length;e++){var n,i=arguments[e];for(n in i)sn.call(i,n)&&(t[n]=i[n])}return t},sn=Object.prototype.hasOwnProperty;var an=un;function ln(t,e,n){var i=t;return He(e)?(n=e,"string"==typeof t&&(i={uri:t})):i=on(e,{uri:t}),i.callback=n,i}function un(t,e,n){return cn(e=ln(t,e,n))}function cn(i){if(void 0===i.callback)throw new Error("callback argument missing");var r=!1,o=function(t,e,n){r||(r=!0,i.callback(t,e,n))};function s(){var t=void 0,t=u.response||u.responseText||function(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}(u);if(m)try{t=JSON.parse(t)}catch(t){}return t}function e(t){return clearTimeout(l),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,o(t,g)}function t(){if(!a){var t;clearTimeout(l),t=i.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var e=g,n=null;return 0!==t?(e={body:s(),statusCode:t,method:h,headers:{},url:c,rawRequest:u},u.getAllResponseHeaders&&(e.headers=rn(u.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),o(n,e,e.body)}}var n,a,l,u=i.xhr||null,c=(u=u||new(i.cors||i.useXDR?un.XDomainRequest:un.XMLHttpRequest)).url=i.uri||i.url,h=u.method=i.method||"GET",d=i.body||i.data,f=u.headers=i.headers||{},p=!!i.sync,m=!1,g={body:void 0,headers:{},statusCode:0,method:h,url:c,rawRequest:u};if("json"in i&&!1!==i.json&&(m=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),d=JSON.stringify(!0===i.json?d:i.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(t,0)},u.onload=t,u.onerror=e,u.onprogress=function(){},u.onabort=function(){a=!0},u.ontimeout=e,u.open(h,c,!p,i.username,i.password),p||(u.withCredentials=!!i.withCredentials),!p&&0<i.timeout&&(l=setTimeout(function(){var t;a||(a=!0,u.abort("timeout"),(t=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",e(t))},i.timeout)),u.setRequestHeader)for(n in f)f.hasOwnProperty(n)&&u.setRequestHeader(n,f[n]);else if(i.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return;return 1}(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(u.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(u),u.send(d||null),u}un.XMLHttpRequest=d.XMLHttpRequest||function(){},un.XDomainRequest="withCredentials"in new un.XMLHttpRequest?un.XMLHttpRequest:d.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(i){un["delete"===i?"del":i]=function(t,e,n){return(e=ln(t,e,n)).method=i.toUpperCase(),cn(e)}});function hn(t,e){var n=new d.WebVTT.Parser(d,d.vttjs,d.WebVTT.StringDecoder()),i=[];n.oncue=function(t){e.addCue(t)},n.onparsingerror=function(t){i.push(t)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),0<i.length&&(d.console&&d.console.groupCollapsed&&d.console.groupCollapsed("Text Track parsing errors for "+e.src),i.forEach(function(t){return p.error(t)}),d.console&&d.console.groupEnd&&d.console.groupEnd()),n.flush()}var dn=function(l){function t(t){var e;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var t=Ut(t,{kind:Fe[t.kind]||"subtitles",language:t.language||t.srclang||""}),n=$e[t.mode]||"disabled",i=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(n="hidden"),(e=l.call(this,t)||this).tech_=t.tech,e.cues_=[],e.activeCues_=[];var r=new Ue(e.cues_),s=new Ue(e.activeCues_),a=!1,o=Et(u(u(e)),function(){this.activeCues=this.activeCues,a&&(this.trigger("cuechange"),a=!1)});return"disabled"!==n&&e.tech_.ready(function(){e.tech_.on("timeupdate",o)},!0),Object.defineProperties(u(u(e)),{default:{get:function(){return i},set:function(){}},mode:{get:function(){return n},set:function(t){var e=this;$e[t]&&("disabled"!==(n=t)?this.tech_.ready(function(){e.tech_.on("timeupdate",o)},!0):this.tech_.off("timeupdate",o),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?r:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var t=this.tech_.currentTime(),e=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];(r.startTime<=t&&r.endTime>=t||r.startTime===r.endTime&&r.startTime<=t&&r.startTime+.5>=t)&&e.push(r)}if(a=!1,e.length!==this.activeCues_.length)a=!0;else for(var o=0;o<e.length;o++)-1===this.activeCues_.indexOf(e[o])&&(a=!0);return this.activeCues_=e,s.setCues_(this.activeCues_),s},set:function(){}}}),t.src?(e.src=t.src,function(t,r){var e={uri:t};(t=Ne(t))&&(e.cors=t),an(e,Et(this,function(t,e,n){return t?p.error(t,e):(r.loaded_=!0,void("function"!=typeof d.WebVTT?r.tech_&&(i=function(){return hn(n,r)},r.tech_.on("vttjsloaded",i),r.tech_.on("vttjserror",function(){p.error("vttjs failed to load, stopping trying to process "+r.src),r.tech_.off("vttjsloaded",i)})):hn(n,r)));var i}))}(t.src,u(u(e)))):e.loaded_=!0,e}f(t,l);var e=t.prototype;return e.addCue=function(t){var e=t;if(d.vttjs&&!(t instanceof d.vttjs.VTTCue)){for(var n in e=new d.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)n in e||(e[n]=t[n]);e.id=t.id,e.originalCue_=t}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},e.removeCue=function(t){for(var e=this.cues_.length;e--;){var n=this.cues_[e];if(n===t||n.originalCue_&&n.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},t}(Ft);dn.prototype.allowedEvents_={cuechange:"cuechange"};var $t=function(i){function t(t){void 0===t&&(t={});var e=Ut(t,{kind:Be[t.kind]||""}),t=i.call(this,e)||this,n=!1;return Object.defineProperty(u(u(t)),"enabled",{get:function(){return n},set:function(t){"boolean"==typeof t&&t!==n&&(n=t,this.trigger("enabledchange"))}}),e.enabled&&(t.enabled=e.enabled),t.loaded_=!0,t}return f(t,i),t}(Ft),fn=function(i){function t(t){void 0===t&&(t={});var e=Ut(t,{kind:qe[t.kind]||""}),t=i.call(this,e)||this,n=!1;return Object.defineProperty(u(u(t)),"selected",{get:function(){return n},set:function(t){"boolean"==typeof t&&t!==n&&(n=t,this.trigger("selectedchange"))}}),e.selected&&(t.selected=e.selected),t}return f(t,i),t}(Ft),pn=function(r){function t(t){var e,n;void 0===t&&(t={}),e=r.call(this)||this;var i=new dn(t);return e.kind=i.kind,e.src=i.src,e.srclang=i.language,e.label=i.label,e.default=i.default,Object.defineProperties(u(u(e)),{readyState:{get:function(){return n}},track:{get:function(){return i}}}),n=0,i.addEventListener("loadeddata",function(){n=2,e.trigger({type:"load",target:u(u(e))})}),e}return f(t,r),t}(St);pn.prototype.allowedEvents_={load:"load"},pn.NONE=0,pn.LOADING=1,pn.LOADED=2,pn.ERROR=3;var mn={audio:{ListClass:Ie,TrackClass:$t,capitalName:"Audio"},video:{ListClass:je,TrackClass:fn,capitalName:"Video"},text:{ListClass:Me,TrackClass:dn,capitalName:"Text"}};Object.keys(mn).forEach(function(t){mn[t].getterName=t+"Tracks",mn[t].privateName=t+"Tracks_"});var gn={remoteText:{ListClass:Me,TrackClass:dn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Re,TrackClass:pn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},yn=Ut(mn,gn);gn.names=Object.keys(gn),mn.names=Object.keys(mn),yn.names=[].concat(gn.names).concat(mn.names);var vn=Object.create||function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return bn.prototype=t,new bn};function bn(){}function _n(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function Tn(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}t=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return t?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):59<t[1]?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null}function wn(){this.values=vn(null)}function Sn(t,e,n,i){var r,o,s=i?t.split(i):[t];for(r in s)"string"==typeof s[r]&&(2===(o=s[r].split(n)).length&&e(o[0],o[1]))}((_n.prototype=vn(Error.prototype)).constructor=_n).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},wn.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var kn={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},En={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Cn={v:"title",lang:"lang"},xn={rt:"ruby"};function An(r,e){function n(t){return kn[t]}for(var t,i,o,s,a,l,u=r.document.createElement("div"),c=u,h=[];null!==(t=function(){if(!e)return null;var t=e.match(/^([^<]*)(<[^>]*>?)?/);return t=t[1]||t[2],e=e.substr(t.length),t}());)"<"!==t[0]?c.appendChild(r.document.createTextNode(function(t){for(;s=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(s[0],n);return t}(t))):"/"!==t[1]?(i=Tn(t.substr(1,t.length-2)))?(o=r.document.createProcessingInstruction("timestamp",i),c.appendChild(o)):(s=t.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(o=function(t,e){var n=En[t];if(!n)return null;var i=r.document.createElement(n);return i.localName=n,(t=Cn[t])&&e&&(i[t]=e.trim()),i}(s[1],s[3]))&&(a=c,xn[(l=o).localName]&&xn[l.localName]!==a.localName||(s[2]&&(o.className=s[2].substr(1).replace("."," ")),h.push(s[1]),c.appendChild(o),c=o)):h.length&&h[h.length-1]===t.substr(2).replace(">","")&&(h.pop(),c=c.parentNode);return u}var On=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Ln(t){var e=[],n="";if(!t||!t.childNodes)return"ltr";function o(t,e){for(var n=e.childNodes.length-1;0<=n;n--)t.push(e.childNodes[n])}for(o(e,t);n=function t(e){if(!e||!e.length)return null;var n=e.pop(),i=n.textContent||n.innerText;if(i){var r=i.match(/^.*(\n|\r)/);return r?r[e.length=0]:i}return"ruby"===n.tagName?t(e):n.childNodes?(o(e,n),t(e)):void 0}(e);)for(var i=0;i<n.length;i++)if(function(t){for(var e=0;e<On.length;e++){var n=On[e];if(t>=n[0]&&t<=n[1])return 1}}(n.charCodeAt(i)))return"rtl";return"ltr"}function Pn(){}function Dn(t,e,n){Pn.call(this),this.cue=e,this.cueDiv=An(t,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=t.document.createElement("div"),i={direction:Ln(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"middle":r=e.position-e.size/2;break;case"end":r=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function Nn(t){var e,n,i,r;t.div&&(e=t.div.offsetHeight,n=t.div.offsetWidth,i=t.div.offsetTop,r=(r=t.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects(),t=t.div.getBoundingClientRect(),r=r?Math.max(r[0]&&r[0].height||0,t.height/r.length):0),this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||e,this.bottom=t.bottom||i+(t.height||e),this.width=t.width||n,this.lineHeight=void 0!==r?r:t.lineHeight}function In(t,e,a,l){var n,i=new Nn(e),r=e.cue,o=function(t){if("number"==typeof t.line&&(t.snapToLines||0<=t.line&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,i=0,r=0;r<n.length&&n[r]!==e;r++)"showing"===n[r].mode&&i++;return-1*++i}(r),s=[];if(r.snapToLines){switch(r.vertical){case"":s=["+y","-y"],n="height";break;case"rl":s=["+x","-x"],n="width";break;case"lr":s=["-x","+x"],n="width"}var u=i.lineHeight,c=u*Math.round(o),h=a[n]+u,d=s[0];Math.abs(c)>h&&(c=c<0?-1:1,c*=Math.ceil(h/u)*u),o<0&&(c+=""===r.vertical?a.height:a.width,s=s.reverse()),i.move(d,c)}else{var f=i.lineHeight/a.height*100;switch(r.lineAlign){case"middle":o-=f/2;break;case"end":o-=f}switch(r.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],i=new Nn(e)}i=function(t,e){for(var n,i=new Nn(t),r=1,o=0;o<e.length;o++){for(;t.overlapsOppositeAxis(a,e[o])||t.within(a)&&t.overlapsAny(l);)t.move(e[o]);if(t.within(a))return t;var s=t.intersectPercentage(a);s<r&&(n=new Nn(t),r=s),t=new Nn(i)}return n||i}(i,s);e.move(i.toCSSCompatValues(a))}function jn(){}Pn.prototype.applyStyles=function(t,e){for(var n in e=e||this.div,t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},Pn.prototype.formatStyle=function(t,e){return 0===t?0:t+e},(Dn.prototype=vn(Pn.prototype)).constructor=Dn,Nn.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},Nn.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},Nn.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},Nn.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},Nn.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},Nn.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},Nn.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},Nn.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,i=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||i,height:t.height||e,bottom:t.bottom||i+(t.height||e),width:t.width||n}},jn.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},jn.convertCueToDOMTree=function(t,e){return t&&e?An(t,e):null};jn.processCues=function(i,r,t){if(!i||!r||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var o=i.document.createElement("div");if(o.style.position="absolute",o.style.left="0",o.style.right="0",o.style.top="0",o.style.bottom="0",o.style.margin="1.5%",t.appendChild(o),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return 1}(r)){var s=[],a=Nn.getSimpleBoxPosition(o),l={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var t,e,n=0;n<r.length;n++)e=r[n],t=new Dn(i,e,l),o.appendChild(t.div),In(0,t,a,s),e.displayState=t.div,s.push(Nn.getSimpleBoxPosition(t))}()}else for(var e=0;e<r.length;e++)o.appendChild(r[e].displayState)},(jn.Parser=function(t,e,n){n||(n=e,e={}),e=e||{},this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(t){if(!(t instanceof _n))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var e,i=this;function n(){for(var t=i.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),n}function r(t){t.match(/X-TIMESTAMP-MAP/)?Sn(t,function(t,e){var n;"X-TIMESTAMP-MAP"===t&&(e=e,n=new wn,Sn(e,function(t,e){switch(t){case"MPEGT":n.integer(t+"S",e);break;case"LOCA":n.set(t+"L",Tn(e))}},/[^\d]:/,/,/),i.ontimestampmap&&i.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")}))},/=/):Sn(t,function(t,e){var r;"Region"===t&&(e=e,r=new wn,Sn(e,function(t,e){switch(t){case"id":r.set(t,e);break;case"width":r.percent(t,e);break;case"lines":r.integer(t,e);break;case"regionanchor":case"viewportanchor":var n=e.split(",");if(2!==n.length)break;var i=new wn;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(t+"X",i.get("x")),r.set(t+"Y",i.get("y"));break;case"scroll":r.alt(t,e,["up"])}},/=/,/\s/),r.has("id")&&((e=new(i.vttjs.VTTRegion||i.window.VTTRegion)).width=r.get("width",100),e.lines=r.get("lines",3),e.regionAnchorX=r.get("regionanchorX",0),e.regionAnchorY=r.get("regionanchorY",100),e.viewportAnchorX=r.get("viewportanchorX",0),e.viewportAnchorY=r.get("viewportanchorY",100),e.scroll=r.get("scroll",""),i.onregion&&i.onregion(e),i.regionList.push({id:r.get("id"),region:e})))},/:/)}t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var o=(e=n()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new _n(_n.Errors.BadSignature);i.state="HEADER"}for(var s=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(s?s=!1:e=n(),i.state){case"HEADER":/:/.test(e)?r(e):e||(i.state="ID");continue;case"NOTE":e||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){i.state="NOTE";break}if(!e)continue;if(i.cue=new(i.vttjs.VTTCue||i.window.VTTCue)(0,0,""),i.state="CUE",-1===e.indexOf("--\x3e")){i.cue.id=e;continue}case"CUE":try{!function(e,t,o){var n,s,i=e;function r(){var t=Tn(e);if(null===t)throw new _n(_n.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new _n(_n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),n=e,t=t,s=new wn,Sn(n,function(t,e){switch(t){case"region":for(var n=o.length-1;0<=n;n--)if(o[n].id===e){s.set(t,o[n].region);break}break;case"vertical":s.alt(t,e,["rl","lr"]);break;case"line":var i=e.split(","),r=i[0];s.integer(t,r),s.percent(t,r)&&s.set("snapToLines",!1),s.alt(t,r,["auto"]),2===i.length&&s.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=e.split(","),s.percent(t,i[0]),2===i.length&&s.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":s.percent(t,e);break;case"align":s.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),t.region=s.get("region",null),t.vertical=s.get("vertical",""),t.line=s.get("line","auto"),t.lineAlign=s.get("lineAlign","start"),t.snapToLines=s.get("snapToLines",!0),t.size=s.get("size",100),t.align=s.get("align","middle"),t.position=s.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}(e,i.cue,i.regionList)}catch(t){i.reportOrThrowError(t),i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var a=-1!==e.indexOf("--\x3e");if(!e||a&&(s=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=e;continue;case"BADCUE":e||(i.state="ID");continue}}}catch(t){i.reportOrThrowError(t),"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new _n(_n.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var Mn=jn,Rn={"":1,lr:1,rl:1},Un={start:1,middle:1,end:1,left:1,right:1};function qn(t){return"string"==typeof t&&(!!Un[t.toLowerCase()]&&t.toLowerCase())}function Bn(t,e,n){this.hasBeenReset=!1;var i="",r=!1,o=t,s=e,a=n,l=null,u="",c=!0,h="auto",d="start",f=50,p="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(t){i=""+t}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(t){r=!!t}},startTime:{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");o=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");s=t,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return a},set:function(t){a=""+t,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(t){l=t,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(t){t="string"==typeof(t=t)&&(!!Rn[t.toLowerCase()]&&t.toLowerCase());if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(t){c=!!t,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");h=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return d},set:function(t){t=qn(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");d=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return f},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");f=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(t){t=qn(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");m=t,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(t){t=qn(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}Bn.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Fn=Bn,$n={"":!0,up:!0};function zn(t){return"number"==typeof t&&0<=t&&t<=100}function Hn(){var e=100,n=3,i=0,r=100,o=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!zn(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return n},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");n=t}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(t){if(!zn(t))throw new Error("RegionAnchorX must be between 0 and 100.");r=t}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(t){if(!zn(t))throw new Error("RegionAnchorY must be between 0 and 100.");i=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!zn(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(t){if(!zn(t))throw new Error("ViewportAnchorX must be between 0 and 100.");o=t}},scroll:{enumerable:!0,get:function(){return a},set:function(t){t="string"==typeof(t=t)&&(!!$n[t.toLowerCase()]&&t.toLowerCase());if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");a=t}}})}var Vn=We(function(t){t=t.exports={WebVTT:Mn,VTTCue:Fn,VTTRegion:Hn};d.vttjs=t,d.WebVTT=t.WebVTT;var e=t.VTTCue,n=t.VTTRegion,i=d.VTTCue,r=d.VTTRegion;t.shim=function(){d.VTTCue=e,d.VTTRegion=n},t.restore=function(){d.VTTCue=i,d.VTTRegion=r},d.VTTCue||t.shim()});Vn.WebVTT,Vn.VTTCue,Vn.VTTRegion;var Wn=function(i){function n(e,t){var n;return void 0===e&&(e={}),void 0===t&&(t=function(){}),e.reportTouchActivity=!1,(n=i.call(this,null,e,t)||this).hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),yn.names.forEach(function(t){t=yn[t];e&&e[t.getterName]&&(n[t.privateName]=e[t.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===e["native"+t+"Tracks"]&&(n["featuresNative"+t+"Tracks"]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.autoRemoteTextTracks_=new yn.text.ListClass,n.initTrackListeners(),e.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}f(n,i);var t=n.prototype;return t.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Et(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),1===(this.bufferedPercent_=t)&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(){this.duration_=this.duration()},t.buffered=function(){return le(0,0)},t.bufferedPercent=function(){return ue(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(mn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),i.prototype.dispose.call(this)},t.clearTracks=function(t){var r=this;(t=[].concat(t)).forEach(function(t){for(var e=r[t+"Tracks"]()||[],n=e.length;n--;){var i=e[n];"text"===t&&r.removeRemoteTextTrack(i),e.removeTrack(i)}})},t.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var n=t[e];this.removeRemoteTextTrack(n)}},t.reset=function(){},t.error=function(t){return void 0!==t&&(this.error_=new ge(t),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?le(0,0):le()},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var r=this;mn.names.forEach(function(t){function e(){r.trigger(t+"trackchange")}var n=mn[t],i=r[n.getterName]();i.addEventListener("removetrack",e),i.addEventListener("addtrack",e),r.on("dispose",function(){i.removeEventListener("removetrack",e),i.removeEventListener("addtrack",e)})})},t.addWebVttScript_=function(){var t,e=this;d.WebVTT||(h.body.contains(this.el())?!this.options_["vtt.js"]&&b(Vn)&&0<Object.keys(Vn).length?this.trigger("vttjsloaded"):((t=h.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),d.WebVTT=!0,this.el().parentNode.appendChild(t)):this.ready(this.addWebVttScript_))},t.emulateTextTracks=function(){function e(t){return i.addTrack(t.track)}function n(t){return i.removeTrack(t.track)}var t=this,i=this.textTracks(),r=this.remoteTextTracks();r.on("addtrack",e),r.on("removetrack",n),this.addWebVttScript_();function o(){return t.trigger("texttrackchange")}function s(){o();for(var t=0;t<i.length;t++){var e=i[t];e.removeEventListener("cuechange",o),"showing"===e.mode&&e.addEventListener("cuechange",o)}}s(),i.addEventListener("change",s),i.addEventListener("addtrack",s),i.addEventListener("removetrack",s),this.on("dispose",function(){r.off("addtrack",e),r.off("removetrack",n),i.removeEventListener("change",s),i.removeEventListener("addtrack",s),i.removeEventListener("removetrack",s);for(var t=0;t<i.length;t++)i[t].removeEventListener("cuechange",o)})},t.addTextTrack=function(t,e,n){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,n,i,r){void 0===r&&(r={});var o=t.textTracks();return r.kind=e,n&&(r.label=n),i&&(r.language=i),r.tech=t,r=new yn.text.TrackClass(r),o.addTrack(r),r}(this,t,e,n)},t.createRemoteTextTrack=function(t){t=Ut(t,{tech:this});return new gn.remoteTextEl.TrackClass(t)},t.addRemoteTextTrack=function(t,e){var n=this;void 0===t&&(t={});var i=this.createRemoteTextTrack(t);return!0!==e&&!1!==e&&(p.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==e&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(i.track)}),i},t.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},t.getVideoPlaybackQuality=function(){return{}},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},n.canPlayType=function(){return""},n.canPlaySource=function(t){return n.canPlayType(t.type)},n.isTech=function(t){return t.prototype instanceof n||t instanceof n||t===n},n.registerTech=function(t,e){if(n.techs_||(n.techs_={}),!n.isTech(e))throw new Error("Tech "+t+" must be a Tech");if(!n.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!n.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Rt(t),n.techs_[t]=e,"Tech"!==t&&n.defaultTechOrder_.push(t),e},n.getTech=function(t){if(t)return t=Rt(t),n.techs_&&n.techs_[t]?n.techs_[t]:d&&d.videojs&&d.videojs[t]?(p.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),d.videojs[t]):void 0},n}(qt);yn.names.forEach(function(t){var e=yn[t];Wn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),Wn.prototype.featuresVolumeControl=!0,Wn.prototype.featuresMuteControl=!0,Wn.prototype.featuresFullscreenResize=!1,Wn.prototype.featuresPlaybackRate=!1,Wn.prototype.featuresProgressEvents=!1,Wn.prototype.featuresSourceset=!1,Wn.prototype.featuresTimeupdateEvents=!1,Wn.prototype.featuresNativeTextTracks=!1,Wn.withSourceHandlers=function(r){r.registerSourceHandler=function(t,e){var n=(n=r.sourceHandlers)||(r.sourceHandlers=[]);void 0===e&&(e=n.length),n.splice(e,0,t)},r.canPlayType=function(t){for(var e,n=r.sourceHandlers||[],i=0;i<n.length;i++)if(e=n[i].canPlayType(t))return e;return""},r.selectSourceHandler=function(t,e){for(var n=r.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(t,e))return n[i];return null},r.canPlaySource=function(t,e){var n=r.selectSourceHandler(t,e);return n?n.canHandleSource(t,e):""};["seekable","seeking","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){var e=r.selectSourceHandler(t,this.options_);e||(r.nativeSourceHandler?e=r.nativeSourceHandler:p.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),e!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=e.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},qt.registerComponent("Tech",Wn),Wn.registerTech("Tech",Wn),Wn.defaultTechOrder_=[];var Gn={},Yn={},Kn={};function Xn(t,e,n){t.setTimeout(function(){return function n(i,t,r,o,s,a){void 0===i&&(i={});void 0===t&&(t=[]);void 0===s&&(s=[]);void 0===a&&(a=!1);var e=t,t=e[0],l=e.slice(1);if("string"==typeof t)n(i,Gn[t],r,o,s,a);else if(t){var u=ni(o,t);if(!u.setSource)return s.push(u),n(i,l,r,o,s,a);u.setSource(y({},i),function(t,e){return t?n(i,l,r,o,s,a):(s.push(u),void n(e,i.type===e.type?l:Gn[e.type],r,o,s,a))})}else l.length?n(i,l,r,o,s,a):a?r(i,s):n(i,Gn["*"],r,o,s,!0)}(e,Gn[e.type],n,t)},1)}function Zn(t,e,n,i){void 0===i&&(i=null);var r="call"+Rt(n),r=t.reduce(ei(r),i),i=r===Kn,r=i?null:e[n](r);return function(t,e,n,i){for(var r=t.length-1;0<=r;r--){var o=t[r];o[e]&&o[e](i,n)}}(t,n,r,i),r}var Qn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Jn={setCurrentTime:1},ti={play:1,pause:1};function ei(n){return function(t,e){return t===Kn?Kn:e[n]?e[n](t):t}}function ni(t,e){var n=Yn[t.id()],i=null;if(null==n)return i=e(t),Yn[t.id()]=[[e,i]],i;for(var r=0;r<n.length;r++){var o=n[r],s=o[0],o=o[1];s===e&&(i=o)}return null===i&&(i=e(t),n.push([e,i])),i}function ii(t){return void 0===t&&(t=""),t=De(t),oi[t.toLowerCase()]||""}function ri(t){var e;return t=Array.isArray(t)?(e=[],t.forEach(function(t){t=ri(t),Array.isArray(t)?e=e.concat(t):v(t)&&e.push(t)}),e):"string"==typeof t&&t.trim()?[si({src:t})]:v(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[si(t)]:[]}var oi={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"};function si(t){var e=ii(t.src);return!t.type&&e&&(t.type=e),t}zt=function(l){function t(t,e,n){var i=Ut({createEl:!1},e),n=l.call(this,t,i,n)||this;if(e.playerOptions.sources&&0!==e.playerOptions.sources.length)t.src(e.playerOptions.sources);else for(var r=0,o=e.playerOptions.techOrder;r<o.length;r++){var s=Rt(o[r]),a=Wn.getTech(s);if(s||(a=qt.getComponent(s)),a&&a.isSupported()){t.loadTech_(s);break}}return n}return f(t,l),t}(qt);qt.registerComponent("MediaLoader",zt);Vt=function(i){function t(t,e){e=i.call(this,t,e)||this;return e.emitTapEvents(),e.enable(),e}f(t,i);var e=t.prototype;return e.createEl=function(t,e,n){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===n&&(n={}),e=y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},e),"button"===t&&p.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=y({role:"button"},n),this.tabIndex_=e.tabIndex;n=i.prototype.createEl.call(this,t,e,n);return this.createControlTextEl(n),n},e.dispose=function(){this.controlTextEl_=null,i.prototype.dispose.call(this)},e.createControlTextEl=function(t){return this.controlTextEl_=x("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},e.controlText=function(t,e){if(void 0===e&&(e=this.el()),void 0===t)return this.controlText_||"Need Text";var n=this.localize(t);this.controlText_=t,A(this.controlTextEl_,n),this.nonIconControl||e.setAttribute("title",n)},e.buildCSSClass=function(){return"vjs-control vjs-button "+i.prototype.buildCSSClass.call(this)},e.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},e.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},e.handleClick=function(){},e.handleFocus=function(){ct(h,"keydown",Et(this,this.handleKeyPress))},e.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.trigger("click")):i.prototype.handleKeyPress&&i.prototype.handleKeyPress.call(this,t)},e.handleBlur=function(){ht(h,"keydown",Et(this,this.handleKeyPress))},t}(qt);qt.registerComponent("ClickableComponent",Vt);Gt=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.update(),t.on("posterchange",Et(u(u(e)),e.update)),e}f(t,n);var e=t.prototype;return e.dispose=function(){this.player().off("posterchange",this.update),n.prototype.dispose.call(this)},e.createEl=function(){return x("div",{className:"vjs-poster",tabIndex:-1})},e.update=function(){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},e.setSrc=function(t){t=t?'url("'+t+'")':"";this.el_.style.backgroundImage=t},e.handleClick=function(){this.player_.controls()&&(this.player_.paused()?_e(this.player_.play()):this.player_.pause())},t}(Vt);qt.registerComponent("PosterImage",Gt);var ai={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function li(t,e){var n;if(4===t.length)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");n=t.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function ui(t,e,n){try{t.style[e]=n}catch(t){return}}Qt=function(r){function t(n,t,e){var e=r.call(this,n,t,e)||this,i=Et(u(u(e)),e.updateDisplay);return n.on("loadstart",Et(u(u(e)),e.toggleDisplay)),n.on("texttrackchange",i),n.on("loadstart",Et(u(u(e)),e.preselectTrack)),n.ready(Et(u(u(e)),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",i),n.on("playerresize",i),d.addEventListener("orientationchange",i),n.on("dispose",function(){return d.removeEventListener("orientationchange",i)});for(var t=this.options_.playerOptions.tracks||[],e=0;e<t.length;e++)this.player_.addRemoteTextTrack(t[e],!0);this.preselectTrack()}})),e}f(t,r);var e=t.prototype;return e.preselectTrack=function(){for(var t,e,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var a=r[s];o&&o.enabled&&o.language===a.language?n=a.kind!==o.kind&&n||a:o&&!o.enabled?e=t=n=null:a.default&&("descriptions"!==a.kind||t?a.kind in i&&!e&&(e=a):t=a)}n?n.mode="showing":e?e.mode="showing":t&&(t.mode="showing")},e.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},e.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},e.clearDisplay=function(){"function"==typeof d.WebVTT&&d.WebVTT.processCues(d,[],this.el_)},e.updateDisplay=function(){var t=this.player_.textTracks();this.clearDisplay();for(var e=null,n=null,i=t.length;i--;){var r=t[i];"showing"===r.mode&&("descriptions"===r.kind?e=r:n=r)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))},e.updateForTrack=function(t){if("function"==typeof d.WebVTT&&t.activeCues){for(var e=[],n=0;n<t.activeCues.length;n++)e.push(t.activeCues[n]);if(d.WebVTT.processCues(d,e,this.el_),this.player_.textTrackSettings)for(var i=this.player_.textTrackSettings.getValues(),r=e.length;r--;){var o,s=e[r];s&&(o=s.displayState,i.color&&(o.firstChild.style.color=i.color),i.textOpacity&&ui(o.firstChild,"color",li(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(o.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&ui(o.firstChild,"backgroundColor",li(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?ui(o,"backgroundColor",li(i.windowColor,i.windowOpacity)):o.style.backgroundColor=i.windowColor),i.edgeStyle&&("dropshadow"===i.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===i.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===i.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===i.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),i.fontPercent&&1!==i.fontPercent&&(s=d.parseFloat(o.style.fontSize),o.style.fontSize=s*i.fontPercent+"px",o.style.height="auto",o.style.top="auto",o.style.bottom="2px"),i.fontFamily&&"default"!==i.fontFamily&&("small-caps"===i.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=ai[i.fontFamily]))}}},t}(qt);qt.registerComponent("TextTrackDisplay",Qt);ne=function(n){function t(){return n.apply(this,arguments)||this}return f(t,n),t.prototype.createEl=function(){var t=this.player_.isAudio(),e=this.localize(t?"Audio Player":"Video Player"),t=x("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[e])}),e=n.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return e.appendChild(t),e},t}(qt);qt.registerComponent("LoadingSpinner",ne);var ci=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var n=t.prototype;return n.createEl=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={}),e=y({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e),n=y({type:"button"},n);n=qt.prototype.createEl.call(this,"button",e,n);return this.createControlTextEl(n),n},n.addChild=function(t,e){void 0===e&&(e={});var n=this.constructor.name;return p.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),qt.prototype.addChild.call(this,t,e)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(Vt);qt.registerComponent("Button",ci);Ft=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.mouseused_=!1,e.on("mousedown",e.handleMouseDown),e}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-big-play-button"},e.handleClick=function(t){var e,n=this.player_.play();this.mouseused_&&t.clientX&&t.clientY?_e(n):(t=this.player_.getChild("controlBar"),(e=t&&t.getChild("playToggle"))?(t=function(){return e.focus()},be(n)?n.then(t,function(){}):this.setTimeout(t,1)):this.player_.focus())},e.handleKeyPress=function(t){this.mouseused_=!1,n.prototype.handleKeyPress.call(this,t)},e.handleMouseDown=function(){this.mouseused_=!0},t}(ci);Ft.prototype.controlText_="Play Video",qt.registerComponent("BigPlayButton",Ft);Ie=function(n){function t(t,e){t=n.call(this,t,e)||this;return t.controlText(e&&e.controlText||t.localize("Close")),t}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},e.handleClick=function(){this.trigger({type:"close",bubbles:!1})},t}(ci);qt.registerComponent("CloseButton",Ie);je=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.on(t,"play",e.handlePlay),e.on(t,"pause",e.handlePause),e.on(t,"ended",e.handleEnded),e}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},e.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},e.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},e.handlePlay=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},e.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},e.handleEnded=function(){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(ci);je.prototype.controlText_="Play",qt.registerComponent("PlayToggle",je);function hi(t,e){t=t<0?0:t;var n=Math.floor(t%60),i=Math.floor(t/60%60),r=Math.floor(t/3600),o=Math.floor(e/60%60),e=Math.floor(e/3600);return!isNaN(t)&&t!==1/0||(r=i=n="-"),(r=0<r||0<e?r+":":"")+(i=((r||10<=o)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)}var di=hi;function fi(t,e){return void 0===e&&(e=t),di(t,e)}Me=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.throttledUpdateContent=Tt(Et(u(u(e)),e.updateContent),25),e.on(t,"timeupdate",e.throttledUpdateContent),e}f(t,n);var e=t.prototype;return e.createEl=function(){var t=this.buildCSSClass(),e=n.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=x("span",{className:t+"-display"},{"aria-live":"off"}),this.updateTextNode_(),e.appendChild(this.contentEl_),e},e.dispose=function(){this.contentEl_=null,this.textNode_=null,n.prototype.dispose.call(this)},e.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=h.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},e.formatTime_=function(t){return fi(t)},e.updateFormattedTime_=function(t){t=this.formatTime_(t);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},e.updateContent=function(){},t}(qt);Me.prototype.labelText_="Time",Me.prototype.controlText_="Time",qt.registerComponent("TimeDisplay",Me);Re=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.on(t,"ended",e.handleEnded),e}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-current-time"},e.updateContent=function(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},e.handleEnded=function(){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(Me);Re.prototype.labelText_="Current Time",Re.prototype.controlText_="Current Time",qt.registerComponent("CurrentTimeDisplay",Re);pn=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.on(t,"durationchange",e.updateContent),e.on(t,"loadedmetadata",e.throttledUpdateContent),e}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-duration"},e.updateContent=function(){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},t}(Me);pn.prototype.labelText_="Duration",pn.prototype.controlText_="Duration",qt.registerComponent("DurationDisplay",pn);zt=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},e}(qt);qt.registerComponent("TimeDivider",zt);Gt=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.on(t,"durationchange",e.throttledUpdateContent),e.on(t,"ended",e.handleEnded),e}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-remaining-time"},e.formatTime_=function(t){return"-"+n.prototype.formatTime_.call(this,t)},e.updateContent=function(){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},e.handleEnded=function(){this.player_.duration()&&this.updateFormattedTime_(0)},t}(Me);Gt.prototype.labelText_="Remaining Time",Gt.prototype.controlText_="Remaining Time",qt.registerComponent("RemainingTimeDisplay",Gt);Qt=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.updateShowing(),e.on(e.player(),"durationchange",e.updateShowing),e}f(t,n);var e=t.prototype;return e.createEl=function(){var t=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=x("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},e.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},e.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},t}(qt);qt.registerComponent("LiveDisplay",Qt);ne=function(i){function t(t,e){e=i.call(this,t,e)||this;return e.bar=e.getChild(e.options_.barName),e.vertical(!!e.options_.vertical),e.enable(),e}f(t,i);var e=t.prototype;return e.enabled=function(){return this.enabled_},e.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},e.disable=function(){var t;this.enabled()&&(t=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)},e.createEl=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),e.className=e.className+" vjs-slider",e=y({tabIndex:0},e),n=y({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),i.prototype.createEl.call(this,t,e,n)},e.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||Jt||t.preventDefault(),q(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},e.handleMouseMove=function(){},e.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;B(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},e.update=function(){if(this.el_){var t=this.getPercent(),e=this.bar;if(e){("number"!=typeof t||t!=t||t<0||t===1/0)&&(t=0);var n=(100*t).toFixed(2)+"%",e=e.el().style;return this.vertical()?e.height=n:e.width=n,t}}},e.calculateDistance=function(t){t=z(this.el_,t);return this.vertical()?t.y:t.x},e.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepForward())},e.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},e.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(qt);qt.registerComponent("Slider",ne);Ft=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.partEls_=[],e.on(t,"progress",e.update),e}f(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},e.dispose=function(){this.partEls_=null,n.prototype.dispose.call(this)},e.update=function(){function t(t,e){return 100*(1<=(e=t/e||0)?1:e)+"%"}var e=this.player_.buffered(),n=this.player_.duration(),i=this.player_.bufferedEnd(),r=this.partEls_;this.el_.style.width=t(i,n);for(var o=0;o<e.length;o++){var s=e.start(o),a=e.end(o),l=r[o];l||(l=this.el_.appendChild(x()),r[o]=l),l.style.left=t(s,i),l.style.width=t(a-s,i)}for(var u=r.length;u>e.length;u--)this.el_.removeChild(r[u-1]);r.length=e.length},t}(qt);qt.registerComponent("LoadProgressBar",Ft);Ie=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},n.update=function(t,e,n){var i=F(this.el_),r=F(this.player_.el()),o=t.width*e;r&&i&&(e=t.left-r.left+o,r=t.width-o+(r.right-t.right),e<(t=i.width/2)?t+=t-e:r<t&&(t=r),t<0?t=0:t>i.width&&(t=i.width),this.el_.style.right="-"+t+"px",A(this.el_,n))},e}(qt);qt.registerComponent("TimeTooltip",Ie);je=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},n.update=function(n,i){var r=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var t=fi(r.player_.scrubbing()?r.player_.getCache().currentTime:r.player_.currentTime(),r.player_.duration()),e=r.getChild("timeTooltip");e&&e.update(n,i,t)})},e}(qt);je.prototype.options_={children:[]},Wt||Yt||je.prototype.options_.children.push("timeTooltip"),qt.registerComponent("PlayProgressBar",je);Re=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.update=Tt(Et(u(u(e)),e.update),25),e}f(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},e.update=function(e,n){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var t=i.player_.duration(),t=fi(n*t,t);i.el_.style.left=e.width*n+"px",i.getChild("timeTooltip").update(e,n,t)})},t}(qt);Re.prototype.options_={children:["timeTooltip"]},qt.registerComponent("MouseTimeDisplay",Re);pn=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.setEventHandlers_(),e}f(t,n);var e=t.prototype;return e.setEventHandlers_=function(){var t=this;this.update=Tt(Et(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){t.clearInterval(t.updateInterval),t.updateInterval=t.setInterval(function(){t.requestAnimationFrame(function(){t.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){t.clearInterval(t.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},e.update_=function(t,e){var n=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[fi(t,n),fi(n,n)],"{1} of {2}")),this.bar.update(F(this.el_),e)},e.update=function(){var t=n.prototype.update.call(this);return this.update_(this.getCurrentTime_(),t),t},e.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},e.handleEnded=function(){this.update_(this.player_.duration(),1)},e.getPercent=function(){var t=this.getCurrentTime_()/this.player_.duration();return 1<=t?1:t||0},e.handleMouseDown=function(t){K(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),n.prototype.handleMouseDown.call(this,t))},e.handleMouseMove=function(t){K(t)&&((t=this.calculateDistance(t)*this.player_.duration())===this.player_.duration()&&(t-=.1),this.player_.currentTime(t))},e.enable=function(){n.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},e.disable=function(){n.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},e.handleMouseUp=function(t){n.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&_e(this.player_.play())},e.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},e.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},e.handleAction=function(){this.player_.paused()?this.player_.play():this.player_.pause()},e.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):n.prototype.handleKeyPress&&n.prototype.handleKeyPress.call(this,t)},t}(ne);pn.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Wt||Yt||pn.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),pn.prototype.playerEvent="timeupdate",qt.registerComponent("SeekBar",pn);zt=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.handleMouseMove=Tt(Et(u(u(e)),e.handleMouseMove),25),e.throttledHandleMouseSeek=Tt(Et(u(u(e)),e.handleMouseSeek),25),e.enable(),e}f(t,n);var e=t.prototype;return e.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},e.handleMouseMove=function(t){var e,n,i=this.getChild("seekBar");i&&(e=i.getChild("mouseTimeDisplay"),i=F(n=i.el()),1<(t=z(n,t).x)?t=1:t<0&&(t=0),e&&e.update(i,t))},e.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},e.enabled=function(){return this.enabled_},e.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},e.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},e.handleMouseDown=function(t){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},e.handleMouseUp=function(t){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(t),this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},t}(qt);zt.prototype.options_={children:["seekBar"]},qt.registerComponent("ProgressControl",zt);Me=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.on(t,"fullscreenchange",e.handleFullscreenChange),!1===h[he.fullscreenEnabled]&&e.disable(),e}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},e.handleFullscreenChange=function(){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},e.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(ci);Me.prototype.controlText_="Fullscreen",qt.registerComponent("FullscreenToggle",Me);Gt=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(qt);qt.registerComponent("VolumeLevel",Gt);Qt=function(i){function t(t,e){var n=i.call(this,t,e)||this;return n.on("slideractive",n.updateLastVolume_),n.on(t,"volumechange",n.updateARIAAttributes),t.ready(function(){return n.updateARIAAttributes()}),n}f(t,i);var e=t.prototype;return e.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},e.handleMouseDown=function(t){K(t)&&i.prototype.handleMouseDown.call(this,t)},e.handleMouseMove=function(t){K(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},e.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},e.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},e.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},e.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},e.updateARIAAttributes=function(){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},e.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},e.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(e)})},t}(ne);Qt.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Qt.prototype.playerEvent="volumechange",qt.registerComponent("VolumeBar",Qt);Ft=function(o){function t(t,e){var n,i,r;return void 0===e&&(e={}),e.vertical=e.vertical||!1,void 0!==e.volumeBar&&!b(e.volumeBar)||(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),n=o.call(this,t,e)||this,i=u(u(n)),(r=t).tech_&&!r.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),n.throttledHandleMouseMove=Tt(Et(u(u(n)),n.handleMouseMove),25),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}f(t,o);var e=t.prototype;return e.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),o.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},e.handleMouseDown=function(){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},e.handleMouseUp=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},e.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},t}(qt);Ft.prototype.options_={children:["volumeBar"]},qt.registerComponent("VolumeControl",Ft);Ie=function(r){function t(t,e){var n,i,e=r.call(this,t,e)||this;return n=u(u(e)),(i=t).tech_&&!i.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(i,"loadstart",function(){i.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")}),e.on(t,["loadstart","volumechange"],e.update),e}f(t,r);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-mute-control "+r.prototype.buildCSSClass.call(this)},e.handleClick=function(){var t=this.player_.volume(),e=this.player_.lastVolume_();0===t?(e=e<.1?.1:e,this.player_.volume(e),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},e.update=function(){this.updateIcon_(),this.updateControlText_()},e.updateIcon_=function(){var t=this.player_.volume(),e=3;Wt&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var n=0;n<4;n++)D(this.el_,"vjs-vol-"+n);P(this.el_,"vjs-vol-"+e)},e.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},t}(ci);Ie.prototype.controlText_="Mute",qt.registerComponent("MuteToggle",Ie);je=function(n){function t(t,e){return void 0===e&&(e={}),void 0!==e.inline?e.inline=e.inline:e.inline=!0,void 0!==e.volumeControl&&!b(e.volumeControl)||(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),(e=n.call(this,t,e)||this).on(t,["loadstart"],e.volumePanelState_),e.on(e.volumeControl,["slideractive"],e.sliderActive_),e.on(e.volumeControl,["sliderinactive"],e.sliderInactive_),e}f(t,n);var e=t.prototype;return e.sliderActive_=function(){this.addClass("vjs-slider-active")},e.sliderInactive_=function(){this.removeClass("vjs-slider-active")},e.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},e.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},t}(qt);je.prototype.options_={children:["muteToggle","volumeControl"]},qt.registerComponent("VolumePanel",je);var pi=function(n){function t(t,e){t=n.call(this,t,e)||this;return e&&(t.menuButton_=e.menuButton),t.focusedChild_=-1,t.on("keydown",t.handleKeyPress),t}f(t,n);var e=t.prototype;return e.addItem=function(e){this.addChild(e),e.on("click",Et(this,function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))},e.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=x(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");t=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ct(t,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),t},e.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},e.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepForward()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepBack())},e.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},e.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},e.focus=function(t){void 0===t&&(t=0);var e=this.children().slice();e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className)&&e.shift(),0<e.length&&(t<0?t=0:t>=e.length&&(t=e.length-1),e[this.focusedChild_=t].el_.focus())},t}(qt);qt.registerComponent("Menu",pi);Re=function(i){function t(t,e){var n;void 0===e&&(e={}),(n=i.call(this,t,e)||this).menuButton_=new ci(t,e),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");e=ci.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+e,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"focus",n.handleFocus),n.on(n.menuButton_,"blur",n.handleBlur),n.on("keydown",n.handleSubmenuKeyPress),n}f(t,i);var e=t.prototype;return e.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},e.createMenu=function(){var t,e=new pi(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(t=x("li",{className:"vjs-menu-title",innerHTML:Rt(this.options_.title),tabIndex:-1}),this.hideThreshold_+=1,e.children_.unshift(t),O(t,e.contentEl())),this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},e.createItems=function(){},e.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},e.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+ci.prototype.buildCSSClass()+" "+i.prototype.buildCSSClass.call(this)},e.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+i.prototype.buildCSSClass.call(this)},e.controlText=function(t,e){return void 0===e&&(e=this.menuButton_.el()),this.menuButton_.controlText(t,e)},e.handleClick=function(){this.one(this.menu.contentEl(),"mouseleave",Et(this,function(t){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},e.focus=function(){this.menuButton_.focus()},e.blur=function(){this.menuButton_.blur()},e.handleFocus=function(){ct(h,"keydown",Et(this,this.handleKeyPress))},e.handleBlur=function(){ht(h,"keydown",Et(this,this.handleKeyPress))},e.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus())):38!==t.which&&40!==t.which||this.buttonPressed_||(this.pressButton(),t.preventDefault())},e.handleSubmenuKeyPress=function(t){27!==t.which&&9!==t.which||(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus()))},e.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Wt&&E()||this.menu.focus())},e.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},e.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},e.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(qt);qt.registerComponent("MenuButton",Re);pn=function(r){function t(t,e){var n=e.tracks,e=r.call(this,t,e)||this;if(e.items.length<=1&&e.hide(),!n)return u(e);var i=Et(u(u(e)),e.update);return n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),e.player_.on("ready",i),e.player_.on("dispose",function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)}),e}return f(t,r),t}(Re);qt.registerComponent("TrackButton",pn);zt=function(i){function t(t,e){t=i.call(this,t,e)||this;return t.selectable=e.selectable,t.isSelected_=e.selected||!1,t.multiSelectable=e.multiSelectable,t.selected(t.isSelected_),t.selectable?t.multiSelectable?t.el_.setAttribute("role","menuitemcheckbox"):t.el_.setAttribute("role","menuitemradio"):t.el_.setAttribute("role","menuitem"),t}f(t,i);var e=t.prototype;return e.createEl=function(t,e,n){return this.nonIconControl=!0,i.prototype.createEl.call(this,"li",y({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},e),n)},e.handleClick=function(){this.selected(!0)},e.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Vt);qt.registerComponent("MenuItem",zt);var mi=function(l){function t(t,e){var i,n=e.track,r=t.textTracks();e.label=n.label||n.language||"Unknown",e.selected="showing"===n.mode,(i=l.call(this,t,e)||this).track=n;function o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.handleTracksChange.apply(u(u(i)),e)}function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.handleSelectedLanguageChange.apply(u(u(i)),e)}var a;return t.on(["loadstart","texttrackchange"],o),r.addEventListener("change",o),r.addEventListener("selectedlanguagechange",s),i.on("dispose",function(){t.off(["loadstart","texttrackchange"],o),r.removeEventListener("change",o),r.removeEventListener("selectedlanguagechange",s)}),void 0===r.onchange&&i.on(["tap","click"],function(){if("object"!=typeof d.Event)try{a=new d.Event("change")}catch(t){}a||(a=h.createEvent("Event")).initEvent("change",!0,!0),r.dispatchEvent(a)}),i.handleTracksChange(),i}f(t,l);var e=t.prototype;return e.handleClick=function(t){var e=this.track.kind,n=this.track.kinds,i=this.player_.textTracks(),n=n||[e];if(l.prototype.handleClick.call(this,t),i)for(var r=0;r<i.length;r++){var o=i[r];o===this.track&&-1<n.indexOf(o.kind)?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled")}},e.handleTracksChange=function(){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},e.handleSelectedLanguageChange=function(){var t;"showing"===this.track.mode&&((t=this.player_.cache_.selectedLanguage)&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))},e.dispose=function(){this.track=null,l.prototype.dispose.call(this)},t}(zt);qt.registerComponent("TextTrackMenuItem",mi);var gi=function(n){function t(t,e){return e.track={player:t,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,n.call(this,t,e)||this}f(t,n);var e=t.prototype;return e.handleTracksChange=function(){for(var t=this.player().textTracks(),e=!0,n=0,i=t.length;n<i;n++){var r=t[n];if(-1<this.options_.kinds.indexOf(r.kind)&&"showing"===r.mode){e=!1;break}}e!==this.isSelected_&&this.selected(e)},e.handleSelectedLanguageChange=function(){for(var t=this.player().textTracks(),e=!0,n=0,i=t.length;n<i;n++){var r=t[n];if(-1<["captions","descriptions","subtitles"].indexOf(r.kind)&&"showing"===r.mode){e=!1;break}}e&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(mi);qt.registerComponent("OffTextTrackMenuItem",gi);Me=function(n){function t(t,e){return void 0===e&&(e={}),e.tracks=t.textTracks(),n.call(this,t,e)||this}return f(t,n),t.prototype.createItems=function(t,e){var n;void 0===t&&(t=[]),void 0===e&&(e=mi),this.label_&&(n=this.label_+" off"),t.push(new gi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var o,s=i[r];-1<this.kinds_.indexOf(s.kind)&&((o=new e(this.player_,{track:s,selectable:!0,multiSelectable:!1})).addClass("vjs-"+s.kind+"-menu-item"),t.push(o))}return t},t}(pn);qt.registerComponent("TextTrackButton",Me);var yi=function(o){function t(t,e){var n=e.track,i=e.cue,r=t.currentTime();return e.selectable=!0,e.multiSelectable=!1,e.label=i.text,e.selected=i.startTime<=r&&r<i.endTime,(e=o.call(this,t,e)||this).track=n,e.cue=i,n.addEventListener("cuechange",Et(u(u(e)),e.update)),e}f(t,o);var e=t.prototype;return e.handleClick=function(){o.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},e.update=function(){var t=this.cue,e=this.player_.currentTime();this.selected(t.startTime<=e&&e<t.endTime)},t}(zt);qt.registerComponent("ChaptersTrackMenuItem",yi);Gt=function(i){function t(t,e,n){return i.call(this,t,e,n)||this}f(t,i);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},e.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),i.prototype.update.call(this)},e.setTrack=function(t){var e;this.track_!==t&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&e.removeEventListener("load",this.updateHandler_),this.track_=null),this.track_=t,this.track_&&(this.track_.mode="hidden",(t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.addEventListener("load",this.updateHandler_)))},e.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;0<=e;e--){var n=t[e];if(n.kind===this.kind_)return n}},e.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Rt(this.kind_))},e.createMenu=function(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},e.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var n=0,i=e.length;n<i;n++){var r=e[n],r=new yi(this.player_,{track:this.track_,cue:r});t.push(r)}return t},t}(Me);Gt.prototype.kind_="chapters",Gt.prototype.controlText_="Chapters",qt.registerComponent("ChaptersButton",Gt);ne=function(o){function t(t,e,n){var n=o.call(this,t,e,n)||this,i=t.textTracks(),r=Et(u(u(n)),n.handleTracksChange);return i.addEventListener("change",r),n.on("dispose",function(){i.removeEventListener("change",r)}),n}f(t,o);var e=t.prototype;return e.handleTracksChange=function(){for(var t=this.player().textTracks(),e=!1,n=0,i=t.length;n<i;n++){var r=t[n];if(r.kind!==this.kind_&&"showing"===r.mode){e=!0;break}}e?this.disable():this.enable()},e.buildCSSClass=function(){return"vjs-descriptions-button "+o.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+o.prototype.buildWrapperCSSClass.call(this)},t}(Me);ne.prototype.kind_="descriptions",ne.prototype.controlText_="Descriptions",qt.registerComponent("DescriptionsButton",ne);Qt=function(i){function t(t,e,n){return i.call(this,t,e,n)||this}f(t,i);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},t}(Me);Qt.prototype.kind_="subtitles",Qt.prototype.controlText_="Subtitles",qt.registerComponent("SubtitlesButton",Qt);var vi=function(n){function t(t,e){return e.track={player:t,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",(t=n.call(this,t,e)||this).addClass("vjs-texttrack-settings"),t.controlText(", opens "+e.kind+" settings dialog"),t}return f(t,n),t.prototype.handleClick=function(){this.player().getChild("textTrackSettings").open()},t}(mi);qt.registerComponent("CaptionSettingsMenuItem",vi);Ft=function(i){function t(t,e,n){return i.call(this,t,e,n)||this}f(t,i);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},e.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new vi(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,t)},t}(Me);Ft.prototype.kind_="captions",Ft.prototype.controlText_="Captions",qt.registerComponent("CaptionsButton",Ft);var bi=function(r){function t(){return r.apply(this,arguments)||this}return f(t,r),t.prototype.createEl=function(t,e,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",r.prototype.createEl.call(this,t,y({innerHTML:i},e),n)},t}(mi);qt.registerComponent("SubsCapsMenuItem",bi);Ie=function(n){function t(t,e){return void 0===e&&(e={}),(e=n.call(this,t,e)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(e.player_.language_)&&(e.label_="captions"),e.menuButton_.controlText(Rt(e.label_)),e}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)},e.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new vi(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=n.prototype.createItems.call(this,t,bi)},t}(Me);Ie.prototype.kinds_=["captions","subtitles"],Ie.prototype.controlText_="Subtitles",qt.registerComponent("SubsCapsButton",Ie);var _i=function(s){function t(t,e){var i,n=e.track,r=t.audioTracks();e.label=n.label||n.language||"Unknown",e.selected=n.enabled,(i=s.call(this,t,e)||this).track=n,i.addClass("vjs-"+n.kind+"-menu-item");function o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.handleTracksChange.apply(u(u(i)),e)}return r.addEventListener("change",o),i.on("dispose",function(){r.removeEventListener("change",o)}),i}f(t,s);var e=t.prototype;return e.createEl=function(t,e,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),i+="</span>",s.prototype.createEl.call(this,t,y({innerHTML:i},e),n)},e.handleClick=function(t){var e=this.player_.audioTracks();s.prototype.handleClick.call(this,t);for(var n=0;n<e.length;n++){var i=e[n];i.enabled=i===this.track}},e.handleTracksChange=function(){this.selected(this.track.enabled)},t}(zt);qt.registerComponent("AudioTrackMenuItem",_i);je=function(n){function t(t,e){return void 0===e&&(e={}),e.tracks=t.audioTracks(),n.call(this,t,e)||this}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},e.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var e=this.player_.audioTracks(),n=0;n<e.length;n++){var i=e[n];t.push(new _i(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return t},t}(pn);je.prototype.controlText_="Audio Track",qt.registerComponent("AudioTrackButton",je);var Ti=function(r){function t(t,e){var n=e.rate,i=parseFloat(n,10);return e.label=n,e.selected=1===i,e.selectable=!0,e.multiSelectable=!1,(e=r.call(this,t,e)||this).label=n,e.rate=i,e.on(t,"ratechange",e.update),e}f(t,r);var e=t.prototype;return e.handleClick=function(){r.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},e.update=function(){this.selected(this.player().playbackRate()===this.rate)},t}(zt);Ti.prototype.contentElType="button",qt.registerComponent("PlaybackRateMenuItem",Ti);Vt=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.updateVisibility(),e.updateLabel(),e.on(t,"loadstart",e.updateVisibility),e.on(t,"ratechange",e.updateLabel),e}f(t,n);var e=t.prototype;return e.createEl=function(){var t=n.prototype.createEl.call(this);return this.labelEl_=x("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},e.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},e.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},e.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},e.createMenu=function(){var t=new pi(this.player()),e=this.playbackRates();if(e)for(var n=e.length-1;0<=n;n--)t.addChild(new Ti(this.player(),{rate:e[n]+"x"}));return t},e.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},e.handleClick=function(){for(var t=this.player().playbackRate(),e=this.playbackRates(),n=e[0],i=0;i<e.length;i++)if(e[i]>t){n=e[i];break}this.player().playbackRate(n)},e.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},e.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},e.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},e.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(Re);Vt.prototype.controlText_="Playback Rate",qt.registerComponent("PlaybackRateMenuButton",Vt);Gt=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(qt);qt.registerComponent("Spacer",Gt);ne=function(e){function t(){return e.apply(this,arguments)||this}f(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(Gt);qt.registerComponent("CustomControlSpacer",ne);Qt=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(qt);Qt.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},qt.registerComponent("ControlBar",Qt);Ft=function(n){function t(t,e){e=n.call(this,t,e)||this;return e.on(t,"error",e.open),e}f(t,n);var e=t.prototype;return e.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},e.content=function(){var t=this.player().error();return t?this.localize(t.message):""},t}(Ee);Ft.prototype.options_=Ut(Ee.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),qt.registerComponent("ErrorDisplay",Ft);var wi="vjs-text-track-settings",Me=["#000","Black"],Ie=["#00F","Blue"],pn=["#0FF","Cyan"],je=["#0F0","Green"],zt=["#F0F","Magenta"],Re=["#F00","Red"],Vt=["#FFF","White"],Gt=["#FF0","Yellow"],ne=["1","Opaque"],Qt=["0.5","Semi-Transparent"],Ft=["0","Transparent"],Si={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Me,Vt,Re,je,Ie,Gt,zt,pn]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ne,Qt,Ft]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Vt,Me,Re,je,Ie,Gt,zt,pn]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ne,Qt]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ft,Qt,ne]}};function ki(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}Si.windowColor.options=Si.backgroundColor.options;ne=function(i){function t(t,e){var n;return e.temporary=!1,(n=i.call(this,t,e)||this).updateDisplay=Et(u(u(n)),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=x("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===e.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),c(Si,function(t){n.on(n.$(t.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}f(t,i);var e=t.prototype;return e.dispose=function(){this.endDialog=null,i.prototype.dispose.call(this)},e.createElSelect_=function(t,e,n){var i=this;void 0===e&&(e=""),void 0===n&&(n="label");var t=Si[t],r=t.id.replace("%s",this.id_),o=[e,r].join(" ").trim();return["<"+n+' id="'+r+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(t.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(t.options.map(function(t){var e=r+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+o+" "+e+'">',i.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},e.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},e.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},e.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},e.createElColors_=function(){return x("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},e.createElFont_=function(){return x("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},e.createElControls_=function(){var t=this.localize("restore all settings to the default values");return x("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},e.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},e.label=function(){return this.localize("Caption Settings Dialog")},e.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},e.buildCSSClass=function(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},e.getValues=function(){var n,i,t,r=this;return i=function(t,e,n){var i,e=(i=r.$(e.selector),e=e.parser,ki(i.options[i.options.selectedIndex].value,e));return void 0!==e&&(t[n]=e),t},void 0===(t={})&&(t=0),o(n=Si).reduce(function(t,e){return i(t,n[e],e)},t)},e.setValues=function(n){var i=this;c(Si,function(t,e){!function(t,e,n){if(e)for(var i=0;i<t.options.length;i++)if(ki(t.options[i].value,n)===e){t.selectedIndex=i;break}}(i.$(t.selector),n[e],t.parser)})},e.setDefaults=function(){var n=this;c(Si,function(t){var e=t.hasOwnProperty("default")?t.default:0;n.$(t.selector).selectedIndex=e})},e.restoreSettings=function(){var t;try{t=JSON.parse(d.localStorage.getItem(wi))}catch(t){p.warn(t)}t&&this.setValues(t)},e.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?d.localStorage.setItem(wi,JSON.stringify(t)):d.localStorage.removeItem(wi)}catch(t){p.warn(t)}}},e.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},e.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(h,"keydown",this.handleKeyDown);var t=this.player_.controlBar,e=t&&t.subsCapsButton,t=t&&t.captionsButton;e?e.focus():t&&t.focus()},t}(Ee);qt.registerComponent("TextTrackSettings",ne);ne=function(o){function t(t,e){var n=e.ResizeObserver||d.ResizeObserver;null===e.ResizeObserver&&(n=!1);var i,r=Ut({createEl:!n,reportTouchActivity:!1},e);return(i=o.call(this,t,r)||this).ResizeObserver=e.ResizeObserver||d.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=wt(function(){i.resizeHandler()},100,!1,u(u(i))),n?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(t.el())):(i.loadListener_=function(){i.el_&&i.el_.contentWindow&&ct(i.el_.contentWindow,"resize",i.debouncedHandler_)},i.one("load",i.loadListener_)),i}f(t,o);var e=t.prototype;return e.createEl=function(){return o.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},e.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},e.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&ht(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},t}(qt);qt.registerComponent("ResizeManager",ne);function Ei(t){if((i=t.el()).hasAttribute("src"))return t.triggerSourceset(i.src),1;var e=t.$$("source"),n=[],i="";if(e.length){for(var r=0;r<e.length;r++){var o=e[r].src;o&&-1===n.indexOf(o)&&n.push(o)}return!!n.length&&(1===n.length&&(i=n[0]),t.triggerSourceset(i),!0)}}function Ci(t,e){for(var n={},i=0;i<t.length&&!((n=Object.getOwnPropertyDescriptor(t[i],e))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n}function xi(o){var e,t,n,s=o.el();s.resetSourceWatch_||(e={},t=Ci([o.el(),d.HTMLMediaElement.prototype,d.Element.prototype,Oi],"innerHTML"),n=function(r){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=r.apply(s,e);return Ei(o),i}},["append","appendChild","insertAdjacentHTML"].forEach(function(t){s[t]&&(e[t]=s[t],s[t]=n(e[t]))}),Object.defineProperty(s,"innerHTML",Ut(t,{set:n(t.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(e).forEach(function(t){s[t]=e[t]}),Object.defineProperty(s,"innerHTML",t)},o.one("sourceset",s.resetSourceWatch_))}function Ai(n){var i,e,r,o;n.featuresSourceset&&((i=n.el()).resetSourceset_||(e=Ci([n.el(),d.HTMLMediaElement.prototype,Li],"src"),r=i.setAttribute,o=i.load,Object.defineProperty(i,"src",Ut(e,{set:function(t){t=e.set.call(i,t);return n.triggerSourceset(i.src),t}})),i.setAttribute=function(t,e){e=r.call(i,t,e);return/src/i.test(t)&&n.triggerSourceset(i.src),e},i.load=function(){var t=o.call(i);return Ei(n)||(n.triggerSourceset(""),xi(n)),t},i.currentSrc?n.triggerSourceset(i.currentSrc):Ei(n)||xi(n),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=o,i.setAttribute=r,Object.defineProperty(i,"src",e),i.resetSourceWatch_&&i.resetSourceWatch_()}))}var Oi=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var e=h.createElement(this.nodeName.toLowerCase());e.innerHTML=t;for(var n=h.createDocumentFragment();e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",d.Element.prototype.appendChild.call(this,n),this.innerHTML}}),Li=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Pe(d.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return d.Element.prototype.setAttribute.call(this,"src",t),t}});function Pi(){var t=e(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);return Pi=function(){return t},t}var Di=function(u){function s(t,e){var n=u.call(this,t,e)||this,e=t.source,i=!1;if(e&&(n.el_.currentSrc!==e.src||t.tag&&3===t.tag.initNetworkState_)?n.setSource(e):n.handleLateInit_(n.el_),t.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var r=n.el_.childNodes,o=r.length,s=[];o--;){var a=r[o];"track"===a.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(a),n.remoteTextTracks().addTrack(a.track),n.textTracks().addTrack(a.track),i||n.el_.hasAttribute("crossorigin")||!Ne(a.src)||(i=!0)):s.push(a))}for(var l=0;l<s.length;l++)n.el_.removeChild(s[l])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&i&&p.warn(g(Pi())),n.restoreMetadataTracksInIOSNativePlayer_(),(re||Ht||Xt)&&!0===t.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}f(s,u);var t=s.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),s.disposeMediaElement(this.el_),this.options_=null,u.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){Ai(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){function t(){n=[];for(var t=0;t<i.length;t++){var e=i[t];"metadata"===e.kind&&n.push({track:e,storedMode:e.mode})}}var n,i=this.textTracks();t(),i.addEventListener("change",t),this.on("dispose",function(){return i.removeEventListener("change",t)});function r(){for(var t=0;t<n.length;t++){var e=n[t];"disabled"===e.track.mode&&e.track.mode!==e.storedMode&&(e.track.mode=e.storedMode)}i.removeEventListener("change",r)}this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",t),i.removeEventListener("change",r),i.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",t),i.addEventListener("change",t),i.removeEventListener("change",r)})},t.overrideNative_=function(t,e){var n,i=this;e===this["featuresNative"+t+"Tracks"]&&(this[(n=t.toLowerCase())+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(t){i.el()[n+"Tracks"].removeEventListener(t,i[n+"TracksListeners_"][t])}),this["featuresNative"+t+"Tracks"]=!e,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n))},t.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},t.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},t.proxyNativeTracksForType_=function(t){var i,e,r=this,t=mn[t],o=this.el()[t.getterName],s=this[t.getterName]();this["featuresNative"+t.capitalName+"Tracks"]&&o&&o.addEventListener&&(i={change:function(){s.trigger({type:"change",target:s,currentTarget:s,srcElement:s})},addtrack:function(t){s.addTrack(t.track)},removetrack:function(t){s.removeTrack(t.track)}},e=function(){for(var t=[],e=0;e<s.length;e++){for(var n=!1,i=0;i<o.length;i++)if(o[i]===s[e]){n=!0;break}n||t.push(s[e])}for(;t.length;)s.removeTrack(t.shift())},this[t.getterName+"Listeners_"]=i,Object.keys(i).forEach(function(e){var n=i[e];o.addEventListener(e,n),r.on("dispose",function(t){return o.removeEventListener(e,n)})}),this.on("loadstart",e),this.on("dispose",function(t){return r.off("loadstart",e)}))},t.proxyNativeTracks_=function(){var e=this;mn.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},t.createEl=function(){var t,e=this.options_.tag;e&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(e?(t=e.cloneNode(!0),e.parentNode&&e.parentNode.insertBefore(t,e),s.disposeMediaElement(e),e=t):(e=h.createElement("video"),t=Ut({},this.options_.tag&&j(this.options_.tag)),re&&!0===this.options_.nativeControlsForTouch||delete t.controls,I(e,y(t,{id:this.options_.techId,class:"vjs-tech"}))),e.playerId=this.options_.playerId),void 0!==this.options_.preload&&R(e,"preload",this.options_.preload);for(var n=["loop","muted","playsinline","autoplay"],i=0;i<n.length;i++){var r=n[i],o=this.options_[r];void 0!==o&&(o?R(e,r,r):U(e,r),e[r]=o)}return e},t.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){function e(){n=!0}var n=!1;this.on("loadstart",e);function i(){n||this.trigger("loadstart")}return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",e),this.off("loadedmetadata",i),n||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=t.readyState&&r.push("loadeddata"),3<=t.readyState&&r.push("canplay"),4<=t.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(t){this.trigger(t)},this)})}},t.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){p(t,"Video is not ready. (Video.js)")}},t.duration=function(){var t=this;if(this.el_.duration===1/0&&Yt&&Jt&&0===this.el_.currentTime){function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}return this.on("timeupdate",e),NaN}return this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var t,e,n=this;"webkitDisplayingFullscreen"in this.el_&&(t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},e=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))},this.on("webkitbeginfullscreen",e),this.on("dispose",function(){n.off("webkitbeginfullscreen",e),n.off("webkitendfullscreen",t)}))},t.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=d.navigator&&d.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},t.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},t.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},t.reset=function(){s.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(t){this.el_.controls=!!t},t.addTextTrack=function(t,e,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,e,n):u.prototype.addTextTrack.call(this,t,e,n)},t.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return u.prototype.createRemoteTextTrack.call(this,t);var e=h.createElement("track");return t.kind&&(e.kind=t.kind),t.label&&(e.label=t.label),(t.language||t.srclang)&&(e.srclang=t.language||t.srclang),t.default&&(e.default=t.default),t.id&&(e.id=t.id),t.src&&(e.src=t.src),e},t.addRemoteTextTrack=function(t,e){e=u.prototype.addRemoteTextTrack.call(this,t,e);return this.featuresNativeTextTracks&&this.el().appendChild(e),e},t.removeRemoteTextTrack=function(t){if(u.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var e=this.$$("track"),n=e.length;n--;)t!==e[n]&&t!==e[n].track||this.el().removeChild(e[n])},t.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),d.performance&&"function"==typeof d.performance.now?t.creationTime=d.performance.now():d.performance&&d.performance.timing&&"number"==typeof d.performance.timing.navigationStart&&(t.creationTime=d.Date.now()-d.performance.timing.navigationStart),t},s}(Wn);S()&&(Di.TEST_VID=h.createElement("video"),(ir=h.createElement("track")).kind="captions",ir.srclang="en",ir.label="English",Di.TEST_VID.appendChild(ir)),Di.isSupported=function(){try{Di.TEST_VID.volume=.5}catch(t){return!1}return!(!Di.TEST_VID||!Di.TEST_VID.canPlayType)},Di.canPlayType=function(t){return Di.TEST_VID.canPlayType(t)},Di.canPlaySource=function(t,e){return Di.canPlayType(t.type)},Di.canControlVolume=function(){try{var t=Di.TEST_VID.volume;return Di.TEST_VID.volume=t/2+.1,t!==Di.TEST_VID.volume}catch(t){return!1}},Di.canMuteVolume=function(){try{var t=Di.TEST_VID.muted;return Di.TEST_VID.muted=!t,Di.TEST_VID.muted?R(Di.TEST_VID,"muted","muted"):U(Di.TEST_VID,"muted"),t!==Di.TEST_VID.muted}catch(t){return!1}},Di.canControlPlaybackRate=function(){if(Yt&&Jt&&te<58)return!1;try{var t=Di.TEST_VID.playbackRate;return Di.TEST_VID.playbackRate=t/2+.1,t!==Di.TEST_VID.playbackRate}catch(t){return!1}},Di.canOverrideAttributes=function(){try{function t(){}Object.defineProperty(h.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(h.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(h.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(h.createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},Di.supportsNativeTextTracks=function(){return ie||Wt&&Jt},Di.supportsNativeVideoTracks=function(){return!(!Di.TEST_VID||!Di.TEST_VID.videoTracks)},Di.supportsNativeAudioTracks=function(){return!(!Di.TEST_VID||!Di.TEST_VID.audioTracks)},Di.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Di.prototype.featuresVolumeControl=Di.canControlVolume(),Di.prototype.featuresMuteControl=Di.canMuteVolume(),Di.prototype.featuresPlaybackRate=Di.canControlPlaybackRate(),Di.prototype.featuresSourceset=Di.canOverrideAttributes(),Di.prototype.movingMediaElementInDOM=!Wt,Di.prototype.featuresFullscreenResize=!0,Di.prototype.featuresProgressEvents=!0,Di.prototype.featuresTimeupdateEvents=!0,Di.prototype.featuresNativeTextTracks=Di.supportsNativeTextTracks(),Di.prototype.featuresNativeVideoTracks=Di.supportsNativeVideoTracks(),Di.prototype.featuresNativeAudioTracks=Di.supportsNativeAudioTracks();var Ni=Di.TEST_VID&&Di.TEST_VID.constructor.prototype.canPlayType,Ii=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;function ji(){var t=e(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);return ji=function(){return t},t}Di.patchCanPlayType=function(){4<=Kt&&!Zt&&!Jt&&(Di.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&Ii.test(t)?"maybe":Ni.call(this,t)})},Di.unpatchCanPlayType=function(){var t=Di.TEST_VID.constructor.prototype.canPlayType;return Di.TEST_VID.constructor.prototype.canPlayType=Ni,t},Di.patchCanPlayType(),Di.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Di.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),n=e.length;n--;)t.removeChild(e[n]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Di.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){Di.prototype["set"+Rt(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){Di.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(e){Di.prototype["set"+Rt(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(t){Di.prototype[t]=function(){return this.el_[t]()}}),Wn.withSourceHandlers(Di),Di.nativeSourceHandler={},Di.nativeSourceHandler.canPlayType=function(t){try{return Di.TEST_VID.canPlayType(t)}catch(t){return""}},Di.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Di.nativeSourceHandler.canPlayType(t.type);if(t.src){t=De(t.src);return Di.nativeSourceHandler.canPlayType("video/"+t)}return""},Di.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},Di.nativeSourceHandler.dispose=function(){},Di.registerSourceHandler(Di.nativeSourceHandler),Wn.registerTech("Html5",Di);var Mi=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ri={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ui=["tiny","xsmall","small","medium","large","xlarge","huge"],qi={};Ui.forEach(function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;qi[t]="vjs-layout-"+e});var Bi={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Fi=function(c){function a(t,e,n){var i;if(t.id=t.id||e.id||"vjs_video_"+J++,(e=y(a.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof t.closest){var r=t.closest("[lang]");r&&r.getAttribute&&(e.language=r.getAttribute("lang"))}else for(var o=t;o&&1===o.nodeType;){if(j(o).hasOwnProperty("lang")){e.language=o.getAttribute("lang");break}o=o.parentNode}if((r=c.call(this,null,e,n)||this).log=m(r.id_),r.isPosterFromTech_=!1,r.queuedCallbacks_=[],r.isReady_=!1,r.hasStarted_=!1,r.userActive_=!1,!r.options_||!r.options_.techOrder||!r.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");r.tag=t,r.tagAttributes=t&&j(t),r.language(r.options_.language),e.languages?(i={},Object.getOwnPropertyNames(e.languages).forEach(function(t){i[t.toLowerCase()]=e.languages[t]}),r.languages_=i):r.languages_=a.prototype.options_.languages,r.cache_={},r.poster_=e.poster||"",r.controls_=!!e.controls,r.cache_.lastVolume=1,t.controls=!1,t.removeAttribute("controls"),t.hasAttribute("autoplay")?r.options_.autoplay=!0:r.autoplay(r.options_.autoplay),r.scrubbing_=!1,r.el_=r.createEl(),r.cache_.lastPlaybackRate=r.defaultPlaybackRate(),It(u(u(r)),{eventBusKey:"el_"});var s,n=Ut(r.options_);e.plugins&&(s=e.plugins,Object.keys(s).forEach(function(t){if("function"!=typeof this[t])throw new Error('plugin "'+t+'" does not exist');this[t](s[t])},u(u(r)))),r.options_.playerOptions=n,r.middleware_=[],r.initChildren(),r.isAudio("audio"===t.nodeName.toLowerCase()),r.controls()?r.addClass("vjs-controls-enabled"):r.addClass("vjs-controls-disabled"),r.el_.setAttribute("role","region"),r.isAudio()?r.el_.setAttribute("aria-label",r.localize("Audio Player")):r.el_.setAttribute("aria-label",r.localize("Video Player")),r.isAudio()&&r.addClass("vjs-audio"),r.flexNotSupported_()&&r.addClass("vjs-no-flex"),Wt||r.addClass("vjs-workinghover"),a.players[r.id_]=u(u(r));t=l.split(".")[0];return r.addClass("vjs-v"+t),r.userActive(!0),r.reportUserActivity(),r.one("play",r.listenForUserActivity_),r.on("fullscreenchange",r.handleFullscreenChange_),r.on("stageclick",r.handleStageClick_),r.breakpoints(r.options_.breakpoints),r.responsive(r.options_.responsive),r.changingSrc_=!1,r.playWaitingForReady_=!1,r.playOnLoadstart_=null,r}f(a,c);var t=a.prototype;return t.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),a.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Yn[this.id()]=null,c.prototype.dispose.call(this)},t.createEl=function(){var e,n=this.tag,t=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();t?e=this.el_=n.parentNode:i||(e=this.el_=c.prototype.createEl.call(this,"div"));var r,o,s=j(n);if(i){for(e=this.el_=n,n=this.tag=h.createElement("video");e.children.length;)n.appendChild(e.firstChild);L(e,"video-js")||P(e,"video-js"),e.appendChild(n),t=this.playerElIngest_=e,Object.keys(e).forEach(function(t){n[t]=e[t]})}n.setAttribute("tabindex","-1"),s.tabindex="-1",ee&&(n.setAttribute("role","application"),s.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(t){i&&"class"===t||e.setAttribute(t,s[t]),i&&n.setAttribute(t,s[t])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",(n.player=e.player=this).addClass("vjs-paused"),!0!==d.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=bt("vjs-styles-dimensions"),r=X(".vjs-styles-defaults"),(o=X("head")).insertBefore(this.styleEl_,r?r.nextSibling:o.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var a=n.getElementsByTagName("a"),l=0;l<a.length;l++){var u=a.item(l);P(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!t&&n.parentNode.insertBefore(e,n),O(n,e),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=e},t.width=function(t){return this.dimension("width",t)},t.height=function(t){return this.dimension("height",t)},t.dimension=function(t,e){var n=t+"_";if(void 0===e)return this[n]||0;if(""===e)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(e);isNaN(i)?p.error('Improper value "'+e+'" supplied for for '+t):(this[n]=i,this.updateStyleEl_())},t.fluid=function(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,t?(this.addClass("vjs-fluid"),this.fill(!1)):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){var t,e,n,i;!0!==d.VIDEOJS_NO_DYNAMIC_STYLE?(i=(n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/n[0],t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*i,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),_t(this.styleEl_,"\n      ."+n+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*i+"%;\n      }\n    ")):(e="number"==typeof this.width_?this.width_:this.options_.width,n="number"==typeof this.height_?this.height_:this.options_.height,(i=this.tech_&&this.tech_.el())&&(0<=e&&(i.width=e),0<=n&&(i.height=n)))},t.loadTech_=function(t,e){var n=this;this.tech_&&this.unloadTech_();var i=Rt(t),r=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==i&&this.tag&&(Wn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var o={source:e,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};yn.names.forEach(function(t){t=yn[t];o[t.getterName]=n[t.privateName]}),y(o,this.options_[i]),y(o,this.options_[r]),y(o,this.options_[t.toLowerCase()]),this.tag&&(o.tag=this.tag),e&&e.src===this.cache_.src&&0<this.cache_.currentTime&&(o.startTime=this.cache_.currentTime);t=Wn.getTech(t);if(!t)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new t(o),this.tech_.ready(Et(this,this.handleTechReady_),!0),Se(this.textTracksJson_||[],this.tech_),Mi.forEach(function(t){n.on(n.tech_,t,n["handleTech"+Rt(t)+"_"])}),Object.keys(Ri).forEach(function(e){n.on(n.tech_,e,function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Ri[e]+"_"].bind(n),event:t}):n["handleTech"+Ri[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||O(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var e=this;yn.names.forEach(function(t){t=yn[t];e[t.privateName]=e[t.getterName]()}),this.textTracksJson_=we(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(t){return void 0===t&&p.warn(g(ji())),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},t.manualAutoplay_=function(e){var n=this;if(this.tech_&&"string"==typeof e){function t(){var e=n.muted();n.muted(!0);var t=n.play();if(t&&t.then&&t.catch)return t.catch(function(t){n.muted(e)})}var i;if("any"===e?(i=this.play())&&i.then&&i.catch&&i.catch(t):i="muted"===e?t():this.play(),i&&i.then&&i.catch)return i.then(function(){n.trigger({type:"autoplay-success",autoplay:e})}).catch(function(t){n.trigger({type:"autoplay-failure",autoplay:e})})}},t.updateSourceCaches_=function(t){void 0===t&&(t="");var e=t,n="";"string"!=typeof e&&(e=t.src,n=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!n&&(n=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var n=t.cache_.sources.filter(function(t){return t.src===e});if(n.length)return n[0].type;for(var i=t.$$("source"),r=0;r<i.length;r++){var o=i[r];if(o.type&&o.src&&o.src===e)return o.type}return ii(e)}(this,e)),this.cache_.source=Ut({},t,{src:e,type:n});for(var n=this.cache_.sources.filter(function(t){return t.src&&t.src===e}),i=[],r=this.$$("source"),o=[],s=0;s<r.length;s++){var a=j(r[s]);i.push(a),a.src&&a.src===e&&o.push(a.src)}o.length&&!n.length?this.cache_.sources=i:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e},t.handleTechSourceset_=function(t){var e,n,i,r=this;this.changingSrc_||(e=function(t){return r.updateSourceCaches_(t)},n=this.currentSource().src,i=t.src,n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(this.lastSource_&&(this.lastSource_.tech===i||this.lastSource_.player===n)||(e=function(){})),e(i),t.src||(i=function t(e){"sourceset"!==e.type&&(e=r.techGet("currentSrc"),r.lastSource_.tech=e,r.updateSourceCaches_(e)),r.tech_.off(["sourceset","loadstart"],t)},this.tech_.one(["sourceset","loadstart"],i))),this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},t.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return t.removeClass("vjs-waiting")})},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(p.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(t){K(t)&&this.controls_&&(this.paused()?_e(this.play()):this.pause())},t.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(t){t.preventDefault()},t.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.handleStageClick_=function(){this.reportUserActivity()},t.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen),this.trigger("fullscreenchange")},t.handleTechError_=function(){var t=this.tech_.error();this.error(t)},t.handleTechTextData_=function(t,e){var n=1<arguments.length?e:null;this.trigger("textdata",n)},t.getCache=function(){return this.cache_},t.techCall_=function(i,r){this.ready(function(){if(i in Jn)return t=this.middleware_,e=this.tech_,n=r,e[e=i](t.reduce(ei(e),n));if(i in ti)return Zn(this.middleware_,this.tech_,i,r);var t,e,n;try{this.tech_&&this.tech_[i](r)}catch(t){throw p(t),t}},!0)},t.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Qn)return t=this.middleware_,n=this.tech_,i=e,t.reduceRight(ei(i),n[i]());if(e in ti)return Zn(this.middleware_,this.tech_,e);var t,n,i;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw p("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw p("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw p(t),t}}},t.play=function(){var e=this,t=this.options_.Promise||d.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},t.play_=function(t){var e=this;void 0===t&&(t=_e),this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_?this.changingSrc_||!this.src()&&!this.currentSrc()?(this.playOnLoadstart_=function(){e.playOnLoadstart_=null,t(e.play())},this.one("loadstart",this.playOnLoadstart_)):t(this.techGet_("play")):this.playWaitingForReady_||(this.playWaitingForReady_=!0,this.ready(function(){e.playWaitingForReady_=!1,t(e.play())}))},t.pause=function(){this.techCall_("pause")},t.paused=function(){return!1!==this.techGet_("paused")},t.played=function(){return this.techGet_("played")||le(0,0)},t.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(t){return void 0!==t?(t<0&&(t=0),void this.techCall_("setCurrentTime",t)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&((this.cache_.duration=t)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=le(0,0)),t},t.bufferedPercent=function(){return ue(this.buffered(),this.duration())},t.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),t=t.end(t.length-1);return e<t&&(t=e),t},t.volume=function(t){var e;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(0<e&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},t.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},t.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(t){if(void 0===t)return!!this.isFullscreen_;this.isFullscreen_=!!t},t.requestFullscreen=function(){var n=he;this.isFullscreen(!0),n.requestFullscreen?(ct(h,n.fullscreenchange,Et(this,function t(e){this.isFullscreen(h[n.fullscreenElement]),!1===this.isFullscreen()&&ht(h,n.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[n.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},t.exitFullscreen=function(){var t=he;this.isFullscreen(!1),t.requestFullscreen?h[t.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},t.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=h.documentElement.style.overflow,ct(h,"keydown",Et(this,this.fullWindowOnEscKey)),h.documentElement.style.overflow="hidden",P(h.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(t){27===t.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},t.exitFullWindow=function(){this.isFullWindow=!1,ht(h,"keydown",this.fullWindowOnEscKey),h.documentElement.style.overflow=this.docOrigOverflow,D(h.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.canPlayType=function(t){for(var e,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],o=Wn.getTech(r);if(o=o||qt.getComponent(r)){if(o.isSupported()&&(e=o.canPlayType(t)))return e}else p.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.selectSource=function(t){function e(t,n,i){var r;return t.some(function(e){return n.some(function(t){if(r=i(e,t))return!0})}),r}var n,i=this,r=this.options_.techOrder.map(function(t){return[t,Wn.getTech(t)]}).filter(function(t){var e=t[0],t=t[1];return t?t.isSupported():(p.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(t,e){var n=t[0];if(t[1].canPlaySource(e,i.options_[n.toLowerCase()]))return{source:e,tech:n}},o=this.options_.sourceOrder?e(t,r,(n=o,function(t,e){return n(e,t)})):e(r,t,o);return o||!1},t.src=function(t){var i=this;if(void 0===t)return this.cache_.src||"";var r=ri(t);r.length?(this.changingSrc_=!0,this.cache_.sources=r,this.updateSourceCaches_(r[0]),Xn(this,r[0],function(t,e){var n;return i.middleware_=e,i.cache_.sources=r,i.updateSourceCaches_(t),i.src_(t)?1<r.length?i.src(r.slice(1)):(i.changingSrc_=!1,i.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void i.triggerReady()):(e=e,n=i.tech_,void e.forEach(function(t){return t.setTech&&t.setTech(n)}))})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},t.src_=function(t){var e,n,i=this,r=this.selectSource([t]);return!r||(e=r.tech,n=this.techName_,Rt(e)!==Rt(n)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){i.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1)},t.load=function(){this.techCall_("load")},t.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},t.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},t.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e;"string"==typeof t&&/(any|play|muted)/.test(t)?(this.options_.autoplay=t,this.manualAutoplay_(t),e=!1):this.options_.autoplay=!!t,e=e||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",e)},t.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},t.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},t.poster=function(t){if(void 0===t)return this.poster_;(t=t||"")!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){var t;this.poster_&&!this.options_.techCanOverridePoster||!this.tech_||!this.tech_.poster||(t=this.tech_.poster()||"")!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))},t.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(t){return void 0===t?this.error_||null:null===t?(this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new ge(t),this.addClass("vjs-error"),p.error("(CODE:"+this.error_.code+" "+ge.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},t.reportUserActivity=function(){this.userActivity_=!0},t.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var t,e,n,i,r=Et(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(t),t=this.setInterval(r,250)}),this.on("mousemove",function(t){t.screenX===e&&t.screenY===n||(e=t.screenX,n=t.screenY,r())}),this.on("mouseup",function(){r(),this.clearInterval(t)}),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){var t;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(i),(t=this.options_.inactivityTimeout)<=0||(i=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t)))},250)},t.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},t.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},t.addTextTrack=function(t,e,n){if(this.tech_)return this.tech_.addTextTrack(t,e,n)},t.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},t.removeRemoteTextTrack=function(t){void 0===t&&(t={});var e=(e=t.track)||t;if(this.tech_)return this.tech_.removeRemoteTextTrack(e)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(t){if(void 0===t)return this.language_;this.language_=String(t).toLowerCase()},t.languages=function(){return Ut(a.prototype.options_.languages,this.languages_)},t.toJSON=function(){var t=Ut(this.options_),e=t.tracks;t.tracks=[];for(var n=0;n<e.length;n++){var i=e[n];(i=Ut(i)).player=void 0,t.tracks[n]=i}return t},t.createModal=function(t,e){var n=this;(e=e||{}).content=t||"";var i=new Ee(this,e);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open(),i},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),e=this.currentWidth(),n=0;n<Ui.length;n++){var i=Ui[n];if(e<=this.breakpoints_[i]){if(t===i)return;t&&this.removeClass(qi[t]),this.addClass(qi[i]),this.breakpoint_=i;break}}},t.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},t.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=y({},Bi,t),this.updateCurrentBreakpoint_()),y(this.breakpoints_)},t.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?((this.responsive_=t)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return qi[this.breakpoint_]||""},a.getTagSettings=function(t){var e,n={sources:[],tracks:[]},i=j(t),r=i["data-setup"];if(L(t,"vjs-fill")&&(i.fill=!0),L(t,"vjs-fluid")&&(i.fluid=!0),null!==r&&(r=(e=ve(r||"{}"))[0],e=e[1],r&&p.error(r),y(i,e)),y(n,i),t.hasChildNodes())for(var o=t.childNodes,s=0,a=o.length;s<a;s++){var l=o[s],u=l.nodeName.toLowerCase();"source"===u?n.sources.push(j(l)):"track"===u&&n.tracks.push(j(l))}return n},t.flexNotSupported_=function(){var t=h.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},a}(qt);yn.names.forEach(function(t){var e=yn[t];Fi.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),Fi.players={};ne=d.navigator;Fi.prototype.options_={techOrder:Wn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ne&&(ne.languages&&ne.languages[0]||ne.userLanguage||ne.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Fi.prototype[t]=function(){return this.techGet_(t)}}),Mi.forEach(function(t){Fi.prototype["handleTech"+Rt(t)+"_"]=function(){return this.trigger(t)}}),qt.registerComponent("Player",Fi);function $i(t){return Ki.hasOwnProperty(t)}function zi(t){return $i(t)?Ki[t]:void 0}function Hi(t,e,n){n=(n?"before":"")+"pluginsetup",t.trigger(n,e),t.trigger(n+":"+e.name,e)}function Vi(e,n){function i(){Hi(this,{name:e,plugin:n,instance:null},!0);var t=n.apply(this,arguments);return Xi(this,e),Hi(this,{name:e,plugin:n,instance:t}),t}return Object.keys(n).forEach(function(t){i[t]=n[t]}),i}function Wi(r,o){return o.prototype.name=r,function(){Hi(this,{name:r,plugin:o,instance:null},!0);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=s(o,[this].concat(e));return this[r]=function(){return i},Hi(this,i.getEventHash()),i}}var Gi="plugin",Yi="activePlugins_",Ki={},Xi=function(t,e){t[Yi]=t[Yi]||{},t[Yi][e]=!0},Zi=function(){function n(t){if(this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,It(this),delete this.trigger,Mt(this,this.constructor.defaultState),Xi(t,this.name),this.dispose=Et(this,this.dispose),t.on("dispose",this.dispose)}var t=n.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(t){return void 0===t&&(t={}),t.name=this.name,t.plugin=this.constructor,t.instance=this,t},t.trigger=function(t,e){return void 0===e&&(e={}),dt(this.eventBusEl_,t,this.getEventHash(e))},t.handleStateChanged=function(){},t.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Yi][t]=!1,this.player=this.state=null,e[t]=Wi(t,Ki[t])},n.isBasic=function(t){t="string"==typeof t?zi(t):t;return"function"==typeof t&&!n.prototype.isPrototypeOf(t.prototype)},n.registerPlugin=function(t,e){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if($i(t))p.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Fi.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof e)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof e+".");return Ki[t]=e,t!==Gi&&(n.isBasic(e)?Fi.prototype[t]=Vi(t,e):Fi.prototype[t]=Wi(t,e)),e},n.deregisterPlugin=function(t){if(t===Gi)throw new Error("Cannot de-register base plugin.");$i(t)&&(delete Ki[t],delete Fi.prototype[t])},n.getPlugins=function(t){var n;return void 0===t&&(t=Object.keys(Ki)),t.forEach(function(t){var e=zi(t);e&&((n=n||{})[t]=e)}),n},n.getPluginVersion=function(t){t=zi(t);return t&&t.VERSION||""},n}();Zi.getPlugin=zi,Zi.BASE_PLUGIN_NAME=Gi,Zi.registerPlugin(Gi,Zi),Fi.prototype.usingPlugin=function(t){return!!this[Yi]&&!0===this[Yi][t]},Fi.prototype.hasPlugin=function(t){return!!$i(t)};var Qi=function(t){return 0===t.indexOf("#")?t.slice(1):t};function Ji(t,e,n){if(r=Ji.getPlayer(t))return e&&p.warn('Player "'+t+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var i="string"==typeof t?X("#"+Qi(t)):t;if(!k(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");h.body.contains(i)||p.warn("The element supplied is not included in the DOM"),e=e||{},Ji.hooks("beforesetup").forEach(function(t){t=t(i,Ut(e));v(t)&&!Array.isArray(t)?e=Ut(e,t):p.error("please return an object in beforesetup hooks")});var r=new(qt.getComponent("Player"))(i,e,n);return Ji.hooks("setup").forEach(function(t){return t(r)}),r}Ji.hooks_={},Ji.hooks=function(t,e){return Ji.hooks_[t]=Ji.hooks_[t]||[],e&&(Ji.hooks_[t]=Ji.hooks_[t].concat(e)),Ji.hooks_[t]},Ji.hook=function(t,e){Ji.hooks(t,e)},Ji.hookOnce=function(n,t){Ji.hooks(n,[].concat(t).map(function(e){return function t(){return Ji.removeHook(n,t),e.apply(void 0,arguments)}}))},Ji.removeHook=function(t,e){e=Ji.hooks(t).indexOf(e);return!(e<=-1)&&(Ji.hooks_[t]=Ji.hooks_[t].slice(),Ji.hooks_[t].splice(e,1),!0)},!0!==d.VIDEOJS_NO_DYNAMIC_STYLE&&S()&&((Go=X(".vjs-styles-defaults"))||(Go=bt("vjs-styles-defaults"),(Wo=X("head"))&&Wo.insertBefore(Go,Wo.firstChild),_t(Go,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    "))),vt(1,Ji),Ji.VERSION=l,Ji.options=Fi.prototype.options_,Ji.getPlayers=function(){return Fi.players},Ji.getPlayer=function(t){var e=Fi.players;if("string"==typeof t){var n=Qi(t),i=e[n];if(i)return i;n=X("#"+n)}else n=t;if(k(n)){t=n.player,n=n.playerId;if(t||e[n])return t||e[n]}},Ji.getAllPlayers=function(){return Object.keys(Fi.players).map(function(t){return Fi.players[t]}).filter(Boolean)},Ji.players=Fi.players,Ji.getComponent=qt.getComponent,Ji.registerComponent=function(t,e){Wn.isTech(e)&&p.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),qt.registerComponent.call(qt,t,e)},Ji.getTech=Wn.getTech,Ji.registerTech=Wn.registerTech,Ji.use=function(t,e){Gn[t]=Gn[t]||[],Gn[t].push(e)},Object.defineProperty(Ji,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ji.middleware,"TERMINATOR",{value:Kn,writeable:!1,enumerable:!0}),Ji.browser=oe,Ji.TOUCH_ENABLED=re,Ji.extend=function(t,e){void 0===e&&(e={});var n,i=function(){t.apply(this,arguments)},r={};for(n in"object"==typeof e?(e.constructor!==Object.prototype.constructor&&(i=e.constructor),r=e):"function"==typeof e&&(i=e),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.super_=e)}(i,t),r)r.hasOwnProperty(n)&&(i.prototype[n]=r[n]);return i},Ji.mergeOptions=Ut,Ji.bind=Et,Ji.registerPlugin=Zi.registerPlugin,Ji.deregisterPlugin=Zi.deregisterPlugin,Ji.plugin=function(t,e){return p.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Zi.registerPlugin(t,e)},Ji.getPlugins=Zi.getPlugins,Ji.getPlugin=Zi.getPlugin,Ji.getPluginVersion=Zi.getPluginVersion,Ji.addLanguage=function(t,e){var n;return t=(""+t).toLowerCase(),Ji.options.languages=Ut(Ji.options.languages,((n={})[t]=e,n)),Ji.options.languages[t]},Ji.log=p,Ji.createLogger=m,Ji.createTimeRange=Ji.createTimeRanges=le,Ji.formatTime=fi,Ji.setFormatTime=function(t){di=t},Ji.resetFormatTime=function(){di=hi},Ji.parseUrl=Le,Ji.isCrossOrigin=Ne,Ji.EventTarget=St,Ji.on=ct,Ji.one=ft,Ji.off=ht,Ji.trigger=dt,Ji.xhr=an,Ji.TextTrack=dn,Ji.AudioTrack=$t,Ji.VideoTrack=fn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){Ji[t]=function(){return p.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),Q[t].apply(null,arguments)}}),Ji.computedStyle=i,Ji.dom=Q,Ji.url=ze;var tr=We(function(t,e){var n,o,i,r,s;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var i=s.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}i=s.parseURL(e);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):e;e=s.parseURL(t);if(!e)throw new Error("Error trying to parse base URL.");!e.netLoc&&e.path&&"/"!==e.path[0]&&(r=o.exec(e.path),e.netLoc=r[1],e.path=r[2]),e.netLoc&&!e.path&&(e.path="/");var r,t={scheme:e.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(t.netLoc=e.netLoc,"/"!==i.path[0]&&(i.path?(r=(r=e.path).substring(0,r.lastIndexOf("/")+1)+i.path,t.path=s.normalizePath(r)):(t.path=e.path,i.params||(t.params=e.params,i.query||(t.query=e.query))))),null===t.path&&(t.path=n.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(t)},parseURL:function(t){t=n.exec(t);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(r,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s}),er=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},nr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},ir=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},rr=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},ne=(or.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},or.prototype.off=function(t,e){if(!this.listeners[t])return!1;e=this.listeners[t].indexOf(e);return this.listeners[t].splice(e,1),-1<e},or.prototype.trigger=function(t,e){var n,i=this.listeners[t],r=void 0,o=void 0;if(i)if(2===arguments.length)for(o=i.length,r=0;r<o;++r)i[r].call(this,e);else for(n=Array.prototype.slice.call(arguments,1),o=i.length,r=0;r<o;++r)i[r].apply(this,n)},or.prototype.dispose=function(){this.listeners={}},or.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},or);function or(){er(this,or),this.listeners={}}var sr,ar=(ir(lr,sr=ne),lr.prototype.push=function(t){var e=void 0;for(this.buffer+=t,e=this.buffer.indexOf("\n");-1<e;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},lr);function lr(){er(this,lr);var t=rr(this,sr.call(this));return t.buffer="",t}function ur(t){for(var e=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=e.length,r=void 0;i--;)""!==e[i]&&((r=/([^=]*)=(.*)/.exec(e[i]).slice(1))[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),n[r[0]]=r[1]);return n}var cr,hr=(ir(dr,cr=ne),dr.prototype.push=function(t){var e=void 0,n=void 0;if(0!==(t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===t[0]){for(var i=0;i<this.customParsers.length;i++)if(this.customParsers[i].call(this,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return n={type:"tag",tagType:"inf"},e[1]&&(n.duration=parseFloat(e[1])),e[2]&&(n.title=e[2]),void this.trigger("data",n);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"targetduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"totalduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"version"},e[1]&&(n.version=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"media-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return n={type:"tag",tagType:"playlist-type"},e[1]&&(n.playlistType=e[1]),void this.trigger("data",n);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"byterange"},e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),void this.trigger("data",n);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return n={type:"tag",tagType:"allow-cache"},e[1]&&(n.allowed=!/NO/.test(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){var r,n={type:"tag",tagType:"map"};return e[1]&&((r=ur(e[1])).URI&&(n.uri=r.URI),r.BYTERANGE&&(s=(o=r.BYTERANGE.split("@"))[0],o=o[1],n.byterange={},s&&(n.byterange.length=parseInt(s,10)),o&&(n.byterange.offset=parseInt(o,10)))),void this.trigger("data",n)}var o,s,e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t);if(e)return n={type:"tag",tagType:"stream-inf"},e[1]&&(n.attributes=ur(e[1]),n.attributes.RESOLUTION&&(s={},(o=n.attributes.RESOLUTION.split("x"))[0]&&(s.width=parseInt(o[0],10)),o[1]&&(s.height=parseInt(o[1],10)),n.attributes.RESOLUTION=s),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),void this.trigger("data",n);if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return n={type:"tag",tagType:"media"},e[1]&&(n.attributes=ur(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-ENDLIST/.exec(t))this.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(e=/^#EXT-X-DISCONTINUITY/.exec(t)))return(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))?(n={type:"tag",tagType:"program-date-time"},e[1]&&(n.dateTimeString=e[1],n.dateTimeObject=new Date(e[1])),void this.trigger("data",n)):(e=/^#EXT-X-KEY:?(.*)$/.exec(t))?(n={type:"tag",tagType:"key"},e[1]&&(n.attributes=ur(e[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n)):(e=/^#EXT-X-START:?(.*)$/.exec(t))?(n={type:"tag",tagType:"start"},e[1]&&(n.attributes=ur(e[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n)):(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))?(n={type:"tag",tagType:"cue-out-cont"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n)):(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))?(n={type:"tag",tagType:"cue-out"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n)):(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))?(n={type:"tag",tagType:"cue-in"},e[1]?n.data=e[1]:n.data="",void this.trigger("data",n)):void this.trigger("data",{type:"tag",data:t.slice(4)});this.trigger("data",{type:"tag",tagType:"discontinuity"})}}else this.trigger("data",{type:"comment",text:t.slice(1)})}else this.trigger("data",{type:"uri",uri:t})},dr.prototype.addParser=function(t){var e=this,n=t.expression,i=t.customType,r=t.dataParser,o=t.segment;"function"!=typeof r&&(r=function(t){return t}),this.customParsers.push(function(t){if(n.exec(t))return e.trigger("data",{type:"custom",data:r(t),customType:i,segment:o}),!0})},dr);function dr(){er(this,dr);var t=rr(this,cr.call(this));return t.customParsers=[],t}var fr,pr=(ir(mr,fr=ne),mr.prototype.push=function(t){this.lineStream.push(t)},mr.prototype.end=function(){this.lineStream.push("\n")},mr.prototype.addParser=function(t){this.parseStream.addParser(t)},mr);function mr(){er(this,mr);var t=rr(this,fr.call(this));t.lineStream=new ar,t.parseStream=new hr,t.lineStream.pipe(t.parseStream);var r=t,o=[],s={},a=void 0,l=void 0,u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",function(e){var n=void 0,i=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&((s.byterange=t).length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&((s.byterange=t).offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<e.duration&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){e.attributes?"NONE"!==e.attributes.METHOD?e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(l.iv=e.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):l=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){a={},e.uri&&(a.uri=e.uri),e.byterange&&(a.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes?(s.attributes||(s.attributes={}),nr(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){var t;this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME?((t=this.manifest.mediaGroups[e.attributes.TYPE])[e.attributes["GROUP-ID"]]=t[e.attributes["GROUP-ID"]]||{},n=t[e.attributes["GROUP-ID"]],(i={default:/yes/i.test(e.attributes.DEFAULT)}).default?i.autoselect=!0:i.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(i.language=e.attributes.LANGUAGE),e.attributes.URI&&(i.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(i.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(i.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(i.forced=/yes/i.test(e.attributes.FORCED)),n[e.attributes.NAME]=i):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data}}[e.tagType]||function(){}).call(r)},uri:function(){s.uri=e.uri,o.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=c,a&&(s.map=a),s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)}),t}function gr(t){return!!t&&"object"==typeof t}function yr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(e,n){return Object.keys(n).forEach(function(t){Array.isArray(e[t])&&Array.isArray(n[t])?e[t]=e[t].concat(n[t]):gr(e[t])&&gr(n[t])?e[t]=yr(e[t],n[t]):e[t]=n[t]}),e},{})}function vr(t){return t.reduce(function(t,e){return t.concat(e)},[])}function br(t){if(!t.length)return[];for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function _r(t){var e;return(e=t.reduce(function(t,e){var n,i=e.attributes.id+(e.attributes.lang||"");return t[i]?(e.segments[0].discontinuity=!0,(n=t[i].segments).push.apply(n,e.segments),e.attributes.contentProtection&&(t[i].attributes.contentProtection=e.attributes.contentProtection)):t[i]=e,t},{}),Object.keys(e).map(function(t){return e[t]})).map(function(t){var e,i;return t.discontinuityStarts=(e=t.segments,i="discontinuity",e.reduce(function(t,e,n){return e[i]&&t.push(n),t},[])),t})}function Tr(t){return t.reduce(function(t,e){var n=e.attributes.role&&e.attributes.role.value||"main",i=e.attributes.lang||"",r="main";return i&&(r=e.attributes.lang+" ("+n+")"),t[r]&&t[r].playlists[0].attributes.BANDWIDTH>e.attributes.bandwidth||(t[r]={language:i,autoselect:!0,default:"main"===n,playlists:[(n=(i=e).attributes,e=i.segments,e={attributes:((i={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs})["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:e,mediaSequence:e.length?e[0].number:1},n.contentProtection&&(e.contentProtection=n.contentProtection),e)],uri:""}),t},{})}function wr(t){return t.reduce(function(t,e){var n,i=e.attributes.lang||"text";return t[i]||(t[i]={language:i,default:!1,autoselect:!1,playlists:[(i=(n=e).attributes,void 0===(e=n.segments)&&(e=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration),{attributes:((n={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:e,mediaSequence:e.length?e[0].number:1})],uri:""}),t},{})}function Sr(t){var e=t.attributes,n=t.segments,n={attributes:((t={NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth})["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(e.type||"static"),timeline:e.periodIndex,resolvedUri:"",targetDuration:e.duration,segments:n,mediaSequence:n.length?n[0].number:1};return e.contentProtection&&(n.contentProtection=e.contentProtection),n}function kr(t,e){return/^[a-z]+:/i.test(e)?e:(/\/\//i.test(t)||(t=Ur.buildAbsoluteURL(d.location.href,t)),Ur.buildAbsoluteURL(t,e))}function Er(t){var e=void 0===(n=t.baseUrl)?"":n,n=void 0===(n=t.source)?"":n,t=void 0===(t=t.range)?"":t,e={uri:n,resolvedUri:kr(e||"",n)};return t&&(n=t.split("-"),t=parseInt(n[0],10),n=parseInt(n[1],10),e.byterange={length:n-t,offset:t}),e}function Cr(t,e){for(var n,i,r,o,s,a,l=t.type,u=void 0===l?"static":l,c=void 0===(l=t.minimumUpdatePeriod)?0:l,h=void 0===(l=t.media)?"":l,d=t.sourceDuration,f=void 0===(l=t.timescale)?1:l,p=void 0===(l=t.startNumber)?1:l,m=t.periodIndex,g=[],y=-1,v=0;v<e.length;v++){var b=e[v],_=b.d,T=b.r||0,w=b.t||0;y<0&&(y=w),w&&y<w&&(y=w);var S,k=void 0;k=T<0?(S=v+1)===e.length?"dynamic"===u&&0<c&&0<h.indexOf("$Number$")?(n=y,i=_,a=a=a=b=a=s=o=r=void 0,r=(w=t).NOW,o=w.clientOffset,s=w.availabilityStartTime,a=w.timescale,b=void 0===a?1:a,a=void 0===(a=w.start)?0:a,w=w.minimumUpdatePeriod,a=(r+o)/1e3+(void 0===w?0:w)-(s+a),Math.ceil((a*b-n)/i)):(d*f-y)/_:(e[S].t-y)/_:T+1;for(var E=p+g.length+k,C=p+g.length;C<E;)g.push({number:C,duration:_/f,time:y,timeline:m}),y+=_,C++}return g}function xr(t){var s,e=void 0===(o=t.type)?"static":o,n=t.duration,i=t.timescale,r=void 0===i?1:i,o=t.sourceDuration,t=function(t,e){for(var n=[],i=t;i<e;i++)n.push(i);return n}((i=qr[e](t)).start,i.end).map((s=t,function(t,e){var n=s.duration,i=s.timescale,r=void 0===i?1:i,o=s.periodIndex,i=s.startNumber;return{number:(void 0===i?1:i)+t,duration:n/r,timeline:o,time:e*n}}));return"static"===e&&(t[e=t.length-1].duration=o-n/r*e),t}function Ar(t,e){return t.replace(Br,(r=e,function(t,e,n,i){if("$$"===t)return"$";if(void 0===r[e])return t;t=""+r[e];return"RepresentationID"===e||(i=n?parseInt(i,10):1)<=t.length?t:new Array(i-t.length+1).join("0")+t}));var r}function Or(n,t){var i={RepresentationID:n.id,Bandwidth:n.bandwidth||0},e=void 0===(e=n.initialization)?{sourceURL:"",range:""}:e,r=Er({baseUrl:n.baseUrl,source:Ar(e.sourceURL,i),range:e.range});return(e=t,(t=n).duration||e?t.duration?xr(t):Cr(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]).map(function(t){i.Number=t.number,i.Time=t.time;var e=Ar(n.media||"",i);return{uri:e,timeline:t.timeline,duration:t.duration,resolvedUri:kr(n.baseUrl||"",e),map:r,number:t.number}})}function Lr(i,t){var e=i.duration,n=void 0===(n=i.segmentUrls)?[]:n;if(!e&&!t||e&&t)throw new Error(Vr);var r,o=n.map(function(t){return n=t,t=(e=i).baseUrl,e=e.initialization,e=Er({baseUrl:t,source:(e=void 0===e?{}:e).sourceURL,range:e.range}),(n=Er({baseUrl:t,source:n.media,range:n.mediaRange})).map=e,n;var e,n});return e&&(r=xr(i)),t&&(r=Cr(i,t)),r.map(function(t,e){if(o[e]){e=o[e];return e.timeline=t.timeline,e.duration=t.duration,e.number=t.number,e}}).filter(function(t){return t})}function Pr(t){var e=t.baseUrl,n=void 0===(s=t.initialization)?{}:s,i=t.sourceDuration,r=void 0===(o=t.timescale)?1:o,o=void 0===(s=t.indexRange)?"":s,s=t.duration;if(!e)throw new Error(Hr);return n=Er({baseUrl:e,source:n.sourceURL,range:n.range}),(o=Er({baseUrl:e,source:e,range:o})).map=n,s?(t=xr(t)).length&&(o.duration=t[0].duration,o.timeline=t[0].timeline):i&&(o.duration=i/r,o.timeline=0),o.number=0,[o]}function Dr(t){var e,n=t.attributes;if((t=t.segmentInfo).template?(i=Or,e=yr(n,t.template)):t.base?(i=Pr,e=yr(n,t.base)):t.list&&(i=Lr,e=yr(n,t.list)),!i)return{attributes:n};var i,n=i(e,t.timeline);return e.duration?(i=e.duration,t=void 0===(t=e.timescale)?1:t,e.duration=i/t):n.length?e.duration=n.reduce(function(t,e){return Math.max(t,Math.ceil(e.duration))},0):e.duration=0,{attributes:e,segments:n}}function Nr(t,e){return br(t.childNodes).filter(function(t){return t.tagName===e})}function Ir(t){return t.textContent.trim()}function jr(t){if(!(r=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t)))return 0;var e=(o=r.slice(1))[0],n=o[1],i=o[2],t=o[3],r=o[4],o=o[5];return 31536e3*parseFloat(e||0)+2592e3*parseFloat(n||0)+86400*parseFloat(i||0)+3600*parseFloat(t||0)+60*parseFloat(r||0)+parseFloat(o||0)}function Mr(t){return t&&t.attributes?br(t.attributes).reduce(function(t,e){var n=Gr[e.name]||Gr.DEFAULT;return t[e.name]=n(e.value),t},{}):{}}var Rr,Ur=(function(t){var e,o,n,i,s;e=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var i=s.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}i=s.parseURL(e);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):e;e=s.parseURL(t);if(!e)throw new Error("Error trying to parse base URL.");!e.netLoc&&e.path&&"/"!==e.path[0]&&(r=o.exec(e.path),e.netLoc=r[1],e.path=r[2]),e.netLoc&&!e.path&&(e.path="/");var r,t={scheme:e.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(t.netLoc=e.netLoc,"/"!==i.path[0]&&(i.path?(r=(r=e.path).substring(0,r.lastIndexOf("/")+1)+i.path,t.path=s.normalizePath(r)):(t.path=e.path,i.params||(t.params=e.params,i.query||(t.query=e.query))))),null===t.path&&(t.path=n.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(t)},parseURL:function(t){t=e.exec(t);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(n,"");t.length!==(t=t.replace(i,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s}(Rr={exports:{}}),Rr.exports),qr={static:function(t){var e=t.duration,n=t.timescale,n=void 0===n?1:n,t=t.sourceDuration;return{start:0,end:Math.ceil(t/(e/n))}},dynamic:function(t){var e=t.NOW,n=t.clientOffset,i=t.availabilityStartTime,r=t.timescale,o=void 0===r?1:r,s=t.duration,a=t.start,r=void 0===a?0:a,a=t.minimumUpdatePeriod,a=void 0===a?0:a,t=t.timeShiftBufferDepth,t=void 0===t?1/0:t,n=(e+n)/1e3,r=i+r,a=n+a-r,a=Math.ceil(a*o/s),t=Math.floor((n-r-t)*o/s),s=Math.floor((n-r)*o/s);return{start:Math.max(0,t),end:Math.min(a,s)}}},Br=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Fr="INVALID_NUMBER_OF_PERIOD",$r="DASH_EMPTY_MANIFEST",zr="DASH_INVALID_XML",Hr="NO_BASE_URL",Vr="SEGMENT_TIME_UNSPECIFIED",Wr="UNSUPPORTED_UTC_TIMING_SCHEME",Gr={mediaPresentationDuration:jr,availabilityStartTime:function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=t)&&(t+="Z"),Date.parse(t)/1e3},minimumUpdatePeriod:jr,timeShiftBufferDepth:jr,start:jr,width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?jr(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}};function Yr(t,n){return n.length?vr(t.map(function(e){return n.map(function(t){return kr(e,Ir(t))})})):t}function Kr(t){var e=Nr(t,"SegmentTemplate")[0],n=Nr(t,"SegmentList")[0],i=n&&Nr(n,"SegmentURL").map(function(t){return yr({tag:"SegmentURL"},Mr(t))}),r=Nr(t,"SegmentBase")[0],t=(o=n||e)&&Nr(o,"SegmentTimeline")[0],o=(o=n||r||e)&&Nr(o,"Initialization")[0];(e=e&&Mr(e))&&o?e.initialization=o&&Mr(o):e&&e.initialization&&(e.initialization={sourceURL:e.initialization});var s={template:e,timeline:t&&Nr(t,"S").map(Mr),list:n&&yr(Mr(n),{segmentUrls:i,initialization:Mr(o)}),base:r&&yr(Mr(r),{initialization:Mr(o)})};return Object.keys(s).forEach(function(t){s[t]||delete s[t]}),s}function Xr(t){return t.reduce(function(t,e){var n=Mr(e),i=$o[n.schemeIdUri];return i&&(t[i]={attributes:n},(e=Nr(e,"cenc:pssh")[0])&&(e=(e=Ir(e))&&function(t){for(var e=d.atob(t),n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(e),t[i].pssh=e)),t},{})}function Zr(a,l,u){return function(t){var e=Mr(t),n=Yr(l,Nr(t,"BaseURL")),i=Nr(t,"Role")[0],i={role:Mr(i)},e=yr(a,e,i),i=Xr(Nr(t,"ContentProtection"));Object.keys(i).length&&(e=yr(e,{contentProtection:i}));var r,o,s,i=Kr(t),t=Nr(t,"Representation"),i=yr(u,i);return vr(t.map((r=e,o=n,s=i,function(t){var e=Nr(t,"BaseURL"),e=Yr(o,e),n=yr(r,Mr(t)),i=Kr(t);return e.map(function(t){return{segmentInfo:yr(s,i),attributes:yr(n,{baseUrl:t})}})})))}}function Qr(t,e){void 0===e&&(e={});var n=e,i=void 0===(a=n.manifestUri)?"":a,e=void 0===(r=n.NOW)?Date.now():r,r=void 0===(a=n.clientOffset)?0:a;if(!(n=Nr(t,"Period")).length)throw new Error(Fr);var o,s,a=Mr(t),t=Yr([i],Nr(t,"BaseURL"));return a.sourceDuration=a.mediaPresentationDuration||0,a.NOW=e,a.clientOffset=r,vr(n.map((o=a,s=t,function(t,e){var n=Yr(s,Nr(t,"BaseURL")),i=Mr(t),i=parseInt(i.id,10),e=d.isNaN(i)?e:i,i=yr(o,{periodIndex:e}),e=Nr(t,"AdaptationSet"),t=Kr(t);return vr(e.map(Zr(i,n,t)))})))}function Jr(t){if(""===t)throw new Error($r);if(!(t=(t=(new d.DOMParser).parseFromString(t,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null)||t&&0<t.getElementsByTagName("parsererror").length)throw new Error(zr);return t}function to(t,e){return function(t){if(!t.length)return{};var e=t[0].attributes,n=e.sourceDuration,i=e.minimumUpdatePeriod,r=void 0===i?0:i,o=_r(t.filter(function(t){t=t.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(Sr),e=_r(t.filter(function(t){t=t.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),i=t.filter(function(t){t=t.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),r={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((t={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:n,playlists:o,minimumUpdatePeriod:1e3*r};return e.length&&(r.mediaGroups.AUDIO.audio=Tr(e)),i.length&&(r.mediaGroups.SUBTITLES.subs=wr(i)),r}(Qr(Jr(t),e).map(Dr))}function eo(t){return function(t){t=Nr(t,"UTCTiming")[0];if(!t)return null;var e=Mr(t);switch(e.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":e.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":e.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":e.method="DIRECT",e.value=Date.parse(e.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Wr)}return e}(Jr(t))}var no,io,ro,oo,so,ao,lo,uo,co,ho,fo,po,mo,go,yo,vo,bo,_o,To,wo,So,ko,Eo,Co,xo,Ao,Oo,Lo,Po,Do,No,Io,jo,Mo,Ro,Uo,qo,Bo,Fo,$o={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},zo=function(t){return t>>>0},Ho=function(t,e){var n,i,r,o=[];if(!e.length)return null;for(n=0;n<t.byteLength;)i=zo(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),r=Vo(t.subarray(n+4,n+8)),i=1<i?n+i:t.byteLength,r===e[0]&&(1===e.length?o.push(t.subarray(n+8,i)):(r=Ho(t.subarray(n+8,i),e.slice(1))).length&&(o=o.concat(r))),n=i;return o},Vo=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3])},Wo=function(t){return Ho(t,["moov","trak"]).reduce(function(t,e){var n,i,r=Ho(e,["tkhd"])[0];return r?(n=r[0],r=zo(r[i=0===n?12:20]<<24|r[1+i]<<16|r[2+i]<<8|r[3+i]),(e=Ho(e,["mdia","mdhd"])[0])?(i=0===e[0]?12:20,t[r]=zo(e[i]<<24|e[1+i]<<16|e[2+i]<<8|e[3+i]),t):null):null},{})},Go=function(i,t){var t=Ho(t,["moof","traf"]),t=[].concat.apply([],t.map(function(n){return Ho(n,["tfhd"]).map(function(t){var e=zo(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),t=i[e]||9e4,e=Ho(n,["tfdt"]).map(function(t){var e=t[0],n=zo(t[4]<<24|t[5]<<16|t[6]<<8|t[7]);return 1===e&&(n*=Math.pow(2,32),n+=zo(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),n})[0];return(e||1/0)/t})})),t=Math.min.apply(null,t);return isFinite(t)?t:0},oe=function(t){var t=Ho(t,["moov","trak"]),i=[];return t.forEach(function(t){var e=Ho(t,["mdia","hdlr"]),n=Ho(t,["tkhd"]);e.forEach(function(t,e){t=Vo(t.subarray(8,12)),e=n[e];"vide"===t&&(e=0===(e=new DataView(e.buffer,e.byteOffset,e.byteLength)).getUint8(0)?e.getUint32(12):e.getUint32(20),i.push(e))})}),i},Yo={findBox:Ho,parseType:Vo,timescale:Wo,startTime:Go,videoTrackIds:oe},Ko=Math.pow(2,32)-1;!function(){if(So={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var t in So)So.hasOwnProperty(t)&&(So[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);ko=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Co=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Eo=new Uint8Array([0,0,0,1]),xo=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ao=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Oo={video:xo,audio:Ao},Do=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Po=new Uint8Array([0,0,0,0,0,0,0,0]),No=new Uint8Array([0,0,0,0,0,0,0,0]),Io=No,jo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Mo=No,Lo=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),no=function(t){for(var e,n=[],i=0,r=1;r<arguments.length;r++)n.push(arguments[r]);for(r=n.length;r--;)i+=n[r].byteLength;for(e=new Uint8Array(i+8),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(0,e.byteLength),e.set(t,4),r=0,i=8;r<n.length;r++)e.set(n[r],i),i+=n[r].byteLength;return e},io=function(){return no(So.dinf,no(So.dref,Do))},ro=function(t){return no(So.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},go=function(t){return no(So.hdlr,Oo[t])},mo=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),no(So.mdhd,e)},po=function(t){return no(So.mdia,mo(t),go(t.type),ao(t))},so=function(t){return no(So.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},ao=function(t){return no(So.minf,"video"===t.type?no(So.vmhd,Lo):no(So.smhd,Po),io(),vo(t))},$t=function(t,e){for(var n=[],i=e.length;i--;)n[i]=_o(e[i]);return no.apply(null,[So.moof,so(t)].concat(n))},lo=function(t){for(var e=t.length,n=[];e--;)n[e]=ho(t[e]);return no.apply(null,[So.moov,co(4294967295)].concat(n).concat(uo(t)))},uo=function(t){for(var e=t.length,n=[];e--;)n[e]=To(t[e]);return no.apply(null,[So.mvex].concat(n))},co=function(t){t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return no(So.mvhd,t)},yo=function(t){for(var e,n=t.samples||[],i=new Uint8Array(4+n.length),r=0;r<n.length;r++)e=n[r].flags,i[r+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return no(So.sdtp,i)},vo=function(t){return no(So.stbl,bo(t),no(So.stts,Mo),no(So.stsc,Io),no(So.stsz,jo),no(So.stco,No))},bo=function(t){return no(So.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===t.type?Ro:Uo)(t))},Ro=function(t){for(var e=t.sps||[],n=t.pps||[],i=[],r=[],o=0;o<e.length;o++)i.push((65280&e[o].byteLength)>>>8),i.push(255&e[o].byteLength),i=i.concat(Array.prototype.slice.call(e[o]));for(o=0;o<n.length;o++)r.push((65280&n[o].byteLength)>>>8),r.push(255&n[o].byteLength),r=r.concat(Array.prototype.slice.call(n[o]));return no(So.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),no(So.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([e.length]).concat(i).concat([n.length]).concat(r))),no(So.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},Uo=function(t){return no(So.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),ro(t))},fo=function(t){t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return no(So.tkhd,t)},_o=function(t){var e,n=no(So.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),i=Math.floor(t.baseMediaDecodeTime/(1+Ko)),r=Math.floor(t.baseMediaDecodeTime%(1+Ko)),i=no(So.tfdt,new Uint8Array([1,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r]));return"audio"===t.type?(e=wo(t,92),no(So.traf,n,i,e)):(r=yo(t),e=wo(t,r.length+92),no(So.traf,n,i,e,r))},ho=function(t){return t.duration=t.duration||4294967295,no(So.trak,fo(t),po(t))},To=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),no(So.trex,e)},qo=function(t,e){var n=0,i=0,r=0,o=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(i=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(o=8)),[0,0,n|i|r|o,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},Bo=function(t,e){for(var n,i=t.samples||[],r=qo(i,e+=20+16*i.length),o=0;o<i.length;o++)n=i[o],r=r.concat([(4278190080&n.duration)>>>24,(16711680&n.duration)>>>16,(65280&n.duration)>>>8,255&n.duration,(4278190080&n.size)>>>24,(16711680&n.size)>>>16,(65280&n.size)>>>8,255&n.size,n.flags.isLeading<<2|n.flags.dependsOn,n.flags.isDependedOn<<6|n.flags.hasRedundancy<<4|n.flags.paddingValue<<1|n.flags.isNonSyncSample,61440&n.flags.degradationPriority,15&n.flags.degradationPriority,(4278190080&n.compositionTimeOffset)>>>24,(16711680&n.compositionTimeOffset)>>>16,(65280&n.compositionTimeOffset)>>>8,255&n.compositionTimeOffset]);return no(So.trun,new Uint8Array(r))},Fo=function(t,e){for(var n,i=t.samples||[],r=qo(i,e+=20+8*i.length),o=0;o<i.length;o++)n=i[o],r=r.concat([(4278190080&n.duration)>>>24,(16711680&n.duration)>>>16,(65280&n.duration)>>>8,255&n.duration,(4278190080&n.size)>>>24,(16711680&n.size)>>>16,(65280&n.size)>>>8,255&n.size]);return no(So.trun,new Uint8Array(r))},wo=function(t,e){return("audio"===t.type?Fo:Bo)(t,e)};var Xo={ftyp:oo=function(){return no(So.ftyp,ko,Eo,ko,Co)},mdat:function(t){return no(So.mdat,t)},moof:$t,moov:lo,initSegment:function(t){var e=oo(),n=lo(t),t=new Uint8Array(e.byteLength+n.byteLength);return t.set(e),t.set(n,e.byteLength),t}},fn=function(){this.init=function(){var o={};this.on=function(t,e){o[t]||(o[t]=[]),o[t]=o[t].concat(e)},this.off=function(t,e){return!!o[t]&&(e=o[t].indexOf(e),o[t]=o[t].slice(),o[t].splice(e,1),-1<e)},this.trigger=function(t){var e,n,i,r=o[t];if(r)if(2===arguments.length)for(n=r.length,e=0;e<n;++e)r[e].call(this,arguments[1]);else{for(i=[],e=arguments.length,e=1;e<arguments.length;++e)i.push(arguments[e]);for(n=r.length,e=0;e<n;++e)r[e].apply(this,i)}},this.dispose=function(){o={}}}};fn.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},fn.prototype.push=function(t){this.trigger("data",t)},fn.prototype.flush=function(t){this.trigger("done",t)};var ze=fn,Zo=function(t){for(var e,n=[],i=[],r=n.byteLength=0;r<t.length;r++)"access_unit_delimiter_rbsp"===(e=t[r]).nalUnitType?(n.length&&(n.duration=e.dts-n.dts,i.push(n)),(n=[e]).byteLength=e.data.byteLength,n.pts=e.pts,n.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(n.keyFrame=!0),n.duration=e.dts-n.dts,n.byteLength+=e.data.byteLength,n.push(e));return i.length&&(!n.duration||n.duration<=0)&&(n.duration=i[i.length-1].duration),i.push(n),i},Qo=function(t){var e,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(n=t[e]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},Jo=function(t){var e;return!t[0][0].keyFrame&&1<t.length&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},ts=function(t,e){for(var n,i,r,o,s=e||0,a=[],l=0;l<t.length;l++)for(i=t[l],n=0;n<i.length;n++)o=i[n],r=o,o=void 0,(o={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=s,o.compositionTimeOffset=r.pts-r.dts,o.duration=r.duration,o.size=4*r.length,o.size+=r.byteLength,r.keyFrame&&(o.flags.dependsOn=2,o.flags.isNonSyncSample=0),s+=o.size,a.push(o);return a},es=function(t){for(var e,n,i,r,o,s=0,a=t.byteLength,l=t.nalCount,u=new Uint8Array(a+4*l),c=new DataView(u.buffer),h=0;h<t.length;h++)for(i=t[h],e=0;e<i.length;e++)for(r=i[e],n=0;n<r.length;n++)o=r[n],c.setUint32(s,o.data.byteLength),s+=4,u.set(o.data,s),s+=o.data.byteLength;return u},ns=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},is=function(t,e){var n=t.minSegmentDts;return e||(n-=t.timelineStartInfo.dts),e=t.timelineStartInfo.baseMediaDecodeTime,e+=n,e=Math.max(0,e),"audio"===t.type&&(e*=t.samplerate/9e4,e=Math.floor(e)),e},rs=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},os=function(t){for(var e=0,n={payloadType:-1,payloadSize:0},i=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)i+=255,e++;for(i+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=t.subarray(e,e+r);break}e+=r,r=i=0}return n},ss=function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},as=function(t,e){var n,i,r,o,s=[];if(!(64&e[0]))return s;for(i=31&e[0],n=0;n<i;n++)o={type:3&e[2+(r=3*n)],pts:t},4&e[2+r]&&(o.ccData=e[3+r]<<8|e[4+r],s.push(o));return s},ir=function(t){for(var e,n,i=t.byteLength,r=[],o=1;o<i-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);for(var s=0,o=0;o<e;s++,o++)s===r[0]&&(s++,r.shift()),n[o]=t[s];return n},ls=4,ne=function t(){t.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new fs(0,0),new fs(0,1),new fs(1,0),new fs(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)};(ne.prototype=new ze).push=function(t){var e,n;if("sei_rbsp"===t.nalUnitType&&(e=os(t.escapedRBSP),e.payloadType===ls&&(n=ss(e))))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=as(t.pts,n),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},ne.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},ne.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},ne.prototype.dispatchCea608Packet=function(t){this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},ne.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},ne.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)};function us(t){return null===t?"":(t=hs[t]||t,String.fromCharCode(t))}function cs(){for(var t=[],e=15;e--;)t.push("");return t}var hs={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ds=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],fs=function t(e,n){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,n,i,r,o=32639&t.ccData;o!==this.lastControlCode_?(4096==(61440&o)?this.lastControlCode_=o:o!==this.PADDING_&&(this.lastControlCode_=null),e=o>>>8,n=255&o,o===this.PADDING_||(o===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":o===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=t.pts):o===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(t.pts)):o===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(t.pts)):o===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(t.pts)):o===this.CARRIAGE_RETURN_?(this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts):o===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):o===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(t.pts),this.displayed_=cs()):o===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=cs():o===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=cs()),this.mode_="paintOn",this.startPts_=t.pts):this.isSpecialCharacter(e,n)?(i=us((e=(3&e)<<8)|n),this[this.mode_](t.pts,i),this.column_++):this.isExtCharacter(e,n)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),i=us((e=(3&e)<<8)|n),this[this.mode_](t.pts,i),this.column_++):this.isMidRowCode(e,n)?(this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&n)&&this.addFormatting(t.pts,["i"]),1==(1&n)&&this.addFormatting(t.pts,["u"])):this.isOffsetControlCode(e,n)?this.column_+=3&n:this.isPAC(e,n)?(r=ds.indexOf(7968&o),"rollUp"===this.mode_&&this.setRollUp(t.pts,r),r!==this.row_&&(this.clearFormatting(t.pts),this.row_=r),1&n&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&o)&&(this.column_=4*((14&o)>>1)),this.isColorPAC(n)&&14==(14&n)&&this.addFormatting(t.pts,["i"])):this.isNormalChar(e)&&(0===n&&(n=null),i=us(e),i+=us(n),this[this.mode_](t.pts,i),this.column_+=i.length))):this.lastControlCode_=null}};fs.prototype=new ze,fs.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){return t.trim()}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},fs.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=cs(),this.nonDisplayed_=cs(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},fs.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},fs.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&48<=e&&e<=63},fs.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&32<=e&&e<=63},fs.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&32<=e&&e<=47},fs.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&33<=e&&e<=35},fs.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&64<=e&&e<=127},fs.prototype.isColorPAC=function(t){return 64<=t&&t<=79||96<=t&&t<=127},fs.prototype.isNormalChar=function(t){return 32<=t&&t<=127},fs.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=cs(),this.displayed_=cs()),void 0!==e&&e!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[e-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},fs.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);e=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,e)},fs.prototype.clearFormatting=function(t){var e;this.formatting_.length&&(e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},""),this.formatting_=[],this[this.mode_](t,e))},fs.prototype.popOn=function(t,e){var n=this.nonDisplayed_[this.row_];n+=e,this.nonDisplayed_[this.row_]=n},fs.prototype.rollUp=function(t,e){var n=this.displayed_[this.row_];n+=e,this.displayed_[this.row_]=n},fs.prototype.shiftRowsUp_=function(){for(var t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},fs.prototype.paintOn=function(t,e){var n=this.displayed_[this.row_];n+=e,this.displayed_[this.row_]=n};function ps(t,e){var n=1;for(e<t&&(n=-1);4294967296<Math.abs(e-t);)t+=8589934592*n;return t}var Wo={CaptionStream:ne,Cea608Stream:fs},ms={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Go=function t(e){var n,i;t.prototype.init.call(this),this.type_=e,this.push=function(t){t.type===this.type_&&(void 0===i&&(i=t.dts),t.dts=ps(t.dts,i),t.pts=ps(t.pts,i),n=t.dts,this.trigger("data",t))},this.flush=function(){i=n,this.trigger("done")},this.discontinuity=function(){n=i=void 0}};Go.prototype=new ze;function gs(t,e,n){for(var i="",r=e;r<n;r++)i+="%"+("00"+t[r].toString(16)).slice(-2);return i}function ys(t,e,n){return decodeURIComponent(gs(t,e,n))}function vs(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}var oe=Go,$t=ps,bs={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=ys(t.data,1,e),t.value=ys(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=ys(t.data,1,e),t.url=ys(t.data,e+1,t.data.length);break}},PRIV:function(t){for(var e,n=0;n<t.data.length;n++)if(0===t.data[n]){t.owner=(e=t.data,unescape(gs(e,0,n)));break}t.privateData=t.data.subarray(n+1),t.data=t.privateData}},_s=function(t){var e,l={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},u=0,c=[],h=0;if(_s.prototype.init.call(this),this.dispatchType=ms.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(e=0;e<l.descriptor.length;e++)this.dispatchType+=("00"+l.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,n,i,r,o,s,a;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(h=0,c.length=0),0===c.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))l.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(t),h+=t.data.byteLength,1===c.length&&(u=vs(t.data.subarray(6,10)),u+=10),!(h<u)){for(e={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},r=0;r<u;)e.data.set(c[0].data.subarray(0,u-r),r),r+=c[0].data.byteLength,h-=c[0].data.byteLength,c.shift();n=10,64&e.data[5]&&(n+=4,n+=vs(e.data.subarray(10,14)),u-=vs(e.data.subarray(16,20)));do{if((i=vs(e.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}while((a={id:String.fromCharCode(e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]),data:e.data.subarray(n+10,n+i+10)}).key=a.id,bs[a.id]&&(bs[a.id](a),"com.apple.streaming.transportStreamTimestamp"===a.owner&&(s=(1&(o=a.data)[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2,s*=4,s+=3&o[7],a.timeStamp=s,void 0===e.pts&&void 0===e.dts&&(e.pts=a.timeStamp,e.dts=a.timeStamp),this.trigger("timestamp",a))),e.frames.push(a),n+=10,(n+=i)<u);this.trigger("data",e)}}};_s.prototype=new ze;var Ts,ws,fn=_s,ne=oe,Ss=function(){var r=new Uint8Array(188),o=0;Ss.prototype.init.call(this),this.push=function(t){var e,n=0,i=188;for(o?((e=new Uint8Array(t.byteLength+o)).set(r.subarray(0,o)),e.set(t,o),o=0):e=t;i<e.byteLength;)71!==e[n]||71!==e[i]?(n++,i++):(this.trigger("data",e.subarray(n,i)),n+=188,i+=188);n<e.byteLength&&(r.set(e.subarray(n),0),o=e.byteLength-n)},this.flush=function(){188===o&&71===r[0]&&(this.trigger("data",r),o=0),this.trigger("done")}};Ss.prototype=new ze,(Ts=function(){var i,r,o,s;Ts.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=void 0,i=function(t,e){var n=0;e.payloadUnitStartIndicator&&(n+=t[n]+1),("pat"===e.type?r:o)(t.subarray(n),e)},r=function(t,e){e.section_number=t[7],e.last_section_number=t[8],s.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=s.pmtPid},o=function(t,e){var n,i;if(1&t[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,i=12+((15&t[10])<<8|t[11]);i<n;){var r=t[i],o=(31&t[i+1])<<8|t[i+2];r===ms.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=o:r===ms.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=o:r===ms.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][o]=r),i+=5+((15&t[i+3])<<8|t[i+4])}e.programMapTable=s.programMapTable}},this.push=function(t){var e={},n=4;if(e.payloadUnitStartIndicator=!!(64&t[1]),e.pid=31&t[1],e.pid<<=8,e.pid|=t[2],1<(48&t[3])>>>4&&(n+=t[n]+1),0===e.pid)e.type="pat",i(t.subarray(n),e),this.trigger("data",e);else if(e.pid===this.pmtPid)for(e.type="pmt",i(t.subarray(n),e),this.trigger("data",e);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,e]):this.processPes_(t,n,e)},this.processPes_=function(t,e,n){n.pid===this.programMapTable.video?n.streamType=ms.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=ms.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(e),this.trigger("data",n)}}).prototype=new ze,Ts.STREAM_TYPES={h264:27,adts:15},(ws=function(){function i(t,e,n){var i,r,o,s,a=new Uint8Array(t.size),l={type:e},u=0,c=0;if(t.data.length&&!(t.size<9)){for(l.trackId=t.data[0].pid,u=0;u<t.data.length;u++)i=t.data[u],a.set(i.data,c),c+=i.data.byteLength;r=a,(o=l).packetLength=6+(r[4]<<8|r[5]),o.dataAlignmentIndicator=0!=(4&r[6]),192&(s=r[7])&&(o.pts=(14&r[9])<<27|(255&r[10])<<20|(254&r[11])<<12|(255&r[12])<<5|(254&r[13])>>>3,o.pts*=4,o.pts+=(6&r[13])>>>1,o.dts=o.pts,64&s&&(o.dts=(14&r[14])<<27|(255&r[15])<<20|(254&r[16])<<12|(255&r[17])<<5|(254&r[18])>>>3,o.dts*=4,o.dts+=(6&r[18])>>>1)),o.data=r.subarray(9+r[8]),e="video"===e||l.packetLength<=t.size,(n||e)&&(t.size=0,t.data.length=0),e&&h.trigger("data",l)}}var h=this,r={data:[],size:0},o={data:[],size:0},s={data:[],size:0};ws.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var t,e;switch(n.streamType){case ms.H264_STREAM_TYPE:case ms.H264_STREAM_TYPE:t=r,e="video";break;case ms.ADTS_STREAM_TYPE:t=o,e="audio";break;case ms.METADATA_STREAM_TYPE:t=s,e="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&i(t,e,!0),t.data.push(n),t.size+=n.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},e=n.programMapTable;null!==e.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),h.trigger("data",t)}})[n.type]()},this.flush=function(){i(r,"video"),i(o,"audio"),i(s,"timed-metadata"),this.trigger("done")}}).prototype=new ze;var ks,Es={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ss,TransportParseStream:Ts,ElementaryStream:ws,TimestampRolloverStream:ne,CaptionStream:Wo.CaptionStream,Cea608Stream:Wo.Cea608Stream,MetadataStream:fn};for(ks in ms)ms.hasOwnProperty(ks)&&(Es[ks]=ms[ks]);var Cs=Es,xs=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],As=function(){var l;As.prototype.init.call(this),this.push=function(t){var e,n,i,r,o,s=0,a=0;if("audio"===t.type)for(l?(i=l,(l=new Uint8Array(i.byteLength+t.data.byteLength)).set(i),l.set(t.data,i.byteLength)):l=t.data;s+5<l.length;)if(255===l[s]&&240==(246&l[s+1])){if(e=2*(1&~l[s+1]),n=(3&l[s+3])<<11|l[s+4]<<3|(224&l[s+5])>>5,o=9e4*(r=1024*(1+(3&l[s+6])))/xs[(60&l[s+2])>>>2],n=s+n,l.byteLength<n)return;if(this.trigger("data",{pts:t.pts+a*o,dts:t.dts+a*o,sampleCount:r,audioobjecttype:1+(l[s+2]>>>6&3),channelcount:(1&l[s+2])<<2|(192&l[s+3])>>>6,samplerate:xs[(60&l[s+2])>>>2],samplingfrequencyindex:(60&l[s+2])>>>2,samplesize:16,data:l.subarray(s+7+e,n)}),l.byteLength===n)return void(l=void 0);a++,l=l.subarray(n)}else s++},this.flush=function(){this.trigger("done")}};As.prototype=new ze;var Os,Ls,Ps=As,Ds=function(i){var r=i.byteLength,o=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var t=i.byteLength-r,e=new Uint8Array(4),n=Math.min(4,r);if(0===n)throw new Error("no bytes available");e.set(i.subarray(t,t+n)),o=new DataView(e.buffer).getUint32(0),s=8*n,r-=n},this.skipBits=function(t){var e;t<s||(t-=s,t-=8*(e=Math.floor(t/8)),r-=e,this.loadWord()),o<<=t,s-=t},this.readBits=function(t){var e=Math.min(s,t),n=o>>>32-e;return 0<(s-=e)?o<<=e:0<r&&this.loadWord(),0<(e=t-e)?n<<e|this.readBits(e):n},this.skipLeadingZeros=function(){for(var t=0;t<s;++t)if(0!=(o&2147483648>>>t))return o<<=t,s-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},Ns=function(){var n,i,r=0;Ns.prototype.init.call(this),this.push=function(t){var e;for(i=i?((e=new Uint8Array(i.byteLength+t.data.byteLength)).set(i),e.set(t.data,i.byteLength),e):t.data;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&this.trigger("data",i.subarray(r+3,n-2));n++,1!==i[n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}this.trigger("data",i.subarray(r+3,n-2)),r=n-2,n+=3;break;default:n+=3}i=i.subarray(r),n-=r,r=0},this.flush=function(){i&&3<i.byteLength&&this.trigger("data",i.subarray(r+3)),i=null,r=0,this.trigger("done")}};Ns.prototype=new ze,Ls={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Os=function(){var n,i,r,o,s,a,g,e=new Ns;Os.prototype.init.call(this),(n=this).push=function(t){"video"===t.type&&(i=t.trackId,r=t.pts,o=t.dts,e.push(t))},e.on("data",function(t){var e={trackId:i,pts:r,dts:o,data:t};switch(31&t[0]){case 5:e.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:e.nalUnitType="sei_rbsp",e.escapedRBSP=s(t.subarray(1));break;case 7:e.nalUnitType="seq_parameter_set_rbsp",e.escapedRBSP=s(t.subarray(1)),e.config=a(e.escapedRBSP);break;case 8:e.nalUnitType="pic_parameter_set_rbsp";break;case 9:e.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",e)}),e.on("done",function(){n.trigger("done")}),this.flush=function(){e.flush()},g=function(t,e){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=(n+e.readExpGolomb()+256)%256),n=0===i?n:i},s=function(t){for(var e,n,i=t.byteLength,r=[],o=1;o<i-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);for(var s=0,o=0;o<e;s++,o++)s===r[0]&&(s++,r.shift()),n[o]=t[s];return n},a=function(t){var e,n,i,r,o,s,a=0,l=0,u=0,c=0,h=1,d=new Ds(t),f=d.readUnsignedByte(),p=d.readUnsignedByte(),m=d.readUnsignedByte();if(d.skipUnsignedExpGolomb(),Ls[f]&&(3===(n=d.readUnsignedExpGolomb())&&d.skipBits(1),d.skipUnsignedExpGolomb(),d.skipUnsignedExpGolomb(),d.skipBits(1),d.readBoolean()))for(r=3!==n?8:12,s=0;s<r;s++)d.readBoolean()&&g(s<6?16:64,d);if(d.skipUnsignedExpGolomb(),0===(i=d.readUnsignedExpGolomb()))d.readUnsignedExpGolomb();else if(1===i)for(d.skipBits(1),d.skipExpGolomb(),d.skipExpGolomb(),e=d.readUnsignedExpGolomb(),s=0;s<e;s++)d.skipExpGolomb();if(d.skipUnsignedExpGolomb(),d.skipBits(1),t=d.readUnsignedExpGolomb(),n=d.readUnsignedExpGolomb(),i=d.readBits(1),0===i&&d.skipBits(1),d.skipBits(1),d.readBoolean()&&(a=d.readUnsignedExpGolomb(),l=d.readUnsignedExpGolomb(),u=d.readUnsignedExpGolomb(),c=d.readUnsignedExpGolomb()),d.readBoolean()&&d.readBoolean()){switch(d.readUnsignedByte()){case 1:o=[1,1];break;case 2:o=[12,11];break;case 3:o=[10,11];break;case 4:o=[16,11];break;case 5:o=[40,33];break;case 6:o=[24,11];break;case 7:o=[20,11];break;case 8:o=[32,11];break;case 9:o=[80,33];break;case 10:o=[18,11];break;case 11:o=[15,11];break;case 12:o=[64,33];break;case 13:o=[160,99];break;case 14:o=[4,3];break;case 15:o=[3,2];break;case 16:o=[2,1];break;case 255:o=[d.readUnsignedByte()<<8|d.readUnsignedByte(),d.readUnsignedByte()<<8|d.readUnsignedByte()]}o&&(h=o[0]/o[1])}return{profileIdc:f,levelIdc:m,profileCompatibility:p,width:Math.ceil((16*(t+1)-2*a-2*l)*h),height:(2-i)*(n+1)*16-2*u-2*c}}}).prototype=new ze;var Go={H264Stream:Os,NalByteStream:Ns},Is=function(){var o=new Uint8Array,s=0;Is.prototype.init.call(this),this.setTimestamp=function(t){s=t},this.parseId3TagSize=function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?20+n:10+n},this.parseAdtsSize=function(t,e){var n=(224&t[e+5])>>5,i=t[e+4]<<3;return 6144&t[e+3]|i|n},this.push=function(t){var e,n,i=0,r=0;for(o.length?(n=o.length,(o=new Uint8Array(t.byteLength+n)).set(o.subarray(0,n)),o.set(t,n)):o=t;3<=o.length-r;)if(o[r]!=="I".charCodeAt(0)||o[r+1]!=="D".charCodeAt(0)||o[r+2]!=="3".charCodeAt(0))if(!0&o[r]&&240==(240&o[r+1])){if(o.length-r<7)break;if((i=this.parseAdtsSize(o,r))>o.length)break;e={type:"audio",data:o.subarray(r,r+i),pts:s,dts:s},this.trigger("data",e),r+=i}else r++;else{if(o.length-r<10)break;if((i=this.parseId3TagSize(o,r))>o.length)break;e={type:"timed-metadata",data:o.subarray(r,r+i)},this.trigger("data",e),r+=i}t=o.length-r,o=0<t?o.subarray(r):new Uint8Array}};Is.prototype=new ze;var js,Ms,Rs,Us,qs=Is,oe=[33,16,5,32,164,27],ne=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],fn=function(t){for(var e=[];t--;)e.push(0);return e},oe={96e3:[oe,[227,64],fn(154),[56]],88200:[oe,[231],fn(170),[56]],64e3:[oe,[248,192],fn(240),[56]],48e3:[oe,[255,192],fn(268),[55,148,128],fn(54),[112]],44100:[oe,[255,192],fn(268),[55,163,128],fn(84),[112]],32e3:[oe,[255,192],fn(268),[55,234],fn(226),[112]],24e3:[oe,[255,192],fn(268),[55,255,128],fn(268),[111,112],fn(126),[224]],16e3:[oe,[255,192],fn(268),[55,255,128],fn(268),[111,255],fn(269),[223,108],fn(195),[1,192]],12e3:[ne,fn(268),[3,127,248],fn(268),[6,255,240],fn(268),[13,255,224],fn(268),[27,253,128],fn(259),[56]],11025:[ne,fn(268),[3,127,248],fn(268),[6,255,240],fn(268),[13,255,224],fn(268),[27,255,192],fn(268),[55,175,128],fn(108),[112]],8e3:[ne,fn(268),[3,121,16],fn(47),[7]]},Bs=(js=oe,Object.keys(js).reduce(function(t,e){return t[e]=new Uint8Array(js[e].reduce(function(t,e){return t.concat(e)},[])),t},{})),Fs=function(t){return 9e4*t},$s=function(t,e){return t*e},zs=function(t){return t/9e4},Hs=function(t,e){return t/e},Vs=function(t,e){return Fs(Hs(t,e))},Ws=function(t,e){return $s(zs(t),e)},Gs=Go.H264Stream,Ys=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ks=["width","height","profileIdc","levelIdc","profileCompatibility"],Xs=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},Zs=function(t,e){var n;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},Qs=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].data.byteLength;return e},Js=function(i,r){var o=[],s=0,e=0,u=0,c=1/0;r=r||{},Js.prototype.init.call(this),this.push=function(e){rs(i,e),i&&Ys.forEach(function(t){i[t]=e[t]}),o.push(e)},this.setEarliestDts=function(t){e=t-i.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){c=t},this.setAudioAppendStart=function(t){u=t},this.flush=function(){var t,e,n;0!==o.length&&(n=this.trimAdtsFramesByEarliestDts_(o),i.baseMediaDecodeTime=is(i,r.keepOriginalTimestamps),this.prefixWithSilence_(i,n),i.samples=this.generateSampleTable_(n),e=Xo.mdat(this.concatenateFrameData_(n)),o=[],t=Xo.moof(s,[i]),n=new Uint8Array(t.byteLength+e.byteLength),s++,n.set(t),n.set(e,t.byteLength),ns(i),this.trigger("data",{track:i,boxes:n})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(t,e){var n,i,r,o,s,a=0,l=0;if(e.length&&(n=Vs(t.baseMediaDecodeTime,t.samplerate),i=Math.ceil(9e4/(t.samplerate/1024)),u&&c&&(r=n-Math.max(u,c),l=(a=Math.floor(r/i))*i),!(a<1||45e3<l))){for(o=(o=Bs[t.samplerate])||e[0].data,s=0;s<a;s++)e.splice(s,0,{data:o});t.baseMediaDecodeTime-=Math.floor(Ws(l,t.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return i.minSegmentDts>=e?t:(i.minSegmentDts=1/0,t.filter(function(t){return t.dts>=e&&(i.minSegmentDts=Math.min(i.minSegmentDts,t.dts),i.minSegmentPts=i.minSegmentDts,!0)}))},this.generateSampleTable_=function(t){for(var e,n=[],i=0;i<t.length;i++)e=t[i],n.push({size:e.data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(t){for(var e,n=0,i=new Uint8Array(Qs(t)),r=0;r<t.length;r++)e=t[r],i.set(e.data,n),n+=e.data.byteLength;return i}};Js.prototype=new ze,(Ms=function(s,i){var e,n,r=0,o=[],u=[];i=i||{},Ms.prototype.init.call(this),delete s.minPTS,this.gopCache_=[],this.push=function(t){rs(s,t),"seq_parameter_set_rbsp"!==t.nalUnitType||e||(e=t.config,s.sps=[t.data],Ks.forEach(function(t){s[t]=e[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,s.pps=[t.data]),o.push(t)},this.flush=function(){for(var t,e;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=Zo(o),(e=Qo(e))[0][0].keyFrame||((t=this.getGopForFusion_(o[0],s))?(e.unshift(t),e.byteLength+=t.byteLength,e.nalCount+=t.nalCount,e.pts=t.pts,e.dts=t.dts,e.duration+=t.duration):e=Jo(e)),u.length){var n=i.alignGopsAtEnd?this.alignGopsAtEnd_(e):this.alignGopsAtStart_(e);if(!n)return this.gopCache_.unshift({gop:e.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ns(s),e=n}rs(s,e),s.samples=ts(e),t=Xo.mdat(es(e)),s.baseMediaDecodeTime=is(s,i.keepOriginalTimestamps),this.trigger("processedGopsInfo",e.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.gopCache_.unshift({gop:e.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",s.baseMediaDecodeTime),this.trigger("timelineStartInfo",s.timelineStartInfo),n=Xo.moof(r,[s]),e=new Uint8Array(n.byteLength+t.byteLength),r++,e.set(n),e.set(t,n.byteLength),this.trigger("data",{track:s,boxes:e}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){ns(s),n=e=void 0},this.getGopForFusion_=function(t){for(var e,n,i,r=1/0,o=0;o<this.gopCache_.length;o++)n=(i=this.gopCache_[o]).gop,s.pps&&Zs(s.pps[0],i.pps[0])&&s.sps&&Zs(s.sps[0],i.sps[0])&&(n.dts<s.timelineStartInfo.dts||-1e4<=(n=t.dts-n.dts-n.duration)&&n<=45e3&&(!e||n<r)&&(e=i,r=n));return e?e.gop:null},this.alignGopsAtStart_=function(t){for(var e,n,i,r,o=t.byteLength,s=t.nalCount,a=t.duration,l=e=0;l<u.length&&e<t.length&&(n=u[l],i=t[e],n.pts!==i.pts);)i.pts>n.pts?l++:(e++,o-=i.byteLength,s-=i.nalCount,a-=i.duration);return 0===e?t:e===t.length?null:((r=t.slice(e)).byteLength=o,r.duration=a,r.nalCount=s,r.pts=r[0].pts,r.dts=r[0].dts,r)},this.alignGopsAtEnd_=function(t){for(var e,n,i=u.length-1,r=t.length-1,o=null,s=!1;0<=i&&0<=r;){if(e=u[i],n=t[r],e.pts===n.pts){s=!0;break}e.pts>n.pts?i--:(i===u.length-1&&(o=r),r--)}if(!s&&null===o)return null;if(0===(l=s?r:o))return t;var a=t.slice(l),l=a.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return a.byteLength=l.byteLength,a.duration=l.duration,a.nalCount=l.nalCount,a.pts=a[0].pts,a.dts=a[0].dts,a},this.alignGopsWith=function(t){u=t}}).prototype=new ze,(Us=function(t,e){this.numberOfTracks=0,this.metadataStream=e,void 0!==t.remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Us.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new ze,Us.prototype.flush=function(t){var e,n,i,r=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Ks.forEach(function(t){o.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,Ys.forEach(function(t){o.info[t]=this.audioTrack[t]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,t=Xo.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(t.byteLength),o.initSegment.set(t),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],r),r+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(e=this.pendingCaptions[i]).startTime=e.startPts-s,e.startTime/=9e4,e.endTime=e.endPts-s,e.endTime/=9e4,o.captionStreams[e.stream]=!0,o.captions.push(e);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=n.pts-s,n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(Rs=function(i){var r,o,s=this,n=!0;Rs.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};(this.transmuxPipeline_=e).type="aac",e.metadataStream=new Cs.MetadataStream,e.aacStream=new qs,e.audioTimestampRolloverStream=new Cs.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new Cs.TimestampRolloverStream("timed-metadata"),e.adtsStream=new Ps,e.coalesceStream=new Us(i,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(t){"timed-metadata"!==t.type||e.audioSegmentStream||(o=o||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Js(o,i),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new Cs.MetadataStream,n.packetStream=new Cs.TransportPacketStream,n.parseStream=new Cs.TransportParseStream,n.elementaryStream=new Cs.ElementaryStream,n.videoTimestampRolloverStream=new Cs.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new Cs.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new Cs.TimestampRolloverStream("timed-metadata"),n.adtsStream=new Ps,n.h264Stream=new Gs,n.captionStream=new Cs.CaptionStream,n.coalesceStream=new Us(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(t){var e;if("metadata"===t.type){for(e=t.tracks.length;e--;)r||"video"!==t.tracks[e].type?o||"audio"!==t.tracks[e].type||((o=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new Ms(r,i),n.videoSegmentStream.on("timelineStartInfo",function(t){o&&(o.timelineStartInfo=t,n.audioSegmentStream.setEarliestDts(t.dts))}),n.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(t){o&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),o&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new Js(o,i),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var e=this.transmuxPipeline_;this.baseMediaDecodeTime=t,o&&(o.timelineStartInfo.dts=void 0,o.timelineStartInfo.pts=void 0,ns(o),o.timelineStartInfo.baseMediaDecodeTime=t,e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),r&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[],e.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,ns(r),e.captionStream.reset(),r.timelineStartInfo.baseMediaDecodeTime=t),e.timedMetadataTimestampRolloverStream&&e.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){o&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){var e;n&&((e=Xs(t))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1),this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new ze;function ta(t){return new Date(1e3*t-20828448e5)}function ea(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}}function na(t,c){var n=Yo.findBox(t,["moof","traf"]),t=Yo.findBox(t,["mdat"]),h={},i=[];return t.forEach(function(t,e){e=n[e];i.push({mdat:t,traf:e})}),i.forEach(function(t){var e,n,i,r,o,s=t.mdat,a=t.traf,l=Yo.findBox(a,["tfhd"]),u=da.parseTfhd(l[0]),t=u.trackId,l=Yo.findBox(a,["tfdt"]),l=0<l.length?da.parseTfdt(l[0]).baseMediaDecodeTime:0,a=Yo.findBox(a,["trun"]);c===t&&0<a.length&&(a=a,e=l,n=(u=u).defaultSampleDuration||0,i=u.defaultSampleSize||0,r=u.trackId,o=[],a.forEach(function(t){t=da.parseTrun(t).samples;t.forEach(function(t){void 0===t.duration&&(t.duration=n),void 0===t.size&&(t.size=i),t.trackId=r,t.dts=e,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=e+t.compositionTimeOffset,e+=t.duration}),o=o.concat(t)}),s=function(t,e,n){for(var i,r=new DataView(t.buffer,t.byteOffset,t.byteLength),o=[],s=0;s+4<t.length;s+=u){var a,l,u=r.getUint32(s);s+=4,u<=0||6==(31&t[s])&&(l=t.subarray(s+1,s+1+u),a=function(t,e){for(var n=t,i=0;i<e.length;i++){var r=e[i];if(n<r.size)return r;n-=r.size}return null}(s,e),l={nalUnitType:"sei_rbsp",size:u,data:l,escapedRBSP:fa(l),trackId:n},a?(l.pts=a.pts,l.dts=a.dts,i=a):(l.pts=i.pts,l.dts=i.dts),o.push(l))}return o}(s,o,t),h[t]||(h[t]=[]),h[t]=h[t].concat(s))}),h}function ia(t){var e=31&t[1];return e<<=8,e|=t[2]}function ra(t){return!!(64&t[1])}function oa(t){var e=0;return 1<(48&t[3])>>>4&&(e+=t[4]+1),e}function sa(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function aa(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}var ne={Transmuxer:Rs,VideoSegmentStream:Ms,AudioSegmentStream:Js,AUDIO_PROPERTIES:Ys,VIDEO_PROPERTIES:Ks},la=Yo.parseType,ua={avc1:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:e.getUint16(6),width:e.getUint16(24),height:e.getUint16(26),horizresolution:e.getUint16(28)+e.getUint16(30)/16,vertresolution:e.getUint16(32)+e.getUint16(34)/16,frameCount:e.getUint16(40),depth:e.getUint16(74),config:ca(t.subarray(78,t.byteLength))}},avcC:function(t){for(var e,n,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},o=31&t[5],s=6,a=0;a<o;a++)n=i.getUint16(s),s+=2,r.sps.push(new Uint8Array(t.subarray(s,s+n))),s+=n;for(e=t[s],s++,a=0;a<e;a++)n=i.getUint16(s),s+=2,r.pps.push(new Uint8Array(t.subarray(s,s+n))),s+=n;return r},btrt:function(t){t=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(7&t[26])<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={majorBrand:la(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},i=8;i<t.byteLength;)n.compatibleBrands.push(la(t.subarray(i,i+4))),i+=4;return n},dinf:function(t){return{boxes:ca(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:ca(t.subarray(8))}},hdlr:function(t){for(var e={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:la(t.subarray(8,12)),name:""},n=8,n=24;n<t.byteLength;n++){if(0===t[n]){n++;break}e.name+=String.fromCharCode(t[n])}return e.name=decodeURIComponent(escape(e.name)),e},mdat:function(t){return{byteLength:t.byteLength,nals:function(t){for(var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),i=[],r=0;r+4<t.length;r+=e)if(e=n.getUint32(r),r+=4,e<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&t[r]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+t[r]&31)}return i}(t)}},mdhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,t={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return 1===t.version?(n+=4,t.creationTime=ta(e.getUint32(n)),n+=8,t.modificationTime=ta(e.getUint32(n)),n+=4,t.timescale=e.getUint32(n),n+=8):(t.creationTime=ta(e.getUint32(n)),n+=4,t.modificationTime=ta(e.getUint32(n)),n+=4,t.timescale=e.getUint32(n),n+=4),t.duration=e.getUint32(n),n+=4,n=e.getUint16(n),t.language+=String.fromCharCode(96+(n>>10)),t.language+=String.fromCharCode(96+((992&n)>>5)),t.language+=String.fromCharCode(96+(31&n)),t},mdia:function(t){return{boxes:ca(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:ca(t)}},mp4a:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),e={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536};return 28<t.byteLength&&(e.streamDescriptor=ca(t.subarray(28))[0]),e},moof:function(t){return{boxes:ca(t)}},moov:function(t){return{boxes:ca(t)}},mvex:function(t){return{boxes:ca(t)}},mvhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,i={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=ta(e.getUint32(n)),n+=8,i.modificationTime=ta(e.getUint32(n)),n+=4,i.timescale=e.getUint32(n),n+=8):(i.creationTime=ta(e.getUint32(n)),n+=4,i.modificationTime=ta(e.getUint32(n)),n+=4,i.timescale=e.getUint32(n),n+=4),i.duration=e.getUint32(n),n+=4,i.rate=e.getUint16(n)+e.getUint16(n+2)/16,n+=4,i.volume=e.getUint8(n)+e.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=e.getUint32(n),i},pdin:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:e.getUint32(4),initialDelay:e.getUint32(8)}},sdtp:function(t){for(var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},n=4;n<t.byteLength;n++)e.samples.push({dependsOn:(48&t[n])>>4,isDependedOn:(12&t[n])>>2,hasRedundancy:3&t[n]});return e},sidx:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8),earliestPresentationTime:e.getUint32(12),firstOffset:e.getUint32(16)},i=e.getUint16(22),r=24;i;r+=12,i--)n.references.push({referenceType:(128&t[r])>>>7,referencedSize:2147483647&e.getUint32(r),subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(128&t[r+8]),sapType:(112&t[r+8])>>>4,sapDeltaTime:268435455&e.getUint32(r+8)});return n},smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:ca(t)}},stco:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},i=e.getUint32(4),r=8;i;r+=4,i--)n.chunkOffsets.push(e.getUint32(r));return n},stsc:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=e.getUint32(4),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]},r=8;n;r+=12,n--)i.sampleToChunks.push({firstChunk:e.getUint32(r),samplesPerChunk:e.getUint32(r+4),sampleDescriptionIndex:e.getUint32(r+8)});return i},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:ca(t.subarray(8))}},stsz:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:e.getUint32(4),entries:[]},i=12;i<t.byteLength;i+=4)n.entries.push(e.getUint32(i));return n},stts:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},i=e.getUint32(4),r=8;i;r+=8,i--)n.timeToSamples.push({sampleCount:e.getUint32(r),sampleDelta:e.getUint32(r+4)});return n},styp:function(t){return ua.ftyp(t)},tfdt:function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]};return 1===e.version&&(e.baseMediaDecodeTime*=Math.pow(2,32),e.baseMediaDecodeTime+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),e},tfhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4)},i=1&n.flags[2],r=2&n.flags[2],o=8&n.flags[2],s=16&n.flags[2],a=32&n.flags[2],l=65536&n.flags[0],u=131072&n.flags[0],t=8;return i&&(t+=4,n.baseDataOffset=e.getUint32(12),t+=4),r&&(n.sampleDescriptionIndex=e.getUint32(t),t+=4),o&&(n.defaultSampleDuration=e.getUint32(t),t+=4),s&&(n.defaultSampleSize=e.getUint32(t),t+=4),a&&(n.defaultSampleFlags=e.getUint32(t)),l&&(n.durationIsEmpty=!0),!i&&u&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,i={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=ta(e.getUint32(n)),n+=8,i.modificationTime=ta(e.getUint32(n)),n+=4,i.trackId=e.getUint32(n),n+=4,n+=8):(i.creationTime=ta(e.getUint32(n)),n+=4,i.modificationTime=ta(e.getUint32(n)),n+=4,i.trackId=e.getUint32(n),n+=4,n+=4),i.duration=e.getUint32(n),n+=4,n+=8,i.layer=e.getUint16(n),n+=2,i.alternateGroup=e.getUint16(n),n+=2,i.volume=e.getUint8(n)+e.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,i.width=e.getUint16(n)+e.getUint16(n+2)/16,n+=4,i.height=e.getUint16(n)+e.getUint16(n+2)/16,i},traf:function(t){return{boxes:ca(t)}},trak:function(t){return{boxes:ca(t)}},trex:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4),defaultSampleDescriptionIndex:e.getUint32(8),defaultSampleDuration:e.getUint32(12),defaultSampleSize:e.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:e.getUint16(22)}},trun:function(t){var e,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&n.flags[2],o=4&n.flags[2],s=1&n.flags[1],a=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),h=8;for(r&&(n.dataOffset=i.getInt32(h),h+=4),o&&c&&(e={flags:ea(t.subarray(h,h+4))},h+=4,s&&(e.duration=i.getUint32(h),h+=4),a&&(e.size=i.getUint32(h),h+=4),u&&(e.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(e),c--);c--;)e={},s&&(e.duration=i.getUint32(h),h+=4),a&&(e.size=i.getUint32(h),h+=4),l&&(e.flags=ea(t.subarray(h,h+4)),h+=4),u&&(e.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(e);return n},"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:e.getUint16(4),opcolor:new Uint16Array([e.getUint16(6),e.getUint16(8),e.getUint16(10)])}}},ca=function(t){for(var e,n,i,r,o,s=0,a=[],l=new ArrayBuffer(t.length),u=new Uint8Array(l),c=0;c<t.length;++c)u[c]=t[c];for(e=new DataView(l);s<t.byteLength;)n=e.getUint32(s),i=la(t.subarray(s+4,s+8)),r=1<n?s+n:t.byteLength,(o=(ua[i]||function(t){return{data:t}})(t.subarray(s+8,r))).size=n,o.type=i,a.push(o),s=r;return a},ha=function(t,e){var r;return e=e||0,r=new Array(2*e+1).join(" "),t.map(function(i,t){return r+i.type+"\n"+Object.keys(i).filter(function(t){return"type"!==t&&"boxes"!==t}).map(function(t){var e=r+"  "+t+": ",n=i[t];if(n instanceof Uint8Array||n instanceof Uint32Array){t=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map(function(t){return" "+("00"+t.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return t?1===t.length?e+"<"+t.join("").slice(1)+">":e+"<\n"+t.map(function(t){return r+"  "+t}).join("\n")+"\n"+r+"  >":e+"<>"}return e+JSON.stringify(n,null,2).split("\n").map(function(t,e){return 0===e?t:r+"  "+t}).join("\n")}).join("\n")+(i.boxes?"\n"+ha(i.boxes,e+1):"")}).join("\n")},da={inspect:ca,textify:ha,parseTfdt:ua.tfdt,parseHdlr:ua.hdlr,parseTfhd:ua.tfhd,parseTrun:ua.trun},fa=ir,pa=Wo.CaptionStream,ma={generator:Xo,probe:Yo,Transmuxer:ne.Transmuxer,AudioSegmentStream:ne.AudioSegmentStream,VideoSegmentStream:ne.VideoSegmentStream,CaptionParser:function(){var e,s,a,l,u,t=!1;this.isInitialized=function(){return t},this.init=function(){e=new pa,t=!0,e.on("data",function(t){t.startTime=t.startPts/l,t.endTime=t.endPts/l,u.captions.push(t),u.captionStreams[t.stream]=!0})},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length)&&(a!==t[0]||l!==e[a])},this.parse=function(t,e,n){var i,r;if(!this.isInitialized())return null;if(!e||!n)return null;if(this.isNewInit(e,n))a=e[0],l=n[a];else if(!a||!l)return s.push(t),null;for(;0<s.length;){var o=s.shift();this.parse(o,e,n)}return i=t,r=l,null!==(r=(t=a)?{seiNals:na(i,t)[t],timescale:r}:null)&&r.seiNals?(this.pushNals(r.seiNals),this.flushStream(),u):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;e.flush()},this.clearParsedCaptions=function(){u.captions=[],u.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){s=[],l=a=null,u?this.clearParsedCaptions():u={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}}.CaptionParser,fn={parseType:function(t,e){t=ia(t);return 0===t?"pat":t===e?"pmt":e?"pes":null},parsePat:function(t){var e=ra(t),n=4+oa(t);return e&&(n+=t[n]+1),(31&t[n+10])<<8|t[n+11]},parsePmt:function(t){var e={},n=ra(t),i=4+oa(t);if(n&&(i+=t[i]+1),1&t[i+5]){for(var r=3+((15&t[i+1])<<8|t[i+2])-4,o=12+((15&t[i+10])<<8|t[i+11]);o<r;){var s=i+o;e[(31&t[s+1])<<8|t[s+2]]=t[s],o+=5+((15&t[s+3])<<8|t[s+4])}return e}},parsePayloadUnitStartIndicator:ra,parsePesType:function(t,e){switch(e[ia(t)]){case ms.H264_STREAM_TYPE:return"video";case ms.ADTS_STREAM_TYPE:return"audio";case ms.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!ra(t))return null;var e=4+oa(t);if(e>=t.byteLength)return null;var n=null,i=t[e+7];return 192&i&&((n={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,n.pts*=4,n.pts+=(6&t[e+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,n.dts*=4,n.dts+=(6&t[e+18])>>>1)),n},videoPacketContainsKeyFrame:function(t){for(var e=4+oa(t),n=t.subarray(e),i=0,r=0,o=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===sa(31&n[r+3])&&(o=!0);i++,1!==n[i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===sa(31&n[r+3])&&(o=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===sa(31&n[r+3])&&(o=!0),o}},ga=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],oe={parseId3TagSize:function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?20+n:10+n},parseAdtsSize:function(t,e){var n=(224&t[e+5])>>5,i=t[e+4]<<3;return 6144&t[e+3]|i|n},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240==(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240==(246&t[e+1]))return ga[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,n,i=10;64&t[5]&&(i+=4,i+=aa(t.subarray(10,14)));do{if((e=aa(t.subarray(i+4,i+8)))<1)return null;if("PRIV"===String.fromCharCode(t[i],t[i+1],t[i+2],t[i+3])){n=t.subarray(i+10,i+e+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(t,e,n){for(var i="",r=e;r<n;r++)i+="%"+("00"+t[r].toString(16)).slice(-2);return i}(n,0,r)))break;var o=n.subarray(r+1),s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return s*=4,s+=3&o[7]}}}while(i+=10,(i+=e)<t.byteLength);return null}},ya=$t,va={};va.ts=fn,va.aac=oe;function ba(t){var e,n={pid:null,table:null},i={};for(e in!function(t,e){for(var n,i=0,r=188;r<t.byteLength;)if(71!==t[i]||71!==t[r])i++,r++;else{switch(n=t.subarray(i,r),va.ts.parseType(n,e.pid)){case"pat":e.pid||(e.pid=va.ts.parsePat(n));break;case"pmt":e.table||(e.table=va.ts.parsePmt(n))}if(e.pid&&e.table)return;i+=188,r+=188}}(t,n),n.table)if(n.table.hasOwnProperty(e))switch(n.table[e]){case ms.H264_STREAM_TYPE:i.video=[],function(t,e,n){for(var i,r,o,s,a,l,u,c,h=0,d=188,f=!1,p={data:[],size:0};d<t.byteLength;)if(71!==t[h]||71!==t[d])h++,d++;else{if(i=t.subarray(h,d),r=va.ts.parseType(i,e.pid),"pes"===r)if(o=va.ts.parsePesType(i,e.table),s=va.ts.parsePayloadUnitStartIndicator(i),"video"===o&&(s&&!f&&(a=va.ts.parsePesTime(i))&&(a.type="video",n.video.push(a),f=!0),!n.firstKeyFrame)){if(s&&0!==p.size){for(l=new Uint8Array(p.size),u=0;p.data.length;)c=p.data.shift(),l.set(c,u),u+=c.byteLength;va.ts.videoPacketContainsKeyFrame(l)&&(n.firstKeyFrame=va.ts.parsePesTime(l),n.firstKeyFrame.type="video"),p.size=0}p.data.push(i),p.size+=i.byteLength}if(f&&n.firstKeyFrame)break;h+=188,d+=188}for(h=(d=t.byteLength)-188,f=!1;0<=h;)if(71!==t[h]||71!==t[d])h--,d--;else{if(i=t.subarray(h,d),"pes"===(r=va.ts.parseType(i,e.pid))&&(o=va.ts.parsePesType(i,e.table),s=va.ts.parsePayloadUnitStartIndicator(i),"video"===o&&s&&(a=va.ts.parsePesTime(i))&&(a.type="video",n.video.push(a),f=!0)),f)break;h-=188,d-=188}}(t,n,i),0===i.video.length&&delete i.video;break;case ms.ADTS_STREAM_TYPE:i.audio=[],function(t,e,n){for(var i,r,o,s,a=0,l=188,u=!1;l<t.byteLength;)if(71!==t[a]||71!==t[l])a++,l++;else{if(i=t.subarray(a,l),"pes"===va.ts.parseType(i,e.pid)&&(r=va.ts.parsePesType(i,e.table),o=va.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&o&&(s=va.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0)),u)break;a+=188,l+=188}for(a=(l=t.byteLength)-188,u=!1;0<=a;)if(71!==t[a]||71!==t[l])a--,l--;else{if(i=t.subarray(a,l),"pes"===va.ts.parseType(i,e.pid)&&(r=va.ts.parsePesType(i,e.table),o=va.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&o&&(s=va.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0)),u)break;a-=188,l-=188}}(t,n,i),0===i.audio.length&&delete i.audio}return i}Go=function(t,e){var n,i,r=((r=t)[0]==="I".charCodeAt(0)&&r[1]==="D".charCodeAt(0)&&r[2]==="3".charCodeAt(0)?function(t){for(var e,n=!1,i=0,r=null,o=null,s=0,a=0;3<=t.length-a;){switch(va.aac.parseType(t,a)){case"timed-metadata":if(t.length-a<10){n=!0;break}if((s=va.aac.parseId3TagSize(t,a))>t.length){n=!0;break}null===o&&(e=t.subarray(a,a+s),o=va.aac.parseAacTimestamp(e)),a+=s;break;case"audio":if(t.length-a<7){n=!0;break}if((s=va.aac.parseAdtsSize(t,a))>t.length){n=!0;break}null===r&&(e=t.subarray(a,a+s),r=va.aac.parseSampleRate(e)),i++,a+=s;break;default:a++}if(n)return null}if(null===r||null===o)return null;var l=9e4/r;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*i*l,pts:o+1024*i*l}]}}:ba)(t);return r&&(r.audio||r.video)?(t=e,(e=r).audio&&e.audio.length&&(void 0===(n=t)&&(n=e.audio[0].dts),e.audio.forEach(function(t){t.dts=ya(t.dts,n),t.pts=ya(t.pts,n),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4})),e.video&&e.video.length&&(void 0===(i=t)&&(i=e.video[0].dts),e.video.forEach(function(t){t.dts=ya(t.dts,i),t.pts=ya(t.pts,i),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4}),e.firstKeyFrame&&((e=e.firstKeyFrame).dts=ya(e.dts,i),e.pts=ya(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.dts/9e4)),r):null};var _a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ze=function(t,e,n){return e&&Ta(t.prototype,e),n&&Ta(t,n),t};function Ta(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var wa=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Sa=function(){for(var t,e,n,i=[[[],[],[],[],[]],[[],[],[],[],[]]],r=i[0],o=i[1],s=r[4],a=o[4],l=void 0,u=void 0,c=void 0,h=[],d=[],f=void 0,p=void 0,l=0;l<256;l++)d[(h[l]=l<<1^283*(l>>7))^l]=l;for(u=c=0;!s[u];u^=t||1,c=d[c]||1)for(n=(n=c^c<<1^c<<2^c<<3^c<<4)>>8^255&n^99,p=16843009*h[e=h[t=h[a[s[u]=n]=u]]]^65537*e^257*t^16843008*u,f=257*h[n]^16843008*n,l=0;l<4;l++)r[l][u]=f=f<<24^f>>>8,o[l][n]=p=p<<24^p>>>8;for(l=0;l<5;l++)r[l]=r[l].slice(0),o[l]=o[l].slice(0);return i},ka=null,Ea=(Ca.prototype.decrypt=function(t,e,n,i,r,o){for(var s,a,l=this._key[1],u=t^l[0],c=i^l[1],h=n^l[2],d=e^l[3],f=void 0,p=l.length/4-2,m=void 0,g=4,e=this._tables[1],y=e[0],v=e[1],b=e[2],_=e[3],T=e[4],m=0;m<p;m++)f=y[u>>>24]^v[c>>16&255]^b[h>>8&255]^_[255&d]^l[g],s=y[c>>>24]^v[h>>16&255]^b[d>>8&255]^_[255&u]^l[g+1],a=y[h>>>24]^v[d>>16&255]^b[u>>8&255]^_[255&c]^l[g+2],d=y[d>>>24]^v[u>>16&255]^b[c>>8&255]^_[255&h]^l[g+3],g+=4,u=f,c=s,h=a;for(m=0;m<4;m++)r[(3&-m)+o]=T[u>>>24]<<24^T[c>>16&255]<<16^T[h>>8&255]<<8^T[255&d]^l[g++],f=u,u=c,c=h,h=d,d=f},Ca);function Ca(t){_a(this,Ca),ka=ka||Sa(),this._tables=[[ka[0][0].slice(),ka[0][1].slice(),ka[0][2].slice(),ka[0][3].slice(),ka[0][4].slice()],[ka[1][0].slice(),ka[1][1].slice(),ka[1][2].slice(),ka[1][3].slice(),ka[1][4].slice()]];var e=void 0,n=void 0,i=void 0,r=void 0,o=void 0,s=this._tables[0][4],a=this._tables[1],l=t.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=t.slice(0),o=[],this._key=[r,o],e=l;e<4*l+28;e++)i=r[e-1],(e%l==0||8===l&&e%l==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],e%l==0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[e]=r[e-l]^i;for(n=0;e;n++,e--)i=r[3&n?e:e-4],o[n]=e<=4||n<4?i:a[0][s[i>>>24]]^a[1][s[i>>16&255]]^a[2][s[i>>8&255]]^a[3][s[255&i]]}var xa=(Aa.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},Aa.prototype.off=function(t,e){if(!this.listeners[t])return!1;e=this.listeners[t].indexOf(e);return this.listeners[t].splice(e,1),-1<e},Aa.prototype.trigger=function(t,e){var n=this.listeners[t];if(n)if(2===arguments.length)for(var i=n.length,r=0;r<i;++r)n[r].call(this,e);else for(var o=Array.prototype.slice.call(arguments,1),s=n.length,a=0;a<s;++a)n[a].apply(this,o)},Aa.prototype.dispose=function(){this.listeners={}},Aa.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},Aa);function Aa(){_a(this,Aa),this.listeners={}}var Oa,La=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Pa,Oa=xa),Pa.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},Pa.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},Pa);function Pa(){_a(this,Pa);var t=wa(this,Oa.call(this,xa));return t.jobs=[],t.delay=1,t.timeout_=null,t}function Da(t,e,n){for(var i,r,o,s,a=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),l=new Ea(Array.prototype.slice.call(e)),t=new Uint8Array(t.byteLength),u=new Int32Array(t.buffer),c=void 0,h=void 0,d=void 0,f=void 0,p=void 0,c=n[0],h=n[1],d=n[2],f=n[3],p=0;p<a.length;p+=4)i=Na(a[p]),r=Na(a[p+1]),o=Na(a[p+2]),s=Na(a[p+3]),l.decrypt(i,r,o,s,u,p),u[p]=Na(u[p]^c),u[p+1]=Na(u[p+1]^h),u[p+2]=Na(u[p+2]^d),u[p+3]=Na(u[p+3]^f),c=i,h=r,d=o,f=s;return t}var Na=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},ir=(Ia.prototype.decryptChunk_=function(e,n,i,r){return function(){var t=Da(e,n,i);r.set(t,e.byteOffset)}},ze(Ia,null,[{key:"STEP",get:function(){return 32e3}}]),Ia);function Ia(t,e,n,i){_a(this,Ia);var r=Ia.STEP,o=new Int32Array(t.buffer),s=new Uint8Array(t.byteLength),a=0;for(this.asyncStream_=new La,this.asyncStream_.push(this.decryptChunk_(o.subarray(a,a+r),e,n,s)),a=r;a<o.length;a+=r)n=new Uint32Array([Na(o[a-4]),Na(o[a-3]),Na(o[a-2]),Na(o[a-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(a,a+r),e,n,s));this.asyncStream_.push(function(){var t;i(null,(t=s).subarray(0,t.byteLength-t[t.byteLength-1]))})}var ja=function(t,e){return/^[a-z]+:/i.test(e)?e:(/\/\//i.test(t)||(t=tr.buildAbsoluteURL(d.location.href,t)),tr.buildAbsoluteURL(t,e))},Ma=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Wo=function(t,e,n){return e&&Ra(t.prototype,e),n&&Ra(t,n),t};function Ra(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ua(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(n):void 0}if(t=Object.getPrototypeOf(t),null!==t)return Ua(t,e,n)}function qa(r,o){["AUDIO","SUBTITLES"].forEach(function(t){for(var e in r.mediaGroups[t])for(var n in r.mediaGroups[t][e]){var i=r.mediaGroups[t][e][n];o(i,t,e,n)}})}function Ba(t,e){var n=Wa(t,{});if(!(t=n.playlists[e.uri]))return null;if(t.segments&&e.segments&&t.segments.length===e.segments.length&&t.mediaSequence===e.mediaSequence)return null;var i=Wa(t,e);t.segments&&(i.segments=function(t,e,n){var i=e.slice();n=n||0;for(var r=Math.min(t.length,e.length+n),o=n;o<r;o++)i[o-n]=Wa(t[o],i[o-n]);return i}(t.segments,e.segments,e.mediaSequence-t.mediaSequence)),i.segments.forEach(function(t){var e;e=t,t=i.resolvedUri,e.resolvedUri||(e.resolvedUri=ja(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=ja(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=ja(t,e.map.uri))});for(var r=0;r<n.playlists.length;r++)n.playlists[r].uri===e.uri&&(n.playlists[r]=i);return n.playlists[e.uri]=i,n}function Fa(t){for(var e=t.playlists.length;e--;){var n=t.playlists[e];(t.playlists[n.uri]=n).resolvedUri=ja(t.uri,n.uri),n.id=e,n.attributes||(n.attributes={},Ga.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}}function $a(e){qa(e,function(t){t.uri&&(t.resolvedUri=ja(e.uri,t.uri))})}function za(t,e){var n=t.segments[t.segments.length-1];return e&&n&&n.duration?1e3*n.duration:500*(t.targetDuration||10)}var ne=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Ha=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Va=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Wa=Ji.mergeOptions,$t=Ji.EventTarget,Ga=Ji.log,Ya=(ne(Ka,$t),Wo(Ka,[{key:"playlistRequestError",value:function(t,e,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[e],status:t.status,message:"HLS playlist request error at URL: "+e,responseText:t.responseText,code:500<=t.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(t,e){var n=this;this.request=null,this.state="HAVE_METADATA";var i=new pr;i.push(t.responseText),i.end(),i.manifest.uri=e,i.manifest.attributes=i.manifest.attributes||{};e=Ba(this.master,i.manifest);this.targetDuration=i.manifest.targetDuration,e?(this.master=e,this.media_=this.master.playlists[i.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(d.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=d.setTimeout(function(){n.trigger("mediaupdatetimeout")},za(this.media(),!!e))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),d.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){var t;this.request&&(t=this.request,this.request=null,t.onreadystatechange=null,t.abort())}},{key:"media",value:function(n){var i=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}var t=!this.media_||n.uri!==this.media_.uri;if(this.master.playlists[n.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(t&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(t){if(this.state="SWITCHING_MEDIA",this.request){if(ja(this.master.uri,n.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:ja(this.master.uri,n.uri),withCredentials:this.withCredentials},function(t,e){if(i.request){if(t)return i.playlistRequestError(i.request,n.uri,r);i.haveMetadata(e,n.uri),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),d.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(t){var e=this;d.clearTimeout(this.mediaUpdateTimeout);var n=this.media();t?(t=n?n.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=d.setTimeout(function(){return e.load()},t)):this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var n=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,e){if(n.request){if(n.request=null,t)return n.error={status:e.status,message:"HLS playlist request error at URL: "+n.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");t=new pr;return(t.push(e.responseText),t.end(),n.state="HAVE_MASTER",t.manifest.uri=n.srcUrl,t.manifest.playlists)?(n.master=t.manifest,Fa(n.master),$a(n.master),n.trigger("loadedplaylist"),void(n.request||n.media(t.manifest.playlists[0]))):(n.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:d.location.href,playlists:[{uri:n.srcUrl,id:0}]},n.master.playlists[n.srcUrl]=n.master.playlists[0],n.master.playlists[0].resolvedUri=n.srcUrl,n.master.playlists[0].attributes=n.master.playlists[0].attributes||{},n.haveMetadata(e,n.srcUrl),n.trigger("loadedmetadata"))}})}}]),Ka);function Ka(t,e,n){Ma(this,Ka);var i=Ha(this,(Ka.__proto__||Object.getPrototypeOf(Ka)).call(this));if(i.srcUrl=t,i.hls_=e,i.withCredentials=n,!i.srcUrl)throw new Error("A non-empty playlist URL is required");return i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:ja(i.master.uri,i.media().uri),withCredentials:i.withCredentials},function(t,e){if(i.request)return t?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)}))}),i}function Xa(t,e,n){var i;return void 0===e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence?0:(i=function(t,e){var n=0,i=e-t.mediaSequence,r=t.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=t.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(t,e)).precise?i.result:(e=function(t,e){for(var n,i=0,r=e-t.mediaSequence;r<t.segments.length;r++){if(void 0!==(n=t.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=n.duration,void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(t,e)).precise?e.result:i.result+n}function Za(t,e,n){if(!t)return 0;if("number"!=typeof n&&(n=0),void 0===e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return d.Infinity}return Xa(t,e,n)}function Qa(t,e,n){var i,r=0;if(n<e&&(e=(i=[n,e])[0],n=i[1]),e<0){for(var o=e;o<Math.min(0,n);o++)r+=t.targetDuration;e=0}for(var s=e;s<n;s++)r+=t.segments[s].duration;return r}function Ja(t){if(!t.segments.length)return 0;for(var e=t.segments.length-1,n=t.segments[e].duration||t.targetDuration,i=n+2*t.targetDuration;e--&&!(i<=(n+=t.segments[e].duration)););return Math.max(0,e)}function tl(t,e,n){return t&&t.segments?t.endList?Za(t):null===e?null:(e=e||0,n=n?Ja(t):t.segments.length,Xa(t,t.mediaSequence+n,e)):null}function el(t){return t-Math.floor(t)==0}function nl(t){return t.excludeUntil&&t.excludeUntil>Date.now()}function il(t){return t.excludeUntil&&t.excludeUntil===1/0}function rl(t){var e=nl(t);return!t.disabled&&!e}function ol(t,e){return e.attributes&&e.attributes[t]}function sl(t,e){if(1===t.playlists.length)return!0;var n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter(function(t){return!!rl(t)&&(t.attributes.BANDWIDTH||0)<n}).length}function al(){return function t(e,i){e=El({timeout:45e3},e);var n=t.beforeRequest||Ji.Hls.xhr.beforeRequest;!n||"function"!=typeof n||(n=n(e))&&(e=n);var r=kl(e,function(t,e){var n=r.response;!t&&n&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=n.byteLength||n.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),e.headers&&(r.responseHeaders=e.headers),t&&"ETIMEDOUT"===t.code&&(r.timedout=!0),t||r.aborted||200===e.statusCode||206===e.statusCode||0===e.statusCode||(t=new Error("XHR Failed with a response of: "+(r&&(n||r.responseText)))),i(t,r)}),o=r.abort;return r.abort=function(){return r.aborted=!0,o.apply(r,arguments)},r.uri=e.uri,r.requestTime=Date.now(),r}}function ll(t,e){return t=t.toString(16),"00".substring(0,2-t.length)+t+(e%2?" ":"")}function ul(t){return 32<=t&&t<126?String.fromCharCode(t):"."}function cl(n){var i={};return Object.keys(n).forEach(function(t){var e=n[t];ArrayBuffer.isView(e)?i[t]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:i[t]=e}),i}function hl(t){var e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")}function dl(t){for(var e=Array.prototype.slice.call(t),n="",i=0;i<e.length/16;i++)n+=e.slice(16*i,16*i+16).map(ll).join("")+" "+e.slice(16*i,16*i+16).map(ul).join("")+"\n";return n}function fl(t,e){var n=[],i=void 0;if(t&&t.length)for(i=0;i<t.length;i++)e(t.start(i),t.end(i))&&n.push([t.start(i),t.end(i)]);return Ji.createTimeRanges(n)}function pl(t,n){return fl(t,function(t,e){return t-1/30<=n&&n<=e+1/30})}function ml(t,e){return fl(t,function(t){return e<=t-1/30})}function gl(t){var e=[];if(!t||!t.length)return"";for(var n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")}function yl(t){for(var e=[],n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e}function vl(t,e,n){var i,r=void 0;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime<=e&&i.endTime>=t&&n.removeCue(i)}function bl(t,e,n){var r=d.WebKitDataCue||d.VTTCue;if(e&&e.forEach(function(t){var e=t.stream;this.inbandTextTracks_[e].addCue(new r(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},t),n){var i=Cl(t.mediaSource_.duration);if(n.forEach(function(t){var i=t.cueTime+this.timestampOffset;t.frames.forEach(function(t){var e,n=new r(i,i,t.value||t.url||t.data||"");n.frame=t,n.value=t,e=n,Object.defineProperties(e.frame,{id:{get:function(){return Ji.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Ji.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Ji.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}}),this.metadataTrack_.addCue(n)},this)},t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){for(var o=t.metadataTrack_.cues,s=[],a=0;a<o.length;a++)o[a]&&s.push(o[a]);var l=s.reduce(function(t,e){var n=t[e.startTime]||[];return n.push(e),t[e.startTime]=n,t},{}),u=Object.keys(l).sort(function(t,e){return Number(t)-Number(e)});u.forEach(function(t,e){var t=l[t],n=Number(u[e+1])||i;t.forEach(function(t){t.endTime=n})})}}}var _l=Ji.createTimeRange,fn=function(t,e){if(el(e))return e+.1*t;for(var n=e.toString().split(".")[1].length,i=1;i<=n;i++){var r=Math.pow(10,i),o=e*r;if(el(o)||i===n)return(o+t)/r}},Tl=fn.bind(null,1),wl=fn.bind(null,-1),Sl={duration:Za,seekable:function(t,e){var n=e||0,e=tl(t,e,!0);return null===e?_l():_l(n,e)},safeLiveIndex:Ja,getMediaInfoForTime:function(t,e,n,i){var r=void 0,o=void 0,s=t.segments.length,a=e-i;if(a<0){if(0<n)for(r=n-1;0<=r;r--)if(o=t.segments[r],0<(a+=wl(o.duration)))return{mediaIndex:r,startTime:i-Qa(t,n,r)};return{mediaIndex:0,startTime:e}}if(n<0){for(r=n;r<0;r++)if((a-=t.targetDuration)<0)return{mediaIndex:0,startTime:e};n=0}for(r=n;r<s;r++)if(o=t.segments[r],(a-=Tl(o.duration))<0)return{mediaIndex:r,startTime:i+Qa(t,n,r)};return{mediaIndex:s-1,startTime:e}},isEnabled:rl,isDisabled:function(t){return t.disabled},isBlacklisted:nl,isIncompatible:il,playlistEnd:tl,isAes:function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},isFmp4:function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].map)return!0;return!1},hasAttribute:ol,estimateSegmentRequestTime:function(t,e,n,i){var r=3<arguments.length&&void 0!==i?i:0;return ol("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-8*r)/e:NaN},isLowestEnabledRendition:sl},kl=Ji.xhr,El=Ji.mergeOptions,oe=Object.freeze({createTransferableMessage:cl,initSegmentId:hl,hexDump:dl,tagDump:function(t){t=t.bytes;return dl(t)},textRanges:function(t){for(var e,n,i="",r=void 0,r=0;r<t.length;r++)i+=(n=r,(e=t).start(n)+"-"+e.end(n)+" ");return i}}),Cl=function(t){return isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t},ze="undefined"!=typeof window?window:{},xl="undefined"==typeof Symbol?"__target":Symbol(),Al="application/javascript",Ol=ze.BlobBuilder||ze.WebKitBlobBuilder||ze.MozBlobBuilder||ze.MSBlobBuilder,Ll=ze.URL||ze.webkitURL||Ll&&Ll.msURL,Pl=ze.Worker;function Dl(o,s){return function(t){var e=this;if(!s)return new Pl(o);if(Pl&&!t){t=Ml(s.toString().replace(/^function.+?{/,"").slice(0,-1));return this[xl]=new Pl(t),n=this[xl],t=t,n&&t&&(i=n.terminate,n.objURL=t,n.terminate=function(){n.objURL&&Ll.revokeObjectURL(n.objURL),i.call(n)}),this[xl]}var n,i,r={postMessage:function(t){e.onmessage&&setTimeout(function(){e.onmessage({data:t,target:r})})}};s.call(r),this.postMessage=function(t){setTimeout(function(){r.onmessage({data:t,target:e})})},this.isThisThread=!0}}if(Pl){var Nl,Il=Ml("self.onmessage = function () {}"),jl=new Uint8Array(1);try{(Nl=new Pl(Il)).postMessage(jl,[jl.buffer])}catch(t){Pl=null}finally{Ll.revokeObjectURL(Il),Nl&&Nl.terminate()}}function Ml(e){try{return Ll.createObjectURL(new Blob([e],{type:Al}))}catch(t){var n=new Ol;return n.append(e),Ll.createObjectURL(n.getBlob(type))}}function Rl(t){return t.map(function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,n){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})}function Ul(t){var e,n=0<arguments.length&&void 0!==t?t:"",i={codecCount:0};return i.codecCount=n.split(",").length,i.codecCount=i.codecCount||2,(e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(n))&&(i.videoCodec=e[2],i.videoObjectTypeIndicator=e[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(n),i.audioProfile=i.audioProfile&&i.audioProfile[2],i}function ql(t,e,n){return t+"/"+e+'; codecs="'+n.filter(function(t){return!!t}).join(", ")+'"'}function Bl(t,e){var n=(s=e).segments&&s.segments.length&&s.segments[0].map?"mp4":"mp2t",i=function(t){t=t.attributes||{};return t.CODECS?Ul(t.CODECS):zl}(e),r=e.attributes||{},o=!0,s=!1;if(!e)return[];if(t.mediaGroups.AUDIO&&r.AUDIO){var a=t.mediaGroups.AUDIO[r.AUDIO];if(a)for(var l in o=!(s=!0),a)if(!a[l].uri&&!a[l].playlists){o=!0;break}}return s&&!i.audioProfile&&(o||(i.audioProfile=function(t,e){if(!t.mediaGroups.AUDIO||!e)return null;var n,i=t.mediaGroups.AUDIO[e];if(!i)return null;for(n in i){var r=i[n];if(r.default&&r.playlists)return Ul(r.playlists[0].attributes.CODECS).audioProfile}return null}(t,r.AUDIO)),i.audioProfile||(Ji.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),i.audioProfile=zl.audioProfile)),t={},i.videoCodec&&(t.video=""+i.videoCodec+i.videoObjectTypeIndicator),i.audioProfile&&(t.audio="mp4a.40."+i.audioProfile),r=ql("audio",n,[t.audio]),i=ql("video",n,[t.video]),n=ql("video",n,[t.video,t.audio]),s?!o&&t.video?[i,r]:o||t.video?[n,r]:[r,r]:t.video?[n]:[r]}function Fl(t,e){var n,i=t.addSourceBuffer(e),r=Object.create(null);for(n in r.updating=!1,r.realBuffer_=i)!function(e){"function"==typeof i[e]?r[e]=function(){return i[e].apply(i,arguments)}:void 0===r[e]&&Object.defineProperty(r,e,{get:function(){return i[e]},set:function(t){return i[e]=t}})}(n);return r}var $l=new Dl("./transmuxer-worker.worker.js",function(t,e){var ge=this;!function(){var s,e,n,i,r,o,a,l,u,c,h,d,f,p,m,g,y,v,b,_,T,w,S,k,E,C,x,A,O,L,P,D,N,I,j,M,R,U,q,B=Math.pow(2,32)-1;!function(){if(T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var t in T)T.hasOwnProperty(t)&&(T[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);w=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),S=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),C=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),x={video:E,audio:C},L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),P=new Uint8Array([0,0,0,0,0,0,0,0]),D=P,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),I=P,A=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),s=function(t){for(var e,n=[],i=0,r=1;r<arguments.length;r++)n.push(arguments[r]);for(r=n.length;r--;)i+=n[r].byteLength;for(e=new Uint8Array(i+8),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(0,e.byteLength),e.set(t,4),r=0,i=8;r<n.length;r++)e.set(n[r],i),i+=n[r].byteLength;return e},e=function(){return s(T.dinf,s(T.dref,L))},n=function(t){return s(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},p=function(t){return s(T.hdlr,x[t])},f=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),s(T.mdhd,e)},d=function(t){return s(T.mdia,f(t),p(t.type),o(t))},r=function(t){return s(T.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},o=function(t){return s(T.minf,"video"===t.type?s(T.vmhd,A):s(T.smhd,O),e(),g(t))},wt=function(t,e){for(var n=[],i=e.length;i--;)n[i]=v(e[i]);return s.apply(null,[T.moof,r(t)].concat(n))},a=function(t){for(var e=t.length,n=[];e--;)n[e]=c(t[e]);return s.apply(null,[T.moov,u(4294967295)].concat(n).concat(l(t)))},l=function(t){for(var e=t.length,n=[];e--;)n[e]=b(t[e]);return s.apply(null,[T.mvex].concat(n))},u=function(t){t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(T.mvhd,t)},m=function(t){for(var e,n=t.samples||[],i=new Uint8Array(4+n.length),r=0;r<n.length;r++)e=n[r].flags,i[r+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return s(T.sdtp,i)},g=function(t){return s(T.stbl,y(t),s(T.stts,I),s(T.stsc,D),s(T.stsz,N),s(T.stco,P))},y=function(t){return s(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===t.type?j:M)(t))},j=function(t){for(var e=t.sps||[],n=t.pps||[],i=[],r=[],o=0;o<e.length;o++)i.push((65280&e[o].byteLength)>>>8),i.push(255&e[o].byteLength),i=i.concat(Array.prototype.slice.call(e[o]));for(o=0;o<n.length;o++)r.push((65280&n[o].byteLength)>>>8),r.push(255&n[o].byteLength),r=r.concat(Array.prototype.slice.call(n[o]));return s(T.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(T.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([e.length]).concat(i).concat([n.length]).concat(r))),s(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},M=function(t){return s(T.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),n(t))},h=function(t){t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return s(T.tkhd,t)},v=function(t){var e,n=s(T.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),i=Math.floor(t.baseMediaDecodeTime/(1+B)),r=Math.floor(t.baseMediaDecodeTime%(1+B)),i=s(T.tfdt,new Uint8Array([1,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r]));return"audio"===t.type?(e=_(t,92),s(T.traf,n,i,e)):(r=m(t),e=_(t,r.length+92),s(T.traf,n,i,e,r))},c=function(t){return t.duration=t.duration||4294967295,s(T.trak,h(t),d(t))},b=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),s(T.trex,e)},R=function(t,e){var n=0,i=0,r=0,o=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(i=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(o=8)),[0,0,n|i|r|o,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},U=function(t,e){for(var n,i=t.samples||[],r=R(i,e+=20+16*i.length),o=0;o<i.length;o++)n=i[o],r=r.concat([(4278190080&n.duration)>>>24,(16711680&n.duration)>>>16,(65280&n.duration)>>>8,255&n.duration,(4278190080&n.size)>>>24,(16711680&n.size)>>>16,(65280&n.size)>>>8,255&n.size,n.flags.isLeading<<2|n.flags.dependsOn,n.flags.isDependedOn<<6|n.flags.hasRedundancy<<4|n.flags.paddingValue<<1|n.flags.isNonSyncSample,61440&n.flags.degradationPriority,15&n.flags.degradationPriority,(4278190080&n.compositionTimeOffset)>>>24,(16711680&n.compositionTimeOffset)>>>16,(65280&n.compositionTimeOffset)>>>8,255&n.compositionTimeOffset]);return s(T.trun,new Uint8Array(r))},q=function(t,e){for(var n,i=t.samples||[],r=R(i,e+=20+8*i.length),o=0;o<i.length;o++)n=i[o],r=r.concat([(4278190080&n.duration)>>>24,(16711680&n.duration)>>>16,(65280&n.duration)>>>8,255&n.duration,(4278190080&n.size)>>>24,(16711680&n.size)>>>16,(65280&n.size)>>>8,255&n.size]);return s(T.trun,new Uint8Array(r))},_=function(t,e){return("audio"===t.type?q:U)(t,e)};var F={ftyp:i=function(){return s(T.ftyp,w,S,w,k)},mdat:function(t){return s(T.mdat,t)},moof:wt,moov:a,initSegment:function(t){var e=i(),n=a(t),t=new Uint8Array(e.byteLength+n.byteLength);return t.set(e),t.set(n,e.byteLength),t}},$=function(t){return t>>>0},z=function(t,e){var n,i,r,o=[];if(!e.length)return null;for(n=0;n<t.byteLength;)i=$(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),r=H(t.subarray(n+4,n+8)),i=1<i?n+i:t.byteLength,r===e[0]&&(1===e.length?o.push(t.subarray(n+8,i)):(r=z(t.subarray(n+8,i),e.slice(1))).length&&(o=o.concat(r))),n=i;return o},H=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3])},t=function(t){return z(t,["moov","trak"]).reduce(function(t,e){var n,i,r=z(e,["tkhd"])[0];return r?(n=r[0],r=$(r[i=0===n?12:20]<<24|r[1+i]<<16|r[2+i]<<8|r[3+i]),(e=z(e,["mdia","mdhd"])[0])?(i=0===e[0]?12:20,t[r]=$(e[i]<<24|e[1+i]<<16|e[2+i]<<8|e[3+i]),t):null):null},{})},V=function(i,t){var t=z(t,["moof","traf"]),t=[].concat.apply([],t.map(function(n){return z(n,["tfhd"]).map(function(t){var e=$(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),t=i[e]||9e4,e=z(n,["tfdt"]).map(function(t){var e=t[0],n=$(t[4]<<24|t[5]<<16|t[6]<<8|t[7]);return 1===e&&(n*=Math.pow(2,32),n+=$(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),n})[0];return(e||1/0)/t})})),t=Math.min.apply(null,t);return isFinite(t)?t:0},W=function(t){var t=z(t,["moov","trak"]),i=[];return t.forEach(function(t){var e=z(t,["mdia","hdlr"]),n=z(t,["tkhd"]);e.forEach(function(t,e){t=H(t.subarray(8,12)),e=n[e];"vide"===t&&(e=0===(e=new DataView(e.buffer,e.byteOffset,e.byteLength)).getUint8(0)?e.getUint32(12):e.getUint32(20),i.push(e))})}),i},G={findBox:z,parseType:H,timescale:t,startTime:V,videoTrackIds:W};(Tt=function(){this.init=function(){var o={};this.on=function(t,e){o[t]||(o[t]=[]),o[t]=o[t].concat(e)},this.off=function(t,e){return!!o[t]&&(e=o[t].indexOf(e),o[t]=o[t].slice(),o[t].splice(e,1),-1<e)},this.trigger=function(t){var e,n,i,r=o[t];if(r)if(2===arguments.length)for(n=r.length,e=0;e<n;++e)r[e].call(this,arguments[1]);else{for(i=[],e=arguments.length,e=1;e<arguments.length;++e)i.push(arguments[e]);for(n=r.length,e=0;e<n;++e)r[e].apply(this,i)}},this.dispose=function(){o={}}}}).prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},Tt.prototype.push=function(t){this.trigger("data",t)},Tt.prototype.flush=function(t){this.trigger("done",t)};var Y=function(t){for(var e,n=[],i=[],r=n.byteLength=0;r<t.length;r++)"access_unit_delimiter_rbsp"===(e=t[r]).nalUnitType?(n.length&&(n.duration=e.dts-n.dts,i.push(n)),(n=[e]).byteLength=e.data.byteLength,n.pts=e.pts,n.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(n.keyFrame=!0),n.duration=e.dts-n.dts,n.byteLength+=e.data.byteLength,n.push(e));return i.length&&(!n.duration||n.duration<=0)&&(n.duration=i[i.length-1].duration),i.push(n),i},K=function(t){var e,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(n=t[e]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},X=function(t){var e;return!t[0][0].keyFrame&&1<t.length&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},Z=function(t,e){for(var n,i,r,o,s=e||0,a=[],l=0;l<t.length;l++)for(i=t[l],n=0;n<i.length;n++)o=i[n],r=o,o=void 0,(o={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=s,o.compositionTimeOffset=r.pts-r.dts,o.duration=r.duration,o.size=4*r.length,o.size+=r.byteLength,r.keyFrame&&(o.flags.dependsOn=2,o.flags.isNonSyncSample=0),s+=o.size,a.push(o);return a},Q=function(t){for(var e,n,i,r,o,s=0,a=t.byteLength,l=t.nalCount,u=new Uint8Array(a+4*l),c=new DataView(u.buffer),h=0;h<t.length;h++)for(i=t[h],e=0;e<i.length;e++)for(r=i[e],n=0;n<r.length;n++)o=r[n],c.setUint32(s,o.data.byteLength),s+=4,u.set(o.data,s),s+=o.data.byteLength;return u},J=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},tt=function(t,e){var n=t.minSegmentDts;return e||(n-=t.timelineStartInfo.dts),e=t.timelineStartInfo.baseMediaDecodeTime,e+=n,e=Math.max(0,e),"audio"===t.type&&(e*=t.samplerate/9e4,e=Math.floor(e)),e},et=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},nt=function(t){for(var e=0,n={payloadType:-1,payloadSize:0},i=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)i+=255,e++;for(i+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=t.subarray(e,e+r);break}e+=r,r=i=0}return n},it=function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},rt=function(t,e){var n,i,r,o,s=[];if(!(64&e[0]))return s;for(i=31&e[0],n=0;n<i;n++)o={type:3&e[2+(r=3*n)],pts:t},4&e[2+r]&&(o.ccData=e[3+r]<<8|e[4+r],s.push(o));return s},ot=function(t){for(var e,n,i=t.byteLength,r=[],o=1;o<i-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);for(var s=0,o=0;o<e;s++,o++)s===r[0]&&(s++,r.shift()),n[o]=t[s];return n},st=4;function at(t){return null===t?"":(t=ut[t]||t,String.fromCharCode(t))}function lt(){for(var t=[],e=15;e--;)t.push("");return t}((wt=function t(){t.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new ht(0,0),new ht(0,1),new ht(1,0),new ht(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)}).prototype=new(ie=Tt)).push=function(t){var e,n;if("sei_rbsp"===t.nalUnitType&&(e=nt(t.escapedRBSP),e.payloadType===st&&(n=it(e))))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=rt(t.pts,n),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},wt.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},wt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},wt.prototype.dispatchCea608Packet=function(t){this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},wt.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},wt.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)};var ut={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ct=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ht=function t(e,n){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,n,i,r,o=32639&t.ccData;o!==this.lastControlCode_?(4096==(61440&o)?this.lastControlCode_=o:o!==this.PADDING_&&(this.lastControlCode_=null),e=o>>>8,n=255&o,o===this.PADDING_||(o===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":o===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=t.pts):o===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(t.pts)):o===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(t.pts)):o===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(t.pts)):o===this.CARRIAGE_RETURN_?(this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts):o===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):o===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(t.pts),this.displayed_=lt()):o===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=lt():o===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=lt()),this.mode_="paintOn",this.startPts_=t.pts):this.isSpecialCharacter(e,n)?(i=at((e=(3&e)<<8)|n),this[this.mode_](t.pts,i),this.column_++):this.isExtCharacter(e,n)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),i=at((e=(3&e)<<8)|n),this[this.mode_](t.pts,i),this.column_++):this.isMidRowCode(e,n)?(this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&n)&&this.addFormatting(t.pts,["i"]),1==(1&n)&&this.addFormatting(t.pts,["u"])):this.isOffsetControlCode(e,n)?this.column_+=3&n:this.isPAC(e,n)?(r=ct.indexOf(7968&o),"rollUp"===this.mode_&&this.setRollUp(t.pts,r),r!==this.row_&&(this.clearFormatting(t.pts),this.row_=r),1&n&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&o)&&(this.column_=4*((14&o)>>1)),this.isColorPAC(n)&&14==(14&n)&&this.addFormatting(t.pts,["i"])):this.isNormalChar(e)&&(0===n&&(n=null),i=at(e),i+=at(n),this[this.mode_](t.pts,i),this.column_+=i.length))):this.lastControlCode_=null}};function dt(t,e){var n=1;for(e<t&&(n=-1);4294967296<Math.abs(e-t);)t+=8589934592*n;return t}ht.prototype=new ie,ht.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){return t.trim()}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},ht.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=lt(),this.nonDisplayed_=lt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ht.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ht.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&48<=e&&e<=63},ht.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&32<=e&&e<=63},ht.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&32<=e&&e<=47},ht.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&33<=e&&e<=35},ht.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&64<=e&&e<=127},ht.prototype.isColorPAC=function(t){return 64<=t&&t<=79||96<=t&&t<=127},ht.prototype.isNormalChar=function(t){return 32<=t&&t<=127},ht.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=lt(),this.displayed_=lt()),void 0!==e&&e!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[e-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},ht.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);e=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,e)},ht.prototype.clearFormatting=function(t){var e;this.formatting_.length&&(e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},""),this.formatting_=[],this[this.mode_](t,e))},ht.prototype.popOn=function(t,e){var n=this.nonDisplayed_[this.row_];n+=e,this.nonDisplayed_[this.row_]=n},ht.prototype.rollUp=function(t,e){var n=this.displayed_[this.row_];n+=e,this.displayed_[this.row_]=n},ht.prototype.shiftRowsUp_=function(){for(var t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},ht.prototype.paintOn=function(t,e){var n=this.displayed_[this.row_];n+=e,this.displayed_[this.row_]=n};var t={CaptionStream:wt,Cea608Stream:ht},ft={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function pt(t,e,n){for(var i="",r=e;r<n;r++)i+="%"+("00"+t[r].toString(16)).slice(-2);return i}function mt(t,e,n){return decodeURIComponent(pt(t,e,n))}function gt(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}(V=function t(e){var n,i;t.prototype.init.call(this),this.type_=e,this.push=function(t){t.type===this.type_&&(void 0===i&&(i=t.dts),t.dts=dt(t.dts,i),t.pts=dt(t.pts,i),n=t.dts,this.trigger("data",t))},this.flush=function(){i=n,this.trigger("done")},this.discontinuity=function(){n=i=void 0}}).prototype=new ie;var W=V,yt={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=mt(t.data,1,e),t.value=mt(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=mt(t.data,1,e),t.url=mt(t.data,e+1,t.data.length);break}},PRIV:function(t){for(var e,n=0;n<t.data.length;n++)if(0===t.data[n]){t.owner=(e=t.data,unescape(pt(e,0,n)));break}t.privateData=t.data.subarray(n+1),t.data=t.privateData}},vt=function(t){var e,l={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},u=0,c=[],h=0;if(vt.prototype.init.call(this),this.dispatchType=ft.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(e=0;e<l.descriptor.length;e++)this.dispatchType+=("00"+l.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,n,i,r,o,s,a;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(h=0,c.length=0),0===c.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))l.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(t),h+=t.data.byteLength,1===c.length&&(u=gt(t.data.subarray(6,10)),u+=10),!(h<u)){for(e={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},r=0;r<u;)e.data.set(c[0].data.subarray(0,u-r),r),r+=c[0].data.byteLength,h-=c[0].data.byteLength,c.shift();n=10,64&e.data[5]&&(n+=4,n+=gt(e.data.subarray(10,14)),u-=gt(e.data.subarray(16,20)));do{if((i=gt(e.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}while((a={id:String.fromCharCode(e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]),data:e.data.subarray(n+10,n+i+10)}).key=a.id,yt[a.id]&&(yt[a.id](a),"com.apple.streaming.transportStreamTimestamp"===a.owner&&(s=(1&(o=a.data)[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2,s*=4,s+=3&o[7],a.timeStamp=s,void 0===e.pts&&void 0===e.dts&&(e.pts=a.timeStamp,e.dts=a.timeStamp),this.trigger("timestamp",a))),e.frames.push(a),n+=10,(n+=i)<u);this.trigger("data",e)}}};vt.prototype=new ie;var bt,_t,Tt=vt,wt=W,St=function(){var r=new Uint8Array(188),o=0;St.prototype.init.call(this),this.push=function(t){var e,n=0,i=188;for(o?((e=new Uint8Array(t.byteLength+o)).set(r.subarray(0,o)),e.set(t,o),o=0):e=t;i<e.byteLength;)71!==e[n]||71!==e[i]?(n++,i++):(this.trigger("data",e.subarray(n,i)),n+=188,i+=188);n<e.byteLength&&(r.set(e.subarray(n),0),o=e.byteLength-n)},this.flush=function(){188===o&&71===r[0]&&(this.trigger("data",r),o=0),this.trigger("done")}};St.prototype=new ie,(bt=function(){var i,r,o,s;bt.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=void 0,i=function(t,e){var n=0;e.payloadUnitStartIndicator&&(n+=t[n]+1),("pat"===e.type?r:o)(t.subarray(n),e)},r=function(t,e){e.section_number=t[7],e.last_section_number=t[8],s.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=s.pmtPid},o=function(t,e){var n,i;if(1&t[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,i=12+((15&t[10])<<8|t[11]);i<n;){var r=t[i],o=(31&t[i+1])<<8|t[i+2];r===ft.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=o:r===ft.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=o:r===ft.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][o]=r),i+=5+((15&t[i+3])<<8|t[i+4])}e.programMapTable=s.programMapTable}},this.push=function(t){var e={},n=4;if(e.payloadUnitStartIndicator=!!(64&t[1]),e.pid=31&t[1],e.pid<<=8,e.pid|=t[2],1<(48&t[3])>>>4&&(n+=t[n]+1),0===e.pid)e.type="pat",i(t.subarray(n),e),this.trigger("data",e);else if(e.pid===this.pmtPid)for(e.type="pmt",i(t.subarray(n),e),this.trigger("data",e);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,n,e]):this.processPes_(t,n,e)},this.processPes_=function(t,e,n){n.pid===this.programMapTable.video?n.streamType=ft.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=ft.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(e),this.trigger("data",n)}}).prototype=new ie,bt.STREAM_TYPES={h264:27,adts:15},(_t=function(){function i(t,e,n){var i,r,o,s,a=new Uint8Array(t.size),l={type:e},u=0,c=0;if(t.data.length&&!(t.size<9)){for(l.trackId=t.data[0].pid,u=0;u<t.data.length;u++)i=t.data[u],a.set(i.data,c),c+=i.data.byteLength;r=a,(o=l).packetLength=6+(r[4]<<8|r[5]),o.dataAlignmentIndicator=0!=(4&r[6]),192&(s=r[7])&&(o.pts=(14&r[9])<<27|(255&r[10])<<20|(254&r[11])<<12|(255&r[12])<<5|(254&r[13])>>>3,o.pts*=4,o.pts+=(6&r[13])>>>1,o.dts=o.pts,64&s&&(o.dts=(14&r[14])<<27|(255&r[15])<<20|(254&r[16])<<12|(255&r[17])<<5|(254&r[18])>>>3,o.dts*=4,o.dts+=(6&r[18])>>>1)),o.data=r.subarray(9+r[8]),e="video"===e||l.packetLength<=t.size,(n||e)&&(t.size=0,t.data.length=0),e&&h.trigger("data",l)}}var h=this,r={data:[],size:0},o={data:[],size:0},s={data:[],size:0};_t.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var t,e;switch(n.streamType){case ft.H264_STREAM_TYPE:case ft.H264_STREAM_TYPE:t=r,e="video";break;case ft.ADTS_STREAM_TYPE:t=o,e="audio";break;case ft.METADATA_STREAM_TYPE:t=s,e="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&i(t,e,!0),t.data.push(n),t.size+=n.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},e=n.programMapTable;null!==e.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),h.trigger("data",t)}})[n.type]()},this.flush=function(){i(r,"video"),i(o,"audio"),i(s,"timed-metadata"),this.trigger("done")}}).prototype=new ie;var kt,Et={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:St,TransportParseStream:bt,ElementaryStream:_t,TimestampRolloverStream:wt,CaptionStream:t.CaptionStream,Cea608Stream:t.Cea608Stream,MetadataStream:Tt};for(kt in ft)ft.hasOwnProperty(kt)&&(Et[kt]=ft[kt]);var Ct=Et,xt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],At=function(){var l;At.prototype.init.call(this),this.push=function(t){var e,n,i,r,o,s=0,a=0;if("audio"===t.type)for(l?(i=l,(l=new Uint8Array(i.byteLength+t.data.byteLength)).set(i),l.set(t.data,i.byteLength)):l=t.data;s+5<l.length;)if(255===l[s]&&240==(246&l[s+1])){if(e=2*(1&~l[s+1]),n=(3&l[s+3])<<11|l[s+4]<<3|(224&l[s+5])>>5,o=9e4*(r=1024*(1+(3&l[s+6])))/xt[(60&l[s+2])>>>2],n=s+n,l.byteLength<n)return;if(this.trigger("data",{pts:t.pts+a*o,dts:t.dts+a*o,sampleCount:r,audioobjecttype:1+(l[s+2]>>>6&3),channelcount:(1&l[s+2])<<2|(192&l[s+3])>>>6,samplerate:xt[(60&l[s+2])>>>2],samplingfrequencyindex:(60&l[s+2])>>>2,samplesize:16,data:l.subarray(s+7+e,n)}),l.byteLength===n)return void(l=void 0);a++,l=l.subarray(n)}else s++},this.flush=function(){this.trigger("done")}};At.prototype=new ie;var Ot,Lt,Pt=At,Dt=function(i){var r=i.byteLength,o=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var t=i.byteLength-r,e=new Uint8Array(4),n=Math.min(4,r);if(0===n)throw new Error("no bytes available");e.set(i.subarray(t,t+n)),o=new DataView(e.buffer).getUint32(0),s=8*n,r-=n},this.skipBits=function(t){var e;t<s||(t-=s,t-=8*(e=Math.floor(t/8)),r-=e,this.loadWord()),o<<=t,s-=t},this.readBits=function(t){var e=Math.min(s,t),n=o>>>32-e;return 0<(s-=e)?o<<=e:0<r&&this.loadWord(),0<(e=t-e)?n<<e|this.readBits(e):n},this.skipLeadingZeros=function(){for(var t=0;t<s;++t)if(0!=(o&2147483648>>>t))return o<<=t,s-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},Nt=function(){var n,i,r=0;Nt.prototype.init.call(this),this.push=function(t){var e;for(i=i?((e=new Uint8Array(i.byteLength+t.data.byteLength)).set(i),e.set(t.data,i.byteLength),e):t.data;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&this.trigger("data",i.subarray(r+3,n-2));n++,1!==i[n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}this.trigger("data",i.subarray(r+3,n-2)),r=n-2,n+=3;break;default:n+=3}i=i.subarray(r),n-=r,r=0},this.flush=function(){i&&3<i.byteLength&&this.trigger("data",i.subarray(r+3)),i=null,r=0,this.trigger("done")}};Nt.prototype=new ie,Lt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Ot=function(){var n,i,r,o,s,a,g,e=new Nt;Ot.prototype.init.call(this),(n=this).push=function(t){"video"===t.type&&(i=t.trackId,r=t.pts,o=t.dts,e.push(t))},e.on("data",function(t){var e={trackId:i,pts:r,dts:o,data:t};switch(31&t[0]){case 5:e.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:e.nalUnitType="sei_rbsp",e.escapedRBSP=s(t.subarray(1));break;case 7:e.nalUnitType="seq_parameter_set_rbsp",e.escapedRBSP=s(t.subarray(1)),e.config=a(e.escapedRBSP);break;case 8:e.nalUnitType="pic_parameter_set_rbsp";break;case 9:e.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",e)}),e.on("done",function(){n.trigger("done")}),this.flush=function(){e.flush()},g=function(t,e){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=(n+e.readExpGolomb()+256)%256),n=0===i?n:i},s=function(t){for(var e,n,i=t.byteLength,r=[],o=1;o<i-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);for(var s=0,o=0;o<e;s++,o++)s===r[0]&&(s++,r.shift()),n[o]=t[s];return n},a=function(t){var e,n,i,r,o,s,a=0,l=0,u=0,c=0,h=1,d=new Dt(t),f=d.readUnsignedByte(),p=d.readUnsignedByte(),m=d.readUnsignedByte();if(d.skipUnsignedExpGolomb(),Lt[f]&&(3===(n=d.readUnsignedExpGolomb())&&d.skipBits(1),d.skipUnsignedExpGolomb(),d.skipUnsignedExpGolomb(),d.skipBits(1),d.readBoolean()))for(r=3!==n?8:12,s=0;s<r;s++)d.readBoolean()&&g(s<6?16:64,d);if(d.skipUnsignedExpGolomb(),0===(i=d.readUnsignedExpGolomb()))d.readUnsignedExpGolomb();else if(1===i)for(d.skipBits(1),d.skipExpGolomb(),d.skipExpGolomb(),e=d.readUnsignedExpGolomb(),s=0;s<e;s++)d.skipExpGolomb();if(d.skipUnsignedExpGolomb(),d.skipBits(1),t=d.readUnsignedExpGolomb(),n=d.readUnsignedExpGolomb(),i=d.readBits(1),0===i&&d.skipBits(1),d.skipBits(1),d.readBoolean()&&(a=d.readUnsignedExpGolomb(),l=d.readUnsignedExpGolomb(),u=d.readUnsignedExpGolomb(),c=d.readUnsignedExpGolomb()),d.readBoolean()&&d.readBoolean()){switch(d.readUnsignedByte()){case 1:o=[1,1];break;case 2:o=[12,11];break;case 3:o=[10,11];break;case 4:o=[16,11];break;case 5:o=[40,33];break;case 6:o=[24,11];break;case 7:o=[20,11];break;case 8:o=[32,11];break;case 9:o=[80,33];break;case 10:o=[18,11];break;case 11:o=[15,11];break;case 12:o=[64,33];break;case 13:o=[160,99];break;case 14:o=[4,3];break;case 15:o=[3,2];break;case 16:o=[2,1];break;case 255:o=[d.readUnsignedByte()<<8|d.readUnsignedByte(),d.readUnsignedByte()<<8|d.readUnsignedByte()]}o&&(h=o[0]/o[1])}return{profileIdc:f,levelIdc:m,profileCompatibility:p,width:Math.ceil((16*(t+1)-2*a-2*l)*h),height:(2-i)*(n+1)*16-2*u-2*c}}}).prototype=new ie;var V={H264Stream:Ot,NalByteStream:Nt},It=function(){var o=new Uint8Array,s=0;It.prototype.init.call(this),this.setTimestamp=function(t){s=t},this.parseId3TagSize=function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?20+n:10+n},this.parseAdtsSize=function(t,e){var n=(224&t[e+5])>>5,i=t[e+4]<<3;return 6144&t[e+3]|i|n},this.push=function(t){var e,n,i=0,r=0;for(o.length?(n=o.length,(o=new Uint8Array(t.byteLength+n)).set(o.subarray(0,n)),o.set(t,n)):o=t;3<=o.length-r;)if(o[r]!=="I".charCodeAt(0)||o[r+1]!=="D".charCodeAt(0)||o[r+2]!=="3".charCodeAt(0))if(!0&o[r]&&240==(240&o[r+1])){if(o.length-r<7)break;if((i=this.parseAdtsSize(o,r))>o.length)break;e={type:"audio",data:o.subarray(r,r+i),pts:s,dts:s},this.trigger("data",e),r+=i}else r++;else{if(o.length-r<10)break;if((i=this.parseId3TagSize(o,r))>o.length)break;e={type:"timed-metadata",data:o.subarray(r,r+i)},this.trigger("data",e),r+=i}t=o.length-r,o=0<t?o.subarray(r):new Uint8Array}};It.prototype=new ie;var jt,Mt,Rt,Ut,qt=It,wt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Tt={96e3:[W=[33,16,5,32,164,27],[227,64],(Tt=function(t){for(var e=[];t--;)e.push(0);return e})(154),[56]],88200:[W,[231],Tt(170),[56]],64e3:[W,[248,192],Tt(240),[56]],48e3:[W,[255,192],Tt(268),[55,148,128],Tt(54),[112]],44100:[W,[255,192],Tt(268),[55,163,128],Tt(84),[112]],32e3:[W,[255,192],Tt(268),[55,234],Tt(226),[112]],24e3:[W,[255,192],Tt(268),[55,255,128],Tt(268),[111,112],Tt(126),[224]],16e3:[W,[255,192],Tt(268),[55,255,128],Tt(268),[111,255],Tt(269),[223,108],Tt(195),[1,192]],12e3:[wt,Tt(268),[3,127,248],Tt(268),[6,255,240],Tt(268),[13,255,224],Tt(268),[27,253,128],Tt(259),[56]],11025:[wt,Tt(268),[3,127,248],Tt(268),[6,255,240],Tt(268),[13,255,224],Tt(268),[27,255,192],Tt(268),[55,175,128],Tt(108),[112]],8e3:[wt,Tt(268),[3,121,16],Tt(47),[7]]},Bt=(jt=Tt,Object.keys(jt).reduce(function(t,e){return t[e]=new Uint8Array(jt[e].reduce(function(t,e){return t.concat(e)},[])),t},{})),Ft=function(t){return 9e4*t},$t=function(t,e){return t*e},zt=function(t){return t/9e4},Ht=function(t,e){return t/e},Vt=function(t,e){return Ft(Ht(t,e))},Wt=function(t,e){return $t(zt(t),e)},Gt=V.H264Stream,Yt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Kt=["width","height","profileIdc","levelIdc","profileCompatibility"],Xt=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},Zt=function(t,e){var n;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},Qt=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].data.byteLength;return e},Jt=function(i,r){var o=[],s=0,e=0,u=0,c=1/0;r=r||{},Jt.prototype.init.call(this),this.push=function(e){et(i,e),i&&Yt.forEach(function(t){i[t]=e[t]}),o.push(e)},this.setEarliestDts=function(t){e=t-i.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){c=t},this.setAudioAppendStart=function(t){u=t},this.flush=function(){var t,e,n;0!==o.length&&(n=this.trimAdtsFramesByEarliestDts_(o),i.baseMediaDecodeTime=tt(i,r.keepOriginalTimestamps),this.prefixWithSilence_(i,n),i.samples=this.generateSampleTable_(n),e=F.mdat(this.concatenateFrameData_(n)),o=[],t=F.moof(s,[i]),n=new Uint8Array(t.byteLength+e.byteLength),s++,n.set(t),n.set(e,t.byteLength),J(i),this.trigger("data",{track:i,boxes:n})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(t,e){var n,i,r,o,s,a=0,l=0;if(e.length&&(n=Vt(t.baseMediaDecodeTime,t.samplerate),i=Math.ceil(9e4/(t.samplerate/1024)),u&&c&&(r=n-Math.max(u,c),l=(a=Math.floor(r/i))*i),!(a<1||45e3<l))){for(o=(o=Bt[t.samplerate])||e[0].data,s=0;s<a;s++)e.splice(s,0,{data:o});t.baseMediaDecodeTime-=Math.floor(Wt(l,t.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return i.minSegmentDts>=e?t:(i.minSegmentDts=1/0,t.filter(function(t){return t.dts>=e&&(i.minSegmentDts=Math.min(i.minSegmentDts,t.dts),i.minSegmentPts=i.minSegmentDts,!0)}))},this.generateSampleTable_=function(t){for(var e,n=[],i=0;i<t.length;i++)e=t[i],n.push({size:e.data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(t){for(var e,n=0,i=new Uint8Array(Qt(t)),r=0;r<t.length;r++)e=t[r],i.set(e.data,n),n+=e.data.byteLength;return i}};function te(t){return new Date(1e3*t-20828448e5)}function ee(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}}function ne(t,c){var n=G.findBox(t,["moof","traf"]),t=G.findBox(t,["mdat"]),h={},i=[];return t.forEach(function(t,e){e=n[e];i.push({mdat:t,traf:e})}),i.forEach(function(t){var e,n,i,r,o,s=t.mdat,a=t.traf,l=G.findBox(a,["tfhd"]),u=le.parseTfhd(l[0]),t=u.trackId,l=G.findBox(a,["tfdt"]),l=0<l.length?le.parseTfdt(l[0]).baseMediaDecodeTime:0,a=G.findBox(a,["trun"]);c===t&&0<a.length&&(a=a,e=l,n=(u=u).defaultSampleDuration||0,i=u.defaultSampleSize||0,r=u.trackId,o=[],a.forEach(function(t){t=le.parseTrun(t).samples;t.forEach(function(t){void 0===t.duration&&(t.duration=n),void 0===t.size&&(t.size=i),t.trackId=r,t.dts=e,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=e+t.compositionTimeOffset,e+=t.duration}),o=o.concat(t)}),s=function(t,e,n){for(var i,r=new DataView(t.buffer,t.byteOffset,t.byteLength),o=[],s=0;s+4<t.length;s+=u){var a,l,u=r.getUint32(s);s+=4,u<=0||6==(31&t[s])&&(l=t.subarray(s+1,s+1+u),a=function(t,e){for(var n=t,i=0;i<e.length;i++){var r=e[i];if(n<r.size)return r;n-=r.size}return null}(s,e),l={nalUnitType:"sei_rbsp",size:u,data:l,escapedRBSP:ue(l),trackId:n},a?(l.pts=a.pts,l.dts=a.dts,i=a):(l.pts=i.pts,l.dts=i.dts),o.push(l))}return o}(s,o,t),h[t]||(h[t]=[]),h[t]=h[t].concat(s))}),h}Jt.prototype=new ie,(Mt=function(s,i){var e,n,r=0,o=[],u=[];i=i||{},Mt.prototype.init.call(this),delete s.minPTS,this.gopCache_=[],this.push=function(t){et(s,t),"seq_parameter_set_rbsp"!==t.nalUnitType||e||(e=t.config,s.sps=[t.data],Kt.forEach(function(t){s[t]=e[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.data,s.pps=[t.data]),o.push(t)},this.flush=function(){for(var t,e;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=Y(o),(e=K(e))[0][0].keyFrame||((t=this.getGopForFusion_(o[0],s))?(e.unshift(t),e.byteLength+=t.byteLength,e.nalCount+=t.nalCount,e.pts=t.pts,e.dts=t.dts,e.duration+=t.duration):e=X(e)),u.length){var n=i.alignGopsAtEnd?this.alignGopsAtEnd_(e):this.alignGopsAtStart_(e);if(!n)return this.gopCache_.unshift({gop:e.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");J(s),e=n}et(s,e),s.samples=Z(e),t=F.mdat(Q(e)),s.baseMediaDecodeTime=tt(s,i.keepOriginalTimestamps),this.trigger("processedGopsInfo",e.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.gopCache_.unshift({gop:e.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",s.baseMediaDecodeTime),this.trigger("timelineStartInfo",s.timelineStartInfo),n=F.moof(r,[s]),e=new Uint8Array(n.byteLength+t.byteLength),r++,e.set(n),e.set(t,n.byteLength),this.trigger("data",{track:s,boxes:e}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){J(s),n=e=void 0},this.getGopForFusion_=function(t){for(var e,n,i,r=1/0,o=0;o<this.gopCache_.length;o++)n=(i=this.gopCache_[o]).gop,s.pps&&Zt(s.pps[0],i.pps[0])&&s.sps&&Zt(s.sps[0],i.sps[0])&&(n.dts<s.timelineStartInfo.dts||-1e4<=(n=t.dts-n.dts-n.duration)&&n<=45e3&&(!e||n<r)&&(e=i,r=n));return e?e.gop:null},this.alignGopsAtStart_=function(t){for(var e,n,i,r,o=t.byteLength,s=t.nalCount,a=t.duration,l=e=0;l<u.length&&e<t.length&&(n=u[l],i=t[e],n.pts!==i.pts);)i.pts>n.pts?l++:(e++,o-=i.byteLength,s-=i.nalCount,a-=i.duration);return 0===e?t:e===t.length?null:((r=t.slice(e)).byteLength=o,r.duration=a,r.nalCount=s,r.pts=r[0].pts,r.dts=r[0].dts,r)},this.alignGopsAtEnd_=function(t){for(var e,n,i=u.length-1,r=t.length-1,o=null,s=!1;0<=i&&0<=r;){if(e=u[i],n=t[r],e.pts===n.pts){s=!0;break}e.pts>n.pts?i--:(i===u.length-1&&(o=r),r--)}if(!s&&null===o)return null;if(0===(l=s?r:o))return t;var a=t.slice(l),l=a.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return a.byteLength=l.byteLength,a.duration=l.duration,a.nalCount=l.nalCount,a.pts=a[0].pts,a.dts=a[0].dts,a},this.alignGopsWith=function(t){u=t}}).prototype=new ie,(Ut=function(t,e){this.numberOfTracks=0,this.metadataStream=e,void 0!==t.remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ut.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new ie,Ut.prototype.flush=function(t){var e,n,i,r=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Kt.forEach(function(t){o.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,Yt.forEach(function(t){o.info[t]=this.audioTrack[t]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,t=F.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(t.byteLength),o.initSegment.set(t),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],r),r+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(e=this.pendingCaptions[i]).startTime=e.startPts-s,e.startTime/=9e4,e.endTime=e.endPts-s,e.endTime/=9e4,o.captionStreams[e.stream]=!0,o.captions.push(e);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=n.pts-s,n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(Rt=function(i){var r,o,s=this,n=!0;Rt.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};(this.transmuxPipeline_=e).type="aac",e.metadataStream=new Ct.MetadataStream,e.aacStream=new qt,e.audioTimestampRolloverStream=new Ct.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new Ct.TimestampRolloverStream("timed-metadata"),e.adtsStream=new Pt,e.coalesceStream=new Ut(i,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(t){"timed-metadata"!==t.type||e.audioSegmentStream||(o=o||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Jt(o,i),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new Ct.MetadataStream,n.packetStream=new Ct.TransportPacketStream,n.parseStream=new Ct.TransportParseStream,n.elementaryStream=new Ct.ElementaryStream,n.videoTimestampRolloverStream=new Ct.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new Ct.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new Ct.TimestampRolloverStream("timed-metadata"),n.adtsStream=new Pt,n.h264Stream=new Gt,n.captionStream=new Ct.CaptionStream,n.coalesceStream=new Ut(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(t){var e;if("metadata"===t.type){for(e=t.tracks.length;e--;)r||"video"!==t.tracks[e].type?o||"audio"!==t.tracks[e].type||((o=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new Mt(r,i),n.videoSegmentStream.on("timelineStartInfo",function(t){o&&(o.timelineStartInfo=t,n.audioSegmentStream.setEarliestDts(t.dts))}),n.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(t){o&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),o&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new Jt(o,i),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var e=this.transmuxPipeline_;this.baseMediaDecodeTime=t,o&&(o.timelineStartInfo.dts=void 0,o.timelineStartInfo.pts=void 0,J(o),o.timelineStartInfo.baseMediaDecodeTime=t,e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),r&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[],e.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,J(r),e.captionStream.reset(),r.timelineStartInfo.baseMediaDecodeTime=t),e.timedMetadataTimestampRolloverStream&&e.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){o&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){var e;n&&((e=Xt(t))&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1),this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new ie;var ie={Transmuxer:Rt,VideoSegmentStream:Mt,AudioSegmentStream:Jt,AUDIO_PROPERTIES:Yt,VIDEO_PROPERTIES:Kt},re=G.parseType,oe={avc1:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:e.getUint16(6),width:e.getUint16(24),height:e.getUint16(26),horizresolution:e.getUint16(28)+e.getUint16(30)/16,vertresolution:e.getUint16(32)+e.getUint16(34)/16,frameCount:e.getUint16(40),depth:e.getUint16(74),config:se(t.subarray(78,t.byteLength))}},avcC:function(t){for(var e,n,i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},o=31&t[5],s=6,a=0;a<o;a++)n=i.getUint16(s),s+=2,r.sps.push(new Uint8Array(t.subarray(s,s+n))),s+=n;for(e=t[s],s++,a=0;a<e;a++)n=i.getUint16(s),s+=2,r.pps.push(new Uint8Array(t.subarray(s,s+n))),s+=n;return r},btrt:function(t){t=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(7&t[26])<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={majorBrand:re(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},i=8;i<t.byteLength;)n.compatibleBrands.push(re(t.subarray(i,i+4))),i+=4;return n},dinf:function(t){return{boxes:se(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:se(t.subarray(8))}},hdlr:function(t){for(var e={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:re(t.subarray(8,12)),name:""},n=8,n=24;n<t.byteLength;n++){if(0===t[n]){n++;break}e.name+=String.fromCharCode(t[n])}return e.name=decodeURIComponent(escape(e.name)),e},mdat:function(t){return{byteLength:t.byteLength,nals:function(t){for(var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),i=[],r=0;r+4<t.length;r+=e)if(e=n.getUint32(r),r+=4,e<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&t[r]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+t[r]&31)}return i}(t)}},mdhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,t={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return 1===t.version?(n+=4,t.creationTime=te(e.getUint32(n)),n+=8,t.modificationTime=te(e.getUint32(n)),n+=4,t.timescale=e.getUint32(n),n+=8):(t.creationTime=te(e.getUint32(n)),n+=4,t.modificationTime=te(e.getUint32(n)),n+=4,t.timescale=e.getUint32(n),n+=4),t.duration=e.getUint32(n),n+=4,n=e.getUint16(n),t.language+=String.fromCharCode(96+(n>>10)),t.language+=String.fromCharCode(96+((992&n)>>5)),t.language+=String.fromCharCode(96+(31&n)),t},mdia:function(t){return{boxes:se(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:se(t)}},mp4a:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),e={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536};return 28<t.byteLength&&(e.streamDescriptor=se(t.subarray(28))[0]),e},moof:function(t){return{boxes:se(t)}},moov:function(t){return{boxes:se(t)}},mvex:function(t){return{boxes:se(t)}},mvhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,i={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=te(e.getUint32(n)),n+=8,i.modificationTime=te(e.getUint32(n)),n+=4,i.timescale=e.getUint32(n),n+=8):(i.creationTime=te(e.getUint32(n)),n+=4,i.modificationTime=te(e.getUint32(n)),n+=4,i.timescale=e.getUint32(n),n+=4),i.duration=e.getUint32(n),n+=4,i.rate=e.getUint16(n)+e.getUint16(n+2)/16,n+=4,i.volume=e.getUint8(n)+e.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=e.getUint32(n),i},pdin:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:e.getUint32(4),initialDelay:e.getUint32(8)}},sdtp:function(t){for(var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},n=4;n<t.byteLength;n++)e.samples.push({dependsOn:(48&t[n])>>4,isDependedOn:(12&t[n])>>2,hasRedundancy:3&t[n]});return e},sidx:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8),earliestPresentationTime:e.getUint32(12),firstOffset:e.getUint32(16)},i=e.getUint16(22),r=24;i;r+=12,i--)n.references.push({referenceType:(128&t[r])>>>7,referencedSize:2147483647&e.getUint32(r),subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(128&t[r+8]),sapType:(112&t[r+8])>>>4,sapDeltaTime:268435455&e.getUint32(r+8)});return n},smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:se(t)}},stco:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},i=e.getUint32(4),r=8;i;r+=4,i--)n.chunkOffsets.push(e.getUint32(r));return n},stsc:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=e.getUint32(4),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]},r=8;n;r+=12,n--)i.sampleToChunks.push({firstChunk:e.getUint32(r),samplesPerChunk:e.getUint32(r+4),sampleDescriptionIndex:e.getUint32(r+8)});return i},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:se(t.subarray(8))}},stsz:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:e.getUint32(4),entries:[]},i=12;i<t.byteLength;i+=4)n.entries.push(e.getUint32(i));return n},stts:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},i=e.getUint32(4),r=8;i;r+=8,i--)n.timeToSamples.push({sampleCount:e.getUint32(r),sampleDelta:e.getUint32(r+4)});return n},styp:function(t){return oe.ftyp(t)},tfdt:function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]};return 1===e.version&&(e.baseMediaDecodeTime*=Math.pow(2,32),e.baseMediaDecodeTime+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),e},tfhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4)},i=1&n.flags[2],r=2&n.flags[2],o=8&n.flags[2],s=16&n.flags[2],a=32&n.flags[2],l=65536&n.flags[0],u=131072&n.flags[0],t=8;return i&&(t+=4,n.baseDataOffset=e.getUint32(12),t+=4),r&&(n.sampleDescriptionIndex=e.getUint32(t),t+=4),o&&(n.defaultSampleDuration=e.getUint32(t),t+=4),s&&(n.defaultSampleSize=e.getUint32(t),t+=4),a&&(n.defaultSampleFlags=e.getUint32(t)),l&&(n.durationIsEmpty=!0),!i&&u&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,i={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=te(e.getUint32(n)),n+=8,i.modificationTime=te(e.getUint32(n)),n+=4,i.trackId=e.getUint32(n),n+=4,n+=8):(i.creationTime=te(e.getUint32(n)),n+=4,i.modificationTime=te(e.getUint32(n)),n+=4,i.trackId=e.getUint32(n),n+=4,n+=4),i.duration=e.getUint32(n),n+=4,n+=8,i.layer=e.getUint16(n),n+=2,i.alternateGroup=e.getUint16(n),n+=2,i.volume=e.getUint8(n)+e.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,i.width=e.getUint16(n)+e.getUint16(n+2)/16,n+=4,i.height=e.getUint16(n)+e.getUint16(n+2)/16,i},traf:function(t){return{boxes:se(t)}},trak:function(t){return{boxes:se(t)}},trex:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4),defaultSampleDescriptionIndex:e.getUint32(8),defaultSampleDuration:e.getUint32(12),defaultSampleSize:e.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:e.getUint16(22)}},trun:function(t){var e,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&n.flags[2],o=4&n.flags[2],s=1&n.flags[1],a=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),h=8;for(r&&(n.dataOffset=i.getInt32(h),h+=4),o&&c&&(e={flags:ee(t.subarray(h,h+4))},h+=4,s&&(e.duration=i.getUint32(h),h+=4),a&&(e.size=i.getUint32(h),h+=4),u&&(e.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(e),c--);c--;)e={},s&&(e.duration=i.getUint32(h),h+=4),a&&(e.size=i.getUint32(h),h+=4),l&&(e.flags=ee(t.subarray(h,h+4)),h+=4),u&&(e.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(e);return n},"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:e.getUint16(4),opcolor:new Uint16Array([e.getUint16(6),e.getUint16(8),e.getUint16(10)])}}},se=function(t){for(var e,n,i,r,o,s=0,a=[],l=new ArrayBuffer(t.length),u=new Uint8Array(l),c=0;c<t.length;++c)u[c]=t[c];for(e=new DataView(l);s<t.byteLength;)n=e.getUint32(s),i=re(t.subarray(s+4,s+8)),r=1<n?s+n:t.byteLength,(o=(oe[i]||function(t){return{data:t}})(t.subarray(s+8,r))).size=n,o.type=i,a.push(o),s=r;return a},ae=function(t,e){var r;return e=e||0,r=new Array(2*e+1).join(" "),t.map(function(i,t){return r+i.type+"\n"+Object.keys(i).filter(function(t){return"type"!==t&&"boxes"!==t}).map(function(t){var e=r+"  "+t+": ",n=i[t];if(n instanceof Uint8Array||n instanceof Uint32Array){t=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map(function(t){return" "+("00"+t.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return t?1===t.length?e+"<"+t.join("").slice(1)+">":e+"<\n"+t.map(function(t){return r+"  "+t}).join("\n")+"\n"+r+"  >":e+"<>"}return e+JSON.stringify(n,null,2).split("\n").map(function(t,e){return 0===e?t:r+"  "+t}).join("\n")}).join("\n")+(i.boxes?"\n"+ae(i.boxes,e+1):"")}).join("\n")},le={inspect:se,textify:ae,parseTfdt:oe.tfdt,parseHdlr:oe.hdlr,parseTfhd:oe.tfhd,parseTrun:oe.trun},ue=ot,ce=t.CaptionStream,he={generator:F,probe:G,Transmuxer:ie.Transmuxer,AudioSegmentStream:ie.AudioSegmentStream,VideoSegmentStream:ie.VideoSegmentStream,CaptionParser:function(){var e,s,a,l,u,t=!1;this.isInitialized=function(){return t},this.init=function(){e=new ce,t=!0,e.on("data",function(t){t.startTime=t.startPts/l,t.endTime=t.endPts/l,u.captions.push(t),u.captionStreams[t.stream]=!0})},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length)&&(a!==t[0]||l!==e[a])},this.parse=function(t,e,n){var i,r;if(!this.isInitialized())return null;if(!e||!n)return null;if(this.isNewInit(e,n))a=e[0],l=n[a];else if(!a||!l)return s.push(t),null;for(;0<s.length;){var o=s.shift();this.parse(o,e,n)}return i=t,r=l,null!==(r=(t=a)?{seiNals:ne(i,t)[t],timescale:r}:null)&&r.seiNals?(this.pushNals(r.seiNals),this.flushStream(),u):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;e.flush()},this.clearParsedCaptions=function(){u.captions=[],u.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){s=[],l=a=null,u?this.clearParsedCaptions():u={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},de=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function fe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var pe=(function(t,e,n){return e&&fe(t.prototype,e),n&&fe(t,n),t}(me,[{key:"init",value:function(){var n,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new he.Transmuxer(this.options),n=this.self,(t=this.transmuxer).on("data",function(t){var e=t.initSegment;t.initSegment={data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength};e=t.data;t.data=e.buffer,n.postMessage({action:"data",segment:t,byteOffset:e.byteOffset,byteLength:e.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){n.postMessage({action:"caption",data:t})}),t.on("done",function(t){n.postMessage({action:"done"})}),t.on("gopInfo",function(t){n.postMessage({action:"gopInfo",gopInfo:t})})}},{key:"push",value:function(t){t=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(t){t=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(t){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*t.appendStart))}},{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]),me);function me(t,e){de(this,me),this.options=e||{},this.self=t,this.init()}!function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new pe(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new pe(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(ge)}()}),zl={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Hl=function(t){return/mp4a\.\d+.\d+/i.test(t)},Vl=function(t){return/avc1\.[\da-f]+/i.test(t)},Wl=function(t,e,n){var i=null,r=null,o=0,s=[],a=[];if(!t&&!e)return Ji.createTimeRange();if(!t)return e.buffered;if(!e)return t.buffered;if(n)return t.buffered;if(0===t.buffered.length&&0===e.buffered.length)return Ji.createTimeRange();for(var l=t.buffered,u=e.buffered,c=l.length;c--;)s.push({time:l.start(c),type:"start"}),s.push({time:l.end(c),type:"end"});for(c=u.length;c--;)s.push({time:u.start(c),type:"start"}),s.push({time:u.end(c),type:"end"});for(s.sort(function(t,e){return t.time-e.time}),c=0;c<s.length;c++)"start"===s[c].type?2===++o&&(i=s[c].time):"end"===s[c].type&&1===--o&&(r=s[c].time),null!==i&&null!==r&&(a.push([i,r]),r=i=null);return Ji.createTimeRanges(a)},Gl=($t=Ji.EventTarget,ne(Yl,$t),Wo(Yl,[{key:"data_",value:function(t){var e=t.data.segment;e.data=new Uint8Array(e.data,t.data.byteOffset,t.data.byteLength),e.initSegment=new Uint8Array(e.initSegment.data,e.initSegment.byteOffset,e.initSegment.byteLength),function(t,e,n){var i,r=e.player_;if(n.captions&&n.captions.length)for(var o in t.inbandTextTracks_||(t.inbandTextTracks_={}),n.captionStreams)t.inbandTextTracks_[o]||(r.tech_.trigger({type:"usage",name:"hls-608"}),i=r.textTracks().getTrackById(o),t.inbandTextTracks_[o]=i||r.addRemoteTextTrack({kind:"captions",id:o,label:o},!1).track);n.metadata&&n.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)}(this,this.mediaSource_,e),this.pendingBuffers_.push(e)}},{key:"done_",value:function(){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var i=this,r=["audio","video"];r.forEach(function(e){var t,n;i[e+"Codec_"]&&(i[e+"Buffer_"]||(n=null,i.mediaSource_[e+"Buffer_"]?(n=i.mediaSource_[e+"Buffer_"]).updating=!1:(t=e+'/mp4;codecs="'+i[e+"Codec_"]+'"',n=Fl(i.mediaSource_.nativeMediaSource_,t),i.mediaSource_[e+"Buffer_"]=n),i[e+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(t){n.addEventListener(t,function(){if("audio"!==e||!i.audioDisabled_)return"updateend"===t&&(i[e+"Buffer_"].updating=!1),r.every(function(t){return!("audio"!==t||!i.audioDisabled_)||(e===t||!i[t+"Buffer_"]||!i[t+"Buffer_"].updating)})?i.trigger(t):void 0})})))})}},{key:"appendBuffer",value:function(t){var e;this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length&&(e=this.audioBuffer_.buffered,this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:e.end(e.length-1)})),this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(t,e,n){if(null==e||!t.length)return[];for(var i=Math.ceil(9e4*(e-n+3)),r=void 0,r=0;r<t.length&&!(t[r].pts>i);r++);return t.slice(r)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(t){this.gopBuffer_=function(t,e,n){if(!e.length)return t;if(n)return e.slice();for(var i=e[0].pts,r=0;r<t.length&&!(t[r].pts>=i);r++);return t.slice(0,r).concat(e)}(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(t,e){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(t,e),this.gopBuffer_=function(t,e,n,i){for(var r=Math.ceil(9e4*(e-i)),o=Math.ceil(9e4*(n-i)),i=t.slice(),s=t.length;s--&&!(t[s].pts<=o););if(-1===s)return i;for(var a=s+1;a--&&!(t[a].pts<=r););return a=Math.max(a,0),i.splice(a,s-a+1),i}(this.gopBuffer_,t,e,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(t,e)),vl(t,e,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)vl(t,e,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]},t=this.pendingBuffers_.reduce(function(t,e){var n=e.type,i=e.data,r=e.initSegment;return t[n].segments.push(i),t[n].bytes+=i.byteLength,t[n].initSegment=r,e.captions&&(t.captions=t.captions.concat(e.captions)),e.info&&(t[n].info=e.info),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t},t);this.videoBuffer_||this.audioBuffer_||(0===t.video.bytes&&(this.videoCodec_=null),0===t.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),t.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info}),t.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:t.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(t.audio.segments.unshift(t.audio.initSegment),t.audio.bytes+=t.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var e=!1;this.videoBuffer_&&t.video.bytes?(t.video.segments.unshift(t.video.initSegment),t.video.bytes+=t.video.initSegment.byteLength,this.concatAndAppendSegments_(t.video,this.videoBuffer_),bl(this,t.captions,t.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(e=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(t.audio,this.audioBuffer_),this.pendingBuffers_.length=0,e&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(t,e){var n=0,i=void 0;if(t.bytes){i=new Uint8Array(t.bytes),t.segments.forEach(function(t){i.set(t,n),n+=t.byteLength});try{e.updating=!0,e.appendBuffer(i)}catch(t){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:t.message,originalError:t})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),Yl);function Yl(t,e){Ma(this,Yl);var n=Ha(this,(Yl.__proto__||Object.getPrototypeOf(Yl)).call(this,Ji.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=t,n.codecs_=e,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=11<=Ji.browser.IE_VERSION;e={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(t){Hl(t)?n.audioCodec_=t:Vl(t)&&(n.videoCodec_=t)}),n.transmuxer_=new $l,n.transmuxer_.postMessage({action:"init",options:e}),n.transmuxer_.onmessage=function(t){return"data"===t.data.action?n.data_(t):"done"===t.data.action?n.done_(t):"gopInfo"===t.data.action?n.appendGopInfo_(t):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&0<=t&&(this.timestampOffset_=t,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(t){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=t),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=t)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return Wl(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}var Kl=(fn=Ji.EventTarget,ne(Xl,fn),Wo(Xl,[{key:"addSeekableRange_",value:function(t,e){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(e>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=e)}},{key:"addSourceBuffer",value:function(t){var n,e,i=void 0,r=(n={type:"",parameters:{}},e=(e=t).trim().split(";"),n.type=e.shift().trim(),e.forEach(function(t){var e=t.trim().split("=");1<e.length&&(t=e[0].replace(/"/g,"").trim(),e=e[1].replace(/"/g,"").trim(),n.parameters[t]=e)}),n);return/^(video|audio)\/mp2t$/i.test(r.type)?(e=[],r.parameters&&r.parameters.codecs&&(e=r.parameters.codecs.split(","),e=(e=Rl(e)).filter(function(t){return Hl(t)||Vl(t)})),0===e.length&&(e=["avc1.4d400d","mp4a.40.2"]),i=new Gl(this,e),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),i.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):i=this.nativeMediaSource_.addSourceBuffer(t),this.sourceBuffers.push(i),i}}]),Xl);function Xl(){Ma(this,Xl);var o=Ha(this,(Xl.__proto__||Object.getPrototypeOf(Xl)).call(this)),t=void 0;for(t in o.nativeMediaSource_=new d.MediaSource,o.nativeMediaSource_)t in Xl.prototype||"function"!=typeof o.nativeMediaSource_[t]||(o[t]=o.nativeMediaSource_[t].bind(o.nativeMediaSource_));return o.duration_=NaN,Object.defineProperty(o,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(t){(this.duration_=t)!==1/0&&(this.nativeMediaSource_.duration=t)}}),Object.defineProperty(o,"seekable",{get:function(){return this.duration_===1/0?Ji.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(o,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(o,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),o.sourceBuffers=[],o.activeSourceBuffers_=[],o.updateActiveSourceBuffers_=function(){if(o.activeSourceBuffers_.length=0,1===o.sourceBuffers.length){var t=o.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void o.activeSourceBuffers_.push(t)}for(var n=!1,i=!0,e=0;e<o.player_.audioTracks().length;e++){var r=o.player_.audioTracks()[e];if(r.enabled&&"main"!==r.kind){i=!(n=!0);break}}o.sourceBuffers.forEach(function(t,e){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=n;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,i=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=e?i:!i,t.audioDisabled_))return;o.activeSourceBuffers_.push(t)})},o.onPlayerMediachange_=function(){o.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=!0})},o.onHlsReset_=function(){o.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.postMessage({action:"resetCaptions"})})},o.onHlsSegmentTimeMapping_=function(e){o.sourceBuffers.forEach(function(t){return t.timeMapping_=e.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(t){this.nativeMediaSource_.addEventListener(t,this.trigger.bind(this))},o),o.on("sourceopen",function(t){var e=h.querySelector('[src="'+o.url_+'"]');e&&(o.player_=Ji(e.parentNode),o.player_.tech_.on("hls-reset",o.onHlsReset_),o.player_.tech_.on("hls-segment-time-mapping",o.onHlsSegmentTimeMapping_),o.player_.audioTracks&&o.player_.audioTracks()&&(o.player_.audioTracks().on("change",o.updateActiveSourceBuffers_),o.player_.audioTracks().on("addtrack",o.updateActiveSourceBuffers_),o.player_.audioTracks().on("removetrack",o.updateActiveSourceBuffers_)),o.player_.on("mediachange",o.onPlayerMediachange_))}),o.on("sourceended",function(t){for(var e=Cl(o.duration),n=0;n<o.sourceBuffers.length;n++){var i=o.sourceBuffers[n],i=i.metadataTrack_&&i.metadataTrack_.cues;i&&i.length&&(i[i.length-1].endTime=e)}}),o.on("sourceclose",function(t){this.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),o}var Zl=0;Ji.mediaSources={};function Ql(t,e){if(!(t=Ji.mediaSources[t]))throw new Error("Media Source not found (Video.js)");t.trigger({type:"sourceopen",swfId:e})}function Jl(){return!!d.MediaSource&&!!d.MediaSource.isTypeSupported&&d.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}ze=function(){if(this.MediaSource={open:Ql,supportsNativeMediaSources:Jl},Jl())return new Kl;throw new Error("Cannot use create a virtual MediaSource for this video")};ze.open=Ql,ze.supportsNativeMediaSources=Jl;$t={createObjectURL:function(t){var e=void 0;return t instanceof Kl?(e=d.URL.createObjectURL(t.nativeMediaSource_),t.url_=e):t instanceof Kl?(e="blob:vjs-media-source/"+Zl,Zl++,Ji.mediaSources[e]=t,e):(e=d.URL.createObjectURL(t),t.url_=e)}};Ji.MediaSource=ze,Ji.URL=$t;function tu(t,e){for(var o=eu(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod}),n=0;n<e.playlists.length;n++){var i=Ba(o,e.playlists[n]);i&&(o=i)}return qa(e,function(t,e,n,i){var r;t.playlists&&t.playlists.length&&(r=t.playlists[0].uri,(t=Ba(o,t.playlists[0]))&&((o=t).mediaGroups[e][n][i].playlists[0]=o.playlists[r]))}),o}var fn=Ji.EventTarget,eu=Ji.mergeOptions,nu=(ne(iu,fn),Wo(iu,[{key:"dispose",value:function(){this.stopRequest(),d.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){var t;this.request&&(t=this.request,this.request=null,t.onreadystatechange=null,t.abort())}},{key:"media",value:function(t){if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var e=this.state;if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}var n=!this.media_||t.uri!==this.media_.uri;this.state="HAVE_METADATA",n&&(this.media_&&this.trigger("mediachanging"),this.media_=t,this.refreshMedia_(),"HAVE_MASTER"!==e&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(){this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var r=to(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});r.uri=this.srcUrl;for(var t=0;t<r.playlists.length;t++){var e="placeholder-uri-"+t;r.playlists[t].uri=e,r.playlists[e]=r.playlists[t]}return qa(r,function(t,e,n,i){t.playlists&&t.playlists.length&&(i="placeholder-uri-"+e+"-"+n+"-"+i,t.playlists[0].uri=i,r.playlists[i]=t.playlists[0])}),Fa(r),$a(r),r}},{key:"start",value:function(){var n=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,e){if(n.request){if(n.request=null,t)return n.error={status:e.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");n.masterXml_=e.responseText,e.responseHeaders&&e.responseHeaders.date?n.masterLoaded_=Date.parse(e.responseHeaders.date):n.masterLoaded_=Date.now(),n.syncClientServerClock_(n.onClientServerClockSync_.bind(n))}})}},{key:"syncClientServerClock_",value:function(n){var i=this,r=eo(this.masterXml_);return null===r?(this.clientOffset_=this.masterLoaded_-Date.now(),n()):"DIRECT"===r.method?(this.clientOffset_=r.value-Date.now(),n()):void(this.request=this.hls_.xhr({uri:ja(this.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},function(t,e){if(i.request){if(t)return i.clientOffset_=i.masterLoaded_-Date.now(),n();t=void 0,t="HEAD"===r.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):i.masterLoaded_:Date.parse(e.responseText);i.clientOffset_=t-Date.now(),n()}}))}},{key:"onClientServerClockSync_",value:function(){var t=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),d.setTimeout(function(){t.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&d.setTimeout(function(){t.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var n=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,e){if(n.request){if(n.request=null,t)return n.error={status:e.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:e.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");n.masterXml_=e.responseText;e=n.parseMasterXml();n.master=tu(n.master,e),d.setTimeout(function(){n.trigger("minimumUpdatePeriod")},n.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var t=this,e=void 0,n=void 0,n=this.masterPlaylistLoader_?(e=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(e=this.master,this.parseMasterXml()),n=tu(e,n);n?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=n:this.master=n,this.media_=n.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=d.setTimeout(function(){t.trigger("mediaupdatetimeout")},za(this.media(),!!n))),this.trigger("loadedplaylist")}}]),iu);function iu(t,e,n,i){Ma(this,iu);var r=Ha(this,(iu.__proto__||Object.getPrototypeOf(iu)).call(this));if(r.hls_=e,r.withCredentials=n,!t)throw new Error("A non-empty playlist URL or playlist is required");return r.on("minimumUpdatePeriod",function(){r.refreshXml_()}),r.on("mediaupdatetimeout",function(){r.refreshMedia_()}),"string"==typeof t?(r.srcUrl=t,r.state="HAVE_NOTHING",Ha(r)):(r.masterPlaylistLoader_=i,r.state="HAVE_METADATA",r.started=!0,r.media(t),d.setTimeout(function(){r.trigger("loadedmetadata")},0),r)}var ru=function(t){return Ji.log.debug?Ji.log.debug.bind(Ji,"VHS:",t+" >"):function(){}};function ou(){}var su=(Wo(au,[{key:"createSourceBuffer_",value:function(t,e){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(t),this.logger_("created SourceBuffer"),e&&(e.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?e.on("sourcebufferadded",function(){n.start_()}):this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.logger_("buffered ["+gl(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(t){var e=this;this.processedAppend_&&this.queueCallback_(function(){e.sourceBuffer_.abort()},t)}},{key:"appendBuffer",value:function(t,e){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(t)},e)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Ji.createTimeRanges()}},{key:"remove",value:function(t,e,n){var i=this,r=2<arguments.length&&void 0!==n?n:ou;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+t+" => "+e+"]"),i.sourceBuffer_.remove(t,e)},r)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(t){var e=this;return void 0!==t&&(this.queueCallback_(function(){e.sourceBuffer_.timestampOffset=t}),this.timestampOffset_=t),this.timestampOffset_}},{key:"queueCallback_",value:function(t,e){this.callbacks_.push([t.bind(this),e]),this.runCallback_()}},{key:"runCallback_",value:function(){var t=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(t=this.callbacks_.shift(),this.pendingCallback_=t[1],t[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),au);function au(t,e,n,i){Ma(this,au),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=n,this.mimeType_=e,this.logger_=ru("SourceUpdater["+n+"]["+e+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,e,i)):this.createSourceBuffer_(e,i)}function lu(t){var e,n={};return t.byterange&&(n.Range=(e=t.byterange,t=e.offset+e.length-1,"bytes="+e.offset+"-"+t)),n}function uu(t){t.forEach(function(t){t.abort()})}function cu(t,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:wu,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Su,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Tu,xhr:e}:null}function hu(r,o,s){return function(t,e){var n=e.response,i=cu(t,e),t=void 0;return i?s(i,r):0===n.byteLength?s({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:Tu,xhr:e},r):(r.stats={bandwidth:(n=e).bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0},r.key?r.encryptedBytes=new Uint8Array(e.response):r.bytes=new Uint8Array(e.response),r.map&&r.map.bytes&&(o.isInitialized()||o.init(),(t=o.parse(r.bytes,r.map.videoTrackIds,r.map.timescales))&&t.captions&&(r.captionStreams=t.captionStreams,r.fmp4Captions=t.captions)),s(null,r))}}function du(e,n,i){function r(t){if(t.data.source===n.requestId){e.removeEventListener("message",r);t=t.data.decrypted;return n.bytes=new Uint8Array(t.bytes,t.byteOffset,t.byteLength),i(null,n)}}e.addEventListener("message",r),e.postMessage(cl({source:n.requestId,encrypted:n.encryptedBytes,key:n.key.bytes,iv:n.key.iv}),[n.encryptedBytes.buffer,n.key.bytes.buffer])}function fu(i,r){return function(t){var e,n;return i.stats=Ji.mergeOptions(i.stats,(n=(e=t).target,(n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-n.requestTime||0}).bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),r(t,i)}}function pu(t,e,n,i,r,o,s){var a,l,u,c,h,d,f,p,m,g,y,v=[],s=(a=v,l=n,u=s,c=[],h=0,function(t,e){if(t&&(uu(a),c.push(t)),(h+=1)===a.length){if(e.endOfAllRequests=Date.now(),0<c.length){t=c.reduce(function(t,e){return e.code>t.code?e:t});return u(t,e)}return e.encryptedBytes?du(l,e,u):u(null,e)}});return r.key&&(p=t(Ji.mergeOptions(e,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),(d=r,f=s,function(t,e){var n=e.response,t=cu(t,e);if(t)return f(t,d);if(16!==n.byteLength)return f({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:Tu,xhr:e},d);n=new DataView(n);return d.key.bytes=new Uint32Array([n.getUint32(0),n.getUint32(4),n.getUint32(8),n.getUint32(12)]),f(null,d)})),v.push(p)),r.map&&!r.map.bytes&&(p=t(Ji.mergeOptions(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:lu(r.map)}),(m=r,g=i,y=s,function(t,e){var n=e.response,t=cu(t,e);return t?y(t,m):0===n.byteLength?y({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:Tu,xhr:e},m):(m.map.bytes=new Uint8Array(e.response),g.isInitialized()||g.init(),m.map.timescales=Yo.timescale(m.map.bytes),m.map.videoTrackIds=Yo.videoTrackIds(m.map.bytes),y(null,m))})),v.push(p)),(s=t(Ji.mergeOptions(e,{uri:r.resolvedUri,responseType:"arraybuffer",headers:lu(r)}),hu(r,i,s))).addEventListener("progress",fu(r,o)),v.push(s),function(){return uu(v)}}function mu(t,e){var n;return t&&(n=d.getComputedStyle(t))?n[e]:""}function gu(t,i){var r=t.slice();t.sort(function(t,e){var n=i(t,e);return 0===n?r.indexOf(t)-r.indexOf(e):n})}function yu(t,e){var n=void 0,i=void 0;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||d.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),n-(i=i||d.Number.MAX_VALUE)}function vu(t,e,n){return!(!t||!e)&&(n=n===t.segments.length,t.endList&&"open"===e.readyState&&n)}function bu(t){return"number"==typeof t&&isFinite(t)}var _u={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Tu=2,wu=-101,Su=-102,ku=(fn=Ji.EventTarget,ne(Eu,fn),Wo(Eu,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(t){return void 0!==t&&(this.error_=t),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Ji.createTimeRanges()}},{key:"initSegment",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e;if(!t)return null;var i=hl(t),r=this.initSegments_[i];return n&&!r&&t.bytes&&(this.initSegments_[i]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,timescales:t.timescales,videoTrackIds:t.videoTrackIds}),r||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new su(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{};if(t){var i=this.playlist_,r=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=n,this.hasPlayed_()||(t.syncInfo={mediaSequence:t.mediaSequence,time:0});n=i?i.id:null;if(this.logger_("playlist update ["+n+" => "+t.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();i&&i.uri===t.uri?(n=t.mediaSequence-i.mediaSequence,this.logger_("live window shift ["+n+"]"),null!==this.mediaIndex&&(this.mediaIndex-=n),r&&(r.mediaIndex-=n,0<=r.mediaIndex&&(r.segment=t.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,t)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(d.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(t,e){this.mimeType_||(this.mimeType_=t,this.sourceBufferEmitter_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(t){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),t),this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(t,e,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(t,e,n),vl(t,e,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)vl(t,e,this.inbandTextTracks_[i])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&d.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=d.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&d.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=d.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){var t;this.sourceUpdater_.updating()||(this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())),(t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_))&&(vu(this.playlist_,this.mediaSource_,t.mediaIndex)?this.endOfStream():t.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()||((t.timeline!==this.currentTimeline_||null!==t.startOfSegment&&t.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),t.timestampOffset=t.startOfSegment,this.captionParser_.clearAllCaptions()),this.loadSegment_(t))))}},{key:"checkBuffer_",value:function(t,e,n,i,r,o){var s=0,a=void 0;t.length&&(s=t.end(t.length-1));t=Math.max(0,s-r);if(!e.segments.length)return null;if(t>=this.goalBufferLength_())return null;if(!i&&1<=t)return null;if(null===o)return n=this.getSyncSegmentCandidate_(e),this.generateSegmentInfo_(e,n,null,!0);if(null===n)return a=this.fetchAtBuffer_?(n=(t=Sl.getMediaInfoForTime(e,s,o.segmentIndex,o.time)).mediaIndex,t.startTime):(n=(l=Sl.getMediaInfoForTime(e,r,o.segmentIndex,o.time)).mediaIndex,l.startTime),this.generateSegmentInfo_(e,n,a,!1);var l=e.segments[n],a=l&&l.end?l.end:s;return this.generateSegmentInfo_(e,n+1,a,!1)}},{key:"getSyncSegmentCandidate_",value:function(t){var e=this;if(-1===this.currentTimeline_)return 0;var n=t.segments.map(function(t,e){return{timeline:t.timeline,segmentIndex:e}}).filter(function(t){return t.timeline===e.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(t,e,n,i){if(e<0||e>=t.segments.length)return null;var r=t.segments[e];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:e,isSyncRequest:i,startOfSegment:n,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return!1;var e=this.currentTime_(),n=t.bandwidth,i=this.pendingSegment_.duration,r=Sl.estimateSegmentRequestTime(i,n,this.playlist_,t.bytesReceived),t=function(t,e,n){var i=2<arguments.length&&void 0!==n?n:1;return((t.length?t.end(t.length-1):0)-e)/i}(this.buffered_(),e,this.hls_.tech_.playbackRate())-1;if(r<=t)return!1;i=function(t){var e=t.master,n=t.currentTime,i=t.bandwidth,r=t.duration,o=t.segmentDuration,s=t.timeUntilRebuffer,a=t.currentTimeline,l=t.syncController,t=e.playlists.filter(function(t){return!Sl.isIncompatible(t)}),e=t.filter(Sl.isEnabled);e.length||(e=t.filter(function(t){return!Sl.isDisabled(t)}));t=e.filter(Sl.hasAttribute.bind(null,"BANDWIDTH")).map(function(t){var e=l.getSyncPoint(t,r,a,n)?1:2;return{playlist:t,rebufferingImpact:Sl.estimateSegmentRequestTime(o,i,t)*e-s}}),e=t.filter(function(t){return t.rebufferingImpact<=0});return gu(e,function(t,e){return yu(e.playlist,t.playlist)}),e.length?e[0]:(gu(t,function(t,e){return t.rebufferingImpact-e.rebufferingImpact}),t[0]||null)}({master:this.hls_.playlists.master,currentTime:e,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:t,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(i){r=r-t-i.rebufferingImpact,t=t<=1/30?1:.5;return!i.playlist||i.playlist.uri===this.playlist_.uri||r<t?!1:(this.bandwidth=i.playlist.attributes.BANDWIDTH*_u.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(t,e){this.pendingSegment_&&e.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(e.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),t.abortRequests=pu(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(){var t,e,n,i,n=(t=this.seekable_(),e=this.currentTime_(),n=this.playlist_.targetDuration||10,i=void 0,i=t.length&&0<t.start(0)&&t.start(0)<e?t.start(0):e-30,Math.min(i,e-n));0<n&&this.remove(0,n)}},{key:"createSimplifiedSegmentObj_",value:function(t){var e=t.segment,n={resolvedUri:e.resolvedUri,byterange:e.byterange,requestId:t.requestId};return e.key&&(t=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]),n.key={resolvedUri:e.key.resolvedUri,iv:t}),e.map&&(n.map=this.initSegment(e.map)),n}},{key:"segmentRequestFinished_",value:function(t,e){if(this.mediaRequests+=1,e.stats&&(this.mediaBytesTransferred+=e.stats.bytesReceived,this.mediaTransferDuration+=e.stats.roundTripTime),this.pendingSegment_){if(e.requestId===this.pendingSegment_.requestId){if(t)return this.pendingSegment_=null,this.state="READY",t.code===Su?void(this.mediaRequestsAborted+=1):(this.pause(),t.code===wu?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));this.bandwidth=e.stats.bandwidth,this.roundTrip=e.stats.roundTripTime,e.map&&(e.map=this.initSegment(e.map,!0)),this.processSegmentResponse_(e)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(r){var t,o,s,a,e=this.pendingSegment_;e.bytes=r.bytes,r.map&&(e.segment.map.bytes=r.map.bytes),e.endOfAllRequests=r.endOfAllRequests,r.fmp4Captions&&(function(t,e){for(var n in r.captionStreams){var i;t[n]||(e.trigger({type:"usage",name:"hls-608"}),i=e.textTracks().getTrackById(n),t[n]=i||e.addRemoteTextTrack({kind:"captions",id:n,label:n},!1).track)}}(this.inbandTextTracks_,this.hls_.tech_),t={inbandTextTracks:this.inbandTextTracks_,captionArray:r.fmp4Captions,timestampOffset:0},s=t.inbandTextTracks,e=t.captionArray,a=t.timestampOffset,e&&(o=window.WebKitDataCue||window.VTTCue,e.forEach(function(t){var e=t.stream,n=t.startTime,i=t.endTime;s[e]&&(n+=a,i+=a,s[e].addCue(new o(n,i,t.text)))})),this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_){var e=this.pendingSegment_,n=e.segment,i=this.syncController_.probeSegmentInfo(e);void 0===this.startingMedia_&&i&&(i.containsAudio||i.containsVideo)&&(this.startingMedia_={containsAudio:i.containsAudio,containsVideo:i.containsVideo});var r=(s=this.loaderType_,a=this.startingMedia_,l=i,"main"===s&&a&&l?l.containsAudio||l.containsVideo?a.containsVideo&&!l.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.containsVideo&&l.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(r)return this.error({message:r,blacklistDuration:1/0}),void this.trigger("error");if(e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==e.timestampOffset&&e.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(e.timestampOffset),this.trigger("timestampoffset"));var o,s,a,l,u,i=this.syncController_.mappingForTimeline(e.timeline);null!==i&&this.trigger({type:"segmenttimemapping",mapping:i}),this.state="APPENDING",n.map&&(o=hl(n.map),this.activeInitSegmentId_&&this.activeInitSegmentId_===o||(u=this.initSegment(n.map),this.sourceUpdater_.appendBuffer(u.bytes,function(){t.activeInitSegmentId_=o}))),e.byteLength=e.bytes.byteLength,"number"==typeof n.start&&"number"==typeof n.end?this.mediaSecondsLoaded+=n.end-n.start:this.mediaSecondsLoaded+=n.duration,this.logger_((a=(s=e).segment,l=a.start,r=a.end,i=s.playlist,u=i.mediaSequence,n=i.id,a=i.segments,i=void 0===a?[]:a,a=s.mediaIndex,s=s.timeline,["appending ["+a+"] of ["+u+", "+(u+i.length)+"] from playlist ["+n+"]","["+l+" => "+r+"] in timeline ["+s+"]"].join(" "))),this.sourceUpdater_.appendBuffer(e.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_,e=t.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(t),this.addSegmentMetadataCue_(t),this.state="READY",this.mediaIndex=t.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate"),e.end&&this.currentTime_()-e.end>3*t.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),vu(t.playlist,this.mediaSource_,t.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(t){var e=this.throughput.rate,n=Date.now()-t.endOfAllRequests+1,n=Math.floor(t.byteLength/n*8*1e3);this.throughput.rate+=(n-e)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(t){var e,n,i;this.segmentMetadataTrack_&&(e=(n=t.segment).start,i=n.end,bu(e)&&bu(i)&&(vl(e,i,this.segmentMetadataTrack_),n=d.WebKitDataCue||d.VTTCue,t={bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:e,end:i},(i=new n(e,i,JSON.stringify(t))).value=t,this.segmentMetadataTrack_.addCue(i)))}}]),Eu);function Eu(t){Ma(this,Eu);var e=Ha(this,(Eu.__proto__||Object.getPrototypeOf(Eu)).call(this));if(!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return e.bandwidth=t.bandwidth,e.throughput={rate:0,count:0},e.roundTrip=NaN,e.resetStats_(),e.mediaIndex=null,e.hasPlayed_=t.hasPlayed,e.currentTime_=t.currentTime,e.seekable_=t.seekable,e.seeking_=t.seeking,e.duration_=t.duration,e.mediaSource_=t.mediaSource,e.hls_=t.hls,e.loaderType_=t.loaderType,e.startingMedia_=void 0,e.segmentMetadataTrack_=t.segmentMetadataTrack,e.goalBufferLength_=t.goalBufferLength,e.sourceType_=t.sourceType,e.inbandTextTracks_=t.inbandTextTracks,e.state_="INIT",e.checkBufferTimeout_=null,e.error_=void 0,e.currentTimeline_=-1,e.pendingSegment_=null,e.mimeType_=null,e.sourceUpdater_=null,e.xhrOptions_=null,e.activeInitSegmentId_=null,e.initSegments_={},e.captionParser_=new ma,e.decrypter_=t.decrypter,e.syncController_=t.syncController,e.syncPoint_={segmentIndex:0,time:0},e.syncController_.on("syncinfoupdate",function(){return e.trigger("syncinfoupdate")}),e.mediaSource_.addEventListener("sourceopen",function(){return e.ended_=!1}),e.fetchAtBuffer_=!1,e.logger_=ru("SegmentLoader["+e.loaderType_+"]"),Object.defineProperty(e,"state",{get:function(){return this.state_},set:function(t){t!==this.state_&&(this.logger_(this.state_+" -> "+t),this.state_=t)}}),e}function Cu(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))}var xu=new Uint8Array("\n\n".split("").map(function(t){return t.charCodeAt(0)})),Au=(ne(Ou,ku),Wo(Ou,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Ji.createTimeRanges();var t=this.subtitlesTrack_.cues,e=t[0].startTime,t=t[t.length-1].startTime;return Ji.createTimeRanges([[e,t]])}},{key:"initSegment",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e;if(!t)return null;var i=hl(t),r=this.initSegments_[i];return n&&!r&&t.bytes&&(n=xu.byteLength+t.bytes.byteLength,(n=new Uint8Array(n)).set(t.bytes),n.set(xu,t.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:n}),r||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(t){return void 0===t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(t,e){vl(t,e,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var t=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e=this.skipEmptySegments_(e)){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}}},{key:"skipEmptySegments_",value:function(t){for(;t&&t.segment.empty;)t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest);return t}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var t=this.pendingSegment_,n=t.segment;if("function"!=typeof d.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){function i(){e.handleSegment_()}return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",i),void this.subtitlesTrack_.tech_.one("vttjserror",function(){e.subtitlesTrack_.tech_.off("vttjsloaded",i),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")})}n.requested=!0;try{this.parseVTTCues_(t)}catch(t){return this.error({message:t.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(t,this.syncController_.timelines[t.timeline],this.playlist_),t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,t.cues.length&&this.remove(t.cues[0].endTime,t.cues[t.cues.length-1].endTime),t.cues.forEach(function(t){e.subtitlesTrack_.addCue(t)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(e){var t=void 0,n=!1;"function"==typeof d.TextDecoder?t=new d.TextDecoder("utf8"):(t=d.WebVTT.StringDecoder(),n=!0);t=new d.WebVTT.Parser(d,d.vttjs,t);e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},t.oncue=e.cues.push.bind(e.cues),t.ontimestampmap=function(t){return e.timestampmap=t},t.onparsingerror=function(t){Ji.log.warn("Error encountered when parsing cues: "+t.message)},e.segment.map&&(i=e.segment.map.bytes,n&&(i=Cu(i)),t.parse(i));var i=e.bytes;n&&(i=Cu(i)),t.parse(i),t.flush()}},{key:"updateTimeMapping_",value:function(t,e,n){var i,r,o=t.segment;e&&(t.cues.length?(r=t.timestampmap,i=r.MPEGTS/9e4-r.LOCAL+e.mapping,t.cues.forEach(function(t){t.startTime+=i,t.endTime+=i}),n.syncInfo||(r=t.cues[0].startTime,e=t.cues[t.cues.length-1].startTime,n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:Math.min(r,e-o.duration)})):o.empty=!0)}}]),Ou);function Ou(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Ma(this,Ou);e=Ha(this,(Ou.__proto__||Object.getPrototypeOf(Ou)).call(this,t,e));return e.mediaSource_=null,e.subtitlesTrack_=null,e}var Lu=Go,Pu=[{name:"VOD",run:function(t,e,n){if(n===1/0)return null;return{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(t,e,n,i,r){if(!t.datetimeToDisplayTime)return null;var o=e.segments||[],s=null,a=null;r=r||0;for(var l=0;l<o.length;l++){var u=o[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+t.datetimeToDisplayTime,u=Math.abs(r-c);if(null!==a&&a<u)break;a=u,s={time:c,segmentIndex:l}}}return s}},{name:"Segment",run:function(t,e,n,i,r){var o=e.segments||[],s=null,a=null;r=r||0;for(var l=0;l<o.length;l++){var u=o[l];if(u.timeline===i&&void 0!==u.start){var c=Math.abs(r-u.start);if(null!==a&&a<c)break;(!s||null===a||c<=a)&&(a=c,s={time:u.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(t,e,n,i,r){var o=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length)for(var s=null,a=0;a<e.discontinuityStarts.length;a++){var l=e.discontinuityStarts[a],u=e.discontinuitySequence+a+1,c=t.discontinuities[u];if(c){u=Math.abs(r-c.time);if(null!==s&&s<u)break;(!o||null===s||u<=s)&&(s=u,o={time:c.time,segmentIndex:l})}}return o}},{name:"Playlist",run:function(t,e){return e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence}:null}}],Du=(Go=Ji.EventTarget,ne(Nu,Go),Wo(Nu,[{key:"getSyncPoint",value:function(t,e,n,i){n=this.runStrategies_(t,e,n,i);return n.length?this.selectSyncPoint_(n,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function(t,e){if(!t||!t.segments)return null;e=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!e.length)return null;e=this.selectSyncPoint_(e,{key:"segmentIndex",value:0});return 0<e.segmentIndex&&(e.time*=-1),Math.abs(e.time+Qa(t,e.segmentIndex,0))}},{key:"runStrategies_",value:function(t,e,n,i){for(var r=[],o=0;o<Pu.length;o++){var s=Pu[o],a=s.run(this,t,e,n,i);a&&(a.strategy=s.name,r.push({strategy:s.name,syncPoint:a}))}return r}},{key:"selectSyncPoint_",value:function(t,e){for(var n=t[0].syncPoint,i=Math.abs(t[0].syncPoint[e.key]-e.value),r=t[0].strategy,o=1;o<t.length;o++){var s=Math.abs(t[o].syncPoint[e.key]-e.value);s<i&&(i=s,n=t[o].syncPoint,r=t[o].strategy)}return this.logger_("syncPoint for ["+e.key+": "+e.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(t,e){for(var n=e.mediaSequence-t.mediaSequence-1;0<=n;n--){var i=t.segments[n];if(i&&void 0!==i.start){e.syncInfo={mediaSequence:t.mediaSequence+n,time:i.start},this.logger_("playlist refresh sync: [time:"+e.syncInfo.time+", mediaSequence: "+e.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(t){!this.datetimeToDisplayTime&&t.segments&&t.segments.length&&t.segments[0].dateTimeObject&&(t=t.segments[0].dateTimeObject.getTime()/1e3,this.datetimeToDisplayTime=-t)}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(t){var e=t.segment,n=t.playlist,i=void 0;return(i=e.map?this.probeMp4Segment_(t):this.probeTsSegment_(t))&&this.calculateSegmentTimeMapping_(t,i)&&(this.saveDiscontinuitySyncInfo_(t),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:e.start})),i}},{key:"probeMp4Segment_",value:function(t){var e=t.segment,n=Yo.timescale(e.map.bytes),n=Yo.startTime(n,t.bytes);return null!==t.timestampOffset&&(t.timestampOffset-=n),{start:n,end:n+e.duration}}},{key:"probeTsSegment_",value:function(t){var e=Lu(t.bytes,this.inspectCache_),n=void 0,t=void 0;return e?(e.video&&2===e.video.length?(this.inspectCache_=e.video[1].dts,n=e.video[0].dtsTime,t=e.video[1].dtsTime):e.audio&&2===e.audio.length&&(this.inspectCache_=e.audio[1].dts,n=e.audio[0].dtsTime,t=e.audio[1].dtsTime),{start:n,end:t,containsVideo:e.video&&2===e.video.length,containsAudio:e.audio&&2===e.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].time}},{key:"mappingForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function(t,e){var n=t.segment,i=this.timelines[t.timeline];if(null!==t.timestampOffset)i={time:t.startOfSegment,mapping:t.startOfSegment-e.start},this.timelines[t.timeline]=i,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+i.time+"] [mapping: "+i.mapping+"]"),n.start=t.startOfSegment,n.end=e.end+i.mapping;else{if(!i)return!1;n.start=e.start+i.mapping,n.end=e.end+i.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(t){var e=t.playlist,n=t.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(e.discontinuityStarts&&e.discontinuityStarts.length)for(var i=0;i<e.discontinuityStarts.length;i++){var r,o=e.discontinuityStarts[i],s=e.discontinuitySequence+i+1,a=o-t.mediaIndex,l=Math.abs(a);(!this.discontinuities[s]||this.discontinuities[s].accuracy>l)&&(r=void 0,r=a<0?n.start-Qa(e,t.mediaIndex,o):n.end+Qa(e,t.mediaIndex+1,o),this.discontinuities[s]={time:r,accuracy:l})}}}]),Nu);function Nu(){Ma(this,Nu);var t=Ha(this,(Nu.__proto__||Object.getPrototypeOf(Nu)).call(this));return t.inspectCache_=void 0,t.timelines=[],t.discontinuities=[],t.datetimeToDisplayTime=null,t.logger_=ru("SyncController"),t}function Iu(t,e){t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)}function ju(t,e){(e.activePlaylistLoader=t).load()}function Mu(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){Bu[t](t,e)});var n=e.mediaTypes,t=e.masterPlaylistLoader,i=e.tech,r=e.hls;["AUDIO","SUBTITLES"].forEach(function(t){var r,o,s,a,l,u;n[t].activeGroup=(r=t,o=e,function(e){var t=o.masterPlaylistLoader,n=o.mediaTypes[r].groups,i=t.media();if(!i)return null;t=null;return i.attributes[r]&&(t=n[i.attributes[r]]),t=t||n.main,void 0===e?t:null!==e&&t.filter(function(t){return t.id===e.id})[0]||null}),n[t].activeTrack=Fu[t](t,e),n[t].onGroupChanged=(s=t,a=e,function(){var t=a.segmentLoaders,e=t[s],n=t.main,i=a.mediaTypes[s],r=i.activeTrack(),t=i.activeGroup(r),r=i.activePlaylistLoader;Iu(e,i),t&&(t.playlistLoader?(e.resyncLoader(),ju(t.playlistLoader,i)):r&&n.resetEverything())}),n[t].onTrackChanged=(l=t,u=e,function(){var t=u.segmentLoaders,e=t[l],n=t.main,i=u.mediaTypes[l],r=i.activeTrack(),o=i.activeGroup(r),t=i.activePlaylistLoader;Iu(e,i),o&&(o.playlistLoader?(t!==o.playlistLoader&&(e.track&&e.track(r),e.resetEverything()),ju(o.playlistLoader,i)):n.resetEverything())})});var o,s=((s=n.AUDIO.activeGroup()).filter(function(t){return t.default})[0]||s[0]).id;function a(){n.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})}for(o in n.AUDIO.tracks[s].enabled=!0,n.AUDIO.onTrackChanged(),t.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(t){return n[t].onGroupChanged()})}),i.audioTracks().addEventListener("change",a),i.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),r.on("dispose",function(){i.audioTracks().removeEventListener("change",a),i.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),n.AUDIO.tracks)i.audioTracks().addTrack(n.AUDIO.tracks[o])}var Ru=new Dl("./decrypter-worker.worker.js",function(t,e){var c,n,i,h,d,m,r,o,l,g,s,a=this;c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},h=function(){for(var t,e,n,i=[[[],[],[],[],[]],[[],[],[],[],[]]],r=i[0],o=i[1],s=r[4],a=o[4],l=void 0,u=void 0,c=void 0,h=[],d=[],f=void 0,p=void 0,l=0;l<256;l++)d[(h[l]=l<<1^283*(l>>7))^l]=l;for(u=c=0;!s[u];u^=t||1,c=d[c]||1)for(n=(n=c^c<<1^c<<2^c<<3^c<<4)>>8^255&n^99,p=16843009*h[e=h[t=h[a[s[u]=n]=u]]]^65537*e^257*t^16843008*u,f=257*h[n]^16843008*n,l=0;l<4;l++)r[l][u]=f=f<<24^f>>>8,o[l][n]=p=p<<24^p>>>8;for(l=0;l<5;l++)r[l]=r[l].slice(0),o[l]=o[l].slice(0);return i},d=null,f.prototype.decrypt=function(t,e,n,i,r,o){for(var s,a,l=this._key[1],u=t^l[0],c=i^l[1],h=n^l[2],d=e^l[3],f=void 0,p=l.length/4-2,m=void 0,g=4,e=this._tables[1],y=e[0],v=e[1],b=e[2],_=e[3],T=e[4],m=0;m<p;m++)f=y[u>>>24]^v[c>>16&255]^b[h>>8&255]^_[255&d]^l[g],s=y[c>>>24]^v[h>>16&255]^b[d>>8&255]^_[255&u]^l[g+1],a=y[h>>>24]^v[d>>16&255]^b[u>>8&255]^_[255&c]^l[g+2],d=y[d>>>24]^v[u>>16&255]^b[c>>8&255]^_[255&h]^l[g+3],g+=4,u=f,c=s,h=a;for(m=0;m<4;m++)r[(3&-m)+o]=T[u>>>24]<<24^T[c>>16&255]<<16^T[h>>8&255]<<8^T[255&d]^l[g++],f=u,u=c,c=h,h=d,d=f},m=f,p.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},p.prototype.off=function(t,e){if(!this.listeners[t])return!1;e=this.listeners[t].indexOf(e);return this.listeners[t].splice(e,1),-1<e},p.prototype.trigger=function(t,e){var n=this.listeners[t];if(n)if(2===arguments.length)for(var i=n.length,r=0;r<i;++r)n[r].call(this,e);else for(var o=Array.prototype.slice.call(arguments,1),s=n.length,a=0;a<s;++a)n[a].apply(this,o)},p.prototype.dispose=function(){this.listeners={}},p.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(y,o=r=p),y.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},y.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},l=y,g=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},v.prototype.decryptChunk_=function(e,n,i,r){return function(){var t=function(t,e,n){for(var i,r,o,s,a=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),l=new m(Array.prototype.slice.call(e)),t=new Uint8Array(t.byteLength),u=new Int32Array(t.buffer),c=void 0,h=void 0,d=void 0,f=void 0,p=void 0,c=n[0],h=n[1],d=n[2],f=n[3],p=0;p<a.length;p+=4)i=g(a[p]),r=g(a[p+1]),o=g(a[p+2]),s=g(a[p+3]),l.decrypt(i,r,o,s,u,p),u[p]=g(u[p]^c),u[p+1]=g(u[p+1]^h),u[p+2]=g(u[p+2]^d),u[p+3]=g(u[p+3]^f),c=i,h=r,d=o,f=s;return t}(e,n,i);r.set(t,e.byteOffset)}},n(v,null,[{key:"STEP",get:function(){return 32e3}}]),s=v,function(o){o.onmessage=function(t){var r=t.data,e=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength),n=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4),t=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new s(e,n,t,function(t,e){var n,i;o.postMessage((n={source:r.source,decrypted:e},i={},Object.keys(n).forEach(function(t){var e=n[t];ArrayBuffer.isView(e)?i[t]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:i[t]=e}),i),[e.buffer])})}}(a);function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t){c(this,f),d=d||h(),this._tables=[[d[0][0].slice(),d[0][1].slice(),d[0][2].slice(),d[0][3].slice(),d[0][4].slice()],[d[1][0].slice(),d[1][1].slice(),d[1][2].slice(),d[1][3].slice(),d[1][4].slice()]];var e=void 0,n=void 0,i=void 0,r=void 0,o=void 0,s=this._tables[0][4],a=this._tables[1],l=t.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=t.slice(0),o=[],this._key=[r,o],e=l;e<4*l+28;e++)i=r[e-1],(e%l==0||8===l&&e%l==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],e%l==0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[e]=r[e-l]^i;for(n=0;e;n++,e--)i=r[3&n?e:e-4],o[n]=e<=4||n<4?i:a[0][s[i>>>24]]^a[1][s[i>>16&255]]^a[2][s[i>>8&255]]^a[3][s[255&i]]}function p(){c(this,p),this.listeners={}}function y(){c(this,y);var t=i(this,o.call(this,r));return t.jobs=[],t.delay=1,t.timeout_=null,t}function v(t,e,n,i){c(this,v);var r=v.STEP,o=new Int32Array(t.buffer),s=new Uint8Array(t.byteLength),a=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(o.subarray(a,a+r),e,n,s)),a=r;a<o.length;a+=r)n=new Uint32Array([g(o[a-4]),g(o[a-3]),g(o[a-2]),g(o[a-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(a,a+r),e,n,s));this.asyncStream_.push(function(){var t;i(null,(t=s).subarray(0,t.byteLength-t[t.byteLength-1]))})}}),Uu={AUDIO:function(s,a){return function(){var t=a.segmentLoaders[s],e=a.mediaTypes[s],n=a.blacklistCurrentPlaylist;Iu(t,e);var i=e.activeTrack(),t=e.activeGroup(),t=(t.filter(function(t){return t.default})[0]||t[0]).id,r=e.tracks[t];if(i!==r){for(var o in Ji.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),e.tracks)e.tracks[o].enabled=e.tracks[o]===r;e.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(n,i){return function(){var t=i.segmentLoaders[n],e=i.mediaTypes[n];Ji.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Iu(t,e);t=e.activeTrack();t&&(t.mode="disabled"),e.onTrackChanged()}}},qu={AUDIO:function(t,e,n){var i,r,o;e&&(i=n.tech,r=n.requestOptions,o=n.segmentLoaders[t],e.on("loadedmetadata",function(){var t=e.media();o.playlist(t,r),(!i.paused()||t.endList&&"none"!==i.preload())&&o.load()}),e.on("loadedplaylist",function(){o.playlist(e.media(),r),i.paused()||o.load()}),e.on("error",Uu[t](t,n)))},SUBTITLES:function(t,e,n){var i=n.tech,r=n.requestOptions,o=n.segmentLoaders[t],s=n.mediaTypes[t];e.on("loadedmetadata",function(){var t=e.media();o.playlist(t,r),o.track(s.activeTrack()),(!i.paused()||t.endList&&"none"!==i.preload())&&o.load()}),e.on("loadedplaylist",function(){o.playlist(e.media(),r),i.paused()||o.load()}),e.on("error",Uu[t](t,n))}},Bu={AUDIO:function(t,e){var n,i,r=e.hls,o=e.sourceType,s=e.segmentLoaders[t],a=e.requestOptions.withCredentials,l=e.master,u=l.mediaGroups,c=l.playlists,l=e.mediaTypes[t],h=l.groups,d=l.tracks,f=e.masterPlaylistLoader;for(n in u[t]&&0!==Object.keys(u[t]).length||(u[t]={main:{default:{default:!0}}}),u[t]){h[n]||(h[n]=[]);var p,m=c.filter(function(e,n){return function(t){return t.attributes[e]===n}}(t,n));for(p in u[t][n]){var g=u[t][n][p];m.filter(function(e){return function(t){return t.resolvedUri===e}}(g.resolvedUri)).length&&delete g.resolvedUri;var y=void 0,y=g.resolvedUri?new Ya(g.resolvedUri,r,a):g.playlists&&"dash"===o?new nu(g.playlists[0],r,a,f):null,g=Ji.mergeOptions({id:p,playlistLoader:y},g);qu[t](t,g.playlistLoader,e),h[n].push(g),void 0===d[p]&&(g=new Ji.AudioTrack({id:p,kind:(i=void 0,i=(y=g).default?"main":"alternative",y.characteristics&&0<=y.characteristics.indexOf("public.accessibility.describes-video")&&(i="main-desc"),i),enabled:!1,language:g.language,default:g.default,label:p}),d[p]=g)}}s.on("error",Uu[t](t,e))},SUBTITLES:function(t,e){var n,i,r,o=e.tech,s=e.hls,a=e.sourceType,l=e.segmentLoaders[t],u=e.requestOptions.withCredentials,c=e.master.mediaGroups,h=e.mediaTypes[t],d=h.groups,f=h.tracks,p=e.masterPlaylistLoader;for(n in c[t])for(var m in d[n]||(d[n]=[]),c[t][n])c[t][n][m].forced||(r=c[t][n][m],i=void 0,"hls"===a?i=new Ya(r.resolvedUri,s,u):"dash"===a&&(i=new nu(r.playlists[0],s,u,p)),r=Ji.mergeOptions({id:m,playlistLoader:i},r),qu[t](t,r.playlistLoader,e),d[n].push(r),void 0===f[m]&&(r=o.addRemoteTextTrack({id:m,kind:"subtitles",default:r.default&&r.autoselect,language:r.language,label:m},!1).track,f[m]=r));l.on("error",Uu[t](t,e))},"CLOSED-CAPTIONS":function(t,e){var n,i=e.tech,r=e.master.mediaGroups,e=e.mediaTypes[t],o=e.groups,s=e.tracks;for(n in r[t])for(var a in o[n]||(o[n]=[]),r[t][n]){var l=r[t][n][a];l.instreamId.match(/CC\d/)&&(o[n].push(Ji.mergeOptions({id:a},l)),void 0===s[a]&&(l=i.addRemoteTextTrack({id:l.instreamId,kind:"captions",default:l.default&&l.autoselect,language:l.language,label:a},!1).track,s[a]=l))}}},Fu={AUDIO:function(n,i){return function(){var t,e=i.mediaTypes[n].tracks;for(t in e)if(e[t].enabled)return e[t];return null}},SUBTITLES:function(n,i){return function(){var t,e=i.mediaTypes[n].tracks;for(t in e)if("showing"===e[t].mode)return e[t];return null}}},$u=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ou,activeTrack:ou,onGroupChanged:ou,onTrackChanged:ou}}),e},zu=void 0,Hu=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Vu=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},Wu=(Go=Ji.EventTarget,ne(Gu,Go),Wo(Gu,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=i.masterPlaylistLoader_.media(),e=1.5*i.masterPlaylistLoader_.targetDuration*1e3;sl(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=e,t.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(t,i.requestOptions_),i.mainSegmentLoader_.load()),Mu({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,hls:i.hls_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),t);try{i.setupSourceBuffers_()}catch(t){return Ji.log.warn("Failed to create SourceBuffers",t),i.mediaSource.endOfStream("decode")}i.setupFirstPlay(),i.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e,t=i.masterPlaylistLoader_.media();if(!t){i.excludeUnsupportedVariants_();var n=void 0;return i.enableLowInitialPlaylist&&(n=i.selectInitialPlaylist()),n=n||i.selectPlaylist(),i.initialMedia_=n,void i.masterPlaylistLoader_.media(i.initialMedia_)}i.useCueTags_&&i.updateAdCues_(t),i.mainSegmentLoader_.playlist(t,i.requestOptions_),i.updateDuration(),i.tech_.paused()||(i.mainSegmentLoader_.load(),i.audioSegmentLoader_&&i.audioSegmentLoader_.load()),t.endList||(e=function(){var t=i.seekable();0!==t.length&&i.mediaSource.addSeekableRange_(t.start(0),t.end(0))},i.duration()!==1/0?(t=function t(){i.duration()===1/0?e():i.tech_.one("durationchange",t)},i.tech_.one("durationchange",t)):e())}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=i.masterPlaylistLoader_.media(),e=1.5*i.masterPlaylistLoader_.targetDuration*1e3;sl(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=e,i.mainSegmentLoader_.playlist(t,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=i.masterPlaylistLoader_.media();i.stuckAtPlaylistEnd_(t)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),i.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(t,e){var n,i=t.mediaGroups||{},r=!0,t=Object.keys(i.AUDIO);for(n in i.AUDIO)for(var o in i.AUDIO[n])i.AUDIO[n][o].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),zu.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),zu.Playlist.isFmp4(e)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.length&&1<Object.keys(i.AUDIO[t[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var r=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=r.selectPlaylist(),e=r.masterPlaylistLoader_.media(),n=r.tech_.buffered(),i=n.length?n.end(n.length-1)-r.tech_.currentTime():0,n=r.bufferLowWaterLine();(!e.endList||r.duration()<_u.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<e.attributes.BANDWIDTH||n<=i)&&r.masterPlaylistLoader_.media(t),r.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){r.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){r.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){r.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){r.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){r.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(t){r.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})}),this.audioSegmentLoader_.on("ended",function(){r.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var t=this,e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetEverything(function(){Ji.browser.IE_VERSION||Ji.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.seekTo_(t.end(t.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var t=this,e=this.masterPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_())return!1;if(!e.endList){var n=this.seekable();if(!n.length)return!1;if(Ji.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.seekTo_(n.end(0)),t.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(t){return Ji.log.warn("Failed to create Source Buffers",t),this.mediaSource.endOfStream("decode")}var t;!this.tech_.autoplay()||void 0!==(t=this.tech_.play())&&"function"==typeof t.then&&t.then(null,function(t){}),this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var t=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=(this.mainSegmentLoader_.startingMedia_&&!this.mainSegmentLoader_.startingMedia_.containsVideo||t)&&this.audioSegmentLoader_.ended_),t&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(t){if(!this.seekable().length)return!1;var e=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null===e)return!1;var n=zu.Playlist.playlistEnd(t,e),t=this.tech_.currentTime(),e=this.tech_.buffered();if(!e.length)return n-t<=.1;e=e.end(e.length-1);return e-t<=.1&&n-e<=.1}},{key:"blacklistCurrentPlaylist",value:function(t,e){var n,i=0<arguments.length&&void 0!==t?t:{},r=e,o=void 0,o=i.playlist||this.masterPlaylistLoader_.media(),r=r||i.blacklistDuration||this.blacklistDuration;if(!o){this.error=i;try{return this.mediaSource.endOfStream("network")}catch(t){return this.trigger("error")}}var s=1===this.masterPlaylistLoader_.master.playlists.filter(rl).length;return s?(Ji.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s)):(o.excludeUntil=Date.now()+1e3*r,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),n=this.selectPlaylist(),Ji.log.warn("Problem encountered with the current HLS playlist."+(i.message?" "+i.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(n))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(t){var e=pl(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:zu.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var t=void 0,e=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var i=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==i&&0!==(t=zu.Playlist.seekable(n,i)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(e=zu.Playlist.seekable(n,i)).length)return}!e||e.start(0)>t.end(0)||t.start(0)>e.end(0)?this.seekable_=t:this.seekable_=Ji.createTimeRanges([[(e.start(0)>t.start(0)?e:t).start(0),(e.end(0)<t.end(0)?e:t).end(0)]]),this.logger_("seekable updated ["+gl(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){function t(){e.mediaSource.duration=i,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)}var e=this,n=this.mediaSource.duration,i=zu.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered();0<r.length&&(i=Math.max(i,r.end(r.length-1))),n!==i&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",t):t())}},{key:"dispose",value:function(){var i=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var e,n=i.mediaTypes_[t].groups;for(e in n)n[e].forEach(function(t){t.playlistLoader&&t.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var t,e=this.masterPlaylistLoader_.media();if(e&&"open"===this.mediaSource.readyState){if((t=Bl(this.masterPlaylistLoader_.master,e)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(t),this.excludeIncompatibleVariants_(e)}}},{key:"configureLoaderMimeTypes_",value:function(t){var e=1<t.length&&-1===t[0].indexOf(",")&&t[0]!==t[1]?new Ji.EventTarget:null;this.mainSegmentLoader_.mimeType(t[0],e),t[1]&&this.audioSegmentLoader_.mimeType(t[1],e)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(t){t.attributes.CODECS&&d.MediaSource&&d.MediaSource.isTypeSupported&&!d.MediaSource.isTypeSupported('video/mp4; codecs="'+t.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(t){return Rl([t])[0]})+'"')&&(t.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(t){var e,n=2,i=null;t.attributes.CODECS&&(e=Ul(t.attributes.CODECS),i=e.videoCodec,n=e.codecCount),this.master().playlists.forEach(function(t){var e={codecCount:2,videoCodec:null};t.attributes.CODECS&&(e=Ul(t.attributes.CODECS)),e.codecCount!==n&&(t.excludeUntil=1/0),e.videoCodec!==i&&(t.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(t){var e=0,n=this.seekable();n.length&&(e=n.start(0)),function(t,e,n){var i=2<arguments.length&&void 0!==n?n:0;if(t.segments)for(var r=i,o=void 0,s=0;s<t.segments.length;s++){var a,l,u,c=t.segments[s];if(o=o||function(t,e){for(var n=t.cues,i=0;i<n.length;i++){var r=n[i];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null}(e,r+c.duration/2)){if("cueIn"in c){o.endTime=r,o.adEndTime=r,r+=c.duration,o=null;continue}if(r<o.endTime){r+=c.duration;continue}o.endTime+=c.duration}else"cueOut"in c&&((o=new d.VTTCue(r,r+c.duration,c.cueOut)).adStartTime=r,o.adEndTime=r+parseFloat(c.cueOut),e.addCue(o)),"cueOutCont"in c&&(u=l=void 0,a=c.cueOutCont.split("/").map(parseFloat),l=(a=Va(a,2))[0],u=a[1],(o=new d.VTTCue(r,r+c.duration,"")).adStartTime=r-l,o.adEndTime=o.adStartTime+u,e.addCue(o));r+=c.duration}}(t,this.cueTagsTrack_,e)}},{key:"goalBufferLength",value:function(){var t=this.tech_.currentTime(),e=_u.GOAL_BUFFER_LENGTH,n=_u.GOAL_BUFFER_LENGTH_RATE,i=Math.max(e,_u.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*n,i)}},{key:"bufferLowWaterLine",value:function(){var t=this.tech_.currentTime(),e=_u.BUFFER_LOW_WATER_LINE,n=_u.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(e,_u.MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*n,i)}}]),Gu);function Gu(t){Ma(this,Gu);var e=Ha(this,(Gu.__proto__||Object.getPrototypeOf(Gu)).call(this)),n=t.url,i=t.withCredentials,r=t.tech,o=t.bandwidth,s=t.externHls,a=t.useCueTags,l=t.blacklistDuration,u=t.enableLowInitialPlaylist,c=t.sourceType,h=t.seekTo;if(!n)throw new Error("A non-empty playlist URL is required");zu=s,e.withCredentials=i,e.tech_=r,e.hls_=r.hls,e.seekTo_=h,e.sourceType_=c,e.useCueTags_=a,e.blacklistDuration=l,e.enableLowInitialPlaylist=u,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:e.withCredentials,timeout:null},e.mediaTypes_=$u(),e.mediaSource=new Ji.MediaSource,e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_.bind(e)),e.seekable_=Ji.createTimeRanges(),e.hasPlayed_=function(){return!1},e.syncController_=new Du(t),e.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new Ru,e.inbandTextTracks_={};o={hls:e.hls_,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.mediaSource.duration},hasPlayed:function(){return e.hasPlayed_()},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:o,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_};return e.masterPlaylistLoader_=new("dash"===e.sourceType_?nu:Ya)(n,e.hls_,e.withCredentials),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new ku(Ji.mergeOptions(o,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),t),e.audioSegmentLoader_=new ku(Ji.mergeOptions(o,{loaderType:"audio"}),t),e.subtitleSegmentLoader_=new Au(Ji.mergeOptions(o,{loaderType:"vtt"}),t),e.setupSegmentLoaderListeners_(),Hu.forEach(function(t){e[t+"_"]=Vu.bind(e,t)}),e.logger_=ru("MPC"),e.masterPlaylistLoader_.load(),e}function Yu(t,e,n){Ma(this,Yu);var r,o,s,i=t.masterPlaylistController_,a=i[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(i);e.attributes.RESOLUTION&&(i=e.attributes.RESOLUTION,this.width=i.width,this.height=i.height),this.bandwidth=e.attributes.BANDWIDTH,this.id=n,this.enabled=(r=t.playlists,o=e.uri,s=a,function(t){var e=r.master.playlists[o],n=il(e),i=rl(e);return void 0===t?i:(t?delete e.disabled:e.disabled=!0,t===i||n||(s(),t?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),t)})}var Ku=["seeking","seeked","pause","playing","error"],Xu=(Wo(Zu,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&d.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=d.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+.1>=e.end(e.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var t=this.tech_.seeking(),e=this.seekable(),n=this.tech_.currentTime(),i=void 0;return t&&this.afterSeekableWindow_(e,n)&&(i=e.end(e.length-1)),t&&this.beforeSeekableWindow_(e,n)&&(i=e.start(0)+.1),void 0!==i&&(this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+gl(e)+". Seeking to "+i+"."),this.seekTo(i),!0)}},{key:"waiting_",value:function(){var t,e;this.techWaiting_()||(t=this.tech_.currentTime(),e=this.tech_.buffered(),(e=pl(e,t)).length&&t+3<=e.end(0)&&(this.cancelTimer_(),this.seekTo(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+e.start(0)+" -> "+e.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})))}},{key:"techWaiting_",value:function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,e)){var n=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}t=this.tech_.buffered(),n=ml(t,e);if(this.videoUnderflow_(n,t,e))return this.cancelTimer_(),this.seekTo(e),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<n.length){t=n.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+t+", seeking to "+n.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*t,e),!0}return!1}},{key:"afterSeekableWindow_",value:function(t,e){return!!t.length&&e>t.end(t.length-1)+.1}},{key:"beforeSeekableWindow_",value:function(t,e){return!!(t.length&&0<t.start(0)&&e<t.start(0)-.1)}},{key:"videoUnderflow_",value:function(t,e,n){if(0===t.length){e=this.gapFromVideoUnderflow_(e,n);if(e)return this.logger_("Encountered a gap in video from "+e.start+" to "+e.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(t){var e=this.tech_.buffered(),n=this.tech_.currentTime(),e=ml(e,n);this.cancelTimer_(),0!==e.length&&n===t&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",t,"nextRange start:",e.start(0)),this.seekTo(e.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(t,e){for(var n=function(t){if(t.length<2)return Ji.createTimeRanges();for(var e=[],n=1;n<t.length;n++){var i=t.end(n-1),r=t.start(n);e.push([i,r])}return Ji.createTimeRanges(e)}(t),i=0;i<n.length;i++){var r=n.start(i),o=n.end(i);if(e-r<4&&2<e-r)return{start:r,end:o}}return null}}]),Zu);function Zu(t){var e=this;Ma(this,Zu),this.tech_=t.tech,this.seekable=t.seekable,this.seekTo=t.seekTo,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=ru("PlaybackWatcher"),this.logger_("initialize");function n(){return e.monitorCurrentTime_()}function i(){return e.techWaiting_()}function r(){return e.cancelTimer_()}function o(){return e.fixesBadSeeks_()}this.tech_.on("seekablechanged",o),this.tech_.on("waiting",i),this.tech_.on(Ku,r),this.tech_.on("canplay",n),this.dispose=function(){e.logger_("dispose"),e.tech_.off("seekablechanged",o),e.tech_.off("waiting",i),e.tech_.off(Ku,r),e.tech_.off("canplay",n),e.checkCurrentTimeTimeout_&&d.clearTimeout(e.checkCurrentTimeTimeout_),e.cancelTimer_()}}function Qu(e,t){var n=0,i=0,r=Ji.mergeOptions(Ju,t);function o(){i&&e.currentTime(i)}function s(t){null!=t&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",o),e.src(t),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())}function a(){if(Date.now()-n<1e3*r.errorInterval)e.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return n=Date.now(),r.getSource.call(e,s);Ji.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function l(){e.off("loadedmetadata",o),e.off("error",a),e.off("dispose",l)}e.ready(function(){e.trigger({type:"usage",name:"hls-error-reload-initialized"})}),e.on("error",a),e.on("dispose",l),e.reloadSourceOnError=function(t){l(),Qu(e,t)}}var Ju={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Go=function(t){Qu(this,t)};Ji.use("*",function(e){return{setSource:function(t,e){e(null,t)},setCurrentTime:function(t){return e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(t),t},play:function(){e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(e.currentTime())}}});var tc={PlaylistLoader:Ya,Playlist:Sl,Decrypter:ir,AsyncStream:La,decrypt:Da,utils:oe,STANDARD_PLAYLIST_SELECTOR:function(){return function(t,e,n,i,r){var o=t.playlists.map(function(t){var e=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,n=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height;return{bandwidth:t.attributes.BANDWIDTH||d.Number.MAX_VALUE,width:e,height:n,playlist:t}});gu(o,function(t,e){return t.bandwidth-e.bandwidth});var s=(o=o.filter(function(t){return!Sl.isIncompatible(t.playlist)})).filter(function(t){return Sl.isEnabled(t.playlist)});s.length||(s=o.filter(function(t){return!Sl.isDisabled(t.playlist)}));var a=s.filter(function(t){return t.bandwidth*_u.BANDWIDTH_VARIANCE<e}),l=a[a.length-1],u=a.filter(function(t){return t.bandwidth===l.bandwidth})[0];if(!1===r){var c=u||s[0]||o[0];return c?c.playlist:null}t=a.filter(function(t){return t.width&&t.height});gu(t,function(t,e){return t.width-e.width});var r=t.filter(function(t){return t.width===n&&t.height===i}),l=r[r.length-1],c=r.filter(function(t){return t.bandwidth===l.bandwidth})[0],h=void 0,a=void 0,r=void 0;c||(a=(h=t.filter(function(t){return t.width>n||t.height>i})).filter(function(t){return t.width===h[0].width&&t.height===h[0].height}),l=a[a.length-1],r=a.filter(function(t){return t.bandwidth===l.bandwidth})[0]);o=r||c||u||s[0]||o[0];return o?o.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(mu(this.tech_.el(),"width"),10),parseInt(mu(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var t=this.playlists.master.playlists.filter(Sl.isEnabled);return gu(t,yu),t.filter(function(t){return Ul(t.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:yu,comparePlaylistResolution:function(t,e){var n=void 0,i=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||d.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),n===(i=i||d.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-i},xhr:al()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(tc,e,{get:function(){return Ji.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),_u[e]},set:function(t){Ji.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Ji.log.warn("value of Hls."+e+" must be greater than or equal to 0"):_u[e]=t}})});function ec(t){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(t)?"hls":/^application\/dash\+xml/i.test(t)?"dash":null}function nc(t,e){for(var n=e.media(),i=-1,r=0;r<t.length;r++)if(t[r].id===n.uri){i=r;break}t.selectedIndex_=i,t.trigger({selectedIndex:i,type:"change"})}tc.canPlaySource=function(){return Ji.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};function ic(t){var e;"dash"===t.options_.sourceType&&(!(e=Ji.players[t.tech_.options_.playerId]).eme||(t=function(t,e,n){if(!t)return t;var i,r={};for(i in t)r[i]={audioContentType:'audio/mp4; codecs="'+n.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+e.attributes.CODECS+'"'},e.contentProtection&&e.contentProtection[i]&&e.contentProtection[i].pssh&&(r[i].pssh=e.contentProtection[i].pssh),"string"==typeof t[i]&&(r[i].url=t[i]);return Ji.mergeOptions(t,r)}(t.source_.keySystems,t.playlists.media(),t.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media()))&&(e.currentSource().keySystems=t,e.eme.initializeMediaKeys&&e.eme.initializeMediaKeys()))}tc.supportsNativeHls=function(){var e=h.createElement("video");if(!Ji.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),tc.supportsNativeDash=!!Ji.getTech("Html5").isSupported()&&/maybe|probably/i.test(h.createElement("video").canPlayType("application/dash+xml")),tc.supportsTypeNatively=function(t){return"hls"===t?tc.supportsNativeHls:"dash"===t&&tc.supportsNativeDash},tc.isSupported=function(){return Ji.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var oe=Ji.getComponent("Component"),rc=(ne(oc,oe),Wo(oc,[{key:"setOptions_",value:function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=_u.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===_u.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.bandwidth=this.options_.bandwidth,this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(t,e){var i=this;t&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=tc,this.options_.sourceType=ec(e),this.options_.seekTo=function(t){i.tech_.setCurrentTime(t),i.setCurrentTime(t)},this.masterPlaylistController_=new Wu(this.options_),this.playbackWatcher_=new Xu(Ji.mergeOptions(this.options_,{seekable:function(){return i.seekable()}})),this.masterPlaylistController_.on("error",function(){Ji.players[i.tech_.options_.playerId].error(i.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=(this.selectPlaylist||tc.STANDARD_PLAYLIST_SELECTOR).bind(this),this.masterPlaylistController_.selectInitialPlaylist=tc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t=1/(this.bandwidth||1),e=void 0,e=0<this.throughput?1/this.throughput:0;return Math.floor(1/(t+e))},set:function(){Ji.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return yl(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return yl(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){var n,t;t=(n=i).playlists,n.representations=function(){return t.master.playlists.filter(function(t){return!il(t)}).map(function(t,e){return new Yu(n,t,t.uri)})},ic(i)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return i.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Ji.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var n=this,t=Ji.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t;e=n.qualityLevels_,(t=n).representations().forEach(function(t){e.addQualityLevel(t)}),nc(e,t.playlists)}),this.playlists.on("mediachange",function(){nc(n.qualityLevels_,n.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),Ua(oc.prototype.__proto__||Object.getPrototypeOf(oc.prototype),"dispose",this).call(this)}}]),oc);function oc(t,e,n){Ma(this,oc);var i=Ha(this,(oc.__proto__||Object.getPrototypeOf(oc)).call(this,e,n.hls));if(e.options_&&e.options_.playerId&&((n=Ji(e.options_.playerId)).hasOwnProperty("hls")||Object.defineProperty(n,"hls",{get:function(){return Ji.log.warn("player.hls is deprecated. Use player.tech().hls instead."),e.trigger({type:"usage",name:"hls-player-access"}),i}}),n.vhs=i,n.dash=i),i.tech_=e,i.source_=t,i.stats={},i.setOptions_(),i.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(h,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(t){var e=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e&&e.contains(i.tech_.el())&&i.masterPlaylistController_.smoothQualityChange_()}),i.on(i.tech_,"seeking",function(){this.tech_.seeking()&&0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),i.on(i.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),i.on(i.tech_,"play",i.play),i}var sc={name:"videojs-http-streaming",VERSION:"1.4.1",canHandleSource:function(t,e){var n=1<arguments.length&&void 0!==e?e:{},n=Ji.mergeOptions(Ji.options,n);return sc.canPlayType(t.type,n)},handleSource:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:{},i=Ji.mergeOptions(Ji.options,i);return e.hls=new rc(t,e,i),e.hls.xhr=al(),e.hls.src(t.src,t.type),e.hls},canPlayType:function(t,e){var n=1<arguments.length&&void 0!==e?e:{},i=Ji.mergeOptions(Ji.options,n).hls.overrideNative,n=ec(t);return n&&(!tc.supportsTypeNatively(n)||i)?"maybe":""}};return void 0!==Ji.MediaSource&&void 0!==Ji.URL||(Ji.MediaSource=ze,Ji.URL=$t),ze.supportsNativeMediaSources()&&Ji.getTech("Html5").registerSourceHandler(sc,0),Ji.HlsHandler=rc,Ji.HlsSourceHandler=sc,Ji.Hls=tc,Ji.use||Ji.registerComponent("Hls",tc),Ji.options.hls=Ji.options.hls||{},Ji.registerPlugin?Ji.registerPlugin("reloadSourceOnError",Go):Ji.plugin("reloadSourceOnError",Go),Ji}),$=jQuery.noConflict(),$(".half:nth-of-type(odd) + br").remove(),quiz(),$(".intro2").click(function(){$(".quiz-intro-modul").css("display","block"),$(this).css("display","none")}),$(".zavrti2, .zavrti2-btn").click(function(){$(".wheel-parent *").not(".intro, .wheel-parent-inner, .wheel").css("display","none"),$(".quiz-intro, .quiz-intro *").not(".intro").css("display","block"),$(".wheel-parent-inner").css({position:"absolute",top:0,opacity:0})}),$(".intro").click(function(t){t.preventDefault(),$(".wheel-parent *").not(".intro").css("display","block"),$(".quiz-intro").css("display","none"),$(".zavrti").css("pointer-events","none"),$(".zavrti2").css("display","none"),setTimeout(function(){$(".zavrti").click()},1e3),$(".wheel-parent-inner").css({position:"relative",top:0,opacity:1})}),$(".intro-two").click(function(t){t.preventDefault(),$(".wheel-parent *").not(".intro").css("display","block"),$(".quiz-intro").css("display","none"),$(".zavrti-btn").css("pointer-events","none"),$(".zavrti2-btn").css("display","none"),setTimeout(function(){$(".zavrti-btn").click()},1e3),$(".wheel-parent-inner").css({position:"relative",top:0,opacity:1})});var $homeTimer=$("#home-timer"),$homeSeconds=60,correctCounter=0,homePoints=0;function clickOnAnswer(t){$("#home-quiz .answer").css("pointer-events","none"),$homeName=$(t).prev().attr("name"),$homeValue=$(t).prev().attr("value"),$homeUserAnswer={question:$homeName,answer:$homeValue};var e;$homeUserQuiz.push($homeUserAnswer),1==$(t).attr("data-correct")?($(t).css({"background-color":"green",border:"1px solid green"}),correctCounter++,homePoints+=100):(e=$("form#home-quiz").find('label[data-correct="1"]'),$(e).css({"background-color":"green",border:"1px solid green"}),$(t).css({"background-color":"red",border:"1px solid red"}));var n=$(".wheel-parent h3,.wheel-parent .whell, .wheel-parent .wheel-parent-inner .wheel-pozadina, .wheel-parent .wheel, .wheel-parent .child-wheel, .wheel-parent h2, .wheel-parent .wheel-parent-inner .small-wheel, .wheel-parent .wheel-parent-inner .shadow-image, .wheel-parent .zavrti-parent, .wheel-parent .home-page-quiz, .home-page-quiz");setTimeout(function(){$(".home-timer-wrapper").css("visibility","visible"),n.css({opacity:1,transition:"700ms"})},5e3),$(".wheel-parent h3").css("margin-bottom","35px"),$(".zavrti").text("Zavrti za sledeće pitanje!"),$(".zavrti").css("pointer-events","all"),$(".zavrti-btn").text("Заврти за следеће питање!"),$(".zavrti-btn").css("pointer-events","all"),$(".wheel-parent").find(".home-timer2").text("Preostalo vreme: "+$homeSeconds+"s"),$(".main-child-content-wrapper").find(".home-timer2").text("Преостало време: "+$homeSeconds+"с"),$(".wheel-parent").find(".home-correct").text("Tačnih odgovora: "+correctCounter),$(".main-child-content-wrapper").find(".home-correct").text("Тачних одговора: "+correctCounter),setTimeout(function(){$(t).closest(".home-page-quiz").css({opacity:0,"z-index":-1}),$(".wheel-parent").css("height","auto"),$(t).closest(".form-group").addClass("d-none"),$(".home-timer-wrapper").fadeIn()},5e3),clearInterval($hometimerInterval),$(".wheel-parent-inner h2").text(" ")}function homeQuizTimer(){$("#home-quiz");$homeTimer.text($homeSeconds);$hometimerInterval=setInterval(function(){var t,e,n,i,r;--$homeSeconds,$homeTimer.text($homeSeconds),0==$homeSeconds&&(clearInterval($hometimerInterval),t=$(".wheel-parent h3,.wheel-parent .wheel, .wheel-parent .child-wheel, .wheel-parent .wheel-parent-inner .wheel-pozadina, .wheel-parent .wheel-parent-inner .small-wheel, .wheel-parent .wheel-parent-inner .shadow-image, .wheel-parent .zavrti-parent, .wheel-parent .home-page-quiz, .wheel-parent .home-timer-wrapper, .home-page-quiz"),e=$(".home-page-quiz-res"),$(".wheel").css({opacity:.02,"transition-property":"none","z-index":1}),$(".wheel-parent h2").text(" "),setTimeout(function(){t.css("display","none")},700),$(".home-page-quiz-res .correct-home").text(correctCounter),r=$(".home-page-quiz-res .points"),n=$(".logged-or-not .logged-span"),i=$(".logged-or-not-child .logged-span-child"),0<$("#main").attr("data-u")?(n.text("Osvojili ste sledeći bedž"),i.text("Освојили сте следећи беџ"),$(".js-reg-button-trivia-end").addClass("d-none")):0==$("#main").attr("data-u")&&($(".js-reg-button-trivia-end").removeClass("d-none"),$(".if-reg-img").removeClass("d-none"),n.html("Registrujte se i dobijte priliku da unapredite svoje poznavanje finansija. Ako se registrujete, osvojićete i sledeći bedž"),i.html("Региструјте се и добијате прилику да унапредите своје познавање финансија. Ако се региструјете, освојићете и следећи беџ")),r.text(homePoints),setTimeout(function(){e.css({opacity:1,"z-index":99999});var t=e.outerHeight();$(".wheel-parent").css("height",t+20+"px")},700),(r=$("h2#you-won-a-trivia-badge")).text("Osvojili ste sledeći bedž"),r.css("opacity",1),$.ajax({method:"POST",url:"/api/trivia",data:{user:$("#main").attr("data-u"),key:$("#main").attr("data-uk"),test:JSON.stringify($homeUserQuiz)}}).done(function(t){var e=t.error,n=t.badge_additional,t=t.badge_first_time;if(void 0===e){if(void 0!==n&&null!=n){var i=!1,r="";switch(parseInt(n)){case 1:i="gospodar-finansija.png",r="Gospodar finansija";break;case 2:i="finansijski-guru.png",r="Finansijski guru";break;case 3:i="skoro-pa-guru.png",r="Skoro pa guru";break;case 4:i="dobar-start.png",r="Dobar start"}$("#badge_additional").removeClass("d-none"),$("#you-won-a-trivia-badge").removeClass("d-none"),$("#badge_additional_img").attr("src","assets/img/"+i),$("#badge_additional").append("<p>"+r+"</p>")}!0===t&&($("#badge_first_time").removeClass("d-none"),$("#you-won-a-trivia-badge").removeClass("d-none"),$("#badge_first_time").append("<p>Bitno je učestvovati</p>"))}}))},1e3)}$homeUserQuiz=[];var novi_index_pitanja,timeSpentOnSite,popupTimer,position=0,index_pitanja=0,triviaUsed=[];function showPopupDetails(){var t=localStorage.getItem("btnClicked");if(null!=t&&""!=t)return!1;t=localStorage.getItem("userPopupAnswerTwo");null!=t&&""!=t&&(e=(new Date).toLocaleDateString(),90<=(new Date(e)-new Date(t).getTime())/864e5&&(localStorage.removeItem("userPopupAnswerTwo"),setTimeout(function(){$("#erste-popup-wrapper").fadeIn(700)},2e3)));var e=localStorage.getItem("userPopupAnswer");null!=e&&""!=e&&(t=(new Date).toLocaleDateString(),3<=(new Date(t)-new Date(e).getTime())/864e5&&(localStorage.removeItem("userPopupAnswer"),setTimeout(function(){$("#erste-popup-wrapper").fadeIn(700)},2e3)))}$(".zavrti").on("click",function(t){t.preventDefault(),$(this).css("pointer-events","none");t=$homeTimer.text();$homeTimer.text(t),$(".wheel").each(function(){novi_index_pitanja=Math.floor(8*Math.random()),position+=2520+45*novi_index_pitanja-90*novi_index_pitanja;var t=novi_index_pitanja;index_pitanja=novi_index_pitanja,$(this).css({transform:"rotate("+position+"deg)",transition:"4s ease-out"}),console.log(testing);var e=testing[t],r=e.questions.sort(function(){return.5-Math.random()})[0];testing[t].questions.splice(0,1);var o=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],s="";r.answers.forEach(function(t,e){var n=r.correct==e?1:0,i=n?r.correct_key:0;s+='<div class="custom-control custom-radio mx-2"><input type="radio" class="custom-control-input" id="'+r.question_id+"-answer-"+e+'" name="'+r.question_id+'" value="'+i+'"><label onClick="clickOnAnswer(this)" data-correct="'+n+'" class="answer custom-control-label btn btn-primary btn-lg" for="'+r.question_id+"-answer-"+e+'"><span class="alpha-index">'+o[e]+"</span>"+t+"</label></div>"});$("#home-quiz").append('<fieldset class="form-group"><legend class="col-form-label question">'+r.question+'</legend><div class="answers row align-items-start justify-content-center">'+s+"</div></fieldset>"),setTimeout(function(){$(".wheel-parent-inner h2").text(e.name)},3500),setTimeout(function(){$(".wheel-parent h3, .wheel-parent .wheel-parent-inner .wheel-pozadina, .wheel-parent .wheel, .wheel-parent h2, .wheel-parent .wheel-parent-inner .small-wheel, .wheel-parent .wheel-parent-inner .shadow-image, .wheel-parent .zavrti-parent, .wheel-parent .home-page-quiz, .home-page-quiz").css({opacity:0,transition:"1000ms"}),$(".home-timer-wrapper").css("visibility","hidden"),$(".home-page-quiz").css({opacity:1,"z-index":9999}),$("#home-quiz .answer").each(function(){$(this).css("pointer-events","none")}),setTimeout(function(){$("#home-quiz .answer").each(function(){$(this).css("pointer-events","all")})},1e3),homeQuizTimer(),$(window).width()<992?$(".wheel-parent").css("height",$(".home-page-quiz-container-fluid").outerHeight()+"px"):$(".wheel-parent").css("height",$(".home-page-quiz-container-fluid").outerHeight()+50+"px")},5e3)}),position=position+90*novi_index_pitanja-45*novi_index_pitanja}),showPopupDetails(),$("#erste-popup-button-not-now").on("click",function(){$("#erste-popup-wrapper").fadeOut(700);var t=(new Date).toLocaleDateString();localStorage.setItem("userPopupAnswer",t)}),$("#erste-popup-button-now").on("click",function(){localStorage.setItem("btnClicked","yes"),window.location.href=window.location.origin+"/ocenite-platformu-ersteznali"});var popupCurrentState=localStorage.getItem("popupCurrState"),checkTimer=localStorage.getItem("popupTimerData");function savingsCalculatorJelena(){var t=document.querySelector(".first-jelena"),e=document.querySelector(".current"),n=document.querySelector(".second-jelena"),i=document.querySelector(".available"),r=document.querySelector(".third-jelena"),o=document.querySelector(".percent-jelena"),s=document.querySelector(".fourth-jelena"),a=document.querySelector(".next-month");t&&t.addEventListener("input",function(){e.innerText=this.value,n.value=5e4-parseInt(this.value),s.value=parseInt(n.value)+parseInt(r.value*t.value/100),i.innerText=n.value,a.innerText=s.value,o.innerText=r.value}),r&&r.addEventListener("input",function(){o.innerText=this.value,s.value=parseInt(n.value)+parseInt(r.value*t.value/100),a.innerText=s.value})}function questionnaire(){document.querySelectorAll(".question input").forEach(function(t){t.addEventListener("click",function(){this.closest(".question").classList.add("done"),this.closest(".question").querySelectorAll("label:not(.more-label)").forEach(function(t){t.classList.remove("active")}),document.querySelector('label[for="'+this.id+'"]').classList.add("active")})}),document.querySelectorAll(".first-question input").forEach(function(t){t.addEventListener("click",function(){var t=this.getAttribute("data-info");document.querySelectorAll(".first-next").forEach(function(t){t.classList.add("vanish")}),document.querySelector("."+t).classList.remove("vanish")})}),document.querySelectorAll(".first-next input").forEach(function(t){t.addEventListener("click",function(){document.querySelector(".after-select").classList.remove("vanish")})});var r="Još uvek ne znam",n=[],o=[];document.querySelectorAll(".after-select input").forEach(function(t,e){t.addEventListener("click",function(){var i,t=this.closest(".question").getAttribute("data-next");"blizini"==t&&document.querySelectorAll(".blizini").forEach(function(t){t.classList.remove("vanish")}),document.querySelector("."+t)?document.querySelector("."+t).classList.remove("vanish"):($(".questionnaire-modal").modal("show"),document.querySelectorAll(".done:not(.multi-answer)").forEach(function(t,e){var n=document.createElement("p");n.className="result",t.querySelectorAll(".question-inner").forEach(function(t){n.textContent=t.textContent});var i=document.createElement("span");t.querySelectorAll("label.active").forEach(function(t){i.textContent=" "+t.textContent}),n.appendChild(i),(n.textContent.includes(r)?document.querySelector(".questionnaire-modal .second"):document.querySelector(".questionnaire-modal .first")).appendChild(n)}),i=[],document.querySelectorAll(".multi-answer").forEach(function(t){var e=document.createElement("p");e.className="result",t.querySelectorAll(".question-inner").forEach(function(t){e.textContent=t.textContent});var n=document.createElement("span");t.querySelectorAll("label.active").forEach(function(t){i.push(t.textContent),n.textContent=" "+i.join(", ")}),e.appendChild(n),document.querySelector(".questionnaire-modal .first").appendChild(e)}),document.querySelectorAll(".questionnaire-modal .result").forEach(function(t){(t.textContent.includes(r)?n:o).push(t)}),document.querySelector(".questionnaire-modal .message").textContent="Izjasnili ste se na "+o.length+" pitanja. Pogledajte i ostala pitanja, pomoći će vam da ne preskočite nešto što vam je možda važno.")})})}timeSpentOnSite=null!==checkTimer&&""!==checkTimer?checkTimer:0,window.onload=function(){popupTimer=setInterval(function(){120<=++timeSpentOnSite&&null===popupCurrentState&&($("#erste-popup-wrapper").fadeIn(700),popupCurrentState=localStorage.setItem("popupCurrState","on"),popupTimer=clearInterval(popupTimer)),null!==popupCurrentState?popupTimer=clearInterval(popupTimer):localStorage.setItem("popupTimerData",timeSpentOnSite)},1e3)},window.onunload=function(){popupTimer=clearInterval(popupTimer)},$(".zavrti-btn").on("click",function(t){t.preventDefault(),$(this).css("pointer-events","none");t=$homeTimer.text();$homeTimer.text(t),$(".child-wheel").each(function(){novi_index_pitanja=Math.floor(6*Math.random()),position+=2520+45*novi_index_pitanja-90*novi_index_pitanja;var t=novi_index_pitanja;index_pitanja=novi_index_pitanja,$(this).css({transform:"rotate("+position+"deg)",transition:"4s ease-out"}),console.log(testing);var e=testing[t],r=e.questions.sort(function(){return.5-Math.random()})[0];testing[t].questions.splice(0,1);var o=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],s="";r.answers.forEach(function(t,e){var n=r.correct==e?1:0,i=n?r.correct_key:0;s+='<div class="custom-control custom-radio mx-2"><input type="radio" class="custom-control-input" id="'+r.question_id+"-answer-"+e+'" name="'+r.question_id+'" value="'+i+'"><label onClick="clickOnAnswer(this)" data-correct="'+n+'" class="answer custom-control-label btn btn-primary btn-lg" for="'+r.question_id+"-answer-"+e+'"><span class="alpha-index">'+o[e]+"</span>"+t+"</label></div>"});$("#home-quiz").append('<fieldset class="form-group"><legend class="col-form-label question">'+r.question+'</legend><div class="answers row align-items-start justify-content-center">'+s+"</div></fieldset>"),setTimeout(function(){$(".wheel-parent-inner h2").text(e.name)},3500),setTimeout(function(){$(".wheel-parent h3, .wheel-parent .wheel-parent-inner .wheel-pozadina, .wheel-parent .wheel, .child-wheel, .wheel-parent h2, .wheel-parent .wheel-parent-inner .small-wheel, .wheel-parent .wheel-parent-inner .shadow-image, .wheel-parent .zavrti-parent, .wheel-parent .home-page-quiz, .home-page-quiz").css({opacity:0,transition:"1000ms"}),$(".home-timer-wrapper").css("visibility","hidden"),$(".home-page-quiz").css({opacity:1,"z-index":9999}),$("#home-quiz .answer").each(function(){$(this).css("pointer-events","none")}),setTimeout(function(){$("#home-quiz .answer").each(function(){$(this).css("pointer-events","all")})},1e3),homeQuizTimer(),$(window).width()<992?$(".wheel-parent").css("height",$(".home-page-quiz-container-fluid").outerHeight()+"px"):$(".wheel-parent").css("height",$(".home-page-quiz-container-fluid").outerHeight()+50+"px")},5e3)}),position=position+90*novi_index_pitanja-45*novi_index_pitanja}),$(function(){null!=document.getElementById("editor")&&($editor=$("#editor").summernote({dialogsInBody:!0}),$contentInput=document.querySelector('[name$="[content]"]'),$contentInput.value=$editor.summernote("code"),$editor.on("summernote.change",function(){$contentInput.value=$editor.summernote("code"),setTimeout(quillVideoAspectRatio(),1e3)}),$editor.on("summernote.paste",function(t,e){var n=((e.originalEvent||e).clipboardData||window.clipboardData).getData("Text");(n=$("<div>"+n+"</div>")).find("*").removeAttr("style");return n=(n=(n=(n=n.html()).replace(/<font.*>/g,"")).replace(/<\/font>/g,"")).replace(/(https?:\/\/[^\s]+)/g,function(t){return'<a href="'+t+'" target="_blank">'+t+"</a>"}),e.preventDefault(),document.execCommand("insertText",!1,n),!1})),$.validator.addMethod("validEmail",function(t,e){return this.optional(e)||/^[a-z0-9_\-.]+@[a-z0-9_\-.]+\.[a-z]{2,4}$/.test(t)},"Email nije validan."),$(".validate-form").validate({onkeyup:!1,onfocusout:!1,errorPlacement:function(t,e){$elementParent=e.parent(),$elementParent.hasClass("form-group")?(e.addClass("is-invalid"),e.siblings(".invalid-feedback").text(t[0].innerText)):$elementParent.hasClass("custom-control")&&$elementParent.closest(".form-group").find("input").each(function(){$this=$(this),$this.addClass("is-invalid"),$this.siblings(".invalid-feedback").text(t[0].innerText)})}}),$('input[type="email"]').rules("add",{email:!1,validEmail:!0}),$.extend($.validator.messages,{required:"Ovo polje je obavezno."}),$('[data-toggle="tooltip"]').tooltip(),$(".confirm-submit").submit(function(t){if($this=$(this),$this.valid()){if("undefined"==typeof $changedConfirmed)return t.preventDefault(),$confirmationMessage=$this.attr("data-confirmation-message"),$("#confirm-submit-modal-message").text($confirmationMessage),$("#confirm-submit-modal").modal("show"),void($confirmationForm=$this);$changedConfirmed=void 0}}),$("#confirm-submit").click(function(){$changedConfirmed=!0,$confirmationMessage=void 0,$confirmationForm.submit(),$("#confirm-submit-modal").modal("hide")}),$("#dismiss-submit").click(function(){$confirmationForm=void 0,$confirmationMessage=void 0}),$('[data-disabled="1"]').click(function(t){$this=$(this),t.preventDefault(),$error="Ovo polje nije dostupno.",$formGroup=$this.closest(".form-group"),void 0!==$this.attr("data-disabled-error")&&($error=$this.attr("data-disabled-error")),$formGroup.find(".custom-control-input, .form-control").each(function(){$this=$(this),$this.hasClass("is-invalid")||$this.addClass("is-invalid").addClass("is-invalid")}),$formGroup.find(".invalid-feedback").text($error)}),$(".title-to-slug").on("input change",function(){$this=$(this),$title=$(this).val(),$newTitle=$title,$newSlug="","undefined"==typeof $slug&&($slug=!0),"undefined"==typeof $slugEditable&&($slugEditable=!0),$newTitle=$newTitle.replace(/\s+/g," "),$this.val($newTitle),$newSlug=sanitizeSlug($newTitle),$slugEditable&&$(".slug-from-title").val($newSlug),$newSlug==$slug&&($slugEditable=!0)}),$(".slug-from-title").on("input change",function(){$this=$(this),$sanatizedSlug=sanitizeSlug($this.val()),$this.val($sanatizedSlug)}),$(".title-to-slug, .slug-from-title").on("input change",function(){$slug=$(".slug-from-title").val(),$path=$("#slug-help").attr("data-path").replace("%25slug%25",$slug),$url=window.location.protocol+"//"+window.location.host+$path,$slugEditable=$slug==$newSlug,""!=$slug?$("#slug-help").text($url):$("#slug-help").text("")}),$("#add-new-answer").click(function(){$this=$(this),$index=$('[name^="answer"]').length/2,$('<div class="form-group row align-items-center"><div class="col-11"><input type="text" name="answer['+$index+'][\'answer\']" class="form-control" /><textarea rows="4" name="answer['+$index+'][\'description\']" class="mt-2 form-control"></textarea></div><div class="col-1"><div class="custom-control custom-radio"><input type="radio" name="corect-answer" id="corect-answer-'+$index+'" class="custom-control-input" value="1" /><label class="custom-control-label" for="corect-answer-'+$index+'">&nbsp;</label></div></div></div>').insertBefore($this.parent()),groupAnswers()}),"undefined"!=typeof quill&&quill.on("text-change",function(){quillVideoAspectRatio()}),$(document).ready(function(){$("#close-connection-modal, .close-card-modal").click(function(){$(".connections-modal").css("display","none"),$(".map-area-modal").css("display","none"),$(".map-area-modal p").text("")}),$(".same-set").matchHeight(),$(".chapter-form #form_send").click(function(){console.log($(this))});for(var t=0;t<document.querySelectorAll(".chapter-content a").length;t++)document.querySelectorAll(".chapter-content a")[t].setAttribute("target","_blank");quillVideoAspectRatio(),removeInvalid(),groupAnswers(),$(".njuz-content").each(function(){3<=$(this).find("li").length&&($(".njuz-content li:nth-of-type(2) ~ li").css("display","none"),$(".njuz-content p").css("display","block"))}),$(".njuz-more").each(function(){$(this).click(function(){var t=$(this).closest($(".njuz-content"));"none"==$(t).find("li:nth-of-type(2) ~ li").css("display")?$(t).find("li:nth-of-type(2) ~ li").slideDown():$(t).find("li:nth-of-type(2) ~ li").slideUp()})});var e=$(".pag").children();1<e.length&&e.parent().css("display","flex");$("#video").on("mousemove",function(){$(this).find(".video-caption").css("opacity",1)}),$("#video").mouseenter(function(){$(this).find(".video-caption").css("opacity",1)}).mouseleave(function(){$(this).find(".video-caption").css("opacity",0)}),$(".accordion-item-heading").find("button").click(function(){$(this).closest(".card").find(".collapse").hasClass("show")?$(this).removeClass("opene"):$(this).addClass("opene")}),$(".carousel p").filter(function(){return""==$.trim(this.innerHTML)}).remove(),$(".carousel").find("br").remove();var n=!1;function i(t,e){var n=document.getElementById("voteChart").getContext("2d");new Chart(n,{type:"bar",data:{labels:["Skromno","Bahato"],datasets:[{label:"Rezultati glasanja",backgroundColor:["rgb(18, 121, 178)","rgb(255, 102, 0)"],borderColor:["rgb(18, 121, 178)","rgb(255, 102, 0)"],data:[e,t]}]},options:{legend:{display:!1},scales:{yAxes:[{ticks:{precision:0,beginAtZero:!0}}]}}})}$(".chapter-content .custom-control-label").click(function(t){var e=$(this).attr("data-info");"rich"!==e&&"poor"!==e&&"1"!==e&&"2"!==e&&"3"!==e&&"4"!==e&&"5"!==e&&($(this).closest($("form")).next($(".content-question-box")).text(""),$(this).closest($("form")).next($(".content-question-box")).text(e),$(this).closest($("form")).next($(".content-question-box")).slideToggle()),!1===n&&null==localStorage.getItem("userVoteData")&&("poor"!=(e=$(this).attr("data-info"))&&"rich"!=e||(n=!0,localStorage.setItem("userVoteData",e),$.ajax({type:"POST",url:"/vote/details",data:{voted:localStorage.getItem("userVoteData")},success:function(t){t&&$.ajax({type:"POST",url:"/show/votes",success:function(t){var e,n;t&&(t=JSON.parse(t),e=t.poor,n=t.rich,setTimeout(function(){i(n,e)},500))}})},error:function(t){console.log(t)}})))}),$(".chapter-content .custom-user-data").on("click",function(){var t,e,n=$(this).attr("data-info"),i=$(this).attr("data-question-id"),r=null==(r=localStorage.getItem("qualityCheckData"))?[]:JSON.parse(r);"1"!=n&&"2"!=n&&"3"!=n&&"4"!=n&&"5"!=n||(t=r.includes(i),localStorage.removeItem("btnClicked"),e=(new Date).toLocaleDateString(),localStorage.setItem("userPopupAnswerTwo",e),!1===t?(r.push(i),localStorage.setItem("qualityCheckData",JSON.stringify(r)),n=parseInt(n),$.ajax({type:"POST",url:"/quality/check",data:{questionInfo:i,answerInfo:n},success:function(t){t&&($("#question-"+i).css({display:"block"}),$("#question-"+i).html("<p style='color:green'>Hvala Vam na odgovoru.</p>"),setTimeout(function(){$("#question-"+i).fadeOut()},3e3))},error:function(t){}})):($("#question-"+i).css({display:"block"}),$("#question-"+i).html("<p style='color:red'>Već ste odgovorili na ovo pitanje.</p>"),setTimeout(function(){$("#question-"+i).fadeOut()},3e3)))}),"rich"!=localStorage.getItem("userVoteData")&&"poor"!=localStorage.getItem("userVoteData")||$.ajax({type:"POST",url:"/show/votes",success:function(t){var e,n;t&&(t=JSON.parse(t),e=t.poor,n=t.rich,setTimeout(function(){i(n,e)},500))}}),$(".recommended-theme-btn").on("click",function(){var e=$(this).attr("data-question-btn-id"),t=$("#recommendedTheme-"+e).val();""==t?($("#recommendedTheme-"+e).addClass("recommended-theme-error"),$("#user-recommended-theme-message-box-"+e).css({display:"block"}),$("#user-recommended-theme-message-box-"+e).html("<p style='color:red'>Polje je obavezno.</p>")):($("#recommendedTheme-"+e).hasClass("recommended-theme-error")&&$("#recommendedTheme-"+e).removeClass("recommended-theme-error"),$("#user-recommended-theme-message-box-"+e).html(""),$.ajax({type:"POST",url:"/recommended/theme",data:{questionIdFragment:e,recThemeContent:t},success:function(t){t&&($("#user-recommended-theme-message-box-"+e).css({display:"block"}),$("#user-recommended-theme-message-box-"+e).html("<p style='color:green'>Vaša poruka je uspešno poslata.</p>"),$("#recommendedTheme-"+e).val(""),setTimeout(function(){$("#user-recommended-theme-message-box-"+e).fadeOut()},3e3))},error:function(t){}}))}),$("#red-to-help-link").on("click",function(t){t.preventDefault(),window.location.href=document.location.origin+"/pomoc"}),$("#quality-check-go-back-btn").on("click",function(t){t.preventDefault(),window.history.back()});var r=document.querySelector(".connections-left");if(r)for(var o=r.children.length;0<=o;o--)r.appendChild(r.children[Math.random()*o|0]);var s=document.querySelector(".connections-right");if(s)for(var a=s.children.length;0<=a;a--)s.appendChild(s.children[Math.random()*a|0]);var l={"Putni čekovi":"18. i 19. vek","Specijalne kovanice i papirne kartice":"kraj 19. veka","Metalne pločice":"1930 - 1940","Bankarska kartica":"1946.","Odloženo plaćanje karticom na različitim mestima":"1950.","Plastične kartice":"1959.","Magnetna traka":"1970.","Debitna kartica":"1975.","Začeci beskontaktnog plaćanja":"1995-1997.","Prve kartice sa čipom":"2002.","Beskontaktno plaćanje bankarskim karticama":"2007."},u=document.querySelectorAll(".first-set"),e=document.querySelectorAll(".second-set"),c=!1,h=!1;u.forEach(function(t){t.addEventListener("click",function(){console.log("Pitanje kliknuto"),c=this,h=!1,u.forEach(function(t){t.classList.remove("active")}),this.classList.add("active"),document.querySelector(".connections-modal").style.display="none"})}),e.forEach(function(t){t.addEventListener("click",function(){var t;h=this,c&&(l[c.innerHTML]==h.innerHTML?(console.log("Tacan odgovor!"),(t=document.querySelector("div.active")).style.backgroundColor="#1279b2",t.style.color="#fff",t.style.pointerEvents="none",t.classList.remove("active"),this.style.backgroundColor="#1279b2",this.style.pointerEvents="none",document.querySelector(".connections-modal button").style.display="block",document.querySelector(".connections-modal").style.display="block",document.querySelector(".connections-modal p").textContent=this.getAttribute("data-title")):(console.log("Pogresan odgovor"),c.classList.remove("active"),document.querySelector(".connections-modal").style.display="block",document.querySelector(".connections-modal p").textContent="Vaš odgovor je netačan. Pokušajte ponovo.",document.querySelector(".connections-modal button").style.display="none",setTimeout(function(){document.querySelector(".connections-modal").style.display="none"},1500))),c=!1})}),document.querySelectorAll("area").forEach(function(t){t.addEventListener("click",function(){document.querySelector(".map-area-modal").style.display="block",document.querySelector(".map-area-modal p").textContent=this.getAttribute("title")})}),savingsCalculatorJelena(),$(".first-question")&&questionnaire()}),$(".profile-form").find(".remove-readonly").click(function(){$(this).parent().find(".form-control-plaintext").removeAttr("readonly disabled"),$(this).remove()}),$(document).bind("DOMSubtreeModified",function(){removeInvalid()});var t=null;$(document).on("mousemove",function(){clearTimeout(t),t=setTimeout(function(){$("#video").find(".video-caption").css("opacity",0)},3e3)}),$(window).resize(function(){quillVideoAspectRatio(),$(".zelim .box").matchHeight(),$(".same-set").matchHeight()})});var slider=$(".slider"),perDay=$(".per-day"),perYear=$(".per-year");perDay.text(slider.val()),slider.on("input",function(){perDay.text($(this).val()),perYear.text(365*$(this).val());var t=perYear.text().toString().split(",");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),perYear.text(t[0])}),$(window).on("load",function(){$(".half").matchHeight(),$(".zelim .box").matchHeight(),$(".same-set").matchHeight(),perYear.text(365*Number(perDay.text()));var t=perYear.text().toString().split(",");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),perYear.text(t[0]),$(".zelim .box").matchHeight(),$(".same-set").matchHeight()}),$(window).on("scroll resize load",function(){$(".video").css("height",$(".video-js").height()),600<$(this).scrollTop()?$(".mobile-back-to-top").removeClass("d-none"):$(".mobile-back-to-top").addClass("d-none")}),$(".navbar-toggler").click(function(){$("#navbarNav").hasClass("show")?$("body").css("overflow-y","auto"):$("body").css("overflow-y","hidden")});var buttons_shortcodes=$(".btn-default");function quiz(){var e,n,i,r,o,s,a,l,t;function u(t){o.setItem("currentQuestionNumber",t),$(".quiz-question").hide(),i.find("[data-position="+t+"]").show(),console.log("[data-position="+t+"]"),a=30,$("#current-question").text(t),r.text(a),l=setInterval(function(){a--,r.text(a),0===a&&(clearInterval(l),s++,$(".quiz-question").hide(),e<s?c():$(".time-is-up").removeClass("d-none"))},1e3)}function c(){r.addClass("d-none"),i.append('<input type="hidden" name="data" value="'+JSON.stringify(n).replace(/\"/g,"&#34;")+'" />'),i.submit()}0!==$("#quiz").length&&(console.log("QUIZ"),e=$(".quiz-question").length,n=[],i=$("#quiz"),r=$("#timer"),o=window.localStorage,prev?(s=o.getItem("currentQuestionNumber"),console.log(s),console.log(o.getItem("userQuiz")),n=1<s?JSON.parse(o.getItem("userQuiz")):[],t=$(".quiz-question[data-position="+s+"]"),n.push({question:t.find("input").attr("name"),answer:"#$%",time:0}),console.log(n),o.setItem("userQuiz",JSON.stringify(n)),s++):s=1,e<s?c():u(s),$(".answer").click(function(){var t=$(this);t.closest(".form-group");"disabled"!=t.closest(".form-group").find('input[type="radio"]').attr("disabled")&&(t.closest(".form-group").find('input[type="radio"]').attr("disabled",!0),$name=t.prev().attr("name"),$value=t.prev().attr("value"),$userAnswer={question:$name,answer:$value,time:a},n.push($userAnswer),o.setItem("userQuiz",JSON.stringify(n)),clearInterval(l),setTimeout(function(){s==e?c():u(++s)},2e3),1==t.attr("data-correct")?t.css({"background-color":"green",border:"1px solid green"}):t.css({"background-color":"red",border:"1px solid red"}))}),$("#go-next-question").click(function(){$(this).closest(".time-is-up").addClass("d-none"),u(s)}))}buttons_shortcodes.click(function(){"1"===this.value?this.classList.add("btn-true"):this.classList.add("btn-false")}),$(document).ready(function(){var t=$(".owl-carousel-home").find(".box").length<=3?($(".owl-carousel-home .owl-nav").removeClass("disabled"),!1):($(".owl-carousel-home .owl-nav").addClass("disabled"),!0);$(".owl-carousel-home").owlCarousel({loop:t,margin:15,autoplay:!0,autoplayTimeout:5e3,autoplaySpeed:1500,mouseDrag:!1,responsive:{0:{items:1},992:{items:3}}}),$(".hocu .box").matchHeight();var e,n=[];$(".chapter-content .carousel").each(function(){$(this).find(".carousel-item").each(function(t){t+=1;$(this).prepend('<div class="carousel-number">'+t+"</div>"),e=$(this).height(),n.push(e),e=Math.max.apply(Math,n),$(this).css("height",e+"px")})})}),document.addEventListener("DOMContentLoaded",function(){var t=[{id:"first",next:"second",question:"Kada do kraja meseca ne potrošiš celu platu, od viška novca ćeš:",answers:[{text:"Uložiti u budućnost kupovinom mađioničarske opreme sa Aliekspresa",model:"a"},{text:"Investirati u singl iz keca u dvojku na dojavu iz treće norveške lige",model:"b"},{text:"Od viška čega?",model:"c"}]},{id:"second",next:"third",question:"Štednja je:",answers:[{text:"Obaveza svake odgovorne osobe koja nema bogate roditelje",model:"a"},{text:"Ulaganje u sigurniju budućnost svoje banke",model:"b"},{text:"Imenica ženskog roda",model:"c"}]},{id:"third",next:"fourth",question:"Kad dobiješ platu prvo:",answers:[{text:"Odeš u kafanu da proslaviš",model:"a"},{text:"Odeš u kafanu da platiš ceh od prošlog meseca",model:"b"},{text:"Već si u kafani jer radiš kao konobar",model:"c"}]},{id:"fourth",next:"fifth",question:"Štednju je najbolje početi:",answers:[{text:"Odmah po izlasku iz porodilišta, čim ti baba i deda stave neke pare u krevetac",model:"a"},{text:"U sledeći ponedeljak",model:"b"},{text:"Od prve penzije",model:"c"}]},{id:"fifth",next:"sixth",question:"Kad čuješ reč “štednja”, šta je prvo što pomisliš:",answers:[{text:"To je ono što imam prvih par dana u mesecu dok ne potrošim platu",model:"a"},{text:"Opet neka novotarija sa Zapada",model:"b"},{text:"Sjajna reč ako budem učestvovao u Slagalici i treba da složim reč od t, nj, š, e, a, d",model:"c"}]},{id:"sixth",next:"seventh",question:"Šta je kamata?",answers:[{text:"Ono nešto što ti banka da ako budeš dobar",model:"a"},{text:"Japanski mač",model:"b"},{text:"Žena od bratovog pašenoga",model:"c"}]},{id:"seventh",next:"news-message",question:"Letovanje organizuješ tako što:",answers:[{text:"Kupiš first minute za onu tamo godinu posle sledeće",model:"a"},{text:"Poraniš da bi zauzeo dobro mesto na Adi",model:"b"},{text:"Kupiš novi, veći lavor",model:"c"}]}];document.querySelector(".news-quiz-start")&&document.querySelector(".news-quiz-start").addEventListener("click",function(){document.querySelector(".news-quiz-intro").classList.add("d-none"),t.forEach(function(t){var n=document.createElement("div");n.className="question d-none",n.id=t.id,n.setAttribute("data-next",t.next);var e=document.createElement("h2");e.textContent=t.question,n.appendChild(e),t.answers.forEach(function(t){var e=document.createElement("div");e.className="news-answer",e.textContent=t.text,e.setAttribute("data-answer",t.model),n.appendChild(e)}),document.querySelector(".news-quiz-parent").appendChild(n)}),document.querySelectorAll(".news-quiz-parent .question")[0].classList.remove("d-none");var e=[],n=[],i=[];document.querySelectorAll(".news-quiz-parent .news-answer").forEach(function(t){t.addEventListener("click",function(){this.classList.add("selected-answer"),this.parentElement.classList.add("d-none");var t=this.getAttribute("data-answer");"a"===t&&e.push(t),"b"===t&&n.push(t),"c"===t&&i.push(t);t=this.parentElement.getAttribute("data-next");t&&document.querySelector("#"+t).classList.remove("d-none");t=document.querySelector("#news-message p");t.classList.contains("d-none")||(e.length>n.length&&e.length>i.length?t.innerHTML='<h2>Pravi štediša</h2>Čestitamo, ti si pravi štediša u narodu poznatiji kao stipsa. Vidi se da se odgovorno ophodiš prema svojim finansijama i da misliš na budućnost. Štednja za tebe nije upravljanje viškom novca, štednja je za tebe način života. Ti novac ne štediš zato što moraš već zato što voliš. Ako želiš da vidiš da li postoji nešto što ne znaš, klikni <a href="https://ersteznali.rs/tema/stednja">ovde</a>. Nego, da nemaš možda 100 evra do prvog?':n.length>e.length&&n.length>i.length?t.innerHTML='<h2>Umereni štediša</h2>Ti si umereni štediša, ona najgora sorta, takozvani poluštediša. Nekad častiš, a nekad glumiš da ne možeš da nađeš novčanik. Jedne godine ideš na more, a sledeće nemaš ni za vikend na Obedskoj bari. Odluči se više čoveče, jesi li Baja Patak ili Đani Ćurčić?! Pardon, Đani Ćurčić nije stvaran lik. Ako baš želiš da proveriš na koju stranu naginješ, klikni <a href="https://ersteznali.rs/tema/stednja">ovde</a>.':i.length>e.length&&i.length>n.length&&(t.innerHTML='<h2>Nemaš pojma da štediš</h2>Ti baš nemaš pojma da štediš, bukvalno ne znamo kako si uopšte opstao do sada! Toliko neplanski trošiš svoj novac, da je prava sreća ako ne ostaneš bez para do 15-og u mesecu. Sada ti je sigurno jasno zašto da ti se krajem meseca niko od prijatelja ne javlja na telefon ili se jave ali kažu da su u tunelu. Gledaj stvari sa svetlije strane, barem imaš prijatelje do 20-og. Dobro, do 15-og. Okej, do desetog u mesecu. A sada izvini, ulazimo u tunel. Dok nismo dostupni, klikni <a href="https://ersteznali.rs/tema/stednja">ovde</a> i pročitaj nešto korisno. Veruj nam, potrebno ti je.'))})})})});var facebookShare=document.querySelector("#share-res");facebookShare&&(facebookShare.onclick=function(t){t.preventDefault();t=window.open("https://www.facebook.com/sharer/sharer.php?u="+document.URL,"facebook-popup","height=350,width=600");return t.focus&&t.focus(),!1});